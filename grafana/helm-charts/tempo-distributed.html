<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/changelogs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/changelogs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(16)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(16) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(16) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(16) > ul.nav-list { display: block; } </style> <script src="/changelogs/assets/js/vendor/lunr.min.js"></script> <script src="/changelogs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>tempo-distributed | Changelogs</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="tempo-distributed" /> <meta name="author" content="Baptiste ROUX" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="https://baprx.github.io/changelogs/grafana/helm-charts/tempo-distributed" /> <meta property="og:url" content="https://baprx.github.io/changelogs/grafana/helm-charts/tempo-distributed" /> <meta property="og:site_name" content="Changelogs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="tempo-distributed" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Baptiste ROUX"},"headline":"tempo-distributed","url":"https://baprx.github.io/changelogs/grafana/helm-charts/tempo-distributed"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewbox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewbox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewbox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewbox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/changelogs/" class="site-title lh-tight"> Changelogs </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewbox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list">
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in argoproj/argo-helm category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/argoproj/argo-helm" class="nav-list-link">argoproj/argo-helm</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-cd" class="nav-list-link">argo-cd</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-events" class="nav-list-link">argo-events</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-rollouts" class="nav-list-link">argo-rollouts</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-workflows" class="nav-list-link">argo-workflows</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argocd-apps" class="nav-list-link">argocd-apps</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argocd-image-updater" class="nav-list-link">argocd-image-updater</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in authelia/chartrepo category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/authelia/chartrepo" class="nav-list-link">authelia/chartrepo</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/authelia/chartrepo/authelia" class="nav-list-link">authelia</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in bitnami/charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/bitnami/charts" class="nav-list-link">bitnami/charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/CHART_NAME" class="nav-list-link">CHART_NAME</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/airflow" class="nav-list-link">airflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/apache" class="nav-list-link">apache</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/apisix" class="nav-list-link">apisix</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/appsmith" class="nav-list-link">appsmith</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/argo-cd" class="nav-list-link">argo-cd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/argo-workflows" class="nav-list-link">argo-workflows</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/aspnet-core" class="nav-list-link">aspnet-core</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/cassandra" class="nav-list-link">cassandra</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/cert-manager" class="nav-list-link">cert-manager</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/clickhouse" class="nav-list-link">clickhouse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/common" class="nav-list-link">common</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/concourse" class="nav-list-link">concourse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/consul" class="nav-list-link">consul</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/contour" class="nav-list-link">contour</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/deepspeed" class="nav-list-link">deepspeed</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/discourse" class="nav-list-link">discourse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/dokuwiki" class="nav-list-link">dokuwiki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/drupal" class="nav-list-link">drupal</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/ejbca" class="nav-list-link">ejbca</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/elasticsearch" class="nav-list-link">elasticsearch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/etcd" class="nav-list-link">etcd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/external-dns" class="nav-list-link">external-dns</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/flink" class="nav-list-link">flink</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/fluent-bit" class="nav-list-link">fluent-bit</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/fluentd" class="nav-list-link">fluentd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/flux" class="nav-list-link">flux</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/ghost" class="nav-list-link">ghost</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/gitea" class="nav-list-link">gitea</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana" class="nav-list-link">grafana</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-loki" class="nav-list-link">grafana-loki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-mimir" class="nav-list-link">grafana-mimir</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-operator" class="nav-list-link">grafana-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-tempo" class="nav-list-link">grafana-tempo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/haproxy" class="nav-list-link">haproxy</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/harbor" class="nav-list-link">harbor</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/influxdb" class="nav-list-link">influxdb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jaeger" class="nav-list-link">jaeger</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jasperreports" class="nav-list-link">jasperreports</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jenkins" class="nav-list-link">jenkins</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/joomla" class="nav-list-link">joomla</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jupyterhub" class="nav-list-link">jupyterhub</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kafka" class="nav-list-link">kafka</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/keycloak" class="nav-list-link">keycloak</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kiam" class="nav-list-link">kiam</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kibana" class="nav-list-link">kibana</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kong" class="nav-list-link">kong</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kube-prometheus" class="nav-list-link">kube-prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kube-state-metrics" class="nav-list-link">kube-state-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kubeapps" class="nav-list-link">kubeapps</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kuberay" class="nav-list-link">kuberay</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kubernetes-event-exporter" class="nav-list-link">kubernetes-event-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/logstash" class="nav-list-link">logstash</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/magento" class="nav-list-link">magento</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mariadb" class="nav-list-link">mariadb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mariadb-galera" class="nav-list-link">mariadb-galera</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mastodon" class="nav-list-link">mastodon</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/matomo" class="nav-list-link">matomo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mediawiki" class="nav-list-link">mediawiki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/memcached" class="nav-list-link">memcached</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/metallb" class="nav-list-link">metallb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/metrics-server" class="nav-list-link">metrics-server</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/milvus" class="nav-list-link">milvus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/minio" class="nav-list-link">minio</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mlflow" class="nav-list-link">mlflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mongodb" class="nav-list-link">mongodb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mongodb-sharded" class="nav-list-link">mongodb-sharded</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/moodle" class="nav-list-link">moodle</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/multus-cni" class="nav-list-link">multus-cni</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mysql" class="nav-list-link">mysql</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nats" class="nav-list-link">nats</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nginx" class="nav-list-link">nginx</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nginx-ingress-controller" class="nav-list-link">nginx-ingress-controller</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/node-exporter" class="nav-list-link">node-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/oauth2-proxy" class="nav-list-link">oauth2-proxy</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/odoo" class="nav-list-link">odoo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/opencart" class="nav-list-link">opencart</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/opensearch" class="nav-list-link">opensearch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/osclass" class="nav-list-link">osclass</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/parse" class="nav-list-link">parse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/phpbb" class="nav-list-link">phpbb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/phpmyadmin" class="nav-list-link">phpmyadmin</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/pinniped" class="nav-list-link">pinniped</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/postgresql" class="nav-list-link">postgresql</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/postgresql-ha" class="nav-list-link">postgresql-ha</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/prestashop" class="nav-list-link">prestashop</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/prometheus" class="nav-list-link">prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/pytorch" class="nav-list-link">pytorch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/rabbitmq" class="nav-list-link">rabbitmq</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/rabbitmq-cluster-operator" class="nav-list-link">rabbitmq-cluster-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redis" class="nav-list-link">redis</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redis-cluster" class="nav-list-link">redis-cluster</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redmine" class="nav-list-link">redmine</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/schema-registry" class="nav-list-link">schema-registry</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/sealed-secrets" class="nav-list-link">sealed-secrets</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/solr" class="nav-list-link">solr</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/sonarqube" class="nav-list-link">sonarqube</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/spark" class="nav-list-link">spark</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/spring-cloud-dataflow" class="nav-list-link">spring-cloud-dataflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/supabase" class="nav-list-link">supabase</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/tensorflow-resnet" class="nav-list-link">tensorflow-resnet</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/thanos" class="nav-list-link">thanos</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/tomcat" class="nav-list-link">tomcat</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/vault" class="nav-list-link">vault</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/whereabouts" class="nav-list-link">whereabouts</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/wildfly" class="nav-list-link">wildfly</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/wordpress" class="nav-list-link">wordpress</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/zookeeper" class="nav-list-link">zookeeper</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in grafana/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/grafana/helm-charts" class="nav-list-link">grafana/helm-charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/agent-operator" class="nav-list-link">agent-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-logs" class="nav-list-link">enterprise-logs</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-logs-simple" class="nav-list-link">enterprise-logs-simple</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-metrics" class="nav-list-link">enterprise-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/fluent-bit" class="nav-list-link">fluent-bit</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/grafana" class="nav-list-link">grafana</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/lgtm-distributed" class="nav-list-link">lgtm-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-canary" class="nav-list-link">loki-canary</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-distributed" class="nav-list-link">loki-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-stack" class="nav-list-link">loki-stack</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/promtail" class="nav-list-link">promtail</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/rollout-operator" class="nav-list-link">rollout-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/snyk-exporter" class="nav-list-link">snyk-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/synthetic-monitoring-agent" class="nav-list-link">synthetic-monitoring-agent</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo" class="nav-list-link">tempo</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo-distributed" class="nav-list-link">tempo-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo-vulture" class="nav-list-link">tempo-vulture</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in kubernetes/ingress-nginx category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/kubernetes/ingress-nginx" class="nav-list-link">kubernetes/ingress-nginx</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/kubernetes/ingress-nginx/ingress-nginx" class="nav-list-link">ingress-nginx</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in minio/operator category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/minio/operator" class="nav-list-link">minio/operator</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/minio/operator/operator" class="nav-list-link">operator</a></li>
<li class="nav-list-item"><a href="/changelogs/minio/operator/tenant" class="nav-list-link">tenant</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in prometheus-community/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/prometheus-community/helm-charts" class="nav-list-link">prometheus-community/helm-charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/alertmanager" class="nav-list-link">alertmanager</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/alertmanager-snmp-notifier" class="nav-list-link">alertmanager-snmp-notifier</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/crds" class="nav-list-link">crds</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/jiralert" class="nav-list-link">jiralert</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/kube-prometheus-stack" class="nav-list-link">kube-prometheus-stack</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/kube-state-metrics" class="nav-list-link">kube-state-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prom-label-proxy" class="nav-list-link">prom-label-proxy</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus" class="nav-list-link">prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-adapter" class="nav-list-link">prometheus-adapter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-blackbox-exporter" class="nav-list-link">prometheus-blackbox-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-cloudwatch-exporter" class="nav-list-link">prometheus-cloudwatch-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-conntrack-stats-exporter" class="nav-list-link">prometheus-conntrack-stats-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-consul-exporter" class="nav-list-link">prometheus-consul-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-couchdb-exporter" class="nav-list-link">prometheus-couchdb-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-druid-exporter" class="nav-list-link">prometheus-druid-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-elasticsearch-exporter" class="nav-list-link">prometheus-elasticsearch-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-fastly-exporter" class="nav-list-link">prometheus-fastly-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-ipmi-exporter" class="nav-list-link">prometheus-ipmi-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-json-exporter" class="nav-list-link">prometheus-json-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-kafka-exporter" class="nav-list-link">prometheus-kafka-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-memcached-exporter" class="nav-list-link">prometheus-memcached-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-modbus-exporter" class="nav-list-link">prometheus-modbus-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-mongodb-exporter" class="nav-list-link">prometheus-mongodb-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-mysql-exporter" class="nav-list-link">prometheus-mysql-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-nats-exporter" class="nav-list-link">prometheus-nats-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-nginx-exporter" class="nav-list-link">prometheus-nginx-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-node-exporter" class="nav-list-link">prometheus-node-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-opencost-exporter" class="nav-list-link">prometheus-opencost-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-operator-admission-webhook" class="nav-list-link">prometheus-operator-admission-webhook</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-operator-crds" class="nav-list-link">prometheus-operator-crds</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pgbouncer-exporter" class="nav-list-link">prometheus-pgbouncer-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pingdom-exporter" class="nav-list-link">prometheus-pingdom-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pingmesh-exporter" class="nav-list-link">prometheus-pingmesh-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-postgres-exporter" class="nav-list-link">prometheus-postgres-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pushgateway" class="nav-list-link">prometheus-pushgateway</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-rabbitmq-exporter" class="nav-list-link">prometheus-rabbitmq-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-redis-exporter" class="nav-list-link">prometheus-redis-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-smartctl-exporter" class="nav-list-link">prometheus-smartctl-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-snmp-exporter" class="nav-list-link">prometheus-snmp-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-stackdriver-exporter" class="nav-list-link">prometheus-stackdriver-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-statsd-exporter" class="nav-list-link">prometheus-statsd-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-systemd-exporter" class="nav-list-link">prometheus-systemd-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-to-sd" class="nav-list-link">prometheus-to-sd</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-windows-exporter" class="nav-list-link">prometheus-windows-exporter</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in traefik/traefik-helm-chart category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/traefik/traefik-helm-chart" class="nav-list-link">traefik/traefik-helm-chart</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/traefik/traefik-helm-chart/traefik" class="nav-list-link">traefik</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in vmware-tanzu/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/vmware-tanzu/helm-charts" class="nav-list-link">vmware-tanzu/helm-charts</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/vmware-tanzu/helm-charts/velero" class="nav-list-link">velero</a></li></ul>
</li>
</ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Changelogs" aria-label="Search Changelogs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/changelogs/grafana/helm-charts">grafana/helm-charts</a></li> <li class="breadcrumb-nav-list-item"><span>tempo-distributed</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="tempo-distributed"> <a href="#tempo-distributed" class="anchor-heading" aria-labelledby="tempo-distributed"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> tempo-distributed </h1> <h2 id="182"> <a href="#182" class="anchor-heading" aria-labelledby="182"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.8.2 </h2> <p><strong>Release date:</strong> 2024-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.1&amp;color=success" alt="AppVersion: 2.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge upstream to sync channges</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Update GET to v2.3.2.</li> <li>Add basic test for parquet dedicated columns</li> </ul> <h3 id="default-value-changes"> <a href="#default-value-changes" class="anchor-heading" aria-labelledby="default-value-changes"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index d24eab1b..a2f16b19 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1851,7 +1851,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.3.1
</span><span class="gi">+    tag: v2.3.2
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="err">
</span></code></pre></div></div> <h2 id="181"> <a href="#181" class="anchor-heading" aria-labelledby="181"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.8.1 </h2> <p><strong>Release date:</strong> 2024-01-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.1&amp;color=success" alt="AppVersion: 2.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix rendering for parquet dedicated columns value</li> </ul> <h3 id="default-value-changes-1"> <a href="#default-value-changes-1" class="anchor-heading" aria-labelledby="default-value-changes-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index faf845ca..d24eab1b 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1253,7 +1253,7 @@</span> config: |
         version: {{.Values.storage.trace.block.version}}
         {{- if .Values.storage.trace.block.dedicated_columns}}
         parquet_dedicated_columns:
<span class="gd">-          {{ .Values.storage.trace.block.dedicated_columns}}
</span><span class="gi">+          {{ .Values.storage.trace.block.dedicated_columns | toYaml | nindent 8}}
</span>         {{- end }}
       {{- end }}
       pool:
<span class="err">
</span></code></pre></div></div> <h2 id="180"> <a href="#180" class="anchor-heading" aria-labelledby="180"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.8.0 </h2> <p><strong>Release date:</strong> 2024-01-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.1&amp;color=success" alt="AppVersion: 2.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> update default memcached image to 1.6.23 for multiple CVEs</li> <li>Change variable name</li> <li>Version bump (readme badge II)</li> <li>Version bump (readme badge)</li> </ul> <h3 id="default-value-changes-2"> <a href="#default-value-changes-2" class="anchor-heading" aria-labelledby="default-value-changes-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 0051689c..faf845ca 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1251,9 +1251,9 @@</span> config: |
       {{- if .Values.storage.trace.block.version }}
       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gd">-        {{- if .Values.storage.trace.block.attribute_columns }}
</span><span class="gi">+        {{- if .Values.storage.trace.block.dedicated_columns}}
</span>         parquet_dedicated_columns:
<span class="gd">-          {{ .Values.storage.trace.block.attribute_columns }}
</span><span class="gi">+          {{ .Values.storage.trace.block.dedicated_columns}}
</span>         {{- end }}
       {{- end }}
       pool:
<span class="p">@@ -1319,7 +1319,7 @@</span> storage:
       # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
       version: null
       # -- Lis with dedicated attribute columns (only for vParquet3 or later)
<span class="gd">-      attribute_columns: []
</span><span class="gi">+      dedicated_columns: []
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
     # The worker pool is used primarily when finding traces by id, but is also used by other.
<span class="p">@@ -1356,7 +1356,7 @@</span> memcached:
     # -- Memcached Docker image repository
     repository: memcached
     # -- Memcached Docker image tag
<span class="gd">-    tag: 1.5.17-alpine
</span><span class="gi">+    tag: 1.6.23-alpine
</span>     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
   host: memcached
<span class="err">
</span></code></pre></div></div> <h2 id="176"> <a href="#176" class="anchor-heading" aria-labelledby="176"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.6 </h2> <p><strong>Release date:</strong> 2024-01-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.1&amp;color=success" alt="AppVersion: 2.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Version bump</li> <li>Update documentation</li> <li>Allow for tempo dedicated attribute columns to be configured</li> </ul> <h3 id="default-value-changes-3"> <a href="#default-value-changes-3" class="anchor-heading" aria-labelledby="default-value-changes-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 0e16fc70..0051689c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1251,6 +1251,10 @@</span> config: |
       {{- if .Values.storage.trace.block.version }}
       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gi">+        {{- if .Values.storage.trace.block.attribute_columns }}
+        parquet_dedicated_columns:
+          {{ .Values.storage.trace.block.attribute_columns }}
+        {{- end }}
</span>       {{- end }}
       pool:
         max_workers: {{ .Values.storage.trace.pool.max_workers }}
<span class="p">@@ -1314,6 +1318,8 @@</span> storage:
     block:
       # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
       version: null
<span class="gi">+      # -- Lis with dedicated attribute columns (only for vParquet3 or later)
+      attribute_columns: []
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
     # The worker pool is used primarily when finding traces by id, but is also used by other.
<span class="err">
</span></code></pre></div></div> <h2 id="175"> <a href="#175" class="anchor-heading" aria-labelledby="175"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.5 </h2> <p><strong>Release date:</strong> 2024-01-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.1&amp;color=success" alt="AppVersion: 2.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li> <li> </ul> <h3 id="default-value-changes-4"> <a href="#default-value-changes-4" class="anchor-heading" aria-labelledby="default-value-changes-4"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2fb71930..0e16fc70 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1050,6 +1050,7 @@</span> config: |
       default:
         url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
       distributor:
<span class="gi">+        url: http://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
</span>         otlp/grpc:
           url: h2c://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:4317
         otlp/http:
<span class="p">@@ -1844,7 +1845,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.3.0
</span><span class="gi">+    tag: v2.3.1
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="err">
</span></code></pre></div></div> <h2 id="174"> <a href="#174" class="anchor-heading" aria-labelledby="174"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.4 </h2> <p><strong>Release date:</strong> 2023-10-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Update distributor proxy routes for GET 2.3.0.</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-5"> <a href="#default-value-changes-5" class="anchor-heading" aria-labelledby="default-value-changes-5"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 5359988d..2fb71930 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1050,15 +1050,21 @@</span> config: |
       default:
         url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
       distributor:
<span class="gd">-        url: http://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
-      distributor_ingest:
-        url: h2c://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:4317
</span><span class="gi">+        otlp/grpc:
+          url: h2c://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:4317
+        otlp/http:
+          url: http://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:4318
</span>       ingester:
         url: http://{{ template "tempo.fullname" . }}-ingester.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
       querier:
         url: http://{{ template "tempo.fullname" . }}-querier.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
       query_frontend:
         url: http://{{ template "tempo.fullname" . }}-query-frontend.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}{{get .Values.tempo.structuredConfig "http_api_prefix"}}
<span class="gi">+  {{else}}
+  {{- if and .Values.enterprise.enabled .Values.enterpriseGateway.proxy }}
+  gateway:
+    proxy: {{- toYaml .Values.enterpriseGateway.proxy | nindent 6 }}
+  {{- end }}
</span>   {{- end }}
 
   compactor:
<span class="p">@@ -1838,7 +1844,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.2.1
</span><span class="gi">+    tag: v2.3.0
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="p">@@ -1959,8 +1965,10 @@</span> adminApi:
 # Settings for the gateway service providing authentication and authorization via the admin_api.
 # Can only be enabled if enterprise.enabled is true - requires license.
 enterpriseGateway:
<span class="gd">-  # If you want to use your own proxy URLs, set this to false.
</span><span class="gi">+  # -- If you want to use your own proxy URLs, set this to false.
</span>   useDefaultProxyURLs: true
<span class="gi">+  # -- Proxy URLs defined in this object will be used if useDefaultProxyURLs is set to false.
+  proxy: {}
</span>   replicas: 1
   # -- hostAliases to add
   hostAliases: []
<span class="err">
</span></code></pre></div></div> <h2 id="173"> <a href="#173" class="anchor-heading" aria-labelledby="173"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.3 </h2> <p><strong>Release date:</strong> 2023-12-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch main into main</li> <li>regenerate docs</li> <li>generate docs; lint</li> <li>add a comment about enabling metrics generator processors in helm chart</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-6"> <a href="#default-value-changes-6" class="anchor-heading" aria-labelledby="default-value-changes-6"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7306f6df..5359988d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -321,6 +321,7 @@</span> metricsGenerator:
       external_labels: {}
       stale_duration: 15m
     processor:
<span class="gi">+      # -- For processors to be enabled and generate metrics, pass the names of the processors to overrides.metrics_generator_processors value like [service-graphs, span-metrics]
</span>       service_graphs:
         # -- Additional dimensions to add to the metrics. Dimensions are searched for in the
         # -- resource and span attributes and are added to the metrics if present.
<span class="p">@@ -1322,6 +1323,7 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /runtime-config/overrides.yaml
<span class="gi">+  # -- List of enabled metrics generator processors ([service-graphs, span-metrics])
</span>   metrics_generator_processors: []
 
 # Per tenants overrides
<span class="err">
</span></code></pre></div></div> <h2 id="172"> <a href="#172" class="anchor-heading" aria-labelledby="172"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.2 </h2> <p><strong>Release date:</strong> 2023-11-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch main into main</li> <li>Merge branch main into extraObjects</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-7"> <a href="#default-value-changes-7" class="anchor-heading" aria-labelledby="default-value-changes-7"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 6337512a..7306f6df 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -2067,3 +2067,15 @@</span> enterpriseGateway:
       - secretName: gem-gateway-tls
         hosts:
           - gateway.gem.example.com
<span class="gi">+
+# -- Create extra manifests via values.
+extraObjects: []
+  # - apiVersion: "kubernetes-client.io/v1"
+  #   kind: ExternalSecret
+  #   metadata:
+  #     name: tempo-secrets
+  #   spec:
+  #     backendType: aws
+  #     data:
+  #       - key: secret-access-key
+  #         name: awssm-secret
</span><span class="err">
</span></code></pre></div></div> <h2 id="171"> <a href="#171" class="anchor-heading" aria-labelledby="171"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.1 </h2> <p><strong>Release date:</strong> 2023-10-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update tempo-distributed version</li> <li>Update charts/tempo-distributed/templates/gateway/secret-gateway.yaml</li> <li>use old root to get namespace</li> </ul> <h3 id="default-value-changes-8"> <a href="#default-value-changes-8" class="anchor-heading" aria-labelledby="default-value-changes-8"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="170"> <a href="#170" class="anchor-heading" aria-labelledby="170"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.0 </h2> <p><strong>Release date:</strong> 2023-11-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>upgrade to 2.3.0</li> </ul> <h3 id="default-value-changes-9"> <a href="#default-value-changes-9" class="anchor-heading" aria-labelledby="default-value-changes-9"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1614"> <a href="#1614" class="anchor-heading" aria-labelledby="1614"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.14 </h2> <p><strong>Release date:</strong> 2023-11-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> <li>Merge branch main into fix/without-configure-pool-settings</li> <li>Corrected Default trace API location of gateway.nginxConfig.file in tempo-distributed</li> <li>Add the ability to add extraObjects</li> </ul> <h3 id="default-value-changes-10"> <a href="#default-value-changes-10" class="anchor-heading" aria-labelledby="default-value-changes-10"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2fa03179..6337512a 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1244,6 +1244,9 @@</span> config: |
       block:
         version: {{.Values.storage.trace.block.version}}
       {{- end }}
<span class="gi">+      pool:
+        max_workers: {{ .Values.storage.trace.pool.max_workers }}
+        queue_depth: {{ .Values.storage.trace.pool.queue_depth }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1788,7 +1791,7 @@</span> gateway:
             proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
           }
 
<span class="gd">-          location = /otlp/v1/traces {
</span><span class="gi">+          location = /v1/traces {
</span>             proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
           }
 
<span class="err">
</span></code></pre></div></div> <h2 id="1613"> <a href="#1613" class="anchor-heading" aria-labelledby="1613"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.13 </h2> <p><strong>Release date:</strong> 2023-10-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add the ability to add extraObjects</li> </ul> <h3 id="default-value-changes-11"> <a href="#default-value-changes-11" class="anchor-heading" aria-labelledby="default-value-changes-11"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1612"> <a href="#1612" class="anchor-heading" aria-labelledby="1612"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.12 </h2> <p><strong>Release date:</strong> 2023-10-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add the ability to add extraObjects</li> </ul> <h3 id="default-value-changes-12"> <a href="#default-value-changes-12" class="anchor-heading" aria-labelledby="default-value-changes-12"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2fa03179..64c0adc9 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -2064,3 +2064,15 @@</span> enterpriseGateway:
       - secretName: gem-gateway-tls
         hosts:
           - gateway.gem.example.com
<span class="gi">+
+# -- Create extra manifests via values. 
+extraObjects: []
+  # - apiVersion: "kubernetes-client.io/v1"
+  #   kind: ExternalSecret
+  #   metadata:
+  #     name: tempo-secrets
+  #   spec:
+  #     backendType: aws
+  #     data:
+  #       - key: secret-access-key
+  #         name: awssm-secret
</span><span class="err">
</span></code></pre></div></div> <h2 id="1613-1"> <a href="#1613-1" class="anchor-heading" aria-labelledby="1613-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.13 </h2> <p><strong>Release date:</strong> 2023-10-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix: add pool setting in config</li> <li>Merge branch main into fix/namespaces-missing-tempo-distributed</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-13"> <a href="#default-value-changes-13" class="anchor-heading" aria-labelledby="default-value-changes-13"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b1fb4d49..6156ab25 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1244,6 +1244,9 @@</span> config: |
       block:
         version: {{.Values.storage.trace.block.version}}
       {{- end }}
<span class="gi">+      pool:
+        max_workers: {{ .Values.storage.trace.pool.max_workers }}
+        queue_depth: {{ .Values.storage.trace.pool.queue_depth }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1305,6 +1308,12 @@</span> storage:
       version: null
     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
<span class="gi">+    # The worker pool is used primarily when finding traces by id, but is also used by other.
+    pool:
+      # -- Total number of workers pulling jobs from the queue
+      max_workers: 400
+      # -- Length of job queue. imporatant for querier as it queues a job for every block it has to search
+      queue_depth: 20000
</span>   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
   admin:
     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/enterprise-traces/latest/config/reference/#admin_client_config
<span class="err">
</span></code></pre></div></div> <h2 id="1612-1"> <a href="#1612-1" class="anchor-heading" aria-labelledby="1612-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.12 </h2> <p><strong>Release date:</strong> 2023-10-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-14"> <a href="#default-value-changes-14" class="anchor-heading" aria-labelledby="default-value-changes-14"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1610"> <a href="#1610" class="anchor-heading" aria-labelledby="1610"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.10 </h2> <p><strong>Release date:</strong> 2023-09-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo-distributed: add missing namespaces to gateway resource</li> </ul> <h3 id="default-value-changes-15"> <a href="#default-value-changes-15" class="anchor-heading" aria-labelledby="default-value-changes-15"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1611"> <a href="#1611" class="anchor-heading" aria-labelledby="1611"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.11 </h2> <p><strong>Release date:</strong> 2023-10-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(tempo-distributed):storage.trace.pool support</li> <li>update readme - chart version bump</li> </ul> <h3 id="default-value-changes-16"> <a href="#default-value-changes-16" class="anchor-heading" aria-labelledby="default-value-changes-16"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b1fb4d49..2fa03179 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1305,6 +1305,12 @@</span> storage:
       version: null
     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
<span class="gi">+    # The worker pool is used primarily when finding traces by id, but is also used by other.
+    pool:
+      # -- Total number of workers pulling jobs from the queue
+      max_workers: 400
+      # -- Length of job queue. imporatant for querier as it queues a job for every block it has to search
+      queue_depth: 20000
</span>   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
   admin:
     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/enterprise-traces/latest/config/reference/#admin_client_config
<span class="err">
</span></code></pre></div></div> <h2 id="1610-1"> <a href="#1610-1" class="anchor-heading" aria-labelledby="1610-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.10 </h2> <p><strong>Release date:</strong> 2023-10-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update readme template and bump chart version</li> <li>Merge branch main of github.com:rpriyanshu9/grafana-helm-charts into fix-readme</li> <li>Merge branch main into separate-annotations-for-dist-discovery</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-17"> <a href="#default-value-changes-17" class="anchor-heading" aria-labelledby="default-value-changes-17"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="169"> <a href="#169" class="anchor-heading" aria-labelledby="169"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.9 </h2> <p><strong>Release date:</strong> 2023-10-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>update readme</li> </ul> <h3 id="default-value-changes-18"> <a href="#default-value-changes-18" class="anchor-heading" aria-labelledby="default-value-changes-18"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="168"> <a href="#168" class="anchor-heading" aria-labelledby="168"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.8 </h2> <p><strong>Release date:</strong> 2023-10-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update chart version</li> </ul> <h3 id="default-value-changes-19"> <a href="#default-value-changes-19" class="anchor-heading" aria-labelledby="default-value-changes-19"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="170-1"> <a href="#170-1" class="anchor-heading" aria-labelledby="170-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.7.0 </h2> <p><strong>Release date:</strong> 2023-10-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> feat: Add separate annotations for distributor-discovery service</li> </ul> <h3 id="default-value-changes-20"> <a href="#default-value-changes-20" class="anchor-heading" aria-labelledby="default-value-changes-20"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b6bb50a7..b1fb4d49 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -393,6 +393,8 @@</span> distributor:
     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
   serviceDiscovery:
<span class="gi">+    # -- Annotations for distributorDiscovery service
+    annotations: {}
</span>     # -- Labels for distributorDiscovery service
     labels: {}
   # -- The name of the PriorityClass for distributor pods
<span class="err">
</span></code></pre></div></div> <h2 id="168-1"> <a href="#168-1" class="anchor-heading" aria-labelledby="168-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.8 </h2> <p><strong>Release date:</strong> 2023-10-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version</li> </ul> <h3 id="default-value-changes-21"> <a href="#default-value-changes-21" class="anchor-heading" aria-labelledby="default-value-changes-21"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="167"> <a href="#167" class="anchor-heading" aria-labelledby="167"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.7 </h2> <p><strong>Release date:</strong> 2023-10-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> docs: Fix README markdown</li> </ul> <h3 id="default-value-changes-22"> <a href="#default-value-changes-22" class="anchor-heading" aria-labelledby="default-value-changes-22"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="168-2"> <a href="#168-2" class="anchor-heading" aria-labelledby="168-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.8 </h2> <p><strong>Release date:</strong> 2023-09-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Propagate settings for tempo-query to container</li> </ul> <h3 id="default-value-changes-23"> <a href="#default-value-changes-23" class="anchor-heading" aria-labelledby="default-value-changes-23"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="167-1"> <a href="#167-1" class="anchor-heading" aria-labelledby="167-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.7 </h2> <p><strong>Release date:</strong> 2023-09-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Moves to GET 2.2.1, reverts MinIO dependency.</li> </ul> <h3 id="default-value-changes-24"> <a href="#default-value-changes-24" class="anchor-heading" aria-labelledby="default-value-changes-24"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index e81e2813..b6bb50a7 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1825,7 +1825,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.1.0
</span><span class="gi">+    tag: v2.2.1
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="err">
</span></code></pre></div></div> <h2 id="166"> <a href="#166" class="anchor-heading" aria-labelledby="166"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.6 </h2> <p><strong>Release date:</strong> 2023-09-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.3&amp;color=success" alt="AppVersion: 2.2.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> bump tempo version to 2.2.3</li> </ul> <h3 id="default-value-changes-25"> <a href="#default-value-changes-25" class="anchor-heading" aria-labelledby="default-value-changes-25"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="165"> <a href="#165" class="anchor-heading" aria-labelledby="165"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.5 </h2> <p><strong>Release date:</strong> 2023-09-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.2&amp;color=success" alt="AppVersion: 2.2.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version; update readme; add dco</li> <li>adjust minReplicas for ingester</li> <li>Merge pull request #2644 from zanac1986/tempo-distributed-fix-2564</li> <li>Update README.md</li> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-26"> <a href="#default-value-changes-26" class="anchor-heading" aria-labelledby="default-value-changes-26"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 037066b9..e81e2813 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -116,7 +116,7 @@</span> ingester:
     # -- Enable autoscaling for the ingester. WARNING: Autoscaling ingesters can result in lost data. Only do this if you know what you're doing.
     enabled: false
     # -- Minimum autoscaling replicas for the ingester
<span class="gd">-    minReplicas: 1
</span><span class="gi">+    minReplicas: 2
</span>     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
     # -- Autoscaling behavior configuration for the ingester
<span class="err">
</span></code></pre></div></div> <h2 id="164"> <a href="#164" class="anchor-heading" aria-labelledby="164"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.4 </h2> <p><strong>Release date:</strong> 2023-09-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.2&amp;color=success" alt="AppVersion: 2.2.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into fix-topology-kube-version-check</li> </ul> <h3 id="default-value-changes-27"> <a href="#default-value-changes-27" class="anchor-heading" aria-labelledby="default-value-changes-27"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8444f0a9..037066b9 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,9 @@</span> configStorageType: ConfigMap
 # -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
 externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
 
<span class="gi">+# -- Name of the Secret or ConfigMap that contains the runtime configuration (used for naming even if config is internal).
+externalRuntimeConfigName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "runtime") }}'
+
</span> # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="p">@@ -90,6 +93,7 @@</span> serviceAccount:
   imagePullSecrets: []
   # -- Annotations for the service account
   annotations: {}
<span class="gi">+  automountServiceAccountToken: false
</span> 
 rbac:
   # -- Specifies whether RBAC manifests should be created
<span class="p">@@ -103,13 +107,20 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 3
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the ingester
</span><span class="gi">+    # -- Enable autoscaling for the ingester. WARNING: Autoscaling ingesters can result in lost data. Only do this if you know what you're doing.
</span>     enabled: false
     # -- Minimum autoscaling replicas for the ingester
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -145,7 +156,7 @@</span> ingester:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -166,7 +177,7 @@</span> ingester:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -203,6 +214,8 @@</span> ingester:
     max_block_duration: null
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
<span class="gi">+    # -- Flush all traces to backend when ingester is stopped
+    flush_all_on_shutdown: false
</span>   service:
     # -- Annotations for ingester service
     annotations: {}
<span class="p">@@ -219,6 +232,11 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -250,7 +268,7 @@</span> metricsGenerator:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -270,7 +288,7 @@</span> metricsGenerator:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for metrics-generator pods
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
<span class="p">@@ -323,6 +341,7 @@</span> metricsGenerator:
       # -- A list of remote write endpoints.
       # -- https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
       remote_write: []
<span class="gi">+    metrics_ingestion_time_range_slack: 30s
</span>   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="p">@@ -335,6 +354,11 @@</span> metricsGenerator:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -342,6 +366,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -358,12 +384,17 @@</span> distributor:
   service:
     # -- Annotations for distributor service
     annotations: {}
<span class="gi">+    # -- Labels for distributor service
+    labels: {}
</span>     # -- Type of service for the distributor
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
     loadBalancerIP: ''
     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
<span class="gi">+  serviceDiscovery:
+    # -- Labels for distributorDiscovery service
+    labels: {}
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Labels for distributor pods
<span class="p">@@ -384,7 +415,7 @@</span> distributor:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -404,7 +435,7 @@</span> distributor:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -433,6 +464,11 @@</span> distributor:
 compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -504,6 +540,11 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier
     enabled: false
<span class="p">@@ -511,6 +552,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -544,7 +587,7 @@</span> querier:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -564,7 +607,7 @@</span> querier:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier" "memberlist" true) | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -581,8 +624,6 @@</span> querier:
       # -- Timeout for trace lookup requests
       query_timeout: 10s
     search:
<span class="gd">-      # -- A list of external endpoints that the querier will use to offload backend search requests
-      external_endpoints: []
</span>       # -- Timeout for search requests
       query_timeout: 30s
       # -- If search_external_endpoints is set then the querier will primarily act as a proxy for whatever serverless backend you have configured. This setting allows the operator to have the querier prefer itself for a configurable number of subqueries.
<span class="p">@@ -591,6 +632,14 @@</span> querier:
       external_hedge_requests_at: 8s
       # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
       external_hedge_requests_up_to: 2
<span class="gi">+      # -- A list of external endpoints that the querier will use to offload backend search requests
+      external_endpoints: []
+      # -- The serverless backend to use. The default value of "" omits
+      # -- credentials when querying the external backend.
+      external_backend: ""
+      # -- Google Cloud Run configuration. Will be used only if the value of
+      # -- external_backend is "google_cloud_run".
+      google_cloud_run: {}
</span>     # -- This value controls the overall number of simultaneous subqueries that the querier will service at once. It does not distinguish between the types of queries.
     max_concurrent_queries: 20
 
<span class="p">@@ -632,11 +681,14 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="gd">-    # -- Number of block queries that are tolerated to error before considering the entire query as failed. Numbers greater than 0 make possible for a read to return partial results
-    tolerate_failed_blocks: 0
</span>     search:
       # -- The number of concurrent jobs to execute when searching the backend
       concurrent_jobs: 1000
<span class="p">@@ -657,6 +709,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -675,6 +729,8 @@</span> queryFrontend:
     port: 16686
     # -- Annotations for queryFrontend service
     annotations: {}
<span class="gi">+    # -- Labels for queryFrontend service
+    labels: {}
</span>     # -- Type of service for the queryFrontend
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
<span class="p">@@ -684,6 +740,8 @@</span> queryFrontend:
   serviceDiscovery:
     # -- Annotations for queryFrontendDiscovery service
     annotations: {}
<span class="gi">+    # -- Labels for queryFrontendDiscovery service
+    labels: {}
</span>   ingress:
     # -- Specifies whether an ingress for the Jaeger should be created
     enabled: false
<span class="p">@@ -723,7 +781,7 @@</span> queryFrontend:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -743,7 +801,7 @@</span> queryFrontend:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -752,11 +810,113 @@</span> queryFrontend:
   extraVolumeMounts: []
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
<span class="gd">-  # -- Adds the appProtocol field to the queriyFrontend service. This allows queriyFrontend to work with istio protocol selection.
</span><span class="gi">+  # -- Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.
</span>   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
     grpc: null
 
<span class="gi">+# Configuration for the federation-frontend
+# Can only be enabled if enterprise.enabled is true - requires license.
+enterpriseFederationFrontend:
+  # -- Specifies whether a federation-frontend should be deployed
+  enabled: false
+  # -- Number of replicas for the federation-frontend
+  replicas: 1
+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
+  # proxy_targets:
+  #   - name: own-data-center
+  #     url: http://get/tempo
+  #   - name: grafana-cloud
+  #     url: https://tempo-us-central1.grafana.net/tempo
+  #     basic_auth:
+  #       username: &lt;instance-id&gt;
+  #       password: &lt;token&gt;
+  proxy_targets: []
+  autoscaling:
+    # -- Enable autoscaling for the federation-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the federation-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the federation-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the federation-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the federation-frontend
+    targetMemoryUtilizationPercentage:
+  image:
+    # -- The Docker registry for the federation-frontend image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
+    # -- Docker image repository for the federation-frontend image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the federation-frontend image. Overrides `tempo.image.tag`
+    tag: null
+  service:
+    # -- Port of the federation-frontend service
+    port: 3100
+    # -- Annotations for enterpriseFederationFrontend service
+    annotations: {}
+    # -- Type of service for the enterpriseFederationFrontend
+    type: ClusterIP
+    # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
+    loadBalancerIP: ""
+    # -- If type is LoadBalancer limit incoming traffic from IPs.
+    loadBalancerSourceRanges: []
+  # -- The name of the PriorityClass for federation-frontend pods
+  priorityClassName: null
+  # -- Labels for enterpriseFederationFrontend pods
+  podLabels: {}
+  # -- Annotations for federation-frontend pods
+  podAnnotations: {}
+  # -- Additional CLI args for the federation-frontend
+  extraArgs: []
+  # -- Environment variables to add to the federation-frontend pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the federation-frontend pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the federation-frontend
+  resources: {}
+  # -- Grace period to allow the federation-frontend to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- topologySpread for federation-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 6 }}
+  # -- Affinity for federation-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for federation-frontend pods
+  nodeSelector: {}
+  # -- Tolerations for federation-frontend pods
+  tolerations: []
+  # -- Extra volumes for federation-frontend pods
+  extraVolumeMounts: []
+  # -- Extra volumes for federation-frontend deployment
+  extraVolumes: []
+
</span> multitenancyEnabled: false
 
 traces:
<span class="p">@@ -805,6 +965,28 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gi">+# -- Memberlist configuration. Please refer to https://grafana.com/docs/tempo/latest/configuration/#memberlist
+memberlist:
+  node_name: ""
+  randomize_node_name: true
+  stream_timeout: "10s"
+  retransmit_factor: 2
+  pull_push_interval: "30s"
+  gossip_interval: "1s"
+  gossip_nodes: 2
+  gossip_to_dead_nodes_time: "30s"
+  min_join_backoff: "1s"
+  max_join_backoff: "1m"
+  max_join_retries: 10
+  abort_if_cluster_join_fails: false
+  rejoin_interval: "0s"
+  left_ingesters_timeout: "5m"
+  leave_timeout: "5s"
+  bind_addr: []
+  bind_port: 7946
+  packet_dial_timeout: "5s"
+  packet_write_timeout: "5s"
+
</span> # -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
 
 # @default -- See values.yaml
<span class="p">@@ -892,6 +1074,11 @@</span> config: |
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if and .Values.enterprise.enabled .Values.enterpriseFederationFrontend.enabled }}
+  federation:
+    proxy_targets:
+      {{- toYaml .Values.enterpriseFederationFrontend.proxy_targets | nindent 6 }}
+  {{- end }}
</span>   {{- if .Values.metricsGenerator.enabled }}
   metrics_generator:
     ring:
<span class="p">@@ -903,6 +1090,7 @@</span> config: |
       {{- toYaml .Values.metricsGenerator.config.storage | nindent 6 }}
     registry:
       {{- toYaml .Values.metricsGenerator.config.registry | nindent 6 }}
<span class="gi">+    metrics_ingestion_time_range_slack: {{ .Values.metricsGenerator.config.metrics_ingestion_time_range_slack }}
</span>   {{- end }}
   distributor:
     ring:
<span class="p">@@ -970,12 +1158,6 @@</span> config: |
     {{- if .Values.distributor.config.extend_writes }}
     extend_writes: {{ .Values.distributor.config.extend_writes }}
     {{- end }}
<span class="gd">-    {{- if .Values.distributor.config.search_tags_deny_list }}
-    search_tags_deny_list:
-      {{- with .Values.distributor.config.search_tags_deny_list }}
-      {{- toYaml . | nindent 4 }}
-      {{- end }}
-    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend-discovery") }}:9095
<span class="p">@@ -991,10 +1173,14 @@</span> config: |
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
<span class="gi">+      external_backend: {{ .Values.querier.config.search.external_backend }}
+      {{- if .Values.querier.config.search.google_cloud_run }}
+      google_cloud_run:
+        {{- toYaml .Values.querier.config.search.google_cloud_run | nindent 6 }}
+      {{- end }}
</span>     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
     max_retries: {{ .Values.queryFrontend.config.max_retries }}
<span class="gd">-    tolerate_failed_blocks: {{ .Values.queryFrontend.config.tolerate_failed_blocks }}
</span>     search:
       target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
       concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
<span class="p">@@ -1025,10 +1211,15 @@</span> config: |
     {{- if .Values.ingester.config.complete_block_timeout }}
     complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
     {{- end }}
<span class="gi">+    {{- if .Values.ingester.config.flush_all_on_shutdown }}
+    flush_all_on_shutdown: {{ .Values.ingester.config.flush_all_on_shutdown }}
+    {{- end }}
</span>   memberlist:
<span class="gd">-    abort_if_cluster_join_fails: false
</span><span class="gi">+    {{- with .Values.memberlist }}
+      {{- toYaml . | nindent 2 }}
+    {{- end }}
</span>     join_members:
<span class="gd">-      - {{ include "tempo.fullname" . }}-gossip-ring
</span><span class="gi">+      - dns+{{ include "tempo.fullname" . }}-gossip-ring:{{ .Values.memberlist.bind_port }}
</span>   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
<span class="p">@@ -1047,8 +1238,10 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      {{- if .Values.storage.trace.block.version }}
</span>       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gi">+      {{- end }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1106,8 +1299,8 @@</span> storage:
   trace:
     # Settings for the block storage backend and buckets.
     block:
<span class="gd">-      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
-      version: vParquet
</span><span class="gi">+      # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: null
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="p">@@ -1117,10 +1310,8 @@</span> storage:
 
 # Global overrides
 global_overrides:
<span class="gd">-  per_tenant_override_config: /conf/overrides.yaml
-  metrics_generator_processors:
-    - service-graphs
-    - span-metrics
</span><span class="gi">+  per_tenant_override_config: /runtime-config/overrides.yaml
+  metrics_generator_processors: []
</span> 
 # Per tenants overrides
 overrides: |
<span class="p">@@ -1161,7 +1352,7 @@</span> memcached:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1181,7 +1372,7 @@</span> memcached:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   service:
     # -- Annotations for memcached service
     annotations: {}
<span class="p">@@ -1189,6 +1380,11 @@</span> memcached:
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="p">@@ -1364,6 +1560,11 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -1371,6 +1572,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="p">@@ -1412,7 +1615,7 @@</span> gateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1432,7 +1635,7 @@</span> gateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -1622,7 +1825,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.0.1
</span><span class="gi">+    tag: v2.1.0
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="p">@@ -1638,6 +1841,11 @@</span> license:
 # enterprise.enabled is true - requires license.
 tokengenJob:
   enable: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   extraArgs: {}
   env: []
   extraEnvFrom: []
<span class="p">@@ -1651,6 +1859,11 @@</span> tokengenJob:
 # Can only be enabled if enterprise.enabled is true - requires license.
 adminApi:
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1673,7 +1886,7 @@</span> adminApi:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1694,7 +1907,7 @@</span> adminApi:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   # Pod Disruption Budget
   podDisruptionBudget: {}
<span class="p">@@ -1736,6 +1949,11 @@</span> enterpriseGateway:
   # If you want to use your own proxy URLs, set this to false.
   useDefaultProxyURLs: true
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1761,7 +1979,7 @@</span> enterpriseGateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1782,7 +2000,7 @@</span> enterpriseGateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   securityContext:
     {}
<span class="err">
</span></code></pre></div></div> <h2 id="131"> <a href="#131" class="anchor-heading" aria-labelledby="131"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.3.1 </h2> <p><strong>Release date:</strong> 2023-09-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-28"> <a href="#default-value-changes-28" class="anchor-heading" aria-labelledby="default-value-changes-28"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="130"> <a href="#130" class="anchor-heading" aria-labelledby="130"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.3.0 </h2> <p><strong>Release date:</strong> 2023-09-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update README.md</li> <li>update _helper.tpl</li> <li>update README.md</li> <li>Update.</li> <li>update Chart.yaml</li> </ul> <h3 id="default-value-changes-29"> <a href="#default-value-changes-29" class="anchor-heading" aria-labelledby="default-value-changes-29"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="164-1"> <a href="#164-1" class="anchor-heading" aria-labelledby="164-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.4 </h2> <p><strong>Release date:</strong> 2023-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.2&amp;color=success" alt="AppVersion: 2.2.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> rm deprecated pdb api policy/v1beta1</li> </ul> <h3 id="default-value-changes-30"> <a href="#default-value-changes-30" class="anchor-heading" aria-labelledby="default-value-changes-30"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="163"> <a href="#163" class="anchor-heading" aria-labelledby="163"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.3 </h2> <p><strong>Release date:</strong> 2023-09-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.2&amp;color=success" alt="AppVersion: 2.2.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> bump tempo version to 2.2.2</li> </ul> <h3 id="default-value-changes-31"> <a href="#default-value-changes-31" class="anchor-heading" aria-labelledby="default-value-changes-31"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="162"> <a href="#162" class="anchor-heading" aria-labelledby="162"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.2 </h2> <p><strong>Release date:</strong> 2023-08-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Upgrade tempo-distributed to 2.2.1</li> <li>Merge pull request #2583 from zhongchen/add-flush-all-on-shutdown-for-ingestor</li> <li>fix: add flush all on shutdown for ingestors</li> </ul> <h3 id="default-value-changes-32"> <a href="#default-value-changes-32" class="anchor-heading" aria-labelledby="default-value-changes-32"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 214703c7..037066b9 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -214,6 +214,8 @@</span> ingester:
     max_block_duration: null
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
<span class="gi">+    # -- Flush all traces to backend when ingester is stopped
+    flush_all_on_shutdown: false
</span>   service:
     # -- Annotations for ingester service
     annotations: {}
<span class="p">@@ -1209,6 +1211,9 @@</span> config: |
     {{- if .Values.ingester.config.complete_block_timeout }}
     complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
     {{- end }}
<span class="gi">+    {{- if .Values.ingester.config.flush_all_on_shutdown }}
+    flush_all_on_shutdown: {{ .Values.ingester.config.flush_all_on_shutdown }}
+    {{- end }}
</span>   memberlist:
     {{- with .Values.memberlist }}
       {{- toYaml . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="161"> <a href="#161" class="anchor-heading" aria-labelledby="161"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.1 </h2> <p><strong>Release date:</strong> 2023-08-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix: bump the chart version and regenerate doc</li> <li>fix: make auto mount sa configurable</li> </ul> <h3 id="default-value-changes-33"> <a href="#default-value-changes-33" class="anchor-heading" aria-labelledby="default-value-changes-33"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 06297d01..214703c7 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -93,6 +93,7 @@</span> serviceAccount:
   imagePullSecrets: []
   # -- Annotations for the service account
   annotations: {}
<span class="gi">+  automountServiceAccountToken: false
</span> 
 rbac:
   # -- Specifies whether RBAC manifests should be created
<span class="err">
</span></code></pre></div></div> <h2 id="160"> <a href="#160" class="anchor-heading" aria-labelledby="160"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.6.0 </h2> <p><strong>Release date:</strong> 2023-08-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version and include breaking change notice</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Use default values for metrics-generator processors</li> </ul> <h3 id="default-value-changes-34"> <a href="#default-value-changes-34" class="anchor-heading" aria-labelledby="default-value-changes-34"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 12a08340..06297d01 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1305,9 +1305,7 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /runtime-config/overrides.yaml
<span class="gd">-  metrics_generator_processors:
-    - service-graphs
-    - span-metrics
</span><span class="gi">+  metrics_generator_processors: []
</span> 
 # Per tenants overrides
 overrides: |
<span class="err">
</span></code></pre></div></div> <h2 id="154"> <a href="#154" class="anchor-heading" aria-labelledby="154"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.4 </h2> <p><strong>Release date:</strong> 2023-08-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge remote-tracking branch upstream/main into querier-readiness</li> </ul> <h3 id="default-value-changes-35"> <a href="#default-value-changes-35" class="anchor-heading" aria-labelledby="default-value-changes-35"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..12a08340 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -106,8 +106,13 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 3
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the ingester
</span><span class="gi">+    # -- Enable autoscaling for the ingester. WARNING: Autoscaling ingesters can result in lost data. Only do this if you know what you're doing.
</span>     enabled: false
     # -- Minimum autoscaling replicas for the ingester
     minReplicas: 1
<span class="p">@@ -224,6 +229,11 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -341,6 +351,11 @@</span> metricsGenerator:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -446,6 +461,11 @@</span> distributor:
 compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -517,6 +537,11 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier
     enabled: false
<span class="p">@@ -596,8 +621,6 @@</span> querier:
       # -- Timeout for trace lookup requests
       query_timeout: 10s
     search:
<span class="gd">-      # -- A list of external endpoints that the querier will use to offload backend search requests
-      external_endpoints: []
</span>       # -- Timeout for search requests
       query_timeout: 30s
       # -- If search_external_endpoints is set then the querier will primarily act as a proxy for whatever serverless backend you have configured. This setting allows the operator to have the querier prefer itself for a configurable number of subqueries.
<span class="p">@@ -606,6 +629,14 @@</span> querier:
       external_hedge_requests_at: 8s
       # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
       external_hedge_requests_up_to: 2
<span class="gi">+      # -- A list of external endpoints that the querier will use to offload backend search requests
+      external_endpoints: []
+      # -- The serverless backend to use. The default value of "" omits
+      # -- credentials when querying the external backend.
+      external_backend: ""
+      # -- Google Cloud Run configuration. Will be used only if the value of
+      # -- external_backend is "google_cloud_run".
+      google_cloud_run: {}
</span>     # -- This value controls the overall number of simultaneous subqueries that the querier will service at once. It does not distinguish between the types of queries.
     max_concurrent_queries: 20
 
<span class="p">@@ -647,11 +678,14 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="gd">-    # -- Number of block queries that are tolerated to error before considering the entire query as failed. Numbers greater than 0 make possible for a read to return partial results
-    tolerate_failed_blocks: 0
</span>     search:
       # -- The number of concurrent jobs to execute when searching the backend
       concurrent_jobs: 1000
<span class="p">@@ -785,6 +819,11 @@</span> enterpriseFederationFrontend:
   enabled: false
   # -- Number of replicas for the federation-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # proxy_targets:
   #   - name: own-data-center
   #     url: http://get/tempo
<span class="p">@@ -1131,10 +1170,14 @@</span> config: |
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
<span class="gi">+      external_backend: {{ .Values.querier.config.search.external_backend }}
+      {{- if .Values.querier.config.search.google_cloud_run }}
+      google_cloud_run:
+        {{- toYaml .Values.querier.config.search.google_cloud_run | nindent 6 }}
+      {{- end }}
</span>     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
     max_retries: {{ .Values.queryFrontend.config.max_retries }}
<span class="gd">-    tolerate_failed_blocks: {{ .Values.queryFrontend.config.tolerate_failed_blocks }}
</span>     search:
       target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
       concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
<span class="p">@@ -1170,7 +1213,7 @@</span> config: |
       {{- toYaml . | nindent 2 }}
     {{- end }}
     join_members:
<span class="gd">-      - {{ include "tempo.fullname" . }}-gossip-ring
</span><span class="gi">+      - dns+{{ include "tempo.fullname" . }}-gossip-ring:{{ .Values.memberlist.bind_port }}
</span>   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
<span class="p">@@ -1189,8 +1232,10 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      {{- if .Values.storage.trace.block.version }}
</span>       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gi">+      {{- end }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1248,8 +1293,8 @@</span> storage:
   trace:
     # Settings for the block storage backend and buckets.
     block:
<span class="gd">-      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
-      version: vParquet
</span><span class="gi">+      # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: null
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="p">@@ -1331,6 +1376,11 @@</span> memcached:
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="p">@@ -1506,6 +1556,11 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -1782,6 +1837,11 @@</span> license:
 # enterprise.enabled is true - requires license.
 tokengenJob:
   enable: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   extraArgs: {}
   env: []
   extraEnvFrom: []
<span class="p">@@ -1795,6 +1855,11 @@</span> tokengenJob:
 # Can only be enabled if enterprise.enabled is true - requires license.
 adminApi:
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1880,6 +1945,11 @@</span> enterpriseGateway:
   # If you want to use your own proxy URLs, set this to false.
   useDefaultProxyURLs: true
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="err">
</span></code></pre></div></div> <h2 id="1416"> <a href="#1416" class="anchor-heading" aria-labelledby="1416"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.16 </h2> <p><strong>Release date:</strong> 2023-07-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Querier readiness probe</li> </ul> <h3 id="default-value-changes-36"> <a href="#default-value-changes-36" class="anchor-heading" aria-labelledby="default-value-changes-36"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="153"> <a href="#153" class="anchor-heading" aria-labelledby="153"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.3 </h2> <p><strong>Release date:</strong> 2023-08-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into hostAliases_for_tempo-distributed</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Update charts/tempo-distributed/values.yaml</li> </ul> <h3 id="default-value-changes-37"> <a href="#default-value-changes-37" class="anchor-heading" aria-labelledby="default-value-changes-37"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b0bb5fca..12a08340 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -107,12 +107,12 @@</span> ingester:
   # -- Number of replicas for the ingester
   replicas: 3
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the ingester
</span><span class="gi">+    # -- Enable autoscaling for the ingester. WARNING: Autoscaling ingesters can result in lost data. Only do this if you know what you're doing.
</span>     enabled: false
     # -- Minimum autoscaling replicas for the ingester
     minReplicas: 1
<span class="p">@@ -230,7 +230,7 @@</span> metricsGenerator:
   # -- Number of replicas for the metrics-generator
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -352,7 +352,7 @@</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -462,7 +462,7 @@</span> compactor:
   # -- Number of replicas for the compactor
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -538,7 +538,7 @@</span> querier:
   # -- Number of replicas for the querier
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -621,8 +621,6 @@</span> querier:
       # -- Timeout for trace lookup requests
       query_timeout: 10s
     search:
<span class="gd">-      # -- A list of external endpoints that the querier will use to offload backend search requests
-      external_endpoints: []
</span>       # -- Timeout for search requests
       query_timeout: 30s
       # -- If search_external_endpoints is set then the querier will primarily act as a proxy for whatever serverless backend you have configured. This setting allows the operator to have the querier prefer itself for a configurable number of subqueries.
<span class="p">@@ -631,6 +629,14 @@</span> querier:
       external_hedge_requests_at: 8s
       # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
       external_hedge_requests_up_to: 2
<span class="gi">+      # -- A list of external endpoints that the querier will use to offload backend search requests
+      external_endpoints: []
+      # -- The serverless backend to use. The default value of "" omits
+      # -- credentials when querying the external backend.
+      external_backend: ""
+      # -- Google Cloud Run configuration. Will be used only if the value of
+      # -- external_backend is "google_cloud_run".
+      google_cloud_run: {}
</span>     # -- This value controls the overall number of simultaneous subqueries that the querier will service at once. It does not distinguish between the types of queries.
     max_concurrent_queries: 20
 
<span class="p">@@ -673,15 +679,13 @@</span> queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="gd">-    # -- Number of block queries that are tolerated to error before considering the entire query as failed. Numbers greater than 0 make possible for a read to return partial results
-    tolerate_failed_blocks: 0
</span>     search:
       # -- The number of concurrent jobs to execute when searching the backend
       concurrent_jobs: 1000
<span class="p">@@ -816,7 +820,7 @@</span> enterpriseFederationFrontend:
   # -- Number of replicas for the federation-frontend
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -1166,10 +1170,14 @@</span> config: |
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
<span class="gi">+      external_backend: {{ .Values.querier.config.search.external_backend }}
+      {{- if .Values.querier.config.search.google_cloud_run }}
+      google_cloud_run:
+        {{- toYaml .Values.querier.config.search.google_cloud_run | nindent 6 }}
+      {{- end }}
</span>     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
     max_retries: {{ .Values.queryFrontend.config.max_retries }}
<span class="gd">-    tolerate_failed_blocks: {{ .Values.queryFrontend.config.tolerate_failed_blocks }}
</span>     search:
       target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
       concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
<span class="p">@@ -1205,7 +1213,7 @@</span> config: |
       {{- toYaml . | nindent 2 }}
     {{- end }}
     join_members:
<span class="gd">-      - {{ include "tempo.fullname" . }}-gossip-ring
</span><span class="gi">+      - dns+{{ include "tempo.fullname" . }}-gossip-ring:{{ .Values.memberlist.bind_port }}
</span>   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
<span class="p">@@ -1224,8 +1232,10 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      {{- if .Values.storage.trace.block.version }}
</span>       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gi">+      {{- end }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1283,8 +1293,8 @@</span> storage:
   trace:
     # Settings for the block storage backend and buckets.
     block:
<span class="gd">-      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
-      version: vParquet
</span><span class="gi">+      # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: null
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="p">@@ -1367,7 +1377,7 @@</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -1547,7 +1557,7 @@</span> gateway:
   # -- Number of replicas for the gateway
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -1828,7 +1838,7 @@</span> license:
 tokengenJob:
   enable: true
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="p">@@ -1846,7 +1856,7 @@</span> tokengenJob:
 adminApi:
   replicas: 1
   # -- hostAliases to add
<span class="gd">-  hostAliases: [ ]
</span><span class="gi">+  hostAliases: []
</span>   #  - ip: 1.2.3.4
   #    hostnames:
   #      - domain.tld
<span class="err">
</span></code></pre></div></div> <h2 id="150"> <a href="#150" class="anchor-heading" aria-labelledby="150"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.0 </h2> <p><strong>Release date:</strong> 2023-08-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/tempo-distributed/values.yaml</li> </ul> <h3 id="default-value-changes-38"> <a href="#default-value-changes-38" class="anchor-heading" aria-labelledby="default-value-changes-38"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..b0bb5fca 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -106,6 +106,11 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 3
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -224,6 +229,11 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -341,6 +351,11 @@</span> metricsGenerator:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -446,6 +461,11 @@</span> distributor:
 compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -517,6 +537,11 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier
     enabled: false
<span class="p">@@ -647,6 +672,11 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="p">@@ -785,6 +815,11 @@</span> enterpriseFederationFrontend:
   enabled: false
   # -- Number of replicas for the federation-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # proxy_targets:
   #   - name: own-data-center
   #     url: http://get/tempo
<span class="p">@@ -1331,6 +1366,11 @@</span> memcached:
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="p">@@ -1506,6 +1546,11 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -1782,6 +1827,11 @@</span> license:
 # enterprise.enabled is true - requires license.
 tokengenJob:
   enable: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   extraArgs: {}
   env: []
   extraEnvFrom: []
<span class="p">@@ -1795,6 +1845,11 @@</span> tokengenJob:
 # Can only be enabled if enterprise.enabled is true - requires license.
 adminApi:
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1880,6 +1935,11 @@</span> enterpriseGateway:
   # If you want to use your own proxy URLs, set this to false.
   useDefaultProxyURLs: true
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="err">
</span></code></pre></div></div> <h2 id="152"> <a href="#152" class="anchor-heading" aria-labelledby="152"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.2 </h2> <p><strong>Release date:</strong> 2023-07-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart to 1.5.2</li> <li>Merge pull request #2553 from modulitos/tempo-distributed-2.2</li> <li>fix templating</li> <li>make block version default to Tempo</li> </ul> <h3 id="default-value-changes-39"> <a href="#default-value-changes-39" class="anchor-heading" aria-labelledby="default-value-changes-39"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 1f68e739..9f134a4e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -107,7 +107,7 @@</span> ingester:
   # -- Number of replicas for the ingester
   replicas: 3
   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the ingester
</span><span class="gi">+    # -- Enable autoscaling for the ingester. WARNING: Autoscaling ingesters can result in lost data. Only do this if you know what you're doing.
</span>     enabled: false
     # -- Minimum autoscaling replicas for the ingester
     minReplicas: 1
<span class="p">@@ -1197,8 +1197,10 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      {{- if .Values.storage.trace.block.version }}
</span>       block:
         version: {{.Values.storage.trace.block.version}}
<span class="gi">+      {{- end }}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1256,8 +1258,8 @@</span> storage:
   trace:
     # Settings for the block storage backend and buckets.
     block:
<span class="gd">-      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
-      version: vParquet
</span><span class="gi">+      # -- The supported block versions are specified here https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: null
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="err">
</span></code></pre></div></div> <h2 id="151"> <a href="#151" class="anchor-heading" aria-labelledby="151"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.1 </h2> <p><strong>Release date:</strong> 2023-07-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Support cloud_run configs</li> </ul> <h3 id="default-value-changes-40"> <a href="#default-value-changes-40" class="anchor-heading" aria-labelledby="default-value-changes-40"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 9c1671f4..1f68e739 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -596,8 +596,6 @@</span> querier:
       # -- Timeout for trace lookup requests
       query_timeout: 10s
     search:
<span class="gd">-      # -- A list of external endpoints that the querier will use to offload backend search requests
-      external_endpoints: []
</span>       # -- Timeout for search requests
       query_timeout: 30s
       # -- If search_external_endpoints is set then the querier will primarily act as a proxy for whatever serverless backend you have configured. This setting allows the operator to have the querier prefer itself for a configurable number of subqueries.
<span class="p">@@ -606,6 +604,14 @@</span> querier:
       external_hedge_requests_at: 8s
       # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
       external_hedge_requests_up_to: 2
<span class="gi">+      # -- A list of external endpoints that the querier will use to offload backend search requests
+      external_endpoints: []
+      # -- The serverless backend to use. The default value of "" omits
+      # -- credentials when querying the external backend.
+      external_backend: ""
+      # -- Google Cloud Run configuration. Will be used only if the value of
+      # -- external_backend is "google_cloud_run".
+      google_cloud_run: {}
</span>     # -- This value controls the overall number of simultaneous subqueries that the querier will service at once. It does not distinguish between the types of queries.
     max_concurrent_queries: 20
 
<span class="p">@@ -1129,6 +1135,11 @@</span> config: |
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
<span class="gi">+      external_backend: {{ .Values.querier.config.search.external_backend }}
+      {{- if .Values.querier.config.search.google_cloud_run }}
+      google_cloud_run:
+        {{- toYaml .Values.querier.config.search.google_cloud_run | nindent 6 }}
+      {{- end }}
</span>     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
     max_retries: {{ .Values.queryFrontend.config.max_retries }}
<span class="err">
</span></code></pre></div></div> <h2 id="150-1"> <a href="#150-1" class="anchor-heading" aria-labelledby="150-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.0 </h2> <p><strong>Release date:</strong> 2023-07-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updated to 2.2</li> </ul> <h3 id="default-value-changes-41"> <a href="#default-value-changes-41" class="anchor-heading" aria-labelledby="default-value-changes-41"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b1ee2b3e..9c1671f4 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -650,8 +650,6 @@</span> queryFrontend:
   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="gd">-    # -- Number of block queries that are tolerated to error before considering the entire query as failed. Numbers greater than 0 make possible for a read to return partial results
-    tolerate_failed_blocks: 0
</span>     search:
       # -- The number of concurrent jobs to execute when searching the backend
       concurrent_jobs: 1000
<span class="p">@@ -1134,7 +1132,6 @@</span> config: |
     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
     max_retries: {{ .Values.queryFrontend.config.max_retries }}
<span class="gd">-    tolerate_failed_blocks: {{ .Values.queryFrontend.config.tolerate_failed_blocks }}
</span>     search:
       target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
       concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
<span class="err">
</span></code></pre></div></div> <h2 id="1415"> <a href="#1415" class="anchor-heading" aria-labelledby="1415"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.15 </h2> <p><strong>Release date:</strong> 2023-07-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> include memberlist port in join_members</li> </ul> <h3 id="default-value-changes-42"> <a href="#default-value-changes-42" class="anchor-heading" aria-labelledby="default-value-changes-42"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..b1ee2b3e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1170,7 +1170,7 @@</span> config: |
       {{- toYaml . | nindent 2 }}
     {{- end }}
     join_members:
<span class="gd">-      - {{ include "tempo.fullname" . }}-gossip-ring
</span><span class="gi">+      - dns+{{ include "tempo.fullname" . }}-gossip-ring:{{ .Values.memberlist.bind_port }}
</span>   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
<span class="err">
</span></code></pre></div></div> <h2 id="150-2"> <a href="#150-2" class="anchor-heading" aria-labelledby="150-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.0 </h2> <p><strong>Release date:</strong> 2023-07-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>regenerate docs</li> </ul> <h3 id="default-value-changes-43"> <a href="#default-value-changes-43" class="anchor-heading" aria-labelledby="default-value-changes-43"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..d134f76d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -106,6 +106,11 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 3
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -224,6 +229,11 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -341,6 +351,11 @@</span> metricsGenerator:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -446,6 +461,11 @@</span> distributor:
 compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -517,6 +537,11 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier
     enabled: false
<span class="p">@@ -647,6 +672,11 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="p">@@ -785,6 +815,11 @@</span> enterpriseFederationFrontend:
   enabled: false
   # -- Number of replicas for the federation-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # proxy_targets:
   #   - name: own-data-center
   #     url: http://get/tempo
<span class="p">@@ -1331,6 +1366,11 @@</span> memcached:
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="p">@@ -1506,6 +1546,11 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -1782,6 +1827,11 @@</span> license:
 # enterprise.enabled is true - requires license.
 tokengenJob:
   enable: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   extraArgs: {}
   env: []
   extraEnvFrom: []
<span class="p">@@ -1795,6 +1845,11 @@</span> tokengenJob:
 # Can only be enabled if enterprise.enabled is true - requires license.
 adminApi:
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1880,6 +1935,11 @@</span> enterpriseGateway:
   # If you want to use your own proxy URLs, set this to false.
   useDefaultProxyURLs: true
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="err">
</span></code></pre></div></div> <h2 id="1414"> <a href="#1414" class="anchor-heading" aria-labelledby="1414"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.14 </h2> <p><strong>Release date:</strong> 2023-07-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> use DNS lookup for memberlist by default</li> </ul> <h3 id="default-value-changes-44"> <a href="#default-value-changes-44" class="anchor-heading" aria-labelledby="default-value-changes-44"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..1d9424ff 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1170,7 +1170,7 @@</span> config: |
       {{- toYaml . | nindent 2 }}
     {{- end }}
     join_members:
<span class="gd">-      - {{ include "tempo.fullname" . }}-gossip-ring
</span><span class="gi">+      - dns+{{ include "tempo.fullname" . }}-gossip-ring
</span>   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
<span class="err">
</span></code></pre></div></div> <h2 id="150-3"> <a href="#150-3" class="anchor-heading" aria-labelledby="150-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.5.0 </h2> <p><strong>Release date:</strong> 2023-07-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>add hostAliases</li> </ul> <h3 id="default-value-changes-45"> <a href="#default-value-changes-45" class="anchor-heading" aria-labelledby="default-value-changes-45"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5bf2b8a..d134f76d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -106,6 +106,11 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 3
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -224,6 +229,11 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -341,6 +351,11 @@</span> metricsGenerator:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -446,6 +461,11 @@</span> distributor:
 compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -517,6 +537,11 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier
     enabled: false
<span class="p">@@ -647,6 +672,11 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   config:
     # -- Number of times to retry a request sent to a querier
     max_retries: 2
<span class="p">@@ -785,6 +815,11 @@</span> enterpriseFederationFrontend:
   enabled: false
   # -- Number of replicas for the federation-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # proxy_targets:
   #   - name: own-data-center
   #     url: http://get/tempo
<span class="p">@@ -1331,6 +1366,11 @@</span> memcached:
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="p">@@ -1506,6 +1546,11 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -1782,6 +1827,11 @@</span> license:
 # enterprise.enabled is true - requires license.
 tokengenJob:
   enable: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   extraArgs: {}
   env: []
   extraEnvFrom: []
<span class="p">@@ -1795,6 +1845,11 @@</span> tokengenJob:
 # Can only be enabled if enterprise.enabled is true - requires license.
 adminApi:
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="p">@@ -1880,6 +1935,11 @@</span> enterpriseGateway:
   # If you want to use your own proxy URLs, set this to false.
   useDefaultProxyURLs: true
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: [ ]
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span> 
   annotations: {}
   service:
<span class="err">
</span></code></pre></div></div> <h2 id="1413"> <a href="#1413" class="anchor-heading" aria-labelledby="1413"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.13 </h2> <p><strong>Release date:</strong> 2023-07-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into feat/tempo-memberlist-config</li> <li>Merge branch main into patch-1</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-46"> <a href="#default-value-changes-46" class="anchor-heading" aria-labelledby="default-value-changes-46"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index be9086df..c5bf2b8a 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -366,12 +366,17 @@</span> distributor:
   service:
     # -- Annotations for distributor service
     annotations: {}
<span class="gi">+    # -- Labels for distributor service
+    labels: {}
</span>     # -- Type of service for the distributor
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
     loadBalancerIP: ''
     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
<span class="gi">+  serviceDiscovery:
+    # -- Labels for distributorDiscovery service
+    labels: {}
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Labels for distributor pods
<span class="p">@@ -687,6 +692,8 @@</span> queryFrontend:
     port: 16686
     # -- Annotations for queryFrontend service
     annotations: {}
<span class="gi">+    # -- Labels for queryFrontend service
+    labels: {}
</span>     # -- Type of service for the queryFrontend
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
<span class="p">@@ -696,6 +703,8 @@</span> queryFrontend:
   serviceDiscovery:
     # -- Annotations for queryFrontendDiscovery service
     annotations: {}
<span class="gi">+    # -- Labels for queryFrontendDiscovery service
+    labels: {}
</span>   ingress:
     # -- Specifies whether an ingress for the Jaeger should be created
     enabled: false
<span class="p">@@ -914,6 +923,28 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gi">+# -- Memberlist configuration. Please refer to https://grafana.com/docs/tempo/latest/configuration/#memberlist
+memberlist:
+  node_name: ""
+  randomize_node_name: true
+  stream_timeout: "10s"
+  retransmit_factor: 2
+  pull_push_interval: "30s"
+  gossip_interval: "1s"
+  gossip_nodes: 2
+  gossip_to_dead_nodes_time: "30s"
+  min_join_backoff: "1s"
+  max_join_backoff: "1m"
+  max_join_retries: 10
+  abort_if_cluster_join_fails: false
+  rejoin_interval: "0s"
+  left_ingesters_timeout: "5m"
+  leave_timeout: "5s"
+  bind_addr: []
+  bind_port: 7946
+  packet_dial_timeout: "5s"
+  packet_write_timeout: "5s"
+
</span> # -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
 
 # @default -- See values.yaml
<span class="p">@@ -1135,7 +1166,9 @@</span> config: |
     complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
     {{- end }}
   memberlist:
<span class="gd">-    abort_if_cluster_join_fails: false
</span><span class="gi">+    {{- with .Values.memberlist }}
+      {{- toYaml . | nindent 2 }}
+    {{- end }}
</span>     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="err">
</span></code></pre></div></div> <h2 id="1412"> <a href="#1412" class="anchor-heading" aria-labelledby="1412"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.12 </h2> <p><strong>Release date:</strong> 2023-07-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch main into add-service-labels</li> <li>Merge branch main into patch-1</li> </ul> <h3 id="default-value-changes-47"> <a href="#default-value-changes-47" class="anchor-heading" aria-labelledby="default-value-changes-47"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1411"> <a href="#1411" class="anchor-heading" aria-labelledby="1411"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.11 </h2> <p><strong>Release date:</strong> 2023-07-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> </ul> <h3 id="default-value-changes-48"> <a href="#default-value-changes-48" class="anchor-heading" aria-labelledby="default-value-changes-48"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="148"> <a href="#148" class="anchor-heading" aria-labelledby="148"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.8 </h2> <p><strong>Release date:</strong> 2023-07-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>create service-federation-frontend service only if enabled</li> </ul> <h3 id="default-value-changes-49"> <a href="#default-value-changes-49" class="anchor-heading" aria-labelledby="default-value-changes-49"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1410"> <a href="#1410" class="anchor-heading" aria-labelledby="1410"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.10 </h2> <p><strong>Release date:</strong> 2023-07-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> </ul> <h3 id="default-value-changes-50"> <a href="#default-value-changes-50" class="anchor-heading" aria-labelledby="default-value-changes-50"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="149"> <a href="#149" class="anchor-heading" aria-labelledby="149"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.9 </h2> <p><strong>Release date:</strong> 2023-07-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Use the recommended minio chart repo</li> <li>Merge pull request #2496 from jfcoz/tempo_topology</li> </ul> <h3 id="default-value-changes-51"> <a href="#default-value-changes-51" class="anchor-heading" aria-labelledby="default-value-changes-51"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index d211d190..be9086df 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -150,7 +150,7 @@</span> ingester:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -171,7 +171,7 @@</span> ingester:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -255,7 +255,7 @@</span> metricsGenerator:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -275,7 +275,7 @@</span> metricsGenerator:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for metrics-generator pods
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
<span class="p">@@ -392,7 +392,7 @@</span> distributor:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -412,7 +412,7 @@</span> distributor:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -554,7 +554,7 @@</span> querier:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -574,7 +574,7 @@</span> querier:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier" "memberlist" true) | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -735,7 +735,7 @@</span> queryFrontend:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -755,7 +755,7 @@</span> queryFrontend:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -1270,7 +1270,7 @@</span> memcached:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1290,7 +1290,7 @@</span> memcached:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   service:
     # -- Annotations for memcached service
     annotations: {}
<span class="p">@@ -1523,7 +1523,7 @@</span> gateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1543,7 +1543,7 @@</span> gateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -1784,7 +1784,7 @@</span> adminApi:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1805,7 +1805,7 @@</span> adminApi:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   # Pod Disruption Budget
   podDisruptionBudget: {}
<span class="p">@@ -1872,7 +1872,7 @@</span> enterpriseGateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1893,7 +1893,7 @@</span> enterpriseGateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   securityContext:
     {}
<span class="err">
</span></code></pre></div></div> <h2 id="148-1"> <a href="#148-1" class="anchor-heading" aria-labelledby="148-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.8 </h2> <p><strong>Release date:</strong> 2023-07-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version, generate docs</li> </ul> <h3 id="default-value-changes-52"> <a href="#default-value-changes-52" class="anchor-heading" aria-labelledby="default-value-changes-52"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="143"> <a href="#143" class="anchor-heading" aria-labelledby="143"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.3 </h2> <p><strong>Release date:</strong> 2023-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update version and docs</li> </ul> <h3 id="default-value-changes-53"> <a href="#default-value-changes-53" class="anchor-heading" aria-labelledby="default-value-changes-53"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="149-1"> <a href="#149-1" class="anchor-heading" aria-labelledby="149-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.9 </h2> <p><strong>Release date:</strong> 2023-07-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version</li> <li>Update docs</li> <li>Remove ingress and grpc related networking</li> <li>Address PR comments</li> <li>Update charts/tempo-distributed/values.yaml</li> <li>Remove any jaeger reference from the enterpriseFederationFrontend in the values.yaml</li> <li>Remove federation-frontend after rename. Update notes to list federation-frontend as installed component.</li> <li>support metricRelabelings for tempo-distributed serviceMonitors</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Update readme to reference new runtime-config path</li> <li>Remove extra {{end}} block</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> regenerate readme</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Move overrides configuration to separate runtime configmap</li> <li>Update README.md</li> <li>Update charts/tempo-distributed/templates/gateway/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/querier/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/ingester/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/query-frontend/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/distributor/hpa.yaml</li> <li>Add support for HPA behavior customization to Tempo</li> <li>Update tempo-distributed to have metrics_ingestion_time_range_slack</li> <li>fix tempo distributor deployment otlp-http port</li> </ul> <h3 id="default-value-changes-54"> <a href="#default-value-changes-54" class="anchor-heading" aria-labelledby="default-value-changes-54"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 0d0b3e47..d211d190 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,9 @@</span> configStorageType: ConfigMap
 # -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
 externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
 
<span class="gi">+# -- Name of the Secret or ConfigMap that contains the runtime configuration (used for naming even if config is internal).
+externalRuntimeConfigName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "runtime") }}'
+
</span> # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="p">@@ -110,6 +113,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -323,6 +328,7 @@</span> metricsGenerator:
       # -- A list of remote write endpoints.
       # -- https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
       remote_write: []
<span class="gi">+    metrics_ingestion_time_range_slack: 30s
</span>   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="p">@@ -342,6 +348,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -511,6 +519,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -657,6 +667,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -795,7 +807,7 @@</span> enterpriseFederationFrontend:
     tag: null
   service:
     # -- Port of the federation-frontend service
<span class="gd">-    port: 16686
</span><span class="gi">+    port: 3100
</span>     # -- Annotations for enterpriseFederationFrontend service
     annotations: {}
     # -- Type of service for the enterpriseFederationFrontend
<span class="p">@@ -804,28 +816,6 @@</span> enterpriseFederationFrontend:
     loadBalancerIP: ""
     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
<span class="gd">-  serviceDiscovery:
-    # -- Annotations for enterpriseFederationFrontendDiscovery service
-    annotations: {}
-  ingress:
-    # -- Specifies whether an ingress for the Jaeger should be created
-    enabled: false
-    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
-    # ingressClassName: nginx
-    # -- Annotations for the Jaeger ingress
-    annotations: {}
-    # -- Hosts configuration for the Jaeger ingress
-    hosts:
-      - host: query.tempo.example.com
-        paths:
-          - path: /
-            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
-            # pathType: Prefix
-    # -- TLS configuration for the Jaeger ingress
-    tls:
-      - secretName: tempo-query-tls
-        hosts:
-          - query.tempo.example.com
</span>   # -- The name of the PriorityClass for federation-frontend pods
   priorityClassName: null
   # -- Labels for enterpriseFederationFrontend pods
<span class="p">@@ -875,10 +865,6 @@</span> enterpriseFederationFrontend:
   extraVolumeMounts: []
   # -- Extra volumes for federation-frontend deployment
   extraVolumes: []
<span class="gd">-  # -- Adds the appProtocol field to the enterpriseFederationFrontend service. This allows enterpriseFederationFrontend to work with istio protocol selection.
-  appProtocol:
-    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
-    grpc: null
</span> 
 multitenancyEnabled: false
 
<span class="p">@@ -1015,7 +1001,7 @@</span> config: |
     ring:
       kvstore:
         store: memberlist
<span class="gd">-  {{- if .Values.enterpriseFederationFrontend.enabled }}
</span><span class="gi">+  {{- if and .Values.enterprise.enabled .Values.enterpriseFederationFrontend.enabled }}
</span>   federation:
     proxy_targets:
       {{- toYaml .Values.enterpriseFederationFrontend.proxy_targets | nindent 6 }}
<span class="p">@@ -1031,6 +1017,7 @@</span> config: |
       {{- toYaml .Values.metricsGenerator.config.storage | nindent 6 }}
     registry:
       {{- toYaml .Values.metricsGenerator.config.registry | nindent 6 }}
<span class="gi">+    metrics_ingestion_time_range_slack: {{ .Values.metricsGenerator.config.metrics_ingestion_time_range_slack }}
</span>   {{- end }}
   distributor:
     ring:
<span class="p">@@ -1239,7 +1226,7 @@</span> storage:
 
 # Global overrides
 global_overrides:
<span class="gd">-  per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+  per_tenant_override_config: /runtime-config/overrides.yaml
</span>   metrics_generator_processors:
     - service-graphs
     - span-metrics
<span class="p">@@ -1493,6 +1480,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="148-2"> <a href="#148-2" class="anchor-heading" aria-labelledby="148-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.8 </h2> <p><strong>Release date:</strong> 2023-06-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version</li> <li>Update values and docs after renaming federation-frontend</li> <li>Mark federation-frontend as enterprise component by prefixing it</li> <li>Remove unused ports from services</li> <li>Update docs after version bump</li> </ul> <h3 id="default-value-changes-55"> <a href="#default-value-changes-55" class="anchor-heading" aria-labelledby="default-value-changes-55"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index dd88f089..0d0b3e47 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -758,7 +758,8 @@</span> queryFrontend:
     grpc: null
 
 # Configuration for the federation-frontend
<span class="gd">-federationFrontend:
</span><span class="gi">+# Can only be enabled if enterprise.enabled is true - requires license.
+enterpriseFederationFrontend:
</span>   # -- Specifies whether a federation-frontend should be deployed
   enabled: false
   # -- Number of replicas for the federation-frontend
<span class="p">@@ -795,16 +796,16 @@</span> federationFrontend:
   service:
     # -- Port of the federation-frontend service
     port: 16686
<span class="gd">-    # -- Annotations for federationFrontend service
</span><span class="gi">+    # -- Annotations for enterpriseFederationFrontend service
</span>     annotations: {}
<span class="gd">-    # -- Type of service for the federationFrontend
</span><span class="gi">+    # -- Type of service for the enterpriseFederationFrontend
</span>     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
     loadBalancerIP: ""
     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
   serviceDiscovery:
<span class="gd">-    # -- Annotations for federationFrontendDiscovery service
</span><span class="gi">+    # -- Annotations for enterpriseFederationFrontendDiscovery service
</span>     annotations: {}
   ingress:
     # -- Specifies whether an ingress for the Jaeger should be created
<span class="p">@@ -827,7 +828,7 @@</span> federationFrontend:
           - query.tempo.example.com
   # -- The name of the PriorityClass for federation-frontend pods
   priorityClassName: null
<span class="gd">-  # -- Labels for federationFrontend pods
</span><span class="gi">+  # -- Labels for enterpriseFederationFrontend pods
</span>   podLabels: {}
   # -- Annotations for federation-frontend pods
   podAnnotations: {}
<span class="p">@@ -874,7 +875,7 @@</span> federationFrontend:
   extraVolumeMounts: []
   # -- Extra volumes for federation-frontend deployment
   extraVolumes: []
<span class="gd">-  # -- Adds the appProtocol field to the federationFrontend service. This allows federationFrontend to work with istio protocol selection.
</span><span class="gi">+  # -- Adds the appProtocol field to the enterpriseFederationFrontend service. This allows enterpriseFederationFrontend to work with istio protocol selection.
</span>   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
     grpc: null
<span class="p">@@ -1014,10 +1015,10 @@</span> config: |
     ring:
       kvstore:
         store: memberlist
<span class="gd">-  {{- if .Values.federationFrontend.enabled }}
</span><span class="gi">+  {{- if .Values.enterpriseFederationFrontend.enabled }}
</span>   federation:
     proxy_targets:
<span class="gd">-      {{- toYaml .Values.federationFrontend.proxy_targets | nindent 6 }}
</span><span class="gi">+      {{- toYaml .Values.enterpriseFederationFrontend.proxy_targets | nindent 6 }}
</span>   {{- end }}
   {{- if .Values.metricsGenerator.enabled }}
   metrics_generator:
<span class="err">
</span></code></pre></div></div> <h2 id="143-1"> <a href="#143-1" class="anchor-heading" aria-labelledby="143-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.3 </h2> <p><strong>Release date:</strong> 2023-06-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Version bump</li> <li>Update the docs</li> </ul> <h3 id="default-value-changes-56"> <a href="#default-value-changes-56" class="anchor-heading" aria-labelledby="default-value-changes-56"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="142"> <a href="#142" class="anchor-heading" aria-labelledby="142"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.2 </h2> <p><strong>Release date:</strong> 2023-06-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add federation frontend</li> </ul> <h3 id="default-value-changes-57"> <a href="#default-value-changes-57" class="anchor-heading" aria-labelledby="default-value-changes-57"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 63b43d90..dd88f089 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -752,7 +752,129 @@</span> queryFrontend:
   extraVolumeMounts: []
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
<span class="gd">-  # -- Adds the appProtocol field to the queriyFrontend service. This allows queriyFrontend to work with istio protocol selection.
</span><span class="gi">+  # -- Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
+
+# Configuration for the federation-frontend
+federationFrontend:
+  # -- Specifies whether a federation-frontend should be deployed
+  enabled: false
+  # -- Number of replicas for the federation-frontend
+  replicas: 1
+  # proxy_targets:
+  #   - name: own-data-center
+  #     url: http://get/tempo
+  #   - name: grafana-cloud
+  #     url: https://tempo-us-central1.grafana.net/tempo
+  #     basic_auth:
+  #       username: &lt;instance-id&gt;
+  #       password: &lt;token&gt;
+  proxy_targets: []
+  autoscaling:
+    # -- Enable autoscaling for the federation-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the federation-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the federation-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the federation-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the federation-frontend
+    targetMemoryUtilizationPercentage:
+  image:
+    # -- The Docker registry for the federation-frontend image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
+    # -- Docker image repository for the federation-frontend image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the federation-frontend image. Overrides `tempo.image.tag`
+    tag: null
+  service:
+    # -- Port of the federation-frontend service
+    port: 16686
+    # -- Annotations for federationFrontend service
+    annotations: {}
+    # -- Type of service for the federationFrontend
+    type: ClusterIP
+    # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
+    loadBalancerIP: ""
+    # -- If type is LoadBalancer limit incoming traffic from IPs.
+    loadBalancerSourceRanges: []
+  serviceDiscovery:
+    # -- Annotations for federationFrontendDiscovery service
+    annotations: {}
+  ingress:
+    # -- Specifies whether an ingress for the Jaeger should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: nginx
+    # -- Annotations for the Jaeger ingress
+    annotations: {}
+    # -- Hosts configuration for the Jaeger ingress
+    hosts:
+      - host: query.tempo.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the Jaeger ingress
+    tls:
+      - secretName: tempo-query-tls
+        hosts:
+          - query.tempo.example.com
+  # -- The name of the PriorityClass for federation-frontend pods
+  priorityClassName: null
+  # -- Labels for federationFrontend pods
+  podLabels: {}
+  # -- Annotations for federation-frontend pods
+  podAnnotations: {}
+  # -- Additional CLI args for the federation-frontend
+  extraArgs: []
+  # -- Environment variables to add to the federation-frontend pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the federation-frontend pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the federation-frontend
+  resources: {}
+  # -- Grace period to allow the federation-frontend to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- topologySpread for federation-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 6 }}
+  # -- Affinity for federation-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "federation-frontend") | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for federation-frontend pods
+  nodeSelector: {}
+  # -- Tolerations for federation-frontend pods
+  tolerations: []
+  # -- Extra volumes for federation-frontend pods
+  extraVolumeMounts: []
+  # -- Extra volumes for federation-frontend deployment
+  extraVolumes: []
+  # -- Adds the appProtocol field to the federationFrontend service. This allows federationFrontend to work with istio protocol selection.
</span>   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
     grpc: null
<span class="p">@@ -892,6 +1014,11 @@</span> config: |
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.federationFrontend.enabled }}
+  federation:
+    proxy_targets:
+      {{- toYaml .Values.federationFrontend.proxy_targets | nindent 6 }}
+  {{- end }}
</span>   {{- if .Values.metricsGenerator.enabled }}
   metrics_generator:
     ring:
<span class="err">
</span></code></pre></div></div> <h2 id="148-3"> <a href="#148-3" class="anchor-heading" aria-labelledby="148-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.8 </h2> <p><strong>Release date:</strong> 2023-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Replace deprecated failure-domain topology</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-58"> <a href="#default-value-changes-58" class="anchor-heading" aria-labelledby="default-value-changes-58"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index b5199f42..861f74cc 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -150,7 +150,7 @@</span> ingester:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -171,7 +171,7 @@</span> ingester:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -255,7 +255,7 @@</span> metricsGenerator:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -275,7 +275,7 @@</span> metricsGenerator:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for metrics-generator pods
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
<span class="p">@@ -392,7 +392,7 @@</span> distributor:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -412,7 +412,7 @@</span> distributor:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -554,7 +554,7 @@</span> querier:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -574,7 +574,7 @@</span> querier:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier" "memberlist" true) | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -735,7 +735,7 @@</span> queryFrontend:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -755,7 +755,7 @@</span> queryFrontend:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -1168,7 +1168,7 @@</span> memcached:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1188,7 +1188,7 @@</span> memcached:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   service:
     # -- Annotations for memcached service
     annotations: {}
<span class="p">@@ -1421,7 +1421,7 @@</span> gateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1441,7 +1441,7 @@</span> gateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -1682,7 +1682,7 @@</span> adminApi:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1703,7 +1703,7 @@</span> adminApi:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   # Pod Disruption Budget
   podDisruptionBudget: {}
<span class="p">@@ -1770,7 +1770,7 @@</span> enterpriseGateway:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: topology.kubernetes.io/zone
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="p">@@ -1791,7 +1791,7 @@</span> enterpriseGateway:
             labelSelector:
               matchLabels:
                 {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 12 }}
<span class="gd">-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+            topologyKey: topology.kubernetes.io/zone
</span> 
   securityContext:
     {}
<span class="err">
</span></code></pre></div></div> <h2 id="147"> <a href="#147" class="anchor-heading" aria-labelledby="147"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.7 </h2> <p><strong>Release date:</strong> 2023-06-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into main</li> </ul> <h3 id="default-value-changes-59"> <a href="#default-value-changes-59" class="anchor-heading" aria-labelledby="default-value-changes-59"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 63b43d90..b5199f42 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,9 @@</span> configStorageType: ConfigMap
 # -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
 externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
 
<span class="gi">+# -- Name of the Secret or ConfigMap that contains the runtime configuration (used for naming even if config is internal).
+externalRuntimeConfigName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "runtime") }}'
+
</span> # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="p">@@ -110,6 +113,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -323,6 +328,7 @@</span> metricsGenerator:
       # -- A list of remote write endpoints.
       # -- https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
       remote_write: []
<span class="gi">+    metrics_ingestion_time_range_slack: 30s
</span>   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="p">@@ -342,6 +348,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -511,6 +519,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -657,6 +667,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -903,6 +915,7 @@</span> config: |
       {{- toYaml .Values.metricsGenerator.config.storage | nindent 6 }}
     registry:
       {{- toYaml .Values.metricsGenerator.config.registry | nindent 6 }}
<span class="gi">+    metrics_ingestion_time_range_slack: {{ .Values.metricsGenerator.config.metrics_ingestion_time_range_slack }}
</span>   {{- end }}
   distributor:
     ring:
<span class="p">@@ -1111,7 +1124,7 @@</span> storage:
 
 # Global overrides
 global_overrides:
<span class="gd">-  per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+  per_tenant_override_config: /runtime-config/overrides.yaml
</span>   metrics_generator_processors:
     - service-graphs
     - span-metrics
<span class="p">@@ -1365,6 +1378,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="143-2"> <a href="#143-2" class="anchor-heading" aria-labelledby="143-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.3 </h2> <p><strong>Release date:</strong> 2023-06-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>add docs for generated version</li> </ul> <h3 id="default-value-changes-60"> <a href="#default-value-changes-60" class="anchor-heading" aria-labelledby="default-value-changes-60"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="146"> <a href="#146" class="anchor-heading" aria-labelledby="146"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.6 </h2> <p><strong>Release date:</strong> 2023-06-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>support metricRelabelings for tempo-distributed serviceMonitors</li> </ul> <h3 id="default-value-changes-61"> <a href="#default-value-changes-61" class="anchor-heading" aria-labelledby="default-value-changes-61"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="145"> <a href="#145" class="anchor-heading" aria-labelledby="145"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.5 </h2> <p><strong>Release date:</strong> 2023-06-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Bump chart version to 1.4.5</li> <li>Merge pull request #2462 from TaylorMutch/tempo-runtime-config</li> <li>Update README.md</li> <li>Merge branch main into patch-1</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-62"> <a href="#default-value-changes-62" class="anchor-heading" aria-labelledby="default-value-changes-62"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c7efa181..b5199f42 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,9 @@</span> configStorageType: ConfigMap
 # -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
 externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
 
<span class="gi">+# -- Name of the Secret or ConfigMap that contains the runtime configuration (used for naming even if config is internal).
+externalRuntimeConfigName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "runtime") }}'
+
</span> # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="p">@@ -110,6 +113,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -343,6 +348,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -512,6 +519,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -658,6 +667,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -1113,7 +1124,7 @@</span> storage:
 
 # Global overrides
 global_overrides:
<span class="gd">-  per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+  per_tenant_override_config: /runtime-config/overrides.yaml
</span>   metrics_generator_processors:
     - service-graphs
     - span-metrics
<span class="p">@@ -1367,6 +1378,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="144"> <a href="#144" class="anchor-heading" aria-labelledby="144"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.4 </h2> <p><strong>Release date:</strong> 2023-06-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-63"> <a href="#default-value-changes-63" class="anchor-heading" aria-labelledby="default-value-changes-63"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="143-3"> <a href="#143-3" class="anchor-heading" aria-labelledby="143-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.3 </h2> <p><strong>Release date:</strong> 2023-06-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-64"> <a href="#default-value-changes-64" class="anchor-heading" aria-labelledby="default-value-changes-64"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 63b43d90..c7efa181 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -323,6 +323,7 @@</span> metricsGenerator:
       # -- A list of remote write endpoints.
       # -- https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
       remote_write: []
<span class="gi">+    metrics_ingestion_time_range_slack: 30s
</span>   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="p">@@ -903,6 +904,7 @@</span> config: |
       {{- toYaml .Values.metricsGenerator.config.storage | nindent 6 }}
     registry:
       {{- toYaml .Values.metricsGenerator.config.registry | nindent 6 }}
<span class="gi">+    metrics_ingestion_time_range_slack: {{ .Values.metricsGenerator.config.metrics_ingestion_time_range_slack }}
</span>   {{- end }}
   distributor:
     ring:
<span class="err">
</span></code></pre></div></div> <h2 id="144-1"> <a href="#144-1" class="anchor-heading" aria-labelledby="144-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.4 </h2> <p><strong>Release date:</strong> 2023-06-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Update readme to reference new runtime-config path</li> <li>Remove extra {{end}} block</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> regenerate readme</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Move overrides configuration to separate runtime configmap</li> <li>Merge branch main into tempo-hpa-behavior</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-65"> <a href="#default-value-changes-65" class="anchor-heading" aria-labelledby="default-value-changes-65"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3847a89c..351c7c94 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,9 @@</span> configStorageType: ConfigMap
 # -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
 externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
 
<span class="gi">+# -- Name of the Secret or ConfigMap that contains the runtime configuration (used for naming even if config is internal).
+externalRuntimeConfigName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "runtime") }}'
+
</span> # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="p">@@ -1119,7 +1122,7 @@</span> storage:
 
 # Global overrides
 global_overrides:
<span class="gd">-  per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+  per_tenant_override_config: /runtime-config/overrides.yaml
</span>   metrics_generator_processors:
     - service-graphs
     - span-metrics
<span class="err">
</span></code></pre></div></div> <h2 id="143-4"> <a href="#143-4" class="anchor-heading" aria-labelledby="143-4"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.3 </h2> <p><strong>Release date:</strong> 2023-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Update charts/tempo-distributed/templates/gateway/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/querier/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/ingester/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/query-frontend/hpa.yaml</li> <li>Update charts/tempo-distributed/templates/distributor/hpa.yaml</li> <li>fix tempo distributor deployment otlp-http port</li> <li>Update tempo-distributed to have metrics_ingestion_time_range_slack</li> <li>revert Capabilities.APIVersions.Has check</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Service labels for distributor and query-frontend</li> <li>run helm-docs</li> <li>wont match policy/v1/PodDisruptionBudget</li> </ul> <h3 id="default-value-changes-66"> <a href="#default-value-changes-66" class="anchor-heading" aria-labelledby="default-value-changes-66"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 63b43d90..3847a89c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -110,6 +110,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -342,6 +344,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -511,6 +515,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -657,6 +663,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -1365,6 +1373,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="142-1"> <a href="#142-1" class="anchor-heading" aria-labelledby="142-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.2 </h2> <p><strong>Release date:</strong> 2023-05-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> </ul> <h3 id="default-value-changes-67"> <a href="#default-value-changes-67" class="anchor-heading" aria-labelledby="default-value-changes-67"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="141"> <a href="#141" class="anchor-heading" aria-labelledby="141"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.1 </h2> <p><strong>Release date:</strong> 2023-05-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix typo</li> </ul> <h3 id="default-value-changes-68"> <a href="#default-value-changes-68" class="anchor-heading" aria-labelledby="default-value-changes-68"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="142-2"> <a href="#142-2" class="anchor-heading" aria-labelledby="142-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.2 </h2> <p><strong>Release date:</strong> 2023-05-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into tempo-hpa-behavior</li> </ul> <h3 id="default-value-changes-69"> <a href="#default-value-changes-69" class="anchor-heading" aria-labelledby="default-value-changes-69"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 63b43d90..3847a89c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -110,6 +110,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -342,6 +344,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -511,6 +515,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -657,6 +663,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -1365,6 +1373,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="141-1"> <a href="#141-1" class="anchor-heading" aria-labelledby="141-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.1 </h2> <p><strong>Release date:</strong> 2023-05-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version &amp; regenerate README.md</li> <li>add <code class="language-plaintext highlighter-rouge">publishNotReadyAddresses: true</code> to query-frontend-discovery</li> <li>Update README.md</li> <li>up chart version</li> </ul> <h3 id="default-value-changes-70"> <a href="#default-value-changes-70" class="anchor-heading" aria-labelledby="default-value-changes-70"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8444f0a9..63b43d90 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -970,12 +970,6 @@</span> config: |
     {{- if .Values.distributor.config.extend_writes }}
     extend_writes: {{ .Values.distributor.config.extend_writes }}
     {{- end }}
<span class="gd">-    {{- if .Values.distributor.config.search_tags_deny_list }}
-    search_tags_deny_list:
-      {{- with .Values.distributor.config.search_tags_deny_list }}
-      {{- toYaml . | nindent 4 }}
-      {{- end }}
-    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend-discovery") }}:9095
<span class="p">@@ -1622,7 +1616,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: v2.0.1
</span><span class="gi">+    tag: v2.1.0
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="err">
</span></code></pre></div></div> <h2 id="140"> <a href="#140" class="anchor-heading" aria-labelledby="140"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.4.0 </h2> <p><strong>Release date:</strong> 2023-05-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.1&amp;color=success" alt="AppVersion: 2.1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add support for HPA behavior customization to Tempo</li> <li>Update tempo-distributed</li> <li>fix KubeVersion check for topologySpreadConstraints in tempo-distributed</li> <li>use tempo 2.1.1</li> <li>Add upgrade to 1.3 remarks in readme</li> <li>update docs</li> </ul> <h3 id="default-value-changes-71"> <a href="#default-value-changes-71" class="anchor-heading" aria-labelledby="default-value-changes-71"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8444f0a9..3642e6db 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -110,6 +110,8 @@</span> ingester:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the ingester
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the ingester
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="p">@@ -342,6 +344,8 @@</span> distributor:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the distributor
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the distributor
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="p">@@ -511,6 +515,8 @@</span> querier:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the querier
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the querier
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="p">@@ -657,6 +663,8 @@</span> queryFrontend:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the query-frontend
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the query-frontend
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="p">@@ -1371,6 +1379,8 @@</span> gateway:
     minReplicas: 1
     # -- Maximum autoscaling replicas for the gateway
     maxReplicas: 3
<span class="gi">+    # -- Autoscaling behavior configuration for the gateway
+    behavior: {}
</span>     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="130-1"> <a href="#130-1" class="anchor-heading" aria-labelledby="130-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.3.0 </h2> <p><strong>Release date:</strong> 2023-04-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>use tempo 2.1, remove search_tags_deny_list</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add ingress for jaeger ui in tempo distributed chart - fix</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add ingress for jaeger ui in tempo distributed chart</li> <li>change value type</li> </ul> <h3 id="default-value-changes-72"> <a href="#default-value-changes-72" class="anchor-heading" aria-labelledby="default-value-changes-72"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ccbb8402..8444f0a9 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -424,8 +424,6 @@</span> distributor:
       filter_by_status_error: false
     # -- Disables write extension with inactive ingesters
     extend_writes: null
<span class="gd">-    # -- List of tags that will not be extracted from trace data for search lookups
-    search_tags_deny_list: []
</span>   # -- Adds the appProtocol field to the distributor service. This allows distributor to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -673,6 +671,8 @@</span> queryFrontend:
     # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
     tag: null
   service:
<span class="gi">+    # -- Port of the query-frontend service
+    port: 16686
</span>     # -- Annotations for queryFrontend service
     annotations: {}
     # -- Type of service for the queryFrontend
<span class="p">@@ -684,6 +684,25 @@</span> queryFrontend:
   serviceDiscovery:
     # -- Annotations for queryFrontendDiscovery service
     annotations: {}
<span class="gi">+  ingress:
+    # -- Specifies whether an ingress for the Jaeger should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: nginx
+    # -- Annotations for the Jaeger ingress
+    annotations: {}
+    # -- Hosts configuration for the Jaeger ingress
+    hosts:
+      - host: query.tempo.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the Jaeger ingress
+    tls:
+      - secretName: tempo-query-tls
+        hosts:
+          - query.tempo.example.com
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Labels for queryFrontend pods
<span class="err">
</span></code></pre></div></div> <h2 id="1211"> <a href="#1211" class="anchor-heading" aria-labelledby="1211"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.11 </h2> <p><strong>Release date:</strong> 2023-04-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>update docs</li> </ul> <h3 id="default-value-changes-73"> <a href="#default-value-changes-73" class="anchor-heading" aria-labelledby="default-value-changes-73"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="1210"> <a href="#1210" class="anchor-heading" aria-labelledby="1210"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.10 </h2> <p><strong>Release date:</strong> 2023-04-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch grafana:main into feat/tempo-memberlist-config</li> </ul> <h3 id="default-value-changes-74"> <a href="#default-value-changes-74" class="anchor-heading" aria-labelledby="default-value-changes-74"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 00c43389..1bbcf4a7 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1052,6 +1052,8 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      block:
+        version: {{.Values.storage.trace.block.version}}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1107,6 +1109,10 @@</span> server:
 #       storage_account_key:
 storage:
   trace:
<span class="gi">+    # Settings for the block storage backend and buckets.
+    block:
+      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: vParquet
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="err">
</span></code></pre></div></div> <h2 id="128"> <a href="#128" class="anchor-heading" aria-labelledby="128"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.8 </h2> <p><strong>Release date:</strong> 2023-04-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat: add memberlist values</li> </ul> <h3 id="default-value-changes-75"> <a href="#default-value-changes-75" class="anchor-heading" aria-labelledby="default-value-changes-75"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 934968fc..00c43389 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -786,6 +786,28 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gi">+# -- Memberlist configuration. Please refer to https://grafana.com/docs/tempo/latest/configuration/#memberlist
+memberlist:
+  node_name: ""
+  randomize_node_name: true
+  stream_timeout: "10s"
+  retransmit_factor: 2
+  pull_push_interval: "30s"
+  gossip_interval: "1s"
+  gossip_nodes: 2
+  gossip_to_dead_nodes_time: "30s"
+  min_join_backoff: "1s"
+  max_join_backoff: "1m"
+  max_join_retries: 10
+  abort_if_cluster_join_fails: false
+  rejoin_interval: "0s"
+  left_ingesters_timeout: "5m"
+  leave_timeout: "5s"
+  bind_addr: ""
+  bind_port: 7946
+  packet_dial_timeout: "5s"
+  packet_write_timeout: "5s"
+
</span> # -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
 
 # @default -- See values.yaml
<span class="p">@@ -1007,7 +1029,9 @@</span> config: |
     complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
     {{- end }}
   memberlist:
<span class="gd">-    abort_if_cluster_join_fails: false
</span><span class="gi">+    {{- with .Values.memberlist }}
+      {{- toYaml . | nindent 2 }}
+    {{- end }}
</span>     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="err">
</span></code></pre></div></div> <h2 id="1210-1"> <a href="#1210-1" class="anchor-heading" aria-labelledby="1210-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.10 </h2> <p><strong>Release date:</strong> 2023-04-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(tempo-distributed): storage.trace.block.version config support</li> </ul> <h3 id="default-value-changes-76"> <a href="#default-value-changes-76" class="anchor-heading" aria-labelledby="default-value-changes-76"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 934968fc..ccbb8402 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1028,6 +1028,8 @@</span> config: |
     http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
   storage:
     trace:
<span class="gi">+      block:
+        version: {{.Values.storage.trace.block.version}}
</span>       backend: {{.Values.storage.trace.backend}}
       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
<span class="p">@@ -1083,6 +1085,10 @@</span> server:
 #       storage_account_key:
 storage:
   trace:
<span class="gi">+    # Settings for the block storage backend and buckets.
+    block:
+      # -- The supported block versions are v2 and vParquet, as specified in https://grafana.com/docs/tempo/latest/configuration/parquet/
+      version: vParquet
</span>     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
   # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
<span class="err">
</span></code></pre></div></div> <h2 id="129"> <a href="#129" class="anchor-heading" aria-labelledby="129"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.9 </h2> <p><strong>Release date:</strong> 2023-04-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> wire up priorityClassName in metrics-generator</li> <li>Fix lint-test</li> <li>Fix linting errors</li> </ul> <h3 id="default-value-changes-77"> <a href="#default-value-changes-77" class="anchor-heading" aria-labelledby="default-value-changes-77"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7f166374..934968fc 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -500,7 +500,7 @@</span> compactor:
     dnsConfig:
       options:
         - name: ndots
<span class="gd">-          value: "3" #This is required for Azure Kubernetes Service (AKS) https://github.com/grafana/tempo/issues/1462
</span><span class="gi">+          value: "3"    # This is required for Azure Kubernetes Service (AKS) https://github.com/grafana/tempo/issues/1462
</span> 
 # Configuration for the querier
 querier:
<span class="err">
</span></code></pre></div></div> <h2 id="128-1"> <a href="#128-1" class="anchor-heading" aria-labelledby="128-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.8 </h2> <p><strong>Release date:</strong> 2023-03-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Add possibility to override DNS config for tempo distributed compactor</li> </ul> <h3 id="default-value-changes-78"> <a href="#default-value-changes-78" class="anchor-heading" aria-labelledby="default-value-changes-78"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8c41f724..7f166374 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -431,6 +431,7 @@</span> distributor:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
     grpc: null
 
<span class="gi">+# Configuration for the compactor
</span> compactor:
   # -- Number of replicas for the compactor
   replicas: 1
<span class="p">@@ -494,6 +495,12 @@</span> compactor:
   service:
     # -- Annotations for compactor service
     annotations: {}
<span class="gi">+  dnsConfigOverides:
+    enabled: false
+    dnsConfig:
+      options:
+        - name: ndots
+          value: "3" #This is required for Azure Kubernetes Service (AKS) https://github.com/grafana/tempo/issues/1462
</span> 
 # Configuration for the querier
 querier:
<span class="err">
</span></code></pre></div></div> <h2 id="127"> <a href="#127" class="anchor-heading" aria-labelledby="127"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.7 </h2> <p><strong>Release date:</strong> 2023-03-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Do not mandate use of both metrics_generator_processors</li> </ul> <h3 id="default-value-changes-79"> <a href="#default-value-changes-79" class="anchor-heading" aria-labelledby="default-value-changes-79"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8d8b595d..8c41f724 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1007,8 +1007,9 @@</span> config: |
     {{- toYaml .Values.global_overrides | nindent 2 }}
     {{- if .Values.metricsGenerator.enabled }}
     metrics_generator_processors:
<span class="gd">-    - service-graphs
-    - span-metrics
</span><span class="gi">+    {{- range .Values.global_overrides.metrics_generator_processors }}
+    - {{ . }}
+    {{- end }}
</span>     {{- end }}
   server:
     http_listen_port: {{ .Values.server.httpListenPort }}
<span class="p">@@ -1085,6 +1086,9 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /conf/overrides.yaml
<span class="gi">+  metrics_generator_processors:
+    - service-graphs
+    - span-metrics
</span> 
 # Per tenants overrides
 overrides: |
<span class="err">
</span></code></pre></div></div> <h2 id="126"> <a href="#126" class="anchor-heading" aria-labelledby="126"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.6 </h2> <p><strong>Release date:</strong> 2023-03-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>added more structured configs to the tempo distributed chart + conditional config of memcached</li> <li>README regenerated with helm-docs</li> </ul> <h3 id="default-value-changes-80"> <a href="#default-value-changes-80" class="anchor-heading" aria-labelledby="default-value-changes-80"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f9b1f85d..8d8b595d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -572,6 +572,9 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+    trace_by_id:
+      # -- Timeout for trace lookup requests
+      query_timeout: 10s
</span>     search:
       # -- A list of external endpoints that the querier will use to offload backend search requests
       external_endpoints: []
<span class="p">@@ -625,11 +628,23 @@</span> queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
   config:
<span class="gi">+    # -- Number of times to retry a request sent to a querier
+    max_retries: 2
+    # -- Number of block queries that are tolerated to error before considering the entire query as failed. Numbers greater than 0 make possible for a read to return partial results
+    tolerate_failed_blocks: 0
</span>     search:
       # -- The number of concurrent jobs to execute when searching the backend
       concurrent_jobs: 1000
       # -- The target number of bytes for each job to handle when performing a backend search
       target_bytes_per_job: 104857600
<span class="gi">+    # -- Trace by ID lookup configuration
+    trace_by_id:
+      # -- The number of shards to split a trace by id query into.
+      query_shards: 50
+      # -- If set to a non-zero value, a second request will be issued at the provided duration. Recommended to be set to p99 of search requests to reduce long-tail latency.
+      hedge_requests_at: 2s
+      # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set. Must be greater than 0.
+      hedge_requests_up_to: 2
</span>   autoscaling:
     # -- Enable autoscaling for the query-frontend
     enabled: false
<span class="p">@@ -942,6 +957,8 @@</span> config: |
       grpc_client_config:
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
       {{- end }}
<span class="gi">+    trace_by_id:
+      query_timeout: {{ .Values.querier.config.trace_by_id.query_timeout }}
</span>     search:
       external_endpoints: {{- toYaml .Values.querier.config.search.external_endpoints | nindent 6 }}
       query_timeout: {{ .Values.querier.config.search.query_timeout }}
<span class="p">@@ -950,9 +967,15 @@</span> config: |
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
     max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
   query_frontend:
<span class="gi">+    max_retries: {{ .Values.queryFrontend.config.max_retries }}
+    tolerate_failed_blocks: {{ .Values.queryFrontend.config.tolerate_failed_blocks }}
</span>     search:
       target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
       concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
<span class="gi">+    trace_by_id:
+      query_shards: {{ .Values.queryFrontend.config.trace_by_id.query_shards }}
+      hedge_requests_at: {{ .Values.queryFrontend.config.trace_by_id.hedge_requests_at }}
+      hedge_requests_up_to: {{ .Values.queryFrontend.config.trace_by_id.hedge_requests_up_to }}
</span> 
   ingester:
     lifecycler:
<span class="p">@@ -993,6 +1016,8 @@</span> config: |
     log_format: {{ .Values.server.logFormat }}
     grpc_server_max_recv_msg_size: {{ .Values.server.grpc_server_max_recv_msg_size }}
     grpc_server_max_send_msg_size: {{ .Values.server.grpc_server_max_send_msg_size }}
<span class="gi">+    http_server_read_timeout: {{ .Values.server.http_server_read_timeout }}
+    http_server_write_timeout: {{ .Values.server.http_server_write_timeout }}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -1013,12 +1038,14 @@</span> config: |
         path: /var/tempo/traces
       wal:
         path: /var/tempo/wal
<span class="gi">+      {{- if .Values.memcached.enabled }}
</span>       cache: memcached
       memcached:
         consistent_hash: true
         host: {{ include "tempo.fullname" . }}-memcached
         service: memcached-client
         timeout: 500ms
<span class="gi">+      {{- end }}
</span> 
 # Set Tempo server configuration
 # Refers to https://grafana.com/docs/tempo/latest/configuration/#server
<span class="p">@@ -1033,6 +1060,10 @@</span> server:
   grpc_server_max_recv_msg_size: 4194304
   # -- Max gRPC message size that can be sent
   grpc_server_max_send_msg_size: 4194304
<span class="gi">+  # -- Read timeout for HTTP server
+  http_server_read_timeout: 30s
+  # -- Write timeout for HTTP server
+  http_server_write_timeout: 30s
</span> 
 # To configure a different storage backend instead of local storage:
 # storage:
<span class="err">
</span></code></pre></div></div> <h2 id="125"> <a href="#125" class="anchor-heading" aria-labelledby="125"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.5 </h2> <p><strong>Release date:</strong> 2023-03-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Chart version bump</li> <li>tempo-distributed: Allow to manage reporting to grafana.com</li> <li>Update readme</li> </ul> <h3 id="default-value-changes-81"> <a href="#default-value-changes-81" class="anchor-heading" aria-labelledby="default-value-changes-81"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index cd0fe88e..f9b1f85d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -36,6 +36,9 @@</span> externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "compon
 # -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
 externalConfigVersion: '0'
 
<span class="gi">+# -- If true, Tempo will report anonymous usage data about the shape of a deployment to Grafana Labs
+reportingEnabled: true
+
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -767,6 +770,9 @@</span> traces:
 config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
 
<span class="gi">+  usage_report:
+    reporting_enabled: {{ .Values.reportingEnabled }}
+
</span>   {{- if .Values.enterprise.enabled }}
   license:
     path: "/license/license.jwt"
<span class="err">
</span></code></pre></div></div> <h2 id="124"> <a href="#124" class="anchor-heading" aria-labelledby="124"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.4 </h2> <p><strong>Release date:</strong> 2023-03-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>[tempo distributed] Update default enterprise traces image</li> </ul> <h3 id="default-value-changes-82"> <a href="#default-value-changes-82" class="anchor-heading" aria-labelledby="default-value-changes-82"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 299ac38f..cd0fe88e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1549,7 +1549,7 @@</span> enterprise:
     # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
     repository: grafana/enterprise-traces
     # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
<span class="gd">-    tag: weekly-r58-94739e17
</span><span class="gi">+    tag: v2.0.1
</span>     # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
 
 # In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
<span class="err">
</span></code></pre></div></div> <h2 id="123"> <a href="#123" class="anchor-heading" aria-labelledby="123"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.3 </h2> <p><strong>Release date:</strong> 2023-03-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.1&amp;color=success" alt="AppVersion: 2.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>2.0.1</li> </ul> <h3 id="default-value-changes-83"> <a href="#default-value-changes-83" class="anchor-heading" aria-labelledby="default-value-changes-83"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="122"> <a href="#122" class="anchor-heading" aria-labelledby="122"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.2 </h2> <p><strong>Release date:</strong> 2023-02-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> fix: disable minio by default</li> </ul> <h3 id="default-value-changes-84"> <a href="#default-value-changes-84" class="anchor-heading" aria-labelledby="default-value-changes-84"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 0ef19446..299ac38f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1259,7 +1259,7 @@</span> prometheusRule:
   #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
 
 minio:
<span class="gd">-  enabled: true
</span><span class="gi">+  enabled: false
</span>   mode: standalone
   rootUser: grafana-tempo
   rootPassword: supersecret
<span class="err">
</span></code></pre></div></div> <h2 id="121"> <a href="#121" class="anchor-heading" aria-labelledby="121"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.1 </h2> <p><strong>Release date:</strong> 2023-02-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> bump chart version</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> use appropriate HorizontalPodAutoscaling apiVersion</li> </ul> <h3 id="default-value-changes-85"> <a href="#default-value-changes-85" class="anchor-heading" aria-labelledby="default-value-changes-85"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="120"> <a href="#120" class="anchor-heading" aria-labelledby="120"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2.0 </h2> <p><strong>Release date:</strong> 2023-02-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(values.yaml): Add support to configure queries</li> </ul> <h3 id="default-value-changes-86"> <a href="#default-value-changes-86" class="anchor-heading" aria-labelledby="default-value-changes-86"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 1f6e9280..0ef19446 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -580,6 +580,8 @@</span> querier:
       external_hedge_requests_at: 8s
       # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
       external_hedge_requests_up_to: 2
<span class="gi">+    # -- This value controls the overall number of simultaneous subqueries that the querier will service at once. It does not distinguish between the types of queries.
+    max_concurrent_queries: 20
</span> 
   service:
     # -- Annotations for querier service
<span class="p">@@ -619,6 +621,12 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  config:
+    search:
+      # -- The number of concurrent jobs to execute when searching the backend
+      concurrent_jobs: 1000
+      # -- The target number of bytes for each job to handle when performing a backend search
+      target_bytes_per_job: 104857600
</span>   autoscaling:
     # -- Enable autoscaling for the query-frontend
     enabled: false
<span class="p">@@ -934,6 +942,12 @@</span> config: |
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
       external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
<span class="gi">+    max_concurrent_queries: {{ .Values.querier.config.max_concurrent_queries }}
+  query_frontend:
+    search:
+      target_bytes_per_job: {{ .Values.queryFrontend.config.search.target_bytes_per_job }}
+      concurrent_jobs: {{ .Values.queryFrontend.config.search.concurrent_jobs }}
+
</span>   ingester:
     lifecycler:
       ring:
<span class="err">
</span></code></pre></div></div> <h2 id="111"> <a href="#111" class="anchor-heading" aria-labelledby="111"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.1.1 </h2> <p><strong>Release date:</strong> 2023-02-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix(values.yaml): call toYaml on .Values.querier.config.search.external_endpoints config</li> </ul> <h3 id="default-value-changes-87"> <a href="#default-value-changes-87" class="anchor-heading" aria-labelledby="default-value-changes-87"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3d337a17..1f6e9280 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -929,7 +929,7 @@</span> config: |
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
       {{- end }}
     search:
<span class="gd">-      external_endpoints: {{ .Values.querier.config.search.external_endpoints }}
</span><span class="gi">+      external_endpoints: {{- toYaml .Values.querier.config.search.external_endpoints | nindent 6 }}
</span>       query_timeout: {{ .Values.querier.config.search.query_timeout }}
       prefer_self: {{ .Values.querier.config.search.prefer_self }}
       external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
<span class="err">
</span></code></pre></div></div> <h2 id="110"> <a href="#110" class="anchor-heading" aria-labelledby="110"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.1.0 </h2> <p><strong>Release date:</strong> 2023-02-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(values.yaml): add querier.search.* configs</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> drop minio special config in trace backends</li> </ul> <h3 id="default-value-changes-88"> <a href="#default-value-changes-88" class="anchor-heading" aria-labelledby="default-value-changes-88"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 18bf5b26..3d337a17 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -569,6 +569,18 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+    search:
+      # -- A list of external endpoints that the querier will use to offload backend search requests
+      external_endpoints: []
+      # -- Timeout for search requests
+      query_timeout: 30s
+      # -- If search_external_endpoints is set then the querier will primarily act as a proxy for whatever serverless backend you have configured. This setting allows the operator to have the querier prefer itself for a configurable number of subqueries.
+      prefer_self: 10
+      # -- If set to a non-zero value a second request will be issued at the provided duration. Recommended to be set to p99 of external search requests to reduce long tail latency.
+      external_hedge_requests_at: 8s
+      # -- The maximum number of requests to execute when hedging. Requires hedge_requests_at to be set.
+      external_hedge_requests_up_to: 2
+
</span>   service:
     # -- Annotations for querier service
     annotations: {}
<span class="p">@@ -916,6 +928,12 @@</span> config: |
       grpc_client_config:
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
       {{- end }}
<span class="gi">+    search:
+      external_endpoints: {{ .Values.querier.config.search.external_endpoints }}
+      query_timeout: {{ .Values.querier.config.search.query_timeout }}
+      prefer_self: {{ .Values.querier.config.search.prefer_self }}
+      external_hedge_requests_at: {{ .Values.querier.config.search.external_hedge_requests_at }}
+      external_hedge_requests_up_to: {{ .Values.querier.config.search.external_hedge_requests_up_to }}
</span>   ingester:
     lifecycler:
       ring:
<span class="p">@@ -958,28 +976,10 @@</span> config: |
   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="gd">-      {{- if .Values.minio.enabled }}
-      backend: s3
-      s3:
-        access_key: {{ .Values.minio.rootUser }}
-        {{- if .Values.enterprise.enabled }}
-        {{with (index .Values.minio.buckets 1) }}
-        bucket: {{ .name }}
-        {{- end }}
-        {{ else }}
-        {{with (index .Values.minio.buckets 0) }}
-        bucket: {{ .name }}
-        {{- end }}
-        {{- end }}
-        endpoint: {{ .Release.Name }}-minio.{{ .Release.Namespace }}.svc:9000
-        insecure: true
-        secret_key: {{ .Values.minio.rootPassword }}
-      {{ else }}
</span>       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
         {{- toYaml .Values.storage.trace.s3 | nindent 6}}
       {{- end }}
<span class="gd">-      {{- end }}
</span>       {{- if eq .Values.storage.trace.backend "gcs"}}
       gcs:
         {{- toYaml .Values.storage.trace.gcs | nindent 6}}
<span class="err">
</span></code></pre></div></div> <h2 id="101"> <a href="#101" class="anchor-heading" aria-labelledby="101"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.0.1 </h2> <p><strong>Release date:</strong> 2023-02-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> bump chart version</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> replace local with filesystem default backend</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> drop minio special config and expand supported admin_client backends</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Ensure that Admin Client is configured with relevant details.</li> <li>moved config</li> </ul> <h3 id="default-value-changes-89"> <a href="#default-value-changes-89" class="anchor-heading" aria-labelledby="default-value-changes-89"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 6d185154..18bf5b26 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -473,9 +473,9 @@</span> compactor:
       # -- Blocks in this time window will be compacted together
       compaction_window: 1h
       # -- Amount of data to buffer from input blocks
<span class="gd">-      chunk_size_bytes: 5242880
</span><span class="gi">+      v2_in_buffer_bytes: 5242880
</span>       # -- Flush data to backend when buffer is this large
<span class="gd">-      flush_size_bytes: 20971520
</span><span class="gi">+      v2_out_buffer_bytes: 20971520
</span>       # -- Maximum number of traces in a compacted block. WARNING: Deprecated. Use max_block_bytes instead.
       max_compaction_objects: 6000000
       # -- Maximum size of a compacted block in bytes
<span class="p">@@ -483,7 +483,7 @@</span> compactor:
       # -- Number of tenants to process in parallel during retention
       retention_concurrency: 10
       # -- Number of traces to buffer in memory during compaction
<span class="gd">-      iterator_buffer_size: 1000
</span><span class="gi">+      v2_prefetch_traces_count: 1000
</span>       # -- The maximum amount of time to spend compacting a single tenant before moving to the next
       max_time_per_tenant: 5m
       # -- The time between compaction cycles
<span class="p">@@ -693,10 +693,6 @@</span> queryFrontend:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
     grpc: null
 
<span class="gd">-search:
-  # -- Enable Tempo search
-  enabled: false
-
</span> multitenancyEnabled: false
 
 traces:
<span class="p">@@ -750,8 +746,6 @@</span> traces:
 # @default -- See values.yaml
 config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
<span class="gd">-  search_enabled: {{ .Values.search.enabled }}
-  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span> 
   {{- if .Values.enterprise.enabled }}
   license:
<span class="p">@@ -764,17 +758,34 @@</span> config: |
         kvstore:
           store: "memberlist"
 
<span class="gd">-  {{- if .Values.minio.enabled }}
</span><span class="gi">+  auth:
+    type: enterprise
+
+  http_api_prefix: {{get .Values.tempo.structuredConfig "http_api_prefix"}}
+
</span>   admin_client:
     storage:
<span class="gd">-      backend: s3
</span><span class="gi">+      backend: {{.Values.storage.admin.backend}}
+      {{- if eq .Values.storage.admin.backend "s3"}}
</span>       s3:
<span class="gd">-        access_key_id: {{ .Values.minio.rootUser }}
-        bucket_name: enterprise-traces-admin
-        endpoint: {{ .Release.Name }}-minio.{{ .Release.Namespace }}.svc:9000
-        insecure: true
-        secret_access_key: {{ .Values.minio.rootPassword }}
-    {{- end }}
</span><span class="gi">+        {{- toYaml .Values.storage.admin.s3 | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.admin.backend "gcs"}}
+      gcs:
+        {{- toYaml .Values.storage.admin.gcs | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.admin.backend "azure"}}
+      azure:
+        {{- toYaml .Values.storage.admin.azure | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.admin.backend "swift"}}
+      swift:
+        {{- toYaml .Values.storage.admin.swift | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.admin.backend "filesystem"}}
+      filesystem:
+        {{- toYaml .Values.storage.admin.filesystem | nindent 6}}
+      {{- end}}
</span>   {{- end }}
 
   {{- if and .Values.enterprise.enabled .Values.enterpriseGateway.useDefaultProxyURLs }}
<span class="p">@@ -803,12 +814,12 @@</span> config: |
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
       compacted_block_retention: {{ .Values.compactor.config.compaction.compacted_block_retention }}
       compaction_window: {{ .Values.compactor.config.compaction.compaction_window }}
<span class="gd">-      chunk_size_bytes: {{ .Values.compactor.config.compaction.chunk_size_bytes }}
-      flush_size_bytes: {{ .Values.compactor.config.compaction.flush_size_bytes }}
</span><span class="gi">+      v2_in_buffer_bytes: {{ .Values.compactor.config.compaction.v2_in_buffer_bytes }}
+      v2_out_buffer_bytes: {{ .Values.compactor.config.compaction.v2_out_buffer_bytes }}
</span>       max_compaction_objects: {{ .Values.compactor.config.compaction.max_compaction_objects }}
       max_block_bytes: {{ .Values.compactor.config.compaction.max_block_bytes }}
       retention_concurrency: {{ .Values.compactor.config.compaction.retention_concurrency }}
<span class="gd">-      iterator_buffer_size: {{ .Values.compactor.config.compaction.iterator_buffer_size }}
</span><span class="gi">+      v2_prefetch_traces_count: {{ .Values.compactor.config.compaction.v2_prefetch_traces_count }}
</span>       max_time_per_tenant: {{ .Values.compactor.config.compaction.max_time_per_tenant }}
       compaction_cycle: {{ .Values.compactor.config.compaction.compaction_cycle }}
     ring:
<span class="p">@@ -947,18 +958,36 @@</span> config: |
   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="gd">-      {{- if eq .Values.storage.trace.backend "gcs"}}
-      gcs:
-        {{- toYaml .Values.storage.trace.gcs | nindent 6}}
-      {{- end}}
</span><span class="gi">+      {{- if .Values.minio.enabled }}
+      backend: s3
+      s3:
+        access_key: {{ .Values.minio.rootUser }}
+        {{- if .Values.enterprise.enabled }}
+        {{with (index .Values.minio.buckets 1) }}
+        bucket: {{ .name }}
+        {{- end }}
+        {{ else }}
+        {{with (index .Values.minio.buckets 0) }}
+        bucket: {{ .name }}
+        {{- end }}
+        {{- end }}
+        endpoint: {{ .Release.Name }}-minio.{{ .Release.Namespace }}.svc:9000
+        insecure: true
+        secret_key: {{ .Values.minio.rootPassword }}
+      {{ else }}
</span>       {{- if eq .Values.storage.trace.backend "s3"}}
       s3:
         {{- toYaml .Values.storage.trace.s3 | nindent 6}}
<span class="gd">-      {{- end}}
</span><span class="gi">+      {{- end }}
+      {{- end }}
+      {{- if eq .Values.storage.trace.backend "gcs"}}
+      gcs:
+        {{- toYaml .Values.storage.trace.gcs | nindent 6}}
+      {{- end }}
</span>       {{- if eq .Values.storage.trace.backend "azure"}}
       azure:
         {{- toYaml .Values.storage.trace.azure | nindent 6}}
<span class="gd">-      {{- end}}
</span><span class="gi">+      {{- end }}
</span>       blocklist_poll: 5m
       local:
         path: /var/tempo/traces
<span class="p">@@ -990,13 +1019,17 @@</span> server:
 #   trace:
 #     backend: azure
 #     azure:
<span class="gd">-#       container-name:
-#       storage-account-name:
-#       storage-account-key:
</span><span class="gi">+#       container_name:
+#       storage_account_name:
+#       storage_account_key:
</span> storage:
   trace:
     # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
     backend: local
<span class="gi">+  # Settings for the Admin client storage backend and buckets. Only valid is enterprise.enabled is true.
+  admin:
+    # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/enterprise-traces/latest/config/reference/#admin_client_config
+    backend: filesystem
</span> 
 # Global overrides
 global_overrides:
<span class="p">@@ -1217,12 +1250,15 @@</span> minio:
   rootUser: grafana-tempo
   rootPassword: supersecret
   buckets:
<span class="gi">+    # Default Tempo storage bucket.
</span>     - name: tempo-traces
       policy: none
       purge: false
<span class="gi">+    # Bucket for traces storage if enterprise.enabled is true - requires license.
</span>     - name: enterprise-traces
       policy: none
       purge: false
<span class="gi">+    # Admin client bucket if enterprise.enabled is true - requires license.
</span>     - name: enterprise-traces-admin
       policy: none
       purge: false
<span class="err">
</span></code></pre></div></div> <h2 id="100"> <a href="#100" class="anchor-heading" aria-labelledby="100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.0.0 </h2> <p><strong>Release date:</strong> 2023-01-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>template</li> <li>Merge branch main into main</li> <li>Update charts/tempo-distributed/README.md</li> </ul> <h3 id="default-value-changes-90"> <a href="#default-value-changes-90" class="anchor-heading" aria-labelledby="default-value-changes-90"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a3c7699b..6d185154 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -138,6 +138,15 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 6 }}
</span>   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Soft node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -234,6 +243,15 @@</span> metricsGenerator:
   # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 6 }}
</span>   # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -359,6 +377,15 @@</span> distributor:
   resources: {}
   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for distributor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 6 }}
</span>   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -505,6 +532,15 @@</span> querier:
   resources: {}
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for querier pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier") | nindent 6 }}
</span>   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -619,6 +655,15 @@</span> queryFrontend:
   resources: {}
   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 6 }}
</span>   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -992,6 +1037,15 @@</span> memcached:
   podAnnotations: {}
   # -- Resource requests and limits for memcached
   resources: {}
<span class="gi">+  # -- topologySpread for memcached pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 6 }}
</span>   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -1231,6 +1285,15 @@</span> gateway:
   resources: {}
   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 6 }}
</span>   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -1483,7 +1546,16 @@</span> adminApi:
   podAnnotations: {}
 
   nodeSelector: {}
<span class="gd">-  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- topologySpread for admin-api pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 6 }}
+  # -- Affinity for admin-api pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Soft node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -1562,7 +1634,16 @@</span> enterpriseGateway:
   podDisruptionBudget: {}
 
   nodeSelector: {}
<span class="gd">-  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- topologySpread for enterprise-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 6 }}
+  # -- Affinity for enterprise-gateway pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Soft node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="err">
</span></code></pre></div></div> <h2 id="0280"> <a href="#0280" class="anchor-heading" aria-labelledby="0280"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.28.0 </h2> <p><strong>Release date:</strong> 2023-01-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/tempo-distributed/Chart.yaml</li> </ul> <h3 id="default-value-changes-91"> <a href="#default-value-changes-91" class="anchor-heading" aria-labelledby="default-value-changes-91"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="02720"> <a href="#02720" class="anchor-heading" aria-labelledby="02720"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.20 </h2> <p><strong>Release date:</strong> 2023-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>[tempo] Update chart number and docs</li> <li>[tempo] Helm docs</li> </ul> <h3 id="default-value-changes-92"> <a href="#default-value-changes-92" class="anchor-heading" aria-labelledby="default-value-changes-92"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="02719"> <a href="#02719" class="anchor-heading" aria-labelledby="02719"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.19 </h2> <p><strong>Release date:</strong> 2022-11-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>[tempo] Add topologySpreadConstraints to all dp/sts</li> </ul> <h3 id="default-value-changes-93"> <a href="#default-value-changes-93" class="anchor-heading" aria-labelledby="default-value-changes-93"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a3c7699b..6d185154 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -138,6 +138,15 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 6 }}
</span>   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Soft node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -234,6 +243,15 @@</span> metricsGenerator:
   # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 6 }}
</span>   # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -359,6 +377,15 @@</span> distributor:
   resources: {}
   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for distributor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 6 }}
</span>   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -505,6 +532,15 @@</span> querier:
   resources: {}
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for querier pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier") | nindent 6 }}
</span>   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -619,6 +655,15 @@</span> queryFrontend:
   resources: {}
   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 6 }}
</span>   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -992,6 +1037,15 @@</span> memcached:
   podAnnotations: {}
   # -- Resource requests and limits for memcached
   resources: {}
<span class="gi">+  # -- topologySpread for memcached pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 6 }}
</span>   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -1231,6 +1285,15 @@</span> gateway:
   resources: {}
   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 6 }}
</span>   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -1483,7 +1546,16 @@</span> adminApi:
   podAnnotations: {}
 
   nodeSelector: {}
<span class="gd">-  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- topologySpread for admin-api pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 6 }}
+  # -- Affinity for admin-api pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Soft node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -1562,7 +1634,16 @@</span> enterpriseGateway:
   podDisruptionBudget: {}
 
   nodeSelector: {}
<span class="gd">-  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- topologySpread for enterprise-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 6 }}
+  # -- Affinity for enterprise-gateway pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Soft node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="err">
</span></code></pre></div></div> <h2 id="02720-1"> <a href="#02720-1" class="anchor-heading" aria-labelledby="02720-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.20 </h2> <p><strong>Release date:</strong> 2023-01-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add headless service to tempo-distributor</li> <li>helm-docs</li> <li>Remove extra line breaks added by helm-docs</li> </ul> <h3 id="default-value-changes-94"> <a href="#default-value-changes-94" class="anchor-heading" aria-labelledby="default-value-changes-94"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="02719-1"> <a href="#02719-1" class="anchor-heading" aria-labelledby="02719-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.19 </h2> <p><strong>Release date:</strong> 2023-01-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updated values.yaml to match tempo chart in terms of metrics_generator_processors. Theyll be added to overrides when metrics generator is enabled.</li> </ul> <h3 id="default-value-changes-95"> <a href="#default-value-changes-95" class="anchor-heading" aria-labelledby="default-value-changes-95"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7bae42a1..a3c7699b 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -888,6 +888,11 @@</span> config: |
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
     {{- toYaml .Values.global_overrides | nindent 2 }}
<span class="gi">+    {{- if .Values.metricsGenerator.enabled }}
+    metrics_generator_processors:
+    - service-graphs
+    - span-metrics
+    {{- end }}
</span>   server:
     http_listen_port: {{ .Values.server.httpListenPort }}
     log_level: {{ .Values.server.logLevel }}
<span class="p">@@ -951,9 +956,6 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /conf/overrides.yaml
<span class="gd">-  # metrics_generator_processors:
-  #   - service-graphs
-  #   - span-metrics
</span> 
 # Per tenants overrides
 overrides: |
<span class="err">
</span></code></pre></div></div> <h2 id="02718"> <a href="#02718" class="anchor-heading" aria-labelledby="02718"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.18 </h2> <p><strong>Release date:</strong> 2023-01-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(tempo-distributes/values.yaml): add remaining tempo compaction flags</li> </ul> <h3 id="default-value-changes-96"> <a href="#default-value-changes-96" class="anchor-heading" aria-labelledby="default-value-changes-96"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c5c7af62..7bae42a1 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -441,6 +441,20 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+      # Duration to keep blocks that have been compacted elsewhere
+      compacted_block_retention: 1h
+      # -- Blocks in this time window will be compacted together
+      compaction_window: 1h
+      # -- Amount of data to buffer from input blocks
+      chunk_size_bytes: 5242880
+      # -- Flush data to backend when buffer is this large
+      flush_size_bytes: 20971520
+      # -- Maximum number of traces in a compacted block. WARNING: Deprecated. Use max_block_bytes instead.
+      max_compaction_objects: 6000000
+      # -- Maximum size of a compacted block in bytes
+      max_block_bytes: 107374182400
+      # -- Number of tenants to process in parallel during retention
+      retention_concurrency: 10
</span>       # -- Number of traces to buffer in memory during compaction
       iterator_buffer_size: 1000
       # -- The maximum amount of time to spend compacting a single tenant before moving to the next
<span class="p">@@ -742,6 +756,13 @@</span> config: |
   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="gi">+      compacted_block_retention: {{ .Values.compactor.config.compaction.compacted_block_retention }}
+      compaction_window: {{ .Values.compactor.config.compaction.compaction_window }}
+      chunk_size_bytes: {{ .Values.compactor.config.compaction.chunk_size_bytes }}
+      flush_size_bytes: {{ .Values.compactor.config.compaction.flush_size_bytes }}
+      max_compaction_objects: {{ .Values.compactor.config.compaction.max_compaction_objects }}
+      max_block_bytes: {{ .Values.compactor.config.compaction.max_block_bytes }}
+      retention_concurrency: {{ .Values.compactor.config.compaction.retention_concurrency }}
</span>       iterator_buffer_size: {{ .Values.compactor.config.compaction.iterator_buffer_size }}
       max_time_per_tenant: {{ .Values.compactor.config.compaction.max_time_per_tenant }}
       compaction_cycle: {{ .Values.compactor.config.compaction.compaction_cycle }}
<span class="err">
</span></code></pre></div></div> <h2 id="02717"> <a href="#02717" class="anchor-heading" aria-labelledby="02717"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.17 </h2> <p><strong>Release date:</strong> 2023-01-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix issue when render chart templates</li> </ul> <h3 id="default-value-changes-97"> <a href="#default-value-changes-97" class="anchor-heading" aria-labelledby="default-value-changes-97"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="02716"> <a href="#02716" class="anchor-heading" aria-labelledby="02716"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.16 </h2> <p><strong>Release date:</strong> 2023-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> feat: Enable usage of private docker registry</li> <li>Merge branch main into main</li> <li>Update charts/tempo-distributed/README.md</li> </ul> <h3 id="default-value-changes-98"> <a href="#default-value-changes-98" class="anchor-heading" aria-labelledby="default-value-changes-98"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 18dddd44..c5c7af62 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -2,6 +2,12 @@</span> global:
   image:
     # -- Overrides the Docker registry globally for all images, excluding enterprise.
     registry: docker.io
<span class="gi">+    # -- Optional list of imagePullSecrets for all images, excluding enterprise.
+    # Names of existing secrets with private container registry credentials.
+    # Ref: https://kubernetes.io/docs/concepts/containers/images/#specifying-imagepullsecrets-on-a-pod
+    # Example:
+    # pullSecrets: [ my-dockerconfigjson-secret ]
+    pullSecrets: []
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -34,6 +40,8 @@</span> tempo:
   image:
     # -- The Docker registry
     registry: docker.io
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `global.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository
     repository: grafana/tempo
     # -- Overrides the image tag whose default is the chart's appVersion
<span class="p">@@ -106,6 +114,8 @@</span> ingester:
   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the ingester image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the ingester image. Overrides `tempo.image.tag`
<span class="p">@@ -200,6 +210,8 @@</span> metricsGenerator:
   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
<span class="p">@@ -316,6 +328,8 @@</span> distributor:
   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the ingester image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the ingester image. Overrides `tempo.image.tag`
<span class="p">@@ -393,6 +407,8 @@</span> compactor:
   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the compactor image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the compactor image. Overrides `tempo.image.tag`
<span class="p">@@ -453,6 +469,8 @@</span> querier:
   image:
     # -- The Docker registry for the querier image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the querier image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the querier image. Overrides `tempo.image.tag`
<span class="p">@@ -517,6 +535,8 @@</span> queryFrontend:
     image:
       # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
       registry: null
<span class="gi">+      # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+      pullSecrets: []
</span>       # -- Docker image repository for the query-frontend image. Overrides `tempo.image.repository`
       repository: grafana/tempo-query
       # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
<span class="p">@@ -551,6 +571,8 @@</span> queryFrontend:
   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `tempo.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Docker image repository for the query-frontend image. Overrides `tempo.image.repository`
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
<span class="p">@@ -924,6 +946,8 @@</span> memcached:
   image:
     # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `global.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Memcached Docker image repository
     repository: memcached
     # -- Memcached Docker image tag
<span class="p">@@ -971,6 +995,8 @@</span> memcachedExporter:
   image:
     # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `global.image.pullSecrets`
+    pullSecrets: []
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -1154,6 +1180,8 @@</span> gateway:
   image:
     # -- The Docker registry for the gateway image. Overrides `global.image.registry`
     registry: null
<span class="gi">+    # -- Optional list of imagePullSecrets. Overrides `global.image.pullSecrets`
+    pullSecrets: []
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="p">@@ -1216,6 +1244,8 @@</span> gateway:
     annotations: {}
     # -- Labels for gateway service
     labels: {}
<span class="gi">+    # -- Additional ports to be opneed on gateway service (e.g. for RPC connections)
+    additionalPorts: {}
</span>   # Gateway ingress configuration
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
<span class="err">
</span></code></pre></div></div> <h2 id="02715"> <a href="#02715" class="anchor-heading" aria-labelledby="02715"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.15 </h2> <p><strong>Release date:</strong> 2023-01-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/tempo-distributed/Chart.yaml</li> <li>Merge branch main into main</li> <li>fix(docs): compactor.config.compaction.max_time_per_tenant</li> </ul> <h3 id="default-value-changes-99"> <a href="#default-value-changes-99" class="anchor-heading" aria-labelledby="default-value-changes-99"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d5d2104..18dddd44 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -425,6 +425,12 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+      # -- Number of traces to buffer in memory during compaction
+      iterator_buffer_size: 1000
+      # -- The maximum amount of time to spend compacting a single tenant before moving to the next
+      max_time_per_tenant: 5m
+      # -- The time between compaction cycles
+      compaction_cycle: 30s
</span>   service:
     # -- Annotations for compactor service
     annotations: {}
<span class="p">@@ -433,6 +439,17 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -703,6 +720,9 @@</span> config: |
   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="gi">+      iterator_buffer_size: {{ .Values.compactor.config.compaction.iterator_buffer_size }}
+      max_time_per_tenant: {{ .Values.compactor.config.compaction.max_time_per_tenant }}
+      compaction_cycle: {{ .Values.compactor.config.compaction.compaction_cycle }}
</span>     ring:
       kvstore:
         store: memberlist
<span class="p">@@ -1248,6 +1268,8 @@</span> gateway:
     serverSnippet: ''
     # -- Allows appending custom configuration to the http block
     httpSnippet: ''
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use
+    resolver: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -1285,7 +1307,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="02714"> <a href="#02714" class="anchor-heading" aria-labelledby="02714"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.14 </h2> <p><strong>Release date:</strong> 2022-12-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add capability to define additional ports on gateway service</li> </ul> <h3 id="default-value-changes-100"> <a href="#default-value-changes-100" class="anchor-heading" aria-labelledby="default-value-changes-100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d5d2104..b579ca6c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1196,6 +1196,8 @@</span> gateway:
     annotations: {}
     # -- Labels for gateway service
     labels: {}
<span class="gi">+    # -- Additional ports to be opneed on gateway service (e.g. for RPC connections)
+    additionalPorts: {}
</span>   # Gateway ingress configuration
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
<span class="err">
</span></code></pre></div></div> <h2 id="02713"> <a href="#02713" class="anchor-heading" aria-labelledby="02713"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.13 </h2> <p><strong>Release date:</strong> 2023-01-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into tempo-distributed-resolver-override</li> </ul> <h3 id="default-value-changes-101"> <a href="#default-value-changes-101" class="anchor-heading" aria-labelledby="default-value-changes-101"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 02823b55..0d63e80f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1269,6 +1269,8 @@</span> gateway:
     serverSnippet: ''
     # -- Allows appending custom configuration to the http block
     httpSnippet: ''
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use
+    resolver: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -1306,7 +1308,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="02712"> <a href="#02712" class="anchor-heading" aria-labelledby="02712"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.12 </h2> <p><strong>Release date:</strong> 2023-01-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(tempo-distributes/values.yaml): add flags for compaction configs</li> <li>Merge branch main into tempo-distributed-resolver-override</li> </ul> <h3 id="default-value-changes-102"> <a href="#default-value-changes-102" class="anchor-heading" aria-labelledby="default-value-changes-102"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d5d2104..02823b55 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -425,6 +425,13 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+      # -- Number of traces to buffer in memory during compaction
+      iterator_buffer_size: 1000
+      # -- The maximum amount of time to spend compacting a single
+      # -- tenant before moving to the next
+      max_time_per_tenant: 5m
+      # -- The time between compaction cycles
+      compaction_cycle: 30s
</span>   service:
     # -- Annotations for compactor service
     annotations: {}
<span class="p">@@ -433,6 +440,17 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -703,6 +721,9 @@</span> config: |
   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="gi">+      iterator_buffer_size: {{ .Values.compactor.config.compaction.iterator_buffer_size }}
+      max_time_per_tenant: {{ .Values.compactor.config.compaction.max_time_per_tenant }}
+      compaction_cycle: {{ .Values.compactor.config.compaction.compaction_cycle }}
</span>     ring:
       kvstore:
         store: memberlist
<span class="err">
</span></code></pre></div></div> <h2 id="0280-1"> <a href="#0280-1" class="anchor-heading" aria-labelledby="0280-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.28.0 </h2> <p><strong>Release date:</strong> 2023-01-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Allow to override nginx resolver</li> </ul> <h3 id="default-value-changes-103"> <a href="#default-value-changes-103" class="anchor-heading" aria-labelledby="default-value-changes-103"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d5d2104..c12b5d36 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1248,6 +1248,8 @@</span> gateway:
     serverSnippet: ''
     # -- Allows appending custom configuration to the http block
     httpSnippet: ''
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use
+    resolver: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -1285,7 +1287,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="02711"> <a href="#02711" class="anchor-heading" aria-labelledby="02711"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.11 </h2> <p><strong>Release date:</strong> 2022-12-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add hpa for tempo querier</li> </ul> <h3 id="default-value-changes-104"> <a href="#default-value-changes-104" class="anchor-heading" aria-labelledby="default-value-changes-104"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d5d2104..1e0f0266 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -433,6 +433,17 @@</span> compactor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `tempo.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="02710"> <a href="#02710" class="anchor-heading" aria-labelledby="02710"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.10 </h2> <p><strong>Release date:</strong> 2022-11-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix frontend address.</li> </ul> <h3 id="default-value-changes-105"> <a href="#default-value-changes-105" class="anchor-heading" aria-labelledby="default-value-changes-105"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f6e6b6cf..7d5d2104 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -792,7 +792,7 @@</span> config: |
     {{- end }}
   querier:
     frontend_worker:
<span class="gd">-      frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend") }}:9095
</span><span class="gi">+      frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend-discovery") }}:9095
</span>       {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
       grpc_client_config:
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0279"> <a href="#0279" class="anchor-heading" aria-labelledby="0279"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.9 </h2> <p><strong>Release date:</strong> 2022-11-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump tempo-distributed chart version</li> <li>Merge pull request #1980 from daper/tempo-distributed-fix-wrong-context</li> </ul> <h3 id="default-value-changes-106"> <a href="#default-value-changes-106" class="anchor-heading" aria-labelledby="default-value-changes-106"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0278"> <a href="#0278" class="anchor-heading" aria-labelledby="0278"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.8 </h2> <p><strong>Release date:</strong> 2022-11-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into main</li> </ul> <h3 id="default-value-changes-107"> <a href="#default-value-changes-107" class="anchor-heading" aria-labelledby="default-value-changes-107"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0275"> <a href="#0275" class="anchor-heading" aria-labelledby="0275"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.5 </h2> <p><strong>Release date:</strong> 2022-11-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update</li> </ul> <h3 id="default-value-changes-108"> <a href="#default-value-changes-108" class="anchor-heading" aria-labelledby="default-value-changes-108"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0278-1"> <a href="#0278-1" class="anchor-heading" aria-labelledby="0278-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.8 </h2> <p><strong>Release date:</strong> 2022-11-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo-distributed: fix wrong context on gateway with basicAuth enabled</li> </ul> <h3 id="default-value-changes-109"> <a href="#default-value-changes-109" class="anchor-heading" aria-labelledby="default-value-changes-109"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0277"> <a href="#0277" class="anchor-heading" aria-labelledby="0277"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.7 </h2> <p><strong>Release date:</strong> 2022-11-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> move dictionary handling to avoid nil pointer</li> </ul> <h3 id="default-value-changes-110"> <a href="#default-value-changes-110" class="anchor-heading" aria-labelledby="default-value-changes-110"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0276"> <a href="#0276" class="anchor-heading" aria-labelledby="0276"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.6 </h2> <p><strong>Release date:</strong> 2022-11-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> fix context reference in ingress-gateway</li> </ul> <h3 id="default-value-changes-111"> <a href="#default-value-changes-111" class="anchor-heading" aria-labelledby="default-value-changes-111"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0275-1"> <a href="#0275-1" class="anchor-heading" aria-labelledby="0275-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.5 </h2> <p><strong>Release date:</strong> 2022-11-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #1947 from AlphaStyle/tempo-distributed-headless-services</li> <li>Merge pull request #1945 from zalegrala/tempoDistributedFixRbacRender</li> </ul> <h3 id="default-value-changes-112"> <a href="#default-value-changes-112" class="anchor-heading" aria-labelledby="default-value-changes-112"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0274"> <a href="#0274" class="anchor-heading" aria-labelledby="0274"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.4 </h2> <p><strong>Release date:</strong> 2022-11-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix install chart example</li> </ul> <h3 id="default-value-changes-113"> <a href="#default-value-changes-113" class="anchor-heading" aria-labelledby="default-value-changes-113"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0275-2"> <a href="#0275-2" class="anchor-heading" aria-labelledby="0275-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.5 </h2> <p><strong>Release date:</strong> 2022-11-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version and update README.md</li> <li>use dict setup for ingester and metrics-generator services</li> <li>add headless service for ingester and metrics-generator</li> <li>update service gossip ring with appProtocol</li> </ul> <h3 id="default-value-changes-114"> <a href="#default-value-changes-114" class="anchor-heading" aria-labelledby="default-value-changes-114"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0274-1"> <a href="#0274-1" class="anchor-heading" aria-labelledby="0274-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.4 </h2> <p><strong>Release date:</strong> 2022-11-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version and update README.md</li> </ul> <h3 id="default-value-changes-115"> <a href="#default-value-changes-115" class="anchor-heading" aria-labelledby="default-value-changes-115"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0273"> <a href="#0273" class="anchor-heading" aria-labelledby="0273"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.3 </h2> <p><strong>Release date:</strong> 2022-10-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add appProtocol field to the memberlist, distributor, ingester, metricsGenerator, querier and the queryFrontend</li> </ul> <h3 id="default-value-changes-116"> <a href="#default-value-changes-116" class="anchor-heading" aria-labelledby="default-value-changes-116"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f7ddea56..f6e6b6cf 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -64,6 +64,10 @@</span> tempo:
     fsGroup: 1000
   # -- Structured tempo configuration
   structuredConfig: {}
<span class="gi">+  # -- Memberlist service configuration.
+  memberlist:
+    # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Set the optional service protocol. Ex: "tcp", "http" or "https".
+    appProtocol: null
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -180,6 +184,10 @@</span> ingester:
   service:
     # -- Annotations for ingester service
     annotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
</span> 
 # Configuration for the metrics-generator
 metricsGenerator:
<span class="p">@@ -285,6 +293,10 @@</span> metricsGenerator:
   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the metricsGenerator service. This allows metricsGenerator to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -370,6 +382,10 @@</span> distributor:
     extend_writes: null
     # -- List of tags that will not be extracted from trace data for search lookups
     search_tags_deny_list: []
<span class="gi">+  # -- Adds the appProtocol field to the distributor service. This allows distributor to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
</span> 
 compactor:
   # -- Number of replicas for the compactor
<span class="p">@@ -471,6 +487,10 @@</span> querier:
   service:
     # -- Annotations for querier service
     annotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -570,6 +590,10 @@</span> queryFrontend:
   extraVolumeMounts: []
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
<span class="gi">+  # -- Adds the appProtocol field to the queriyFrontend service. This allows queriyFrontend to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: null
</span> 
 search:
   # -- Enable Tempo search
<span class="err">
</span></code></pre></div></div> <h2 id="0274-2"> <a href="#0274-2" class="anchor-heading" aria-labelledby="0274-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.4 </h2> <p><strong>Release date:</strong> 2022-11-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li> </ul> <h3 id="default-value-changes-117"> <a href="#default-value-changes-117" class="anchor-heading" aria-labelledby="default-value-changes-117"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0273-1"> <a href="#0273-1" class="anchor-heading" aria-labelledby="0273-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.3 </h2> <p><strong>Release date:</strong> 2022-10-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into distibuted_fix</li> </ul> <h3 id="default-value-changes-118"> <a href="#default-value-changes-118" class="anchor-heading" aria-labelledby="default-value-changes-118"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0272"> <a href="#0272" class="anchor-heading" aria-labelledby="0272"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.2 </h2> <p><strong>Release date:</strong> 2022-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>Merge branch grafana:main into fix-tempo-distributed-issue</li> <li> </ul> <h3 id="default-value-changes-119"> <a href="#default-value-changes-119" class="anchor-heading" aria-labelledby="default-value-changes-119"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0271"> <a href="#0271" class="anchor-heading" aria-labelledby="0271"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.1 </h2> <p><strong>Release date:</strong> 2022-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix issue when render chart templates</li> <li>Merge branch distibuted_fix of https://github.com/yonahd/helm-charts into distibuted_fix</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add installation guide to tempo chart</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add installation guide to tempo chart</li> <li>Merge branch main into distibuted_fix</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add installation guide to tempo chart</li> </ul> <h3 id="default-value-changes-120"> <a href="#default-value-changes-120" class="anchor-heading" aria-labelledby="default-value-changes-120"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3f8ce58d..f7ddea56 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,20 +1,35 @@</span>
 global:
   image:
<span class="gd">-    # -- Overrides the Docker registry globally for all images
</span><span class="gi">+    # -- Overrides the Docker registry globally for all images, excluding enterprise.
</span>     registry: docker.io
   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="gd">-  clusterDomain: "cluster.local"
</span><span class="gi">+  clusterDomain: 'cluster.local'
</span>   # -- configures DNS service name
<span class="gd">-  dnsService: "kube-dns"
</span><span class="gi">+  dnsService: 'kube-dns'
</span>   # -- configures DNS service namespace
<span class="gd">-  dnsNamespace: "kube-system"
-
-# -- Overrides the chart's computed fullname
-fullnameOverride: ""
</span><span class="gi">+  dnsNamespace: 'kube-system'
+fullnameOverride: ''
</span> # fullnameOverride: tempo
 
<span class="gi">+# -- Configuration is loaded from the secret called 'externalConfigSecretName'.
+# If 'useExternalConfig' is true, then the configuration is not generated, just
+# consumed.  Top level keys for `tempo.yaml` and `overrides.yaml` are to be
+# provided by the user.
+useExternalConfig: false
+
+# -- Defines what kind of object stores the configuration, a ConfigMap or a Secret.
+# In order to move sensitive information (such as credentials) from the ConfigMap/Secret to a more secure location (e.g. vault), it is possible to use [environment variables in the configuration](https://grafana.com/docs/mimir/latest/operators-guide/configuring/reference-configuration-parameters/#use-environment-variables-in-the-configuration).
+# Such environment variables can be then stored in a separate Secret and injected via the global.extraEnvFrom value. For details about environment injection from a Secret please see [Secrets](https://kubernetes.io/docs/concepts/configuration/secret/#use-case-as-container-environment-variables).
+configStorageType: ConfigMap
+
+# -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
+externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
+
+# -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
+externalConfigVersion: '0'
+
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -27,7 +42,7 @@</span> tempo:
   readinessProbe:
     httpGet:
       path: /ready
<span class="gd">-      port: http
</span><span class="gi">+      port: http-metrics
</span>     initialDelaySeconds: 30
     timeoutSeconds: 1
   # -- Global labels for all tempo pods
<span class="p">@@ -118,13 +133,13 @@</span> ingester:
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 12 }}
</span>             topologyKey: kubernetes.io/hostname
         - weight: 75
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "ingester") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for ingester pods
   nodeSelector: {}
<span class="p">@@ -206,19 +221,25 @@</span> metricsGenerator:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "metrics-generator") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for metrics-generator pods
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
   tolerations: []
<span class="gi">+  # -- The EmptyDir location where the /var/tempo will be mounted on. Defaults to local disk, can be set to memory.
+  walEmptyDir: {}
+    ## Here shows how to configure 1Gi memory as emptyDir.
+    ## Ref: https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#emptydirvolumesource-v1-core
+    # medium: "Memory"
+    # sizeLimit: 1Gi
</span>   # -- Extra volumes for metrics-generator pods
   extraVolumeMounts: []
   # -- Extra volumes for metrics-generator deployment
<span class="p">@@ -231,7 +252,7 @@</span> metricsGenerator:
     - name: http-memberlist
       port: 7946
       service: false
<span class="gd">-    - name: http
</span><span class="gi">+    - name: http-metrics
</span>       port: 3100
       service: true
   # -- More information on configuration: https://grafana.com/docs/tempo/latest/configuration/#metrics-generator
<span class="p">@@ -293,7 +314,7 @@</span> distributor:
     # -- Type of service for the distributor
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
<span class="gd">-    loadBalancerIP: ""
</span><span class="gi">+    loadBalancerIP: ''
</span>     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
<span class="p">@@ -319,14 +340,14 @@</span> distributor:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.distributorSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.distributorSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "distributor") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for distributor pods
   nodeSelector: {}
<span class="p">@@ -426,14 +447,14 @@</span> querier:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.querierSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier" "memberlist" true) | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.querierSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "querier" "memberlist" true) | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for querier pods
   nodeSelector: {}
<span class="p">@@ -532,14 +553,14 @@</span> queryFrontend:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.queryFrontendSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.queryFrontendSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "query-frontend") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for query-frontend pods
   nodeSelector: {}
<span class="p">@@ -574,7 +595,7 @@</span> traces:
       # -- Jaeger Thrift Compact receiver config
       receiverConfig: {}
     thriftHttp:
<span class="gd">-       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
</span><span class="gi">+      # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
</span>       enabled: false
       # -- Jaeger Thrift HTTP receiver config
       receiverConfig: {}
<span class="p">@@ -602,7 +623,6 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gd">-
</span> # -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
 
 # @default -- See values.yaml
<span class="p">@@ -610,6 +630,52 @@</span> config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
   search_enabled: {{ .Values.search.enabled }}
   metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
<span class="gi">+
+  {{- if .Values.enterprise.enabled }}
+  license:
+    path: "/license/license.jwt"
+
+  admin_api:
+    leader_election:
+      enabled: true
+      ring:
+        kvstore:
+          store: "memberlist"
+
+  {{- if .Values.minio.enabled }}
+  admin_client:
+    storage:
+      backend: s3
+      s3:
+        access_key_id: {{ .Values.minio.rootUser }}
+        bucket_name: enterprise-traces-admin
+        endpoint: {{ .Release.Name }}-minio.{{ .Release.Namespace }}.svc:9000
+        insecure: true
+        secret_access_key: {{ .Values.minio.rootPassword }}
+    {{- end }}
+  {{- end }}
+
+  {{- if and .Values.enterprise.enabled .Values.enterpriseGateway.useDefaultProxyURLs }}
+  gateway:
+    proxy:
+      admin_api:
+        url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      compactor:
+        url: http://{{ template "tempo.fullname" . }}-compactor.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      default:
+        url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      distributor:
+        url: http://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      distributor_ingest:
+        url: h2c://{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc:4317
+      ingester:
+        url: http://{{ template "tempo.fullname" . }}-ingester.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      querier:
+        url: http://{{ template "tempo.fullname" . }}-querier.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      query_frontend:
+        url: http://{{ template "tempo.fullname" . }}-query-frontend.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}{{get .Values.tempo.structuredConfig "http_api_prefix"}}
+  {{- end }}
+
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="p">@@ -702,7 +768,7 @@</span> config: |
     {{- end }}
   querier:
     frontend_worker:
<span class="gd">-      frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
</span><span class="gi">+      frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend") }}:9095
</span>       {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
       grpc_client_config:
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
<span class="p">@@ -773,7 +839,7 @@</span> config: |
 server:
   # --  HTTP server listen host
   httpListenPort: 3100
<span class="gd">-  # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
</span><span class="gi">+  # -- Log level. Can be set to trace, debug, info (default), warn, error, fatal, panic
</span>   logLevel: info
   # -- Log format. Can be set to logfmt (default) or json.
   logFormat: logfmt
<span class="p">@@ -781,6 +847,7 @@</span> server:
   grpc_server_max_recv_msg_size: 4194304
   # -- Max gRPC message size that can be sent
   grpc_server_max_send_msg_size: 4194304
<span class="gi">+
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="p">@@ -841,14 +908,14 @@</span> memcached:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.memcachedSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "memcached") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   service:
     # -- Annotations for memcached service
<span class="p">@@ -869,32 +936,112 @@</span> memcachedExporter:
     # -- Memcached Exporter resource requests and limits
   resources: {}
 
<span class="gd">-# ServiceMonitor configuration
-serviceMonitor:
-  # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
-  enabled: false
-  # -- Alternative namespace for ServiceMonitor resources
-  namespace: null
-  # -- Namespace selector for ServiceMonitor resources
-  namespaceSelector: {}
-  # -- ServiceMonitor annotations
-  annotations: {}
-  # -- Additional ServiceMonitor labels
-  labels: {}
-  # -- ServiceMonitor scrape interval
-  interval: null
-  # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
-  scrapeTimeout: null
-  # -- ServiceMonitor relabel configs to apply to samples before scraping
-  # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
-  relabelings: []
-  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
-  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
-  metricRelabelings: []
-  # -- ServiceMonitor will use http by default, but you can pick https as well
-  scheme: http
-  # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
-  tlsConfig: null
</span><span class="gi">+metaMonitoring:
+  # ServiceMonitor configuration
+  serviceMonitor:
+    # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
+    enabled: false
+    # -- Alternative namespace for ServiceMonitor resources
+    namespace: null
+    # -- Namespace selector for ServiceMonitor resources
+    namespaceSelector: {}
+    # -- ServiceMonitor annotations
+    annotations: {}
+    # -- Additional ServiceMonitor labels
+    labels: {}
+    # -- ServiceMonitor scrape interval
+    interval: null
+    # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
+    scrapeTimeout: null
+    # -- ServiceMonitor relabel configs to apply to samples before scraping
+    # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+    relabelings: []
+    # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+    # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+    metricRelabelings: []
+    # -- ServiceMonitor will use http by default, but you can pick https as well
+    scheme: http
+    # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
+    tlsConfig: null
+
+  # metaMonitoringAgent configures the built in Grafana Agent that can scrape metrics and logs and send them to a local or remote destination
+  grafanaAgent:
+    # -- Controls whether to create PodLogs, MetricsInstance, LogsInstance, and GrafanaAgent CRs to scrape the
+    # ServiceMonitors of the chart and ship metrics and logs to the remote endpoints below.
+    # Note that you need to configure serviceMonitor in order to have some metrics available.
+    enabled: false
+
+    # -- Controls whether to install the Grafana Agent Operator and its CRDs.
+    # Note that helm will not install CRDs if this flag is enabled during an upgrade.
+    # In that case install the CRDs manually from https://github.com/grafana/agent/tree/main/production/operator/crds
+    installOperator: false
+
+    logs:
+      # -- Default destination for logs. The config here is translated to Promtail client
+      # configuration to write logs to this Loki-compatible remote. Optional.
+      remote:
+        # -- Full URL for Loki push endpoint. Usually ends in /loki/api/v1/push
+        url: ''
+
+        auth:
+          # -- Used to set X-Scope-OrgID header on requests. Usually not used in combination with username and password.
+          tenantId: ''
+
+          # -- Basic authentication username. Optional.
+          username: ''
+
+          # -- The value under key passwordSecretKey in this secret will be used as the basic authentication password. Required only if passwordSecretKey is set.
+          passwordSecretName: ''
+          # -- The value under this key in passwordSecretName will be used as the basic authentication password. Required only if passwordSecretName is set.
+          passwordSecretKey: ''
+
+      # -- Client configurations for the LogsInstance that will scrape Mimir pods. Follows the format of .remote.
+      additionalClientConfigs: []
+
+    metrics:
+      # -- Default destination for metrics. The config here is translated to remote_write
+      # configuration to push metrics to this Prometheus-compatible remote. Optional.
+      # Note that you need to configure serviceMonitor in order to have some metrics available.
+      remote:
+        # -- Full URL for Prometheus remote-write. Usually ends in /push
+        url: ''
+
+        # -- Used to add HTTP headers to remote-write requests.
+        headers: {}
+        auth:
+          # -- Basic authentication username. Optional.
+          username: ''
+
+          # -- The value under key passwordSecretKey in this secret will be used as the basic authentication password. Required only if passwordSecretKey is set.
+          passwordSecretName: ''
+          # -- The value under this key in passwordSecretName will be used as the basic authentication password. Required only if passwordSecretName is set.
+          passwordSecretKey: ''
+
+      # -- Additional remote-write for the MetricsInstance that will scrape Mimir pods. Follows the format of .remote.
+      additionalRemoteWriteConfigs: []
+
+      scrapeK8s:
+        # -- When grafanaAgent.enabled and serviceMonitor.enabled, controls whether to create ServiceMonitors CRs
+        # for cadvisor, kubelet, and kube-state-metrics. The scraped metrics are reduced to those pertaining to
+        # Mimir pods only.
+        enabled: true
+
+        # -- Controls service discovery of kube-state-metrics.
+        kubeStateMetrics:
+          namespace: kube-system
+          labelSelectors:
+            app.kubernetes.io/name: kube-state-metrics
+
+    # -- Sets the namespace of the resources. Leave empty or unset to use the same namespace as the Helm release.
+    namespace: ''
+
+    # -- Labels to add to all monitoring.grafana.com custom resources.
+    # Does not affect the ServiceMonitors for kubernetes metrics; use serviceMonitor.labels for that.
+    labels: {}
+
+    # -- Annotations to add to all monitoring.grafana.com custom resources.
+    # Does not affect the ServiceMonitors for kubernetes metrics; use serviceMonitor.annotations for that.
+    annotations: {}
</span> 
 # Rules for the Prometheus Operator
 prometheusRule:
<span class="p">@@ -917,6 +1064,30 @@</span> prometheusRule:
   #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
   #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
 
<span class="gi">+minio:
+  enabled: true
+  mode: standalone
+  rootUser: grafana-tempo
+  rootPassword: supersecret
+  buckets:
+    - name: tempo-traces
+      policy: none
+      purge: false
+    - name: enterprise-traces
+      policy: none
+      purge: false
+    - name: enterprise-traces-admin
+      policy: none
+      purge: false
+  persistence:
+    size: 5Gi
+  resources:
+    requests:
+      cpu: 100m
+      memory: 128Mi
+  # Changed the mc config path to '/tmp' from '/etc' as '/etc' is only writable by root and OpenShift will not permit this.
+  configPathmc: '/tmp/minio/mc/'
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="p">@@ -972,14 +1143,14 @@</span> gateway:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.gatewaySelectorLabels" . | nindent 10 }}
</span><span class="gi">+              {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 10 }}
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.gatewaySelectorLabels" . | nindent 12 }}
</span><span class="gi">+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "gateway") | nindent 12 }}
</span>             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for gateway pods
   nodeSelector: {}
<span class="p">@@ -1040,7 +1211,7 @@</span> gateway:
   readinessProbe:
     httpGet:
       path: /
<span class="gd">-      port: http
</span><span class="gi">+      port: http-metrics
</span>     initialDelaySeconds: 15
     timeoutSeconds: 1
   nginxConfig:
<span class="p">@@ -1050,9 +1221,9 @@</span> gateway:
               '"$request" $body_bytes_sent "$http_referer" '
               '"$http_user_agent" "$http_x_forwarded_for"';
     # -- Allows appending custom configuration to the server block
<span class="gd">-    serverSnippet: ""
</span><span class="gi">+    serverSnippet: ''
</span>     # -- Allows appending custom configuration to the http block
<span class="gd">-    httpSnippet: ""
</span><span class="gi">+    httpSnippet: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -1110,39 +1281,39 @@</span> gateway:
           }
 
           location = /jaeger/api/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
</span>           }
 
           location = /zipkin/spans {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
</span>           }
 
           location = /otlp/v1/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span>           }
 
           location ^~ /api {
<span class="gd">-            proxy_pass       http://{{ include "tempo.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /flush {
<span class="gd">-            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "ingester") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /shutdown {
<span class="gd">-            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "ingester") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /distributor/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /ingester/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /compactor/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.compactorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "compactor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -1150,3 +1321,213 @@</span> gateway:
           {{- end }}
         }
       }
<span class="gi">+
+##############################################################################
+# The values in and after the `enterprise:` key configure the enterprise features
+enterprise:
+  # Enable enterprise features. License must be provided, nginx gateway is not installed, instead
+  # the enterprise gateway is used.
+  enabled: false
+
+  image:
+    # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
+    repository: grafana/enterprise-traces
+    # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
+    tag: weekly-r58-94739e17
+    # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
+
+# In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
+# license, either by providing the contents of the license.jwt, or the name Kubernetes Secret that contains your license.jwt.
+# To set the license contents, use the flag `--set-file 'license.contents=./license.jwt'`
+# To use your own Kubernetes Secret, `--set license.external=true`.
+license:
+  contents: 'NOTAVALIDLICENSE'
+  external: false
+  secretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "license") }}'
+
+# Settings for the initial admin(istrator) token generator job. Can only be enabled if
+# enterprise.enabled is true - requires license.
+tokengenJob:
+  enable: true
+  extraArgs: {}
+  env: []
+  extraEnvFrom: []
+  annotations: {}
+  initContainers: []
+  # -- The SecurityContext for tokenjobgen containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+# Settings for the admin_api service providing authentication and authorization service.
+# Can only be enabled if enterprise.enabled is true - requires license.
+adminApi:
+  replicas: 1
+
+  annotations: {}
+  service:
+    annotations: {}
+    labels: {}
+
+  initContainers: []
+
+  strategy:
+    type: RollingUpdate
+    rollingUpdate:
+      maxSurge: 0
+      maxUnavailable: 1
+
+  podLabels: {}
+  podAnnotations: {}
+
+  nodeSelector: {}
+  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Soft node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "admin-api") | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+
+  # Pod Disruption Budget
+  podDisruptionBudget: {}
+
+  securityContext: {}
+
+  # -- The SecurityContext for admin_api containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+  extraArgs: {}
+
+  persistence:
+    subPath:
+
+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http-metrics
+    initialDelaySeconds: 45
+
+  resources:
+    requests:
+      cpu: 10m
+      memory: 32Mi
+
+  terminationGracePeriodSeconds: 60
+
+  tolerations: []
+  extraContainers: []
+  extraVolumes: []
+  extraVolumeMounts: []
+  env: []
+  extraEnvFrom: []
+
+# Settings for the gateway service providing authentication and authorization via the admin_api.
+# Can only be enabled if enterprise.enabled is true - requires license.
+enterpriseGateway:
+  # If you want to use your own proxy URLs, set this to false.
+  useDefaultProxyURLs: true
+  replicas: 1
+
+  annotations: {}
+  service:
+    annotations: {}
+    labels: {}
+    # -- If the port is left undefined, the service will listen on the same port as the pod
+    port: null
+
+  strategy:
+    type: RollingUpdate
+    rollingUpdate:
+      maxSurge: 0
+      maxUnavailable: 1
+
+  podLabels: {}
+  podAnnotations: {}
+
+  # Pod Disruption Budget
+  podDisruptionBudget: {}
+
+  nodeSelector: {}
+  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Soft node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.selectorLabels" (dict "ctx" . "component" "enterprise-gateway") | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+
+  securityContext:
+    {}
+
+    # -- The SecurityContext for gateway containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+  initContainers: []
+
+  extraArgs: {}
+
+  persistence:
+    subPath:
+
+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http-metrics
+    initialDelaySeconds: 45
+
+  resources:
+    requests:
+      cpu: 10m
+      memory: 32Mi
+
+  terminationGracePeriodSeconds: 60
+
+  tolerations: []
+  extraContainers: []
+  extraVolumes: []
+  extraVolumeMounts: []
+  env: []
+  extraEnvFrom: []
+
+  # Ingress configuration
+  ingress:
+    # -- Specifies whether an ingress for the gateway should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: gateway
+    # -- Annotations for the gateway ingress
+    annotations: {}
+    # -- Hosts configuration for the gateway ingress
+    hosts:
+      - host: gateway.gem.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the gateway ingress
+    tls:
+      - secretName: gem-gateway-tls
+        hosts:
+          - gateway.gem.example.com
</span><span class="err">
</span></code></pre></div></div> <h2 id="02610"> <a href="#02610" class="anchor-heading" aria-labelledby="02610"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.10 </h2> <p><strong>Release date:</strong> 2022-10-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add installation guide to tempo chart</li> </ul> <h3 id="default-value-changes-121"> <a href="#default-value-changes-121" class="anchor-heading" aria-labelledby="default-value-changes-121"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0266"> <a href="#0266" class="anchor-heading" aria-labelledby="0266"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.6 </h2> <p><strong>Release date:</strong> 2022-10-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> add installation guide to tempo chart</li> <li>Update readme after minio change</li> <li>Swap helm repo version for the one used elsewhere in this repo</li> <li>Swap helm repo url for the one used elsewhere in this repo</li> <li>Avoid distributorLabels when using more than one distributor</li> <li>Update charts/tempo-distributed/templates/metamonitoring/logs-instance-usernames-secret.yaml</li> <li>Update charts/tempo-distributed/templates/metamonitoring/kubelet-cadvisor-servmon.yaml</li> <li>Update charts/tempo-distributed/templates/metamonitoring/kube-state-metrics-servmon.yaml</li> <li>Update poddisruptionbudget to use $dict</li> <li>Use existing $dict</li> <li>Drop enterprise.legacyLabels</li> <li>Fix enterpriseGateway proxy URLs for read and write</li> <li>Update charts/tempo-distributed/Chart.yaml</li> <li>Update docs after rebase</li> <li>Template the affinity for enterprise components</li> <li>Revert <a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a>: adjust affinity labels to be consistent</li> <li> </ul> <h3 id="default-value-changes-122"> <a href="#default-value-changes-122" class="anchor-heading" aria-labelledby="default-value-changes-122"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0270"> <a href="#0270" class="anchor-heading" aria-labelledby="0270"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.0 </h2> <p><strong>Release date:</strong> 2022-09-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li> <li> <li> <li> <li>Update charts/tempo-distributed/templates/_helpers.tpl</li> <li> <li> <li> <li> <li> <li> <li>Update policy api version to policy/v1</li> <li>Update template reference for querier labels</li> <li>Include enterprise gateway proxy config values</li> <li>Update port specs</li> <li>Update port names for ServiceMonitor handling</li> <li>Use enterprise-gateway label in enterprise-gateway</li> <li>Mount the license for metrics-generator</li> <li>Bump image version</li> <li>Syntax on metrics generator</li> <li>Include license on sts</li> <li>Implement enterprise gateway</li> <li>Update admin-api for volume locations</li> <li>Update values for enterprise</li> <li>Include enterprise license secret</li> <li>Include tokengen from Mimir for enterprise use</li> <li>Include admin-api from mimir</li> <li>Add minio and grafana agent operator support</li> <li>Update component name handling</li> <li>Fix tempo-query servicemonitor name</li> <li>Update configmap handling for secret support</li> <li>Additional resourceName usage</li> <li>Update secret name</li> <li>Include pdb lib from Mimir</li> <li>Update volume handling</li> <li>Update pdb name references</li> <li>Update hpa name references</li> <li>Update memcached image handling</li> <li>Update service name handling</li> <li>Centralize service-monitor</li> <li>Drop centralized helpers for components</li> <li>Update some image handling</li> <li>Update some image handling</li> <li>Update some image handling</li> <li>Update helpers to further centralize</li> <li>Include license values to prep for enterprise</li> <li>Include config handling value updates</li> <li>Adjust gossip-ring labels and selectors</li> <li>Include <code class="language-plaintext highlighter-rouge">enterprise</code> top level key for laying groundwork</li> <li>Include additional helpers</li> <li>Include value template updates</li> <li>Include central label helpers</li> <li>Update helpers for import</li> <li>Centralize labels into common helpers</li> </ul> <h3 id="default-value-changes-123"> <a href="#default-value-changes-123" class="anchor-heading" aria-labelledby="default-value-changes-123"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a8416a16..51e28250 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,20 +1,35 @@</span>
 global:
   image:
<span class="gd">-    # -- Overrides the Docker registry globally for all images
</span><span class="gi">+    # -- Overrides the Docker registry globally for all images, excluding enterprise.
</span>     registry: docker.io
   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="gd">-  clusterDomain: "cluster.local"
</span><span class="gi">+  clusterDomain: 'cluster.local'
</span>   # -- configures DNS service name
<span class="gd">-  dnsService: "kube-dns"
</span><span class="gi">+  dnsService: 'kube-dns'
</span>   # -- configures DNS service namespace
<span class="gd">-  dnsNamespace: "kube-system"
-
-# -- Overrides the chart's computed fullname
-fullnameOverride: ""
</span><span class="gi">+  dnsNamespace: 'kube-system'
+fullnameOverride: ''
</span> # fullnameOverride: tempo
 
<span class="gi">+# -- Configuration is loaded from the secret called 'externalConfigSecretName'.
+# If 'useExternalConfig' is true, then the configuration is not generated, just
+# consumed.  Top level keys for `tempo.yaml` and `overrides.yaml` are to be
+# provided by the user.
+useExternalConfig: false
+
+# -- Defines what kind of object stores the configuration, a ConfigMap or a Secret.
+# In order to move sensitive information (such as credentials) from the ConfigMap/Secret to a more secure location (e.g. vault), it is possible to use [environment variables in the configuration](https://grafana.com/docs/mimir/latest/operators-guide/configuring/reference-configuration-parameters/#use-environment-variables-in-the-configuration).
+# Such environment variables can be then stored in a separate Secret and injected via the global.extraEnvFrom value. For details about environment injection from a Secret please see [Secrets](https://kubernetes.io/docs/concepts/configuration/secret/#use-case-as-container-environment-variables).
+configStorageType: ConfigMap
+
+# -- Name of the Secret or ConfigMap that contains the configuration (used for naming even if config is internal).
+externalConfigSecretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "config") }}'
+
+# -- When 'useExternalConfig' is true, then changing 'externalConfigVersion' triggers restart of services - otherwise changes to the configuration cause a restart.
+externalConfigVersion: '0'
+
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -27,7 +42,7 @@</span> tempo:
   readinessProbe:
     httpGet:
       path: /ready
<span class="gd">-      port: http
</span><span class="gi">+      port: http-metrics
</span>     initialDelaySeconds: 30
     timeoutSeconds: 1
   # -- Global labels for all tempo pods
<span class="p">@@ -109,23 +124,22 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gd">-  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for ingester pods.
</span>   # @default -- Soft node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
<span class="gi">+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              app.kubernetes.io/component: ingester
+          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
-            topologyKey: kubernetes.io/hostname
-        - weight: 75
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: ingester
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -199,22 +213,22 @@</span> metricsGenerator:
   # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gd">-  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for metrics-generator pods.
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: metrics-generator
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: metrics-generator
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for metrics-generator pods
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
<span class="p">@@ -237,7 +251,7 @@</span> metricsGenerator:
     - name: http-memberlist
       port: 7946
       service: false
<span class="gd">-    - name: http
</span><span class="gi">+    - name: http-metrics
</span>       port: 3100
       service: true
   # -- More information on configuration: https://grafana.com/docs/tempo/latest/configuration/#metrics-generator
<span class="p">@@ -299,7 +313,7 @@</span> distributor:
     # -- Type of service for the distributor
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
<span class="gd">-    loadBalancerIP: ""
</span><span class="gi">+    loadBalancerIP: ''
</span>     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
<span class="p">@@ -318,22 +332,22 @@</span> distributor:
   resources: {}
   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gd">-  # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for distributor pods.
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.distributorSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: distributor
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.distributorSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: distributor
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -425,22 +439,22 @@</span> querier:
   resources: {}
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gd">-  # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for querier pod.
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.querierSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: querier
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.querierSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: querier
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -531,22 +545,22 @@</span> queryFrontend:
   resources: {}
   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gd">-  # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for query-frontend pods
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.queryFrontendSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: querier-frontend
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.queryFrontendSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: query-frontend
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -580,7 +594,7 @@</span> traces:
       # -- Jaeger Thrift Compact receiver config
       receiverConfig: {}
     thriftHttp:
<span class="gd">-       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
</span><span class="gi">+      # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
</span>       enabled: false
       # -- Jaeger Thrift HTTP receiver config
       receiverConfig: {}
<span class="p">@@ -608,7 +622,6 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gd">-
</span> # -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
 
 # @default -- See values.yaml
<span class="p">@@ -616,6 +629,50 @@</span> config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
   search_enabled: {{ .Values.search.enabled }}
   metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
<span class="gi">+
+  {{- if .Values.enterprise.enabled }}
+  license:
+    path: "/license/license.jwt"
+
+  admin_api:
+    leader_election:
+      enabled: true
+      ring:
+        kvstore:
+          store: "memberlist"
+
+  {{- if .Values.minio.enabled }}
+  admin_client:
+    storage:
+      backend: s3
+      s3:
+        access_key_id: {{ .Values.minio.rootUser }}
+        bucket_name: enterprise-traces-admin
+        endpoint: {{ .Release.Name }}-minio.{{ .Release.Namespace }}.svc:9000
+        insecure: true
+        secret_access_key: {{ .Values.minio.rootPassword }}
+    {{- end }}
+  {{- end }}
+
+  {{- if and .Values.enterprise.enabled .Values.enterpriseGateway.useDefaultProxyURLs }}
+  gateway:
+    proxy:
+      admin_api:
+        url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      compactor:
+        url: http://{{ template "tempo.fullname" . }}-compactor.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      default:
+        url: http://{{ template "tempo.fullname" . }}-admin-api.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      distributor:
+        url: http:///{{ template "tempo.fullname" . }}-distributor.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:{{ include "tempo.serverGrpcListenPort" . }}
+      ingester:
+        url: http://{{ template "tempo.fullname" . }}-ingester.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      querier:
+        url: http://{{ template "tempo.fullname" . }}querier.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+      query_frontend:
+        url: http://{{ template "tempo.fullname" . }}-query-frontend.{{ .Release.Namespace }}.svc:{{ include "tempo.serverHttpListenPort" . }}
+  {{- end }}
+
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="p">@@ -708,7 +765,7 @@</span> config: |
     {{- end }}
   querier:
     frontend_worker:
<span class="gd">-      frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
</span><span class="gi">+      frontend_address: {{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend") }}:9095
</span>       {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
       grpc_client_config:
         {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
<span class="p">@@ -787,6 +844,7 @@</span> server:
   grpc_server_max_recv_msg_size: 4194304
   # -- Max gRPC message size that can be sent
   grpc_server_max_send_msg_size: 4194304
<span class="gi">+
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="p">@@ -840,22 +898,22 @@</span> memcached:
   podAnnotations: {}
   # -- Resource requests and limits for memcached
   resources: {}
<span class="gd">-  # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for memcached pods.
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.memcachedSelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: memcached
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: memcached
+            topologyKey: topology.kubernetes.io/zone
</span>   service:
     # -- Annotations for memcached service
     annotations: {}
<span class="p">@@ -875,32 +933,112 @@</span> memcachedExporter:
     # -- Memcached Exporter resource requests and limits
   resources: {}
 
<span class="gd">-# ServiceMonitor configuration
-serviceMonitor:
-  # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
-  enabled: false
-  # -- Alternative namespace for ServiceMonitor resources
-  namespace: null
-  # -- Namespace selector for ServiceMonitor resources
-  namespaceSelector: {}
-  # -- ServiceMonitor annotations
-  annotations: {}
-  # -- Additional ServiceMonitor labels
-  labels: {}
-  # -- ServiceMonitor scrape interval
-  interval: null
-  # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
-  scrapeTimeout: null
-  # -- ServiceMonitor relabel configs to apply to samples before scraping
-  # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
-  relabelings: []
-  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
-  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
-  metricRelabelings: []
-  # -- ServiceMonitor will use http by default, but you can pick https as well
-  scheme: http
-  # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
-  tlsConfig: null
</span><span class="gi">+metaMonitoring:
+  # ServiceMonitor configuration
+  serviceMonitor:
+    # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
+    enabled: false
+    # -- Alternative namespace for ServiceMonitor resources
+    namespace: null
+    # -- Namespace selector for ServiceMonitor resources
+    namespaceSelector: {}
+    # -- ServiceMonitor annotations
+    annotations: {}
+    # -- Additional ServiceMonitor labels
+    labels: {}
+    # -- ServiceMonitor scrape interval
+    interval: null
+    # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
+    scrapeTimeout: null
+    # -- ServiceMonitor relabel configs to apply to samples before scraping
+    # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+    relabelings: []
+    # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+    # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+    metricRelabelings: []
+    # -- ServiceMonitor will use http by default, but you can pick https as well
+    scheme: http
+    # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
+    tlsConfig: null
+
+  # metaMonitoringAgent configures the built in Grafana Agent that can scrape metrics and logs and send them to a local or remote destination
+  grafanaAgent:
+    # -- Controls whether to create PodLogs, MetricsInstance, LogsInstance, and GrafanaAgent CRs to scrape the
+    # ServiceMonitors of the chart and ship metrics and logs to the remote endpoints below.
+    # Note that you need to configure serviceMonitor in order to have some metrics available.
+    enabled: false
+
+    # -- Controls whether to install the Grafana Agent Operator and its CRDs.
+    # Note that helm will not install CRDs if this flag is enabled during an upgrade.
+    # In that case install the CRDs manually from https://github.com/grafana/agent/tree/main/production/operator/crds
+    installOperator: false
+
+    logs:
+      # -- Default destination for logs. The config here is translated to Promtail client
+      # configuration to write logs to this Loki-compatible remote. Optional.
+      remote:
+        # -- Full URL for Loki push endpoint. Usually ends in /loki/api/v1/push
+        url: ''
+
+        auth:
+          # -- Used to set X-Scope-OrgID header on requests. Usually not used in combination with username and password.
+          tenantId: ''
+
+          # -- Basic authentication username. Optional.
+          username: ''
+
+          # -- The value under key passwordSecretKey in this secret will be used as the basic authentication password. Required only if passwordSecretKey is set.
+          passwordSecretName: ''
+          # -- The value under this key in passwordSecretName will be used as the basic authentication password. Required only if passwordSecretName is set.
+          passwordSecretKey: ''
+
+      # -- Client configurations for the LogsInstance that will scrape Mimir pods. Follows the format of .remote.
+      additionalClientConfigs: []
+
+    metrics:
+      # -- Default destination for metrics. The config here is translated to remote_write
+      # configuration to push metrics to this Prometheus-compatible remote. Optional.
+      # Note that you need to configure serviceMonitor in order to have some metrics available.
+      remote:
+        # -- Full URL for Prometheus remote-write. Usually ends in /push
+        url: ''
+
+        # -- Used to add HTTP headers to remote-write requests.
+        headers: {}
+        auth:
+          # -- Basic authentication username. Optional.
+          username: ''
+
+          # -- The value under key passwordSecretKey in this secret will be used as the basic authentication password. Required only if passwordSecretKey is set.
+          passwordSecretName: ''
+          # -- The value under this key in passwordSecretName will be used as the basic authentication password. Required only if passwordSecretName is set.
+          passwordSecretKey: ''
+
+      # -- Additional remote-write for the MetricsInstance that will scrape Mimir pods. Follows the format of .remote.
+      additionalRemoteWriteConfigs: []
+
+      scrapeK8s:
+        # -- When grafanaAgent.enabled and serviceMonitor.enabled, controls whether to create ServiceMonitors CRs
+        # for cadvisor, kubelet, and kube-state-metrics. The scraped metrics are reduced to those pertaining to
+        # Mimir pods only.
+        enabled: true
+
+        # -- Controls service discovery of kube-state-metrics.
+        kubeStateMetrics:
+          namespace: kube-system
+          labelSelectors:
+            app.kubernetes.io/name: kube-state-metrics
+
+    # -- Sets the namespace of the resources. Leave empty or unset to use the same namespace as the Helm release.
+    namespace: ''
+
+    # -- Labels to add to all monitoring.grafana.com custom resources.
+    # Does not affect the ServiceMonitors for kubernetes metrics; use serviceMonitor.labels for that.
+    labels: {}
+
+    # -- Annotations to add to all monitoring.grafana.com custom resources.
+    # Does not affect the ServiceMonitors for kubernetes metrics; use serviceMonitor.annotations for that.
+    annotations: {}
</span> 
 # Rules for the Prometheus Operator
 prometheusRule:
<span class="p">@@ -923,6 +1061,30 @@</span> prometheusRule:
   #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
   #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
 
<span class="gi">+minio:
+  enabled: true
+  mode: standalone
+  rootUser: grafana-tempo
+  rootPassword: supersecret
+  buckets:
+    - name: tempo-traces
+      policy: none
+      purge: false
+    - name: enterprise-traces
+      policy: none
+      purge: false
+    - name: enterprise-traces-admin
+      policy: none
+      purge: false
+  persistence:
+    size: 5Gi
+  resources:
+    requests:
+      cpu: 100m
+      memory: 128Mi
+  # Changed the mc config path to '/tmp' from '/etc' as '/etc' is only writable by root and OpenShift will not permit this.
+  configPathmc: '/tmp/minio/mc/'
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="p">@@ -971,22 +1133,22 @@</span> gateway:
   resources: {}
   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gd">-  # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for gateway pods.
</span>   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
</span><span class="gi">+  affinity:
</span>     podAntiAffinity:
       requiredDuringSchedulingIgnoredDuringExecution:
         - labelSelector:
             matchLabels:
<span class="gd">-              {{- include "tempo.gatewaySelectorLabels" . | nindent 10 }}
</span><span class="gi">+              app.kubernetes.io/component: gateway
</span>           topologyKey: kubernetes.io/hostname
       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="gd">-                {{- include "tempo.gatewaySelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+                app.kubernetes.io/component: gateway
+            topologyKey: topology.kubernetes.io/zone
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -1046,7 +1208,7 @@</span> gateway:
   readinessProbe:
     httpGet:
       path: /
<span class="gd">-      port: http
</span><span class="gi">+      port: http-metrics
</span>     initialDelaySeconds: 15
     timeoutSeconds: 1
   nginxConfig:
<span class="p">@@ -1056,9 +1218,9 @@</span> gateway:
               '"$request" $body_bytes_sent "$http_referer" '
               '"$http_user_agent" "$http_x_forwarded_for"';
     # -- Allows appending custom configuration to the server block
<span class="gd">-    serverSnippet: ""
</span><span class="gi">+    serverSnippet: ''
</span>     # -- Allows appending custom configuration to the http block
<span class="gd">-    httpSnippet: ""
</span><span class="gi">+    httpSnippet: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -1116,39 +1278,39 @@</span> gateway:
           }
 
           location = /jaeger/api/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
</span>           }
 
           location = /zipkin/spans {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
</span>           }
 
           location = /otlp/v1/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span>           }
 
           location ^~ /api {
<span class="gd">-            proxy_pass       http://{{ include "tempo.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "query-frontend") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /flush {
<span class="gd">-            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "ingester") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /shutdown {
<span class="gd">-            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "ingester") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /distributor/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /ingester/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "distributor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location = /compactor/ring {
<span class="gd">-            proxy_pass       http://{{ include "tempo.compactorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.resourceName" (dict "ctx" . "component" "compactor") }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -1156,3 +1318,186 @@</span> gateway:
           {{- end }}
         }
       }
<span class="gi">+
+##############################################################################
+# The values in and after the `enterprise:` key configure the enterprise features
+enterprise:
+  # Enable enterprise features. License must be provided, nginx gateway is not installed, instead
+  # the enterprise gateway is used.
+  enabled: false
+
+  # Whether to generate pre-2.0 Grafana Enterprise Metrics resource labels and selectors, or generate new Kubernetes standard selectors.
+  # Rolling upgrade from version 1.7.x without downtime requires this setting to be true. Fresh installation or upgrade with downtime can set
+  # it to false.
+  legacyLabels: false
+
+  image:
+    # -- Grafana Enterprise Metrics container image repository. Note: for Grafana Tempo use the value 'image.repository'
+    repository: grafana/enterprise-traces
+    # -- Grafana Enterprise Metrics container image tag. Note: for Grafana Tempo use the value 'image.tag'
+    tag: weekly-r58-94739e17
+    # Note: pullPolicy and optional pullSecrets are set in toplevel 'image' section, not here
+
+# In order to use Grafana Enterprise Traces features, you will need to provide the contents of your Grafana Enterprise Traces
+# license, either by providing the contents of the license.jwt, or the name Kubernetes Secret that contains your license.jwt.
+# To set the license contents, use the flag `--set-file 'license.contents=./license.jwt'`
+# To use your own Kubernetes Secret, `--set license.external=true`.
+license:
+  contents: 'NOTAVALIDLICENSE'
+  external: false
+  secretName: '{{ include "tempo.resourceName" (dict "ctx" . "component" "license") }}'
+
+# Settings for the initial admin(istrator) token generator job. Can only be enabled if
+# enterprise.enabled is true - requires license.
+tokengenJob:
+  enable: true
+  extraArgs: {}
+  env: []
+  extraEnvFrom: []
+  annotations: {}
+  initContainers: []
+  # -- The SecurityContext for tokenjobgen containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+# Settings for the admin_api service providing authentication and authorization service.
+# Can only be enabled if enterprise.enabled is true - requires license.
+adminApi:
+  replicas: 1
+
+  annotations: {}
+  service:
+    annotations: {}
+    labels: {}
+
+  initContainers: []
+
+  strategy:
+    type: RollingUpdate
+    rollingUpdate:
+      maxSurge: 0
+      maxUnavailable: 1
+
+  podLabels: {}
+  podAnnotations: {}
+
+  nodeSelector: {}
+  affinity: {}
+
+  # Pod Disruption Budget
+  podDisruptionBudget: {}
+
+  securityContext: {}
+
+  # -- The SecurityContext for admin_api containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+  extraArgs: {}
+
+  persistence:
+    subPath:
+
+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http-metrics
+    initialDelaySeconds: 45
+
+  resources:
+    requests:
+      cpu: 10m
+      memory: 32Mi
+
+  terminationGracePeriodSeconds: 60
+
+  tolerations: []
+  extraContainers: []
+  extraVolumes: []
+  extraVolumeMounts: []
+  env: []
+  extraEnvFrom: []
+
+# Settings for the gateway service providing authentication and authorization via the admin_api.
+# Can only be enabled if enterprise.enabled is true - requires license.
+enterpriseGateway:
+  # If you want to use your own proxy URLs, set this to false.
+  useDefaultProxyURLs: true
+  replicas: 1
+
+  annotations: {}
+  service:
+    annotations: {}
+    labels: {}
+    # -- If the port is left undefined, the service will listen on the same port as the pod
+    port: null
+
+  strategy:
+    type: RollingUpdate
+    rollingUpdate:
+      maxSurge: 0
+      maxUnavailable: 1
+
+  podLabels: {}
+  podAnnotations: {}
+
+  # Pod Disruption Budget
+  podDisruptionBudget: {}
+
+  nodeSelector: {}
+  affinity: {}
+
+  securityContext:
+    {}
+
+    # -- The SecurityContext for gateway containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+
+  initContainers: []
+
+  extraArgs: {}
+
+  persistence:
+    subPath:
+
+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http-metrics
+    initialDelaySeconds: 45
+
+  resources:
+    requests:
+      cpu: 10m
+      memory: 32Mi
+
+  terminationGracePeriodSeconds: 60
+
+  tolerations: []
+  extraContainers: []
+  extraVolumes: []
+  extraVolumeMounts: []
+  env: []
+  extraEnvFrom: []
+
+  # Ingress configuration
+  ingress:
+    # -- Specifies whether an ingress for the gateway should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: gateway
+    # -- Annotations for the gateway ingress
+    annotations: {}
+    # -- Hosts configuration for the gateway ingress
+    hosts:
+      - host: gateway.gem.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the gateway ingress
+    tls:
+      - secretName: gem-gateway-tls
+        hosts:
+          - gateway.gem.example.com
</span><span class="err">
</span></code></pre></div></div> <h2 id="0269"> <a href="#0269" class="anchor-heading" aria-labelledby="0269"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.9 </h2> <p><strong>Release date:</strong> 2022-10-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into main</li> <li>doc(tempo-distributed): updated logLevel in doc</li> </ul> <h3 id="default-value-changes-124"> <a href="#default-value-changes-124" class="anchor-heading" aria-labelledby="default-value-changes-124"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 4a0a4f74..a8416a16 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -219,6 +219,12 @@</span> metricsGenerator:
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
   tolerations: []
<span class="gi">+  # -- The EmptyDir location where the /var/tempo will be mounted on. Defaults to local disk, can be set to memory.
+  walEmptyDir: {}
+    ## Here shows how to configure 1Gi memory as emptyDir.
+    ## Ref: https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#emptydirvolumesource-v1-core
+    # medium: "Memory"
+    # sizeLimit: 1Gi
</span>   # -- Extra volumes for metrics-generator pods
   extraVolumeMounts: []
   # -- Extra volumes for metrics-generator deployment
<span class="err">
</span></code></pre></div></div> <h2 id="0268"> <a href="#0268" class="anchor-heading" aria-labelledby="0268"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.8 </h2> <p><strong>Release date:</strong> 2022-10-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix(tempo-distributed): missing comma in values.yaml</li> <li>Merge pull request #1896 from rbnis/tempo-distributed-0.26.7</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Fix PSP deprecation after k8s 1.25+</li> </ul> <h3 id="default-value-changes-125"> <a href="#default-value-changes-125" class="anchor-heading" aria-labelledby="default-value-changes-125"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3f8ce58d..4a0a4f74 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -773,7 +773,7 @@</span> config: |
 server:
   # --  HTTP server listen host
   httpListenPort: 3100
<span class="gd">-  # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
</span><span class="gi">+  # -- Log level. Can be set to trace, debug, info (default), warn, error, fatal, panic
</span>   logLevel: info
   # -- Log format. Can be set to logfmt (default) or json.
   logFormat: logfmt
<span class="err">
</span></code></pre></div></div> <h2 id="0267"> <a href="#0267" class="anchor-heading" aria-labelledby="0267"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.7 </h2> <p><strong>Release date:</strong> 2022-10-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix(tempo-distributed): make serviceName for ingester statefulSet dynamic</li> <li>update Readme</li> <li>fix/tempo-distr-serviceaccount-ns</li> </ul> <h3 id="default-value-changes-126"> <a href="#default-value-changes-126" class="anchor-heading" aria-labelledby="default-value-changes-126"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0266-1"> <a href="#0266-1" class="anchor-heading" aria-labelledby="0266-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.6 </h2> <p><strong>Release date:</strong> 2022-09-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add installation guide to tempo-distributed chart</li> <li>[loki-distributed] Service LB specs for query-frontend</li> <li>Update README.md</li> <li>Update values.yaml</li> <li>Add example usage of walEmptyDir under values.yaml</li> </ul> <h3 id="default-value-changes-127"> <a href="#default-value-changes-127" class="anchor-heading" aria-labelledby="default-value-changes-127"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8410db58..3f8ce58d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -502,6 +502,10 @@</span> queryFrontend:
     annotations: {}
     # -- Type of service for the queryFrontend
     type: ClusterIP
<span class="gi">+    # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
+    loadBalancerIP: ""
+    # -- If type is LoadBalancer limit incoming traffic from IPs.
+    loadBalancerSourceRanges: []
</span>   serviceDiscovery:
     # -- Annotations for queryFrontendDiscovery service
     annotations: {}
<span class="err">
</span></code></pre></div></div> <h2 id="0265"> <a href="#0265" class="anchor-heading" aria-labelledby="0265"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.5 </h2> <p><strong>Release date:</strong> 2022-09-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update chart version</li> <li>Update documentation</li> <li>Add value for changing metrics-generator wal volume to be able to mount it in memory instead of using local disk as scratch space.</li> </ul> <h3 id="default-value-changes-128"> <a href="#default-value-changes-128" class="anchor-heading" aria-labelledby="default-value-changes-128"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8410db58..296c0237 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -219,6 +219,8 @@</span> metricsGenerator:
   nodeSelector: {}
   # -- Tolerations for metrics-generator pods
   tolerations: []
<span class="gi">+  # -- The EmptyDir location where the /var/tempo will be mounted on. Defaults to local disk, can be set to memory.
+  walEmptyDir:  {}
</span>   # -- Extra volumes for metrics-generator pods
   extraVolumeMounts: []
   # -- Extra volumes for metrics-generator deployment
<span class="err">
</span></code></pre></div></div> <h2 id="0264"> <a href="#0264" class="anchor-heading" aria-labelledby="0264"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.4 </h2> <p><strong>Release date:</strong> 2022-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> fix: remove extraneous ports from query-frontend-discovery service</li> </ul> <h3 id="default-value-changes-129"> <a href="#default-value-changes-129" class="anchor-heading" aria-labelledby="default-value-changes-129"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0263"> <a href="#0263" class="anchor-heading" aria-labelledby="0263"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.3 </h2> <p><strong>Release date:</strong> 2022-09-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Fix ingester pdb to use rep. factor properly</li> <li>Update docs versions to 0.26.2 Set helper tempo.pdb.apiVersion condition to use <code class="language-plaintext highlighter-rouge">.Capabilities.APIVersions.Has</code>
</li> </ul> <h3 id="default-value-changes-130"> <a href="#default-value-changes-130" class="anchor-heading" aria-labelledby="default-value-changes-130"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0262"> <a href="#0262" class="anchor-heading" aria-labelledby="0262"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.2 </h2> <p><strong>Release date:</strong> 2022-09-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo-distributed] Add helper for PodDisruptionBudget API Version</li> <li>update</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-131"> <a href="#default-value-changes-131" class="anchor-heading" aria-labelledby="default-value-changes-131"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0261"> <a href="#0261" class="anchor-heading" aria-labelledby="0261"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.1 </h2> <p><strong>Release date:</strong> 2022-09-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version and update readme</li> <li>Add annotations to ingestors pvc</li> <li>update readme</li> <li>fixes based on PR comments</li> <li>update readme</li> </ul> <h3 id="default-value-changes-132"> <a href="#default-value-changes-132" class="anchor-heading" aria-labelledby="default-value-changes-132"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 4a52379a..8410db58 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -147,6 +147,8 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for ingester's persist volume claim
+    annotations: {}
</span>   config:
     # -- Number of copies of spans to store in the ingester ring
     replication_factor: 3
<span class="p">@@ -232,7 +234,7 @@</span> metricsGenerator:
     - name: http
       port: 3100
       service: true
<span class="gd">-  # https://grafana.com/docs/tempo/latest/configuration/#metrics-generator
</span><span class="gi">+  # -- More information on configuration: https://grafana.com/docs/tempo/latest/configuration/#metrics-generator
</span>   config:
     registry:
       collection_interval: 15s
<span class="p">@@ -240,24 +242,24 @@</span> metricsGenerator:
       stale_duration: 15m
     processor:
       service_graphs:
<span class="gd">-        # Additional dimensions to add to the metrics. Dimensions are searched for in the
-        # resource and span attributes and are added to the metrics if present.
</span><span class="gi">+        # -- Additional dimensions to add to the metrics. Dimensions are searched for in the
+        # -- resource and span attributes and are added to the metrics if present.
</span>         dimensions: []
         histogram_buckets: [0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 6.4, 12.8]
         max_items: 10000
         wait: 10s
         workers: 10
       span_metrics:
<span class="gd">-        # Additional dimensions to add to the metrics along with the default dimensions.
-        # Dimensions are searched for in the resource and span attributes and are added to the metrics if present.
</span><span class="gi">+        # -- Additional dimensions to add to the metrics along with the default dimensions.
+        # -- Dimensions are searched for in the resource and span attributes and are added to the metrics if present.
</span>         dimensions: []
         histogram_buckets: [0.002, 0.004, 0.008, 0.016, 0.032, 0.064, 0.128, 0.256, 0.512, 1.02, 2.05, 4.10]
     storage:
       path: /var/tempo/wal
       wal:
       remote_write_flush_deadline: 1m
<span class="gd">-      # A list of remote write endpoints.
-      # https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
</span><span class="gi">+      # -- A list of remote write endpoints.
+      # -- https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
</span>       remote_write: []
   service:
     # -- Annotations for Metrics Generator service
<span class="err">
</span></code></pre></div></div> <h2 id="0260"> <a href="#0260" class="anchor-heading" aria-labelledby="0260"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.0 </h2> <p><strong>Release date:</strong> 2022-08-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> <li>chore: support full metrics_generator config in tempo-distributed</li> </ul> <h3 id="default-value-changes-133"> <a href="#default-value-changes-133" class="anchor-heading" aria-labelledby="default-value-changes-133"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 09415a12..4a52379a 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -232,14 +232,33 @@</span> metricsGenerator:
     - name: http
       port: 3100
       service: true
<span class="gi">+  # https://grafana.com/docs/tempo/latest/configuration/#metrics-generator
</span>   config:
<span class="gd">-    #  MaxItems is the amount of edges that will be stored in the store.
-    service_graphs_max_items: 10000
-    storage_remote_write: []
-    # - url: http://cortex/api/v1/push
-    #   send_exemplars: true
-    #   headers:
-    #     x-scope-orgid: operations
</span><span class="gi">+    registry:
+      collection_interval: 15s
+      external_labels: {}
+      stale_duration: 15m
+    processor:
+      service_graphs:
+        # Additional dimensions to add to the metrics. Dimensions are searched for in the
+        # resource and span attributes and are added to the metrics if present.
+        dimensions: []
+        histogram_buckets: [0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 6.4, 12.8]
+        max_items: 10000
+        wait: 10s
+        workers: 10
+      span_metrics:
+        # Additional dimensions to add to the metrics along with the default dimensions.
+        # Dimensions are searched for in the resource and span attributes and are added to the metrics if present.
+        dimensions: []
+        histogram_buckets: [0.002, 0.004, 0.008, 0.016, 0.032, 0.064, 0.128, 0.256, 0.512, 1.02, 2.05, 4.10]
+    storage:
+      path: /var/tempo/wal
+      wal:
+      remote_write_flush_deadline: 1m
+      # A list of remote write endpoints.
+      # https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write
+      remote_write: []
</span>   service:
     # -- Annotations for Metrics Generator service
     annotations: {}
<span class="p">@@ -597,12 +616,11 @@</span> config: |
       kvstore:
         store: memberlist
     processor:
<span class="gd">-      service_graphs:
-        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
</span><span class="gi">+      {{- toYaml .Values.metricsGenerator.config.processor | nindent 6 }}
</span>     storage:
<span class="gd">-      path: /var/tempo/wal
-      remote_write:
-        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
</span><span class="gi">+      {{- toYaml .Values.metricsGenerator.config.storage | nindent 6 }}
+    registry:
+      {{- toYaml .Values.metricsGenerator.config.registry | nindent 6 }}
</span>   {{- end }}
   distributor:
     ring:
<span class="err">
</span></code></pre></div></div> <h2 id="0250"> <a href="#0250" class="anchor-heading" aria-labelledby="0250"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.25.0 </h2> <p><strong>Release date:</strong> 2022-08-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add log_received_spans and make log_received_traces backward compatible</li> </ul> <h3 id="default-value-changes-134"> <a href="#default-value-changes-134" class="anchor-heading" aria-labelledby="default-value-changes-134"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ad43704d..09415a12 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -317,7 +317,13 @@</span> distributor:
   extraVolumes: []
   config:
     # -- Enable to log every received trace id to help debug ingestion
<span class="gi">+    # -- WARNING: Deprecated. Use log_received_spans instead.
</span>     log_received_traces: null
<span class="gi">+    # -- Enable to log every received span to help debug ingestion or calculate span error distributions using the logs
+    log_received_spans:
+      enabled: false
+      include_all_attributes: false
+      filter_by_status_error: false
</span>     # -- Disables write extension with inactive ingesters
     extend_writes: null
     # -- List of tags that will not be extracted from trace data for search lookups
<span class="p">@@ -655,8 +661,11 @@</span> config: |
       kafka:
         {{- toYaml .Values.traces.kafka | nindent 6 }}
       {{- end }}
<span class="gd">-    {{- if .Values.distributor.config.log_received_traces }}
-    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
</span><span class="gi">+    {{- if or .Values.distributor.config.log_received_traces .Values.distributor.config.log_received_spans.enabled }}
+    log_received_spans:
+      enabled: {{ or .Values.distributor.config.log_received_traces .Values.distributor.config.log_received_spans.enabled }}
+      include_all_attributes: {{ .Values.distributor.config.log_received_spans.include_all_attributes }}
+      filter_by_status_error: {{ .Values.distributor.config.log_received_spans.filter_by_status_error }}
</span>     {{- end }}
     {{- if .Values.distributor.config.extend_writes }}
     extend_writes: {{ .Values.distributor.config.extend_writes }}
<span class="err">
</span></code></pre></div></div> <h2 id="0242"> <a href="#0242" class="anchor-heading" aria-labelledby="0242"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.24.2 </h2> <p><strong>Release date:</strong> 2022-08-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into dev/relax-ingester-pdb</li> <li>Add warning about using inMemory parameter</li> <li>regenerate docs</li> </ul> <h3 id="default-value-changes-135"> <a href="#default-value-changes-135" class="anchor-heading" aria-labelledby="default-value-changes-135"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2d18b66c..ad43704d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -137,7 +137,7 @@</span> ingester:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- use emptyDir with ramdisk
</span><span class="gi">+    # -- use emptyDir with ramdisk instead of PVC. **Please note that all data in ingester will be lost on pod restart**
</span>     inMemory: false
     # -- Size of persistent or memory disk
     size: 10Gi
<span class="err">
</span></code></pre></div></div> <h2 id="0241"> <a href="#0241" class="anchor-heading" aria-labelledby="0241"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.24.1 </h2> <p><strong>Release date:</strong> 2022-08-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo inmemory emptyDir</li> <li>Revert revert adding store to distributor since it was fixed upstream</li> <li>regenerate docs</li> <li>changelog fix</li> </ul> <h3 id="default-value-changes-136"> <a href="#default-value-changes-136" class="anchor-heading" aria-labelledby="default-value-changes-136"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 557a5dfc..2d18b66c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -137,7 +137,9 @@</span> ingester:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- use emptyDir with ramdisk
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="err">
</span></code></pre></div></div> <h2 id="0240"> <a href="#0240" class="anchor-heading" aria-labelledby="0240"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.24.0 </h2> <p><strong>Release date:</strong> 2022-08-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.5.0&amp;color=success" alt="AppVersion: 1.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Version bump due to upstream changes</li> <li>set automountServiceAccountToken and enableServiceLinks to false</li> <li>revert adding store to distributor since it was fixed upstream</li> <li>do not allow privilege escalation</li> <li>add emptydir to distributor and adjust docs</li> <li>Merge branch main into tempo_emptydir</li> </ul> <h3 id="default-value-changes-137"> <a href="#default-value-changes-137" class="anchor-heading" aria-labelledby="default-value-changes-137"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index aa205b56..557a5dfc 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -13,6 +13,7 @@</span> global:
 
 # -- Overrides the chart's computed fullname
 fullnameOverride: ""
<span class="gi">+# fullnameOverride: tempo
</span> 
 tempo:
   image:
<span class="p">@@ -38,6 +39,7 @@</span> tempo:
     runAsNonRoot: true
     runAsUser: 1000
     runAsGroup: 1000
<span class="gi">+    allowPrivilegeEscalation: false
</span>     capabilities:
       drop:
         - ALL
<span class="p">@@ -567,7 +569,9 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gd">-# -- Tempo configuration file contents
</span><span class="gi">+
+# -- Config file contents for Tempo distributed. Passed through the `tpl` function to allow templating
+
</span> # @default -- See values.yaml
 config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
<span class="err">
</span></code></pre></div></div> <h2 id="0230"> <a href="#0230" class="anchor-heading" aria-labelledby="0230"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.23.0 </h2> <p><strong>Release date:</strong> 2022-08-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>upstream stuff</li> <li>Update README.md on upgrading section</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> specify grpc appProtocol for tempo distributor service</li> <li>add podSecurityContext</li> <li>regenerate docs</li> <li>fix indent</li> <li>update values.yaml and README.md</li> <li>securitycontext and docs</li> <li>bump docs</li> </ul> <h3 id="default-value-changes-138"> <a href="#default-value-changes-138" class="anchor-heading" aria-labelledby="default-value-changes-138"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 9ba917ff..aa205b56 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -10,8 +10,10 @@</span> global:
   dnsService: "kube-dns"
   # -- configures DNS service namespace
   dnsNamespace: "kube-system"
<span class="gi">+
</span> # -- Overrides the chart's computed fullname
<span class="gd">-# fullnameOverride: tempo
</span><span class="gi">+fullnameOverride: ""
+
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -31,14 +33,18 @@</span> tempo:
   podLabels: {}
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gd">-  # -- SecurityContext holds pod-level security attributes and common container settings
-  securityContext: {}
-  #  capabilities:
-  #    drop:
-  #    - ALL
-  #  readOnlyRootFilesystem: true
-  #  runAsNonRoot: true
-  #  runAsUser: 1000
</span><span class="gi">+  # -- SecurityContext holds container-level security attributes and common container settings
+  securityContext:
+    runAsNonRoot: true
+    runAsUser: 1000
+    runAsGroup: 1000
+    capabilities:
+      drop:
+        - ALL
+    readOnlyRootFilesystem: true
+  # -- podSecurityContext holds pod-level security attributes and common container settings
+  podSecurityContext:
+    fsGroup: 1000
</span>   # -- Structured tempo configuration
   structuredConfig: {}
 
<span class="p">@@ -418,7 +424,7 @@</span> querier:
 queryFrontend:
   query:
     # -- Required for grafana version &lt;7.5 for compatibility with jaeger-ui. Doesn't work on ARM arch
<span class="gd">-    enabled: true
</span><span class="gi">+    enabled: false
</span>     image:
       # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
       registry: null
<span class="p">@@ -561,6 +567,8 @@</span> traces:
   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="gi">+# -- Tempo configuration file contents
+# @default -- See values.yaml
</span> config: |
   multitenancy_enabled: {{ .Values.multitenancyEnabled }}
   search_enabled: {{ .Values.search.enabled }}
<span class="err">
</span></code></pre></div></div> <h2 id="0220"> <a href="#0220" class="anchor-heading" aria-labelledby="0220"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.0 </h2> <p><strong>Release date:</strong> 2022-08-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>chart bump</li> <li>names for mounts</li> <li>add /var/tempo emptyDir mount for querier, queryfrontend and compactor</li> <li>Revert podManagementPolicy drop to include a PodDisruptionBudget</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Allow higher count of unavailable ingester replicas in pdb</li> </ul> <h3 id="default-value-changes-139"> <a href="#default-value-changes-139" class="anchor-heading" aria-labelledby="default-value-changes-139"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0219"> <a href="#0219" class="anchor-heading" aria-labelledby="0219"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.9 </h2> <p><strong>Release date:</strong> 2022-07-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> drop podManagementPolicy in favor of defaults</li> <li>Merge branch main into techgnosis-patch-fix-hyperlink</li> </ul> <h3 id="default-value-changes-140"> <a href="#default-value-changes-140" class="anchor-heading" aria-labelledby="default-value-changes-140"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fc98bc3f..9ba917ff 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,12 +1,17 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
<span class="gi">+  # -- configures cluster domain ("cluster.local" by default)
+  clusterDomain: "cluster.local"
+  # -- configures DNS service name
+  dnsService: "kube-dns"
+  # -- configures DNS service namespace
+  dnsNamespace: "kube-system"
</span> # -- Overrides the chart's computed fullname
 # fullnameOverride: tempo
<span class="gd">-# -- Overrides the chart's computed fullname
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -22,7 +27,20 @@</span> tempo:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gd">-
</span><span class="gi">+  # -- Global labels for all tempo pods
+  podLabels: {}
+  # -- Common annotations for all pods
+  podAnnotations: {}
+  # -- SecurityContext holds pod-level security attributes and common container settings
+  securityContext: {}
+  #  capabilities:
+  #    drop:
+  #    - ALL
+  #  readOnlyRootFilesystem: true
+  #  runAsNonRoot: true
+  #  runAsUser: 1000
+  # -- Structured tempo configuration
+  structuredConfig: {}
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -35,11 +53,29 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gi">+rbac:
+  # -- Specifies whether RBAC manifests should be created
+  create: false
+  # -- Specifies whether a PodSecurityPolicy should be created
+  pspEnabled: false
</span> 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Annotations for the ingester StatefulSet
+  annotations: {}
</span>   # -- Number of replicas for the ingester
<span class="gd">-  replicas: 1
</span><span class="gi">+  replicas: 3
+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -49,6 +85,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Additional CLI args for the ingester
<span class="p">@@ -64,16 +102,17 @@</span> ingester:
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
<span class="gd">-  # @default -- Hard node and soft zone anti-affinity
</span><span class="gi">+  # @default -- Soft node and soft zone anti-affinity
</span>   affinity: |
     podAntiAffinity:
<span class="gd">-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
<span class="gi">+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
</span>           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="p">@@ -98,10 +137,118 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  config:
+    # -- Number of copies of spans to store in the ingester ring
+    replication_factor: 3
+    # -- Amount of time a trace must be idle before flushing it to the wal.
+    trace_idle_period: null
+    # -- How often to sweep all tenants and move traces from live -&gt; wal -&gt; completed blocks.
+    flush_check_period: null
+    # -- Maximum size of a block before cutting it
+    max_block_bytes: null
+    # -- Maximum length of time before cutting a block
+    max_block_duration: null
+    # -- Duration to keep blocks in the ingester after they have been flushed
+    complete_block_timeout: null
+  service:
+    # -- Annotations for ingester service
+    annotations: {}
</span> 
<span class="gi">+# Configuration for the metrics-generator
+metricsGenerator:
+  # -- Specifies whether a metrics-generator should be deployed
+  enabled: false
+  # -- Annotations for the metrics-generator StatefulSet
+  annotations: {}
+  # -- Number of replicas for the metrics-generator
+  replicas: 1
+  image:
+    # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for metrics-generator pods
+  priorityClassName: null
+  # -- Labels for metrics-generator pods
+  podLabels: {}
+  # -- Annotations for metrics-generator pods
+  podAnnotations: {}
+  # -- Additional CLI args for the metrics-generator
+  extraArgs: []
+  # -- Environment variables to add to the metrics-generator pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the metrics-generator pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the metrics-generator
+  resources: {}
+  # -- Grace period to allow the metrics-generator to shutdown before it is killed. Especially for the ingestor,
+  # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
+  # all data and to successfully leave the member ring on shutdown.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for metrics-generator pods
+  nodeSelector: {}
+  # -- Tolerations for metrics-generator pods
+  tolerations: []
+  # -- Extra volumes for metrics-generator pods
+  extraVolumeMounts: []
+  # -- Extra volumes for metrics-generator deployment
+  extraVolumes: []
+  # -- Default ports
+  ports:
+    - name: grpc
+      port: 9095
+      service: true
+    - name: http-memberlist
+      port: 7946
+      service: false
+    - name: http
+      port: 3100
+      service: true
+  config:
+    #  MaxItems is the amount of edges that will be stored in the store.
+    service_graphs_max_items: 10000
+    storage_remote_write: []
+    # - url: http://cortex/api/v1/push
+    #   send_exemplars: true
+    #   headers:
+    #     x-scope-orgid: operations
+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
+
+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -120,6 +267,8 @@</span> distributor:
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Additional CLI args for the distributor
<span class="p">@@ -156,8 +305,17 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    # -- Enable to log every received trace id to help debug ingestion
+    log_received_traces: null
+    # -- Disables write extension with inactive ingesters
+    extend_writes: null
+    # -- List of tags that will not be extracted from trace data for search lookups
+    search_tags_deny_list: []
</span> 
 compactor:
<span class="gi">+  # -- Number of replicas for the compactor
+  replicas: 1
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -167,6 +325,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -187,6 +347,13 @@</span> compactor:
   extraVolumeMounts: []
   # -- Extra volumes for compactor deployment
   extraVolumes: []
<span class="gi">+  config:
+    compaction:
+      # -- Duration to keep blocks
+      block_retention: 48h
+  service:
+    # -- Annotations for compactor service
+    annotations: {}
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -201,6 +368,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Additional CLI args for the querier
<span class="p">@@ -237,10 +406,19 @@</span> querier:
   extraVolumeMounts: []
   # -- Extra volumes for querier deployment
   extraVolumes: []
<span class="gi">+  config:
+    frontend_worker:
+      # -- grpc client configuration
+      grpc_client_config: {}
+  service:
+    # -- Annotations for querier service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
   query:
<span class="gi">+    # -- Required for grafana version &lt;7.5 for compatibility with jaeger-ui. Doesn't work on ARM arch
+    enabled: true
</span>     image:
       # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
       registry: null
<span class="p">@@ -264,6 +442,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -276,8 +465,13 @@</span> queryFrontend:
     annotations: {}
     # -- Type of service for the queryFrontend
     type: ClusterIP
<span class="gi">+  serviceDiscovery:
+    # -- Annotations for queryFrontendDiscovery service
+    annotations: {}
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for queryFrontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Additional CLI args for the query-frontend
<span class="p">@@ -315,97 +509,191 @@</span> queryFrontend:
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
 
<span class="gi">+search:
+  # -- Enable Tempo search
+  enabled: false
+
+multitenancyEnabled: false
+
</span> traces:
   jaeger:
<span class="gd">-    # -- Enable Tempo to ingest Jaeger GRPC traces
-    grpc: false
-    # -- Enable Tempo to ingest Jaeger Thrift Binary traces
-    thriftBinary: false
-    # -- Enable Tempo to ingest Jaeger Thrift Compact traces
-    thriftCompact: false
-    # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
-    thriftHttp: false
-  # -- Enable Tempo to ingest Zipkin traces
-  zipkin: false
</span><span class="gi">+    grpc:
+      # -- Enable Tempo to ingest Jaeger GRPC traces
+      enabled: false
+      # -- Jaeger GRPC receiver config
+      receiverConfig: {}
+    thriftBinary:
+      # -- Enable Tempo to ingest Jaeger Thrift Binary traces
+      enabled: false
+      # -- Jaeger Thrift Binary receiver config
+      receiverConfig: {}
+    thriftCompact:
+      # -- Enable Tempo to ingest Jaeger Thrift Compact traces
+      enabled: false
+      # -- Jaeger Thrift Compact receiver config
+      receiverConfig: {}
+    thriftHttp:
+       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
+      enabled: false
+      # -- Jaeger Thrift HTTP receiver config
+      receiverConfig: {}
+  zipkin:
+    # -- Enable Tempo to ingest Zipkin traces
+    enabled: false
+    # -- Zipkin receiver config
+    receiverConfig: {}
</span>   otlp:
<span class="gd">-    # -- Enable Tempo to ingest Open Telementry HTTP traces
-    http: false
-    # -- Enable Tempo to ingest Open Telementry GRPC traces
-    grpc: false
-  # -- Enable Tempo to ingest Open Census traces
-  opencensus: false
</span><span class="gi">+    http:
+      # -- Enable Tempo to ingest Open Telemetry HTTP traces
+      enabled: false
+      # -- HTTP receiver advanced config
+      receiverConfig: {}
+    grpc:
+      # -- Enable Tempo to ingest Open Telemetry GRPC traces
+      enabled: false
+      # -- GRPC receiver advanced config
+      receiverConfig: {}
+  opencensus:
+    # -- Enable Tempo to ingest Open Census traces
+    enabled: false
+    # -- Open Census receiver config
+    receiverConfig: {}
+  # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
+  kafka: {}
</span> 
 config: |
<span class="gd">-  multitenancy_enabled: false
</span><span class="gi">+  multitenancy_enabled: {{ .Values.multitenancyEnabled }}
+  search_enabled: {{ .Values.search.enabled }}
+  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span>   compactor:
     compaction:
<span class="gd">-      block_retention: 48h
</span><span class="gi">+      block_retention: {{ .Values.compactor.config.compaction.block_retention }}
</span>     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.metricsGenerator.enabled }}
+  metrics_generator:
+    ring:
+      kvstore:
+        store: memberlist
+    processor:
+      service_graphs:
+        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
+    storage:
+      path: /var/tempo/wal
+      remote_write:
+        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
+  {{- end }}
</span>   distributor:
     ring:
       kvstore:
         store: memberlist
     receivers:
<span class="gd">-      {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
</span><span class="gi">+      {{- if  or (.Values.traces.jaeger.thriftCompact.enabled) (.Values.traces.jaeger.thriftBinary.enabled) (.Values.traces.jaeger.thriftHttp.enabled) (.Values.traces.jaeger.grpc.enabled) }}
</span>       jaeger:
         protocols:
<span class="gd">-          {{- if .Values.traces.jaeger.thriftCompact }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftCompact.enabled }}
</span>           thrift_compact:
<span class="gd">-            endpoint: 0.0.0.0:6831
</span><span class="gi">+            {{- $mergedJaegerThriftCompactConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6831") .Values.traces.jaeger.thriftCompact.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftCompactConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftBinary }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftBinary.enabled }}
</span>           thrift_binary:
<span class="gd">-            endpoint: 0.0.0.0:6832
</span><span class="gi">+            {{- $mergedJaegerThriftBinaryConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6832") .Values.traces.jaeger.thriftBinary.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftBinaryConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftHttp }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftHttp.enabled }}
</span>           thrift_http:
<span class="gd">-            endpoint: 0.0.0.0:14268
</span><span class="gi">+            {{- $mergedJaegerThriftHttpConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14268") .Values.traces.jaeger.thriftHttp.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftHttpConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.grpc }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:14250
</span><span class="gi">+            {{- $mergedJaegerGrpcConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14250") .Values.traces.jaeger.grpc.receiverConfig }}
+            {{- toYaml $mergedJaegerGrpcConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.zipkin}}
</span><span class="gi">+      {{- if .Values.traces.zipkin.enabled }}
</span>       zipkin:
<span class="gd">-        endpoint: 0.0.0.0:9411
</span><span class="gi">+        {{- $mergedZipkinReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:9411") .Values.traces.zipkin.receiverConfig }}
+        {{- toYaml $mergedZipkinReceiverConfig | nindent 6 }}
</span>       {{- end }}
<span class="gd">-      {{- if or (.Values.traces.otlp.http) (.Values.traces.otlp.grpc) }}
</span><span class="gi">+      {{- if or (.Values.traces.otlp.http.enabled) (.Values.traces.otlp.grpc.enabled) }}
</span>       otlp:
         protocols:
<span class="gd">-          {{- if .Values.traces.otlp.http }}
</span><span class="gi">+          {{- if .Values.traces.otlp.http.enabled }}
</span>           http:
<span class="gd">-            endpoint: 0.0.0.0:55681
</span><span class="gi">+            {{- $mergedOtlpHttpReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4318") .Values.traces.otlp.http.receiverConfig }}
+            {{- toYaml $mergedOtlpHttpReceiverConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.otlp.grpc }}
</span><span class="gi">+          {{- if .Values.traces.otlp.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:4317
</span><span class="gi">+            {{- $mergedOtlpGrpcReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4317") .Values.traces.otlp.grpc.receiverConfig }}
+            {{- toYaml $mergedOtlpGrpcReceiverConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.opencensus}}
</span><span class="gi">+      {{- if .Values.traces.opencensus.enabled }}
</span>       opencensus:
<span class="gd">-        endpoint: 0.0.0.0:55678
</span><span class="gi">+        {{- $mergedOpencensusReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55678") .Values.traces.opencensus.receiverConfig }}
+        {{- toYaml $mergedOpencensusReceiverConfig | nindent 6 }}
+      {{- end }}
+      {{- if .Values.traces.kafka }}
+      kafka:
+        {{- toYaml .Values.traces.kafka | nindent 6 }}
</span>       {{- end }}
<span class="gi">+    {{- if .Values.distributor.config.log_received_traces }}
+    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
+    {{- end }}
+    {{- if .Values.distributor.config.extend_writes }}
+    extend_writes: {{ .Values.distributor.config.extend_writes }}
+    {{- end }}
+    {{- if .Values.distributor.config.search_tags_deny_list }}
+    search_tags_deny_list:
+      {{- with .Values.distributor.config.search_tags_deny_list }}
+      {{- toYaml . | nindent 4 }}
+      {{- end }}
+    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="gi">+      {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
+      grpc_client_config:
+        {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
+      {{- end }}
</span>   ingester:
     lifecycler:
       ring:
<span class="gd">-        replication_factor: 1
</span><span class="gi">+        replication_factor: {{ .Values.ingester.config.replication_factor }}
</span>         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.trace_idle_period }}
+    trace_idle_period: {{ .Values.ingester.config.trace_idle_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.flush_check_period }}
+    flush_check_period: {{ .Values.ingester.config.flush_check_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_bytes }}
+    max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_duration }}
+    max_block_duration: {{ .Values.ingester.config.max_block_duration }}
+    {{- end }}
+    {{- if .Values.ingester.config.complete_block_timeout }}
+    complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
+    {{- end }}
</span>   memberlist:
     abort_if_cluster_join_fails: false
     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="gd">-    per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+    {{- toYaml .Values.global_overrides | nindent 2 }}
</span>   server:
<span class="gd">-    http_listen_port: 3100
</span><span class="gi">+    http_listen_port: {{ .Values.server.httpListenPort }}
+    log_level: {{ .Values.server.logLevel }}
+    log_format: {{ .Values.server.logFormat }}
+    grpc_server_max_recv_msg_size: {{ .Values.server.grpc_server_max_recv_msg_size }}
+    grpc_server_max_send_msg_size: {{ .Values.server.grpc_server_max_send_msg_size }}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -433,6 +721,19 @@</span> config: |
         service: memcached-client
         timeout: 500ms
 
<span class="gi">+# Set Tempo server configuration
+# Refers to https://grafana.com/docs/tempo/latest/configuration/#server
+server:
+  # --  HTTP server listen host
+  httpListenPort: 3100
+  # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
+  logLevel: info
+  # -- Log format. Can be set to logfmt (default) or json.
+  logFormat: logfmt
+  # -- Max gRPC message size that can be received
+  grpc_server_max_recv_msg_size: 4194304
+  # -- Max gRPC message size that can be sent
+  grpc_server_max_send_msg_size: 4194304
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="p">@@ -441,13 +742,19 @@</span> config: |
 #       container-name:
 #       storage-account-name:
 #       storage-account-key:
<span class="gd">-# -- the supported storage backends are gcs, s3 and azure
-# -- as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
</span> storage:
   trace:
<span class="gi">+    # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
</span>     backend: local
 
<span class="gd">-# Set ingestion overrides
</span><span class="gi">+# Global overrides
+global_overrides:
+  per_tenant_override_config: /conf/overrides.yaml
+  # metrics_generator_processors:
+  #   - service-graphs
+  #   - span-metrics
+
+# Per tenants overrides
</span> overrides: |
   overrides: {}
 
<span class="p">@@ -456,22 +763,28 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached pods
   extraEnvFrom: []
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
+  # -- Annotations for memcached pods
+  podAnnotations: {}
</span>   # -- Resource requests and limits for memcached
   resources: {}
   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -490,11 +803,16 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -520,7 +838,268 @@</span> serviceMonitor:
   interval: null
   # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
   scrapeTimeout: null
<span class="gi">+  # -- ServiceMonitor relabel configs to apply to samples before scraping
+  # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+  relabelings: []
+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
   tlsConfig: null
<span class="gi">+
+# Rules for the Prometheus Operator
+prometheusRule:
+  # -- If enabled, a PrometheusRule resource for Prometheus Operator is created
+  enabled: false
+  # -- Alternative namespace for the PrometheusRule resource
+  namespace: null
+  # -- PrometheusRule annotations
+  annotations: {}
+  # -- Additional PrometheusRule labels
+  labels: {}
+  # -- Contents of Prometheus rules file
+  groups: []
+  # - name: loki-rules
+  #   rules:
+  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
+  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
+  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
+  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
+
+# Configuration for the gateway
+gateway:
+  # -- Specifies whether the gateway should be enabled
+  enabled: false
+  # -- Number of replicas for the gateway
+  replicas: 1
+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
+  image:
+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
+    # -- The gateway image repository
+    repository: nginxinc/nginx-unprivileged
+    # -- The gateway image tag
+    tag: 1.19-alpine
+    # -- The gateway image pull policy
+    pullPolicy: IfNotPresent
+  # -- The name of the PriorityClass for gateway pods
+  priorityClassName: null
+  # -- Labels for gateway pods
+  podLabels: {}
+  # -- Annotations for gateway pods
+  podAnnotations: {}
+  # -- Additional CLI args for the gateway
+  extraArgs: []
+  # -- Environment variables to add to the gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the gateway pods
+  extraEnvFrom: []
+  # -- Volumes to add to the gateway pods
+  extraVolumes: []
+  # -- Volume mounts to add to the gateway pods
+  extraVolumeMounts: []
+  # -- Resource requests and limits for the gateway
+  resources: {}
+  # -- Grace period to allow the gateway to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.gatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.gatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for gateway pods
+  nodeSelector: {}
+  # -- Tolerations for gateway pods
+  tolerations: []
+  # Gateway service configuration
+  service:
+    # -- Port of the gateway service
+    port: 80
+    # -- Type of the gateway service
+    type: ClusterIP
+    # -- ClusterIP of the gateway service
+    clusterIP: null
+    # -- Node port if service type is NodePort
+    nodePort: null
+    # -- Load balancer IPO address if service type is LoadBalancer
+    loadBalancerIP: null
+    # -- Annotations for the gateway service
+    annotations: {}
+    # -- Labels for gateway service
+    labels: {}
+  # Gateway ingress configuration
+  ingress:
+    # -- Specifies whether an ingress for the gateway should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: nginx
+    # -- Annotations for the gateway ingress
+    annotations: {}
+    # -- Hosts configuration for the gateway ingress
+    hosts:
+      - host: gateway.tempo.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the gateway ingress
+    tls:
+      - secretName: tempo-gateway-tls
+        hosts:
+          - gateway.tempo.example.com
+  # Basic auth configuration
+  basicAuth:
+    # -- Enables basic authentication for the gateway
+    enabled: false
+    # -- The basic auth username for the gateway
+    username: null
+    # -- The basic auth password for the gateway
+    password: null
+    # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
+    # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
+    # high CPU load.
+    htpasswd: &gt;-
+      {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
+    # -- Existing basic auth secret to use. Must contain '.htpasswd'
+    existingSecret: null
+  # Configures the readiness probe for the gateway
+  readinessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 15
+    timeoutSeconds: 1
+  nginxConfig:
+    # -- NGINX log format
+    logFormat: |-
+      main '$remote_addr - $remote_user [$time_local]  $status '
+              '"$request" $body_bytes_sent "$http_referer" '
+              '"$http_user_agent" "$http_x_forwarded_for"';
+    # -- Allows appending custom configuration to the server block
+    serverSnippet: ""
+    # -- Allows appending custom configuration to the http block
+    httpSnippet: ""
+    # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
+    # @default -- See values.yaml
+    file: |
+      worker_processes  5;  ## Default: 1
+      error_log  /dev/stderr;
+      pid        /tmp/nginx.pid;
+      worker_rlimit_nofile 8192;
+
+      events {
+        worker_connections  4096;  ## Default: 1024
+      }
+
+      http {
+        client_body_temp_path /tmp/client_temp;
+        proxy_temp_path       /tmp/proxy_temp_path;
+        fastcgi_temp_path     /tmp/fastcgi_temp;
+        uwsgi_temp_path       /tmp/uwsgi_temp;
+        scgi_temp_path        /tmp/scgi_temp;
+
+        proxy_http_version    1.1;
+
+        default_type application/octet-stream;
+        log_format   {{ .Values.gateway.nginxConfig.logFormat }}
+
+        {{- if .Values.gateway.verboseLogging }}
+        access_log   /dev/stderr  main;
+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
+        sendfile     on;
+        tcp_nopush   on;
+        resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
+
+        {{- with .Values.gateway.nginxConfig.httpSnippet }}
+        {{ . | nindent 2 }}
+        {{- end }}
+
+        server {
+          listen             8080;
+
+          {{- if .Values.gateway.basicAuth.enabled }}
+          auth_basic           "Tempo";
+          auth_basic_user_file /etc/nginx/secrets/.htpasswd;
+          {{- end }}
+
+          location = / {
+            return 200 'OK';
+            auth_basic off;
+          }
+
+          location = /jaeger/api/traces {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
+          }
+
+          location = /zipkin/spans {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
+          }
+
+          location = /otlp/v1/traces {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
+          }
+
+          location ^~ /api {
+            proxy_pass       http://{{ include "tempo.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /flush {
+            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /shutdown {
+            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /distributor/ring {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /ingester/ring {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /compactor/ring {
+            proxy_pass       http://{{ include "tempo.compactorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          {{- with .Values.gateway.nginxConfig.serverSnippet }}
+          {{ . | nindent 4 }}
+          {{- end }}
+        }
+      }
</span><span class="err">
</span></code></pre></div></div> <h2 id="0218"> <a href="#0218" class="anchor-heading" aria-labelledby="0218"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.8 </h2> <p><strong>Release date:</strong> 2022-07-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump Chart.yaml and update README.md.gotmpl</li> <li>Merge branch main into remove-daniel-from-tempo-maintainers</li> </ul> <h3 id="default-value-changes-141"> <a href="#default-value-changes-141" class="anchor-heading" aria-labelledby="default-value-changes-141"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0217"> <a href="#0217" class="anchor-heading" aria-labelledby="0217"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.7 </h2> <p><strong>Release date:</strong> 2022-07-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> <li>chore: Update Helm Docs</li> </ul> <h3 id="default-value-changes-142"> <a href="#default-value-changes-142" class="anchor-heading" aria-labelledby="default-value-changes-142"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0216"> <a href="#0216" class="anchor-heading" aria-labelledby="0216"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.6 </h2> <p><strong>Release date:</strong> 2022-07-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>By default nginx uses HTTP/1.0 for proxied requests : https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version</li> </ul> <h3 id="default-value-changes-143"> <a href="#default-value-changes-143" class="anchor-heading" aria-labelledby="default-value-changes-143"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 38593c2d..9ba917ff 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1025,6 +1025,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0215"> <a href="#0215" class="anchor-heading" aria-labelledby="0215"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.5 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>version bump</li> <li>Remove Daniel from Tempo charts</li> <li>regenned docs</li> </ul> <h3 id="default-value-changes-144"> <a href="#default-value-changes-144" class="anchor-heading" aria-labelledby="default-value-changes-144"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0214"> <a href="#0214" class="anchor-heading" aria-labelledby="0214"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.4 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into main</li> <li>Merge branch main into Switch-otlp-http-port</li> <li>trace section catch up master</li> <li>README.md</li> <li>securityContext values.yaml README.md</li> <li>catch up new values.yaml and README.md</li> <li>fix values.yaml and README.md</li> </ul> <h3 id="default-value-changes-145"> <a href="#default-value-changes-145" class="anchor-heading" aria-labelledby="default-value-changes-145"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a1e220bd..38593c2d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,7 +1,7 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -27,6 +27,20 @@</span> tempo:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  # -- Global labels for all tempo pods
+  podLabels: {}
+  # -- Common annotations for all pods
+  podAnnotations: {}
+  # -- SecurityContext holds pod-level security attributes and common container settings
+  securityContext: {}
+  #  capabilities:
+  #    drop:
+  #    - ALL
+  #  readOnlyRootFilesystem: true
+  #  runAsNonRoot: true
+  #  runAsUser: 1000
+  # -- Structured tempo configuration
+  structuredConfig: {}
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -39,10 +53,29 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gi">+rbac:
+  # -- Specifies whether RBAC manifests should be created
+  create: false
+  # -- Specifies whether a PodSecurityPolicy should be created
+  pspEnabled: false
+
</span> # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Annotations for the ingester StatefulSet
+  annotations: {}
</span>   # -- Number of replicas for the ingester
<span class="gd">-  replicas: 1
</span><span class="gi">+  replicas: 3
+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -52,6 +85,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Additional CLI args for the ingester
<span class="p">@@ -67,16 +102,17 @@</span> ingester:
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
<span class="gd">-  # @default -- Hard node and soft zone anti-affinity
</span><span class="gi">+  # @default -- Soft node and soft zone anti-affinity
</span>   affinity: |
     podAntiAffinity:
<span class="gd">-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
<span class="gi">+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
</span>           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="p">@@ -101,10 +137,118 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  config:
+    # -- Number of copies of spans to store in the ingester ring
+    replication_factor: 3
+    # -- Amount of time a trace must be idle before flushing it to the wal.
+    trace_idle_period: null
+    # -- How often to sweep all tenants and move traces from live -&gt; wal -&gt; completed blocks.
+    flush_check_period: null
+    # -- Maximum size of a block before cutting it
+    max_block_bytes: null
+    # -- Maximum length of time before cutting a block
+    max_block_duration: null
+    # -- Duration to keep blocks in the ingester after they have been flushed
+    complete_block_timeout: null
+  service:
+    # -- Annotations for ingester service
+    annotations: {}
+
+# Configuration for the metrics-generator
+metricsGenerator:
+  # -- Specifies whether a metrics-generator should be deployed
+  enabled: false
+  # -- Annotations for the metrics-generator StatefulSet
+  annotations: {}
+  # -- Number of replicas for the metrics-generator
+  replicas: 1
+  image:
+    # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for metrics-generator pods
+  priorityClassName: null
+  # -- Labels for metrics-generator pods
+  podLabels: {}
+  # -- Annotations for metrics-generator pods
+  podAnnotations: {}
+  # -- Additional CLI args for the metrics-generator
+  extraArgs: []
+  # -- Environment variables to add to the metrics-generator pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the metrics-generator pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the metrics-generator
+  resources: {}
+  # -- Grace period to allow the metrics-generator to shutdown before it is killed. Especially for the ingestor,
+  # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
+  # all data and to successfully leave the member ring on shutdown.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for metrics-generator pods
+  nodeSelector: {}
+  # -- Tolerations for metrics-generator pods
+  tolerations: []
+  # -- Extra volumes for metrics-generator pods
+  extraVolumeMounts: []
+  # -- Extra volumes for metrics-generator deployment
+  extraVolumes: []
+  # -- Default ports
+  ports:
+    - name: grpc
+      port: 9095
+      service: true
+    - name: http-memberlist
+      port: 7946
+      service: false
+    - name: http
+      port: 3100
+      service: true
+  config:
+    #  MaxItems is the amount of edges that will be stored in the store.
+    service_graphs_max_items: 10000
+    storage_remote_write: []
+    # - url: http://cortex/api/v1/push
+    #   send_exemplars: true
+    #   headers:
+    #     x-scope-orgid: operations
+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
</span> 
<span class="gi">+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -123,6 +267,8 @@</span> distributor:
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Additional CLI args for the distributor
<span class="p">@@ -159,8 +305,17 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    # -- Enable to log every received trace id to help debug ingestion
+    log_received_traces: null
+    # -- Disables write extension with inactive ingesters
+    extend_writes: null
+    # -- List of tags that will not be extracted from trace data for search lookups
+    search_tags_deny_list: []
</span> 
 compactor:
<span class="gi">+  # -- Number of replicas for the compactor
+  replicas: 1
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -170,6 +325,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -194,6 +351,9 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+  service:
+    # -- Annotations for compactor service
+    annotations: {}
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -208,6 +368,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Additional CLI args for the querier
<span class="p">@@ -244,6 +406,13 @@</span> querier:
   extraVolumeMounts: []
   # -- Extra volumes for querier deployment
   extraVolumes: []
<span class="gi">+  config:
+    frontend_worker:
+      # -- grpc client configuration
+      grpc_client_config: {}
+  service:
+    # -- Annotations for querier service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -273,6 +442,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -285,8 +465,13 @@</span> queryFrontend:
     annotations: {}
     # -- Type of service for the queryFrontend
     type: ClusterIP
<span class="gi">+  serviceDiscovery:
+    # -- Annotations for queryFrontendDiscovery service
+    annotations: {}
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for queryFrontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Additional CLI args for the query-frontend
<span class="p">@@ -328,107 +513,187 @@</span> search:
   # -- Enable Tempo search
   enabled: false
 
<span class="gi">+multitenancyEnabled: false
+
</span> traces:
   jaeger:
<span class="gd">-    # -- Enable Tempo to ingest Jaeger GRPC traces
-    grpc: false
-    # -- Enable Tempo to ingest Jaeger Thrift Binary traces
-    thriftBinary: false
-    # -- Enable Tempo to ingest Jaeger Thrift Compact traces
-    thriftCompact: false
-    # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
-    thriftHttp: false
-  # -- Enable Tempo to ingest Zipkin traces
-  zipkin: false
</span><span class="gi">+    grpc:
+      # -- Enable Tempo to ingest Jaeger GRPC traces
+      enabled: false
+      # -- Jaeger GRPC receiver config
+      receiverConfig: {}
+    thriftBinary:
+      # -- Enable Tempo to ingest Jaeger Thrift Binary traces
+      enabled: false
+      # -- Jaeger Thrift Binary receiver config
+      receiverConfig: {}
+    thriftCompact:
+      # -- Enable Tempo to ingest Jaeger Thrift Compact traces
+      enabled: false
+      # -- Jaeger Thrift Compact receiver config
+      receiverConfig: {}
+    thriftHttp:
+       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
+      enabled: false
+      # -- Jaeger Thrift HTTP receiver config
+      receiverConfig: {}
+  zipkin:
+    # -- Enable Tempo to ingest Zipkin traces
+    enabled: false
+    # -- Zipkin receiver config
+    receiverConfig: {}
</span>   otlp:
<span class="gd">-    # -- Enable Tempo to ingest Open Telemetry HTTP traces
-    http: false
-    # -- Enable Tempo to ingest Open Telemetry GRPC traces
-    grpc: false
-  # -- Enable Tempo to ingest Open Census traces
-  opencensus: false
</span><span class="gi">+    http:
+      # -- Enable Tempo to ingest Open Telemetry HTTP traces
+      enabled: false
+      # -- HTTP receiver advanced config
+      receiverConfig: {}
+    grpc:
+      # -- Enable Tempo to ingest Open Telemetry GRPC traces
+      enabled: false
+      # -- GRPC receiver advanced config
+      receiverConfig: {}
+  opencensus:
+    # -- Enable Tempo to ingest Open Census traces
+    enabled: false
+    # -- Open Census receiver config
+    receiverConfig: {}
</span>   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
 config: |
<span class="gd">-  multitenancy_enabled: false
</span><span class="gi">+  multitenancy_enabled: {{ .Values.multitenancyEnabled }}
</span>   search_enabled: {{ .Values.search.enabled }}
<span class="gi">+  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.metricsGenerator.enabled }}
+  metrics_generator:
+    ring:
+      kvstore:
+        store: memberlist
+    processor:
+      service_graphs:
+        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
+    storage:
+      path: /var/tempo/wal
+      remote_write:
+        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
+  {{- end }}
</span>   distributor:
     ring:
       kvstore:
         store: memberlist
     receivers:
<span class="gd">-      {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
</span><span class="gi">+      {{- if  or (.Values.traces.jaeger.thriftCompact.enabled) (.Values.traces.jaeger.thriftBinary.enabled) (.Values.traces.jaeger.thriftHttp.enabled) (.Values.traces.jaeger.grpc.enabled) }}
</span>       jaeger:
         protocols:
<span class="gd">-          {{- if .Values.traces.jaeger.thriftCompact }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftCompact.enabled }}
</span>           thrift_compact:
<span class="gd">-            endpoint: 0.0.0.0:6831
</span><span class="gi">+            {{- $mergedJaegerThriftCompactConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6831") .Values.traces.jaeger.thriftCompact.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftCompactConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftBinary }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftBinary.enabled }}
</span>           thrift_binary:
<span class="gd">-            endpoint: 0.0.0.0:6832
</span><span class="gi">+            {{- $mergedJaegerThriftBinaryConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6832") .Values.traces.jaeger.thriftBinary.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftBinaryConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftHttp }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftHttp.enabled }}
</span>           thrift_http:
<span class="gd">-            endpoint: 0.0.0.0:14268
</span><span class="gi">+            {{- $mergedJaegerThriftHttpConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14268") .Values.traces.jaeger.thriftHttp.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftHttpConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.grpc }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:14250
</span><span class="gi">+            {{- $mergedJaegerGrpcConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14250") .Values.traces.jaeger.grpc.receiverConfig }}
+            {{- toYaml $mergedJaegerGrpcConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.zipkin}}
</span><span class="gi">+      {{- if .Values.traces.zipkin.enabled }}
</span>       zipkin:
<span class="gd">-        endpoint: 0.0.0.0:9411
</span><span class="gi">+        {{- $mergedZipkinReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:9411") .Values.traces.zipkin.receiverConfig }}
+        {{- toYaml $mergedZipkinReceiverConfig | nindent 6 }}
</span>       {{- end }}
<span class="gd">-      {{- if or (.Values.traces.otlp.http) (.Values.traces.otlp.grpc) }}
</span><span class="gi">+      {{- if or (.Values.traces.otlp.http.enabled) (.Values.traces.otlp.grpc.enabled) }}
</span>       otlp:
         protocols:
<span class="gd">-          {{- if .Values.traces.otlp.http }}
</span><span class="gi">+          {{- if .Values.traces.otlp.http.enabled }}
</span>           http:
             {{- $mergedOtlpHttpReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4318") .Values.traces.otlp.http.receiverConfig }}
             {{- toYaml $mergedOtlpHttpReceiverConfig | nindent 10 }}
           {{- end }}
<span class="gd">-          {{- if .Values.traces.otlp.grpc }}
</span><span class="gi">+          {{- if .Values.traces.otlp.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:4317
</span><span class="gi">+            {{- $mergedOtlpGrpcReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4317") .Values.traces.otlp.grpc.receiverConfig }}
+            {{- toYaml $mergedOtlpGrpcReceiverConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.opencensus }}
</span><span class="gi">+      {{- if .Values.traces.opencensus.enabled }}
</span>       opencensus:
<span class="gd">-        endpoint: 0.0.0.0:55678
</span><span class="gi">+        {{- $mergedOpencensusReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55678") .Values.traces.opencensus.receiverConfig }}
+        {{- toYaml $mergedOpencensusReceiverConfig | nindent 6 }}
</span>       {{- end }}
       {{- if .Values.traces.kafka }}
       kafka:
         {{- toYaml .Values.traces.kafka | nindent 6 }}
       {{- end }}
<span class="gi">+    {{- if .Values.distributor.config.log_received_traces }}
+    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
+    {{- end }}
+    {{- if .Values.distributor.config.extend_writes }}
+    extend_writes: {{ .Values.distributor.config.extend_writes }}
+    {{- end }}
+    {{- if .Values.distributor.config.search_tags_deny_list }}
+    search_tags_deny_list:
+      {{- with .Values.distributor.config.search_tags_deny_list }}
+      {{- toYaml . | nindent 4 }}
+      {{- end }}
+    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="gi">+      {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
+      grpc_client_config:
+        {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
+      {{- end }}
</span>   ingester:
     lifecycler:
       ring:
<span class="gd">-        replication_factor: 1
</span><span class="gi">+        replication_factor: {{ .Values.ingester.config.replication_factor }}
</span>         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.trace_idle_period }}
+    trace_idle_period: {{ .Values.ingester.config.trace_idle_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.flush_check_period }}
+    flush_check_period: {{ .Values.ingester.config.flush_check_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_bytes }}
+    max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_duration }}
+    max_block_duration: {{ .Values.ingester.config.max_block_duration }}
+    {{- end }}
+    {{- if .Values.ingester.config.complete_block_timeout }}
+    complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
+    {{- end }}
</span>   memberlist:
     abort_if_cluster_join_fails: false
     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="gd">-    per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+    {{- toYaml .Values.global_overrides | nindent 2 }}
</span>   server:
     http_listen_port: {{ .Values.server.httpListenPort }}
     log_level: {{ .Values.server.logLevel }}
     log_format: {{ .Values.server.logFormat }}
<span class="gi">+    grpc_server_max_recv_msg_size: {{ .Values.server.grpc_server_max_recv_msg_size }}
+    grpc_server_max_send_msg_size: {{ .Values.server.grpc_server_max_send_msg_size }}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -461,13 +726,14 @@</span> config: |
 server:
   # --  HTTP server listen host
   httpListenPort: 3100
<span class="gd">-
</span>   # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
   logLevel: info
<span class="gd">-
</span>   # -- Log format. Can be set to logfmt (default) or json.
   logFormat: logfmt
<span class="gd">-
</span><span class="gi">+  # -- Max gRPC message size that can be received
+  grpc_server_max_recv_msg_size: 4194304
+  # -- Max gRPC message size that can be sent
+  grpc_server_max_send_msg_size: 4194304
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="p">@@ -476,13 +742,19 @@</span> server:
 #       container-name:
 #       storage-account-name:
 #       storage-account-key:
<span class="gd">-# -- the supported storage backends are gcs, s3 and azure
-# -- as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
</span> storage:
   trace:
<span class="gi">+    # -- The supported storage backends are gcs, s3 and azure, as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
</span>     backend: local
 
<span class="gd">-# Set ingestion overrides
</span><span class="gi">+# Global overrides
+global_overrides:
+  per_tenant_override_config: /conf/overrides.yaml
+  # metrics_generator_processors:
+  #   - service-graphs
+  #   - span-metrics
+
+# Per tenants overrides
</span> overrides: |
   overrides: {}
 
<span class="p">@@ -491,22 +763,28 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached pods
   extraEnvFrom: []
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
+  # -- Annotations for memcached pods
+  podAnnotations: {}
</span>   # -- Resource requests and limits for memcached
   resources: {}
   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -525,11 +803,16 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -558,20 +841,57 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
   tlsConfig: null
 
<span class="gi">+# Rules for the Prometheus Operator
+prometheusRule:
+  # -- If enabled, a PrometheusRule resource for Prometheus Operator is created
+  enabled: false
+  # -- Alternative namespace for the PrometheusRule resource
+  namespace: null
+  # -- PrometheusRule annotations
+  annotations: {}
+  # -- Additional PrometheusRule labels
+  labels: {}
+  # -- Contents of Prometheus rules file
+  groups: []
+  # - name: loki-rules
+  #   rules:
+  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
+  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
+  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
+  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
</span>   image:
<span class="gd">-    # -- The Docker registry for the gateway image
-    registry: docker.io
</span><span class="gi">+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="p">@@ -580,6 +900,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="p">@@ -705,7 +1027,18 @@</span> gateway:
 
         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="err">
</span></code></pre></div></div> <h2 id="0213"> <a href="#0213" class="anchor-heading" aria-labelledby="0213"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.3 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version and update README.md</li> <li>Merge branch main into patch-1</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-146"> <a href="#default-value-changes-146" class="anchor-heading" aria-labelledby="default-value-changes-146"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fcc14741..a1e220bd 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -393,7 +393,8 @@</span> config: |
         protocols:
           {{- if .Values.traces.otlp.http }}
           http:
<span class="gd">-            endpoint: 0.0.0.0:55681
</span><span class="gi">+            {{- $mergedOtlpHttpReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4318") .Values.traces.otlp.http.receiverConfig }}
+            {{- toYaml $mergedOtlpHttpReceiverConfig | nindent 10 }}
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
<span class="p">@@ -735,7 +736,7 @@</span> gateway:
           }
 
           location = /otlp/v1/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:55681/v1/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span>           }
 
           location ^~ /api {
<span class="err">
</span></code></pre></div></div> <h2 id="0212"> <a href="#0212" class="anchor-heading" aria-labelledby="0212"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.2 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-147"> <a href="#default-value-changes-147" class="anchor-heading" aria-labelledby="default-value-changes-147"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0211"> <a href="#0211" class="anchor-heading" aria-labelledby="0211"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.1 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into patch-1</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-148"> <a href="#default-value-changes-148" class="anchor-heading" aria-labelledby="default-value-changes-148"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ce05c4b5..57578b6d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,7 +1,7 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -29,6 +29,8 @@</span> tempo:
     timeoutSeconds: 1
   # -- Global labels for all tempo pods
   podLabels: {}
<span class="gi">+  # -- Common annotations for all pods
+  podAnnotations: {}
</span>   # --- SecurityContext holds pod-level security attributes and common container settings
   securityContext: {}
   #  capabilities:
<span class="p">@@ -37,6 +39,8 @@</span> tempo:
   #  readOnlyRootFilesystem: true
   #  runAsNonRoot: true
   #  runAsUser: 1000
<span class="gi">+  # -- Structured tempo configuration
+  structuredConfig: {}
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -57,8 +61,21 @@</span> rbac:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Annotations for the ingester StatefulSet
+  annotations: {}
</span>   # -- Number of replicas for the ingester
<span class="gd">-  replicas: 1
</span><span class="gi">+  replicas: 3
+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -85,16 +102,17 @@</span> ingester:
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
<span class="gd">-  # @default -- Hard node and soft zone anti-affinity
</span><span class="gi">+  # @default -- Soft node and soft zone anti-affinity
</span>   affinity: |
     podAntiAffinity:
<span class="gd">-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
<span class="gi">+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
</span>           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="p">@@ -119,10 +137,118 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  config:
+    # -- Number of copies of spans to store in the ingester ring
+    replication_factor: 3
+    # -- Amount of time a trace must be idle before flushing it to the wal.
+    trace_idle_period: null
+    # -- How often to sweep all tenants and move traces from live -&gt; wal -&gt; completed blocks.
+    flush_check_period: null
+    # -- Maximum size of a block before cutting it
+    max_block_bytes: null
+    # -- Maximum length of time before cutting a block
+    max_block_duration: null
+    # -- Duration to keep blocks in the ingester after they have been flushed
+    complete_block_timeout: null
+  service:
+    # -- Annotations for ingester service
+    annotations: {}
</span> 
<span class="gi">+# Configuration for the metrics-generator
+metricsGenerator:
+  # -- Specifies whether a metrics-generator should be deployed
+  enabled: false
+  # -- Annotations for the metrics-generator StatefulSet
+  annotations: {}
+  # -- Number of replicas for the metrics-generator
+  replicas: 1
+  image:
+    # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for metrics-generator pods
+  priorityClassName: null
+  # -- Labels for metrics-generator pods
+  podLabels: {}
+  # -- Annotations for metrics-generator pods
+  podAnnotations: {}
+  # -- Additional CLI args for the metrics-generator
+  extraArgs: []
+  # -- Environment variables to add to the metrics-generator pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the metrics-generator pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the metrics-generator
+  resources: {}
+  # -- Grace period to allow the metrics-generator to shutdown before it is killed. Especially for the ingestor,
+  # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
+  # all data and to successfully leave the member ring on shutdown.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for metrics-generator pods
+  nodeSelector: {}
+  # -- Tolerations for metrics-generator pods
+  tolerations: []
+  # -- Extra volumes for metrics-generator pods
+  extraVolumeMounts: []
+  # -- Extra volumes for metrics-generator deployment
+  extraVolumes: []
+  # -- Default ports
+  ports:
+    - name: grpc
+      port: 9095
+      service: true
+    - name: http-memberlist
+      port: 7946
+      service: false
+    - name: http
+      port: 3100
+      service: true
+  config:
+    #  MaxItems is the amount of edges that will be stored in the store.
+    service_graphs_max_items: 10000
+    storage_remote_write: []
+    # - url: http://cortex/api/v1/push
+    #   send_exemplars: true
+    #   headers:
+    #     x-scope-orgid: operations
+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
+
+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -179,6 +305,13 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    # -- Enable to log every received trace id to help debug ingestion
+    log_received_traces: null
+    # -- Disables write extension with inactive ingesters
+    extend_writes: null
+    # -- List of tags that will not be extracted from trace data for search lookups
+    search_tags_deny_list: []
</span> 
 compactor:
   image:
<span class="p">@@ -216,6 +349,9 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+  service:
+    # -- Annotations for compactor service
+    annotations: {}
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -272,6 +408,9 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+  service:
+    # -- Annotations for querier service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -301,6 +440,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -361,86 +511,146 @@</span> search:
   # -- Enable Tempo search
   enabled: false
 
<span class="gi">+multitenancyEnabled: false
+
</span> traces:
   jaeger:
<span class="gd">-    # -- Enable Tempo to ingest Jaeger GRPC traces
-    grpc: false
-    # -- Enable Tempo to ingest Jaeger Thrift Binary traces
-    thriftBinary: false
-    # -- Enable Tempo to ingest Jaeger Thrift Compact traces
-    thriftCompact: false
-    # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
-    thriftHttp: false
-  # -- Enable Tempo to ingest Zipkin traces
-  zipkin: false
</span><span class="gi">+    grpc:
+      # -- Enable Tempo to ingest Jaeger GRPC traces
+      enabled: false
+      # -- Jaeger GRPC receiver config
+      receiverConfig: {}
+    thriftBinary:
+      # -- Enable Tempo to ingest Jaeger Thrift Binary traces
+      enabled: false
+      # -- Jaeger Thrift Binary receiver config
+      receiverConfig: {}
+    thriftCompact:
+      # -- Enable Tempo to ingest Jaeger Thrift Compact traces
+      enabled: false
+      # -- Jaeger Thrift Compact receiver config
+      receiverConfig: {}
+    thriftHttp:
+       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
+      enabled: false
+      # -- Jaeger Thrift HTTP receiver config
+      receiverConfig: {}
+  zipkin:
+    # -- Enable Tempo to ingest Zipkin traces
+    enabled: false
+    # -- Zipkin receiver config
+    receiverConfig: {}
</span>   otlp:
<span class="gd">-    # -- Enable Tempo to ingest Open Telemetry HTTP traces
-    http: false
-    # -- Enable Tempo to ingest Open Telemetry GRPC traces
-    grpc: false
-  # -- Enable Tempo to ingest Open Census traces
-  opencensus: false
</span><span class="gi">+    http:
+      # -- Enable Tempo to ingest Open Telemetry HTTP traces
+      enabled: false
+      # -- HTTP receiver advanced config
+      receiverConfig: {}
+    grpc:
+      # -- Enable Tempo to ingest Open Telemetry GRPC traces
+      enabled: false
+      # -- GRPC receiver advanced config
+      receiverConfig: {}
+  opencensus:
+    # -- Enable Tempo to ingest Open Census traces
+    enabled: false
+    # -- Open Census receiver config
+    receiverConfig: {}
</span>   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
 config: |
<span class="gd">-  multitenancy_enabled: false
</span><span class="gi">+  multitenancy_enabled: {{ .Values.multitenancyEnabled }}
</span>   search_enabled: {{ .Values.search.enabled }}
<span class="gi">+  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.metricsGenerator.enabled }}
+  metrics_generator:
+    ring:
+      kvstore:
+        store: memberlist
+    processor:
+      service_graphs:
+        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
+    storage:
+      path: /var/tempo/wal
+      remote_write:
+        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
+  {{- end }}
</span>   distributor:
     ring:
       kvstore:
         store: memberlist
     receivers:
<span class="gd">-      {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
</span><span class="gi">+      {{- if  or (.Values.traces.jaeger.thriftCompact.enabled) (.Values.traces.jaeger.thriftBinary.enabled) (.Values.traces.jaeger.thriftHttp.enabled) (.Values.traces.jaeger.grpc.enabled) }}
</span>       jaeger:
         protocols:
<span class="gd">-          {{- if .Values.traces.jaeger.thriftCompact }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftCompact.enabled }}
</span>           thrift_compact:
<span class="gd">-            endpoint: 0.0.0.0:6831
</span><span class="gi">+            {{- $mergedJaegerThriftCompactConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6831") .Values.traces.jaeger.thriftCompact.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftCompactConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftBinary }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftBinary.enabled }}
</span>           thrift_binary:
<span class="gd">-            endpoint: 0.0.0.0:6832
</span><span class="gi">+            {{- $mergedJaegerThriftBinaryConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6832") .Values.traces.jaeger.thriftBinary.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftBinaryConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftHttp }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftHttp.enabled }}
</span>           thrift_http:
<span class="gd">-            endpoint: 0.0.0.0:14268
</span><span class="gi">+            {{- $mergedJaegerThriftHttpConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14268") .Values.traces.jaeger.thriftHttp.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftHttpConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.grpc }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:14250
</span><span class="gi">+            {{- $mergedJaegerGrpcConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14250") .Values.traces.jaeger.grpc.receiverConfig }}
+            {{- toYaml $mergedJaegerGrpcConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.zipkin}}
</span><span class="gi">+      {{- if .Values.traces.zipkin.enabled }}
</span>       zipkin:
<span class="gd">-        endpoint: 0.0.0.0:9411
</span><span class="gi">+        {{- $mergedZipkinReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:9411") .Values.traces.zipkin.receiverConfig }}
+        {{- toYaml $mergedZipkinReceiverConfig | nindent 6 }}
</span>       {{- end }}
<span class="gd">-      {{- if or (.Values.traces.otlp.http) (.Values.traces.otlp.grpc) }}
</span><span class="gi">+      {{- if or (.Values.traces.otlp.http.enabled) (.Values.traces.otlp.grpc.enabled) }}
</span>       otlp:
         protocols:
<span class="gd">-          {{- if .Values.traces.otlp.http }}
</span><span class="gi">+          {{- if .Values.traces.otlp.http.enabled }}
</span>           http:
<span class="gd">-            endpoint: 0.0.0.0:55681
</span><span class="gi">+            {{- $mergedOtlpHttpReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55681") .Values.traces.otlp.http.receiverConfig }}
+            {{- toYaml $mergedOtlpHttpReceiverConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.otlp.grpc }}
</span><span class="gi">+          {{- if .Values.traces.otlp.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:4317
</span><span class="gi">+            {{- $mergedOtlpGrpcReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4317") .Values.traces.otlp.grpc.receiverConfig }}
+            {{- toYaml $mergedOtlpGrpcReceiverConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.opencensus }}
</span><span class="gi">+      {{- if .Values.traces.opencensus.enabled }}
</span>       opencensus:
<span class="gd">-        endpoint: 0.0.0.0:55678
</span><span class="gi">+        {{- $mergedOpencensusReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55678") .Values.traces.opencensus.receiverConfig }}
+        {{- toYaml $mergedOpencensusReceiverConfig | nindent 6 }}
</span>       {{- end }}
       {{- if .Values.traces.kafka }}
       kafka:
         {{- toYaml .Values.traces.kafka | nindent 6 }}
       {{- end }}
<span class="gi">+    {{- if .Values.distributor.config.log_received_traces }}
+    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
+    {{- end }}
+    {{- if .Values.distributor.config.extend_writes }}
+    extend_writes: {{ .Values.distributor.config.extend_writes }}
+    {{- end }}
+    {{- if .Values.distributor.config.search_tags_deny_list }}
+    search_tags_deny_list:
+      {{- with .Values.distributor.config.search_tags_deny_list }}
+      {{- toYaml . | nindent 4 }}
+      {{- end }}
+    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="p">@@ -451,10 +661,25 @@</span> config: |
   ingester:
     lifecycler:
       ring:
<span class="gd">-        replication_factor: 1
</span><span class="gi">+        replication_factor: {{ .Values.ingester.config.replication_factor }}
</span>         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.trace_idle_period }}
+    trace_idle_period: {{ .Values.ingester.config.trace_idle_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.flush_check_period }}
+    flush_check_period: {{ .Values.ingester.config.flush_check_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_bytes }}
+    max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
+    {{- end }}
+    {{- if .Values.ingester.config.max_block_duration }}
+    max_block_duration: {{ .Values.ingester.config.max_block_duration }}
+    {{- end }}
+    {{- if .Values.ingester.config.complete_block_timeout }}
+    complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
+    {{- end }}
</span>   memberlist:
     abort_if_cluster_join_fails: false
     join_members:
<span class="p">@@ -524,6 +749,9 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /conf/overrides.yaml
<span class="gi">+  # metrics_generator_processors:
+  #   - service-graphs
+  #   - span-metrics
</span> 
 # Per tenants overrides
 overrides: |
<span class="p">@@ -534,16 +762,18 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="p">@@ -552,6 +782,8 @@</span> memcached:
   extraEnvFrom: []
   # -- Labels for memcached pods
   podLabels: {}
<span class="gi">+  # -- Annotations for memcached pods
+  podAnnotations: {}
</span>   # -- Resource requests and limits for memcached
   resources: {}
   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -570,11 +802,16 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -603,6 +840,9 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="p">@@ -635,11 +875,22 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="gd">-    # -- The Docker registry for the gateway image
-    registry: docker.io
</span><span class="gi">+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="err">
</span></code></pre></div></div> <h2 id="0167"> <a href="#0167" class="anchor-heading" aria-labelledby="0167"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.7 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>add readme note about structuredConfig</li> <li>README bump</li> </ul> <h3 id="default-value-changes-149"> <a href="#default-value-changes-149" class="anchor-heading" aria-labelledby="default-value-changes-149"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0210"> <a href="#0210" class="anchor-heading" aria-labelledby="0210"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.0 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump tempo chart version</li> <li>Add tempo structured config for helm chart</li> </ul> <h3 id="default-value-changes-150"> <a href="#default-value-changes-150" class="anchor-heading" aria-labelledby="default-value-changes-150"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 9d83323b..57578b6d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -39,6 +39,8 @@</span> tempo:
   #  readOnlyRootFilesystem: true
   #  runAsNonRoot: true
   #  runAsUser: 1000
<span class="gi">+  # -- Structured tempo configuration
+  structuredConfig: {}
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0204"> <a href="#0204" class="anchor-heading" aria-labelledby="0204"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.4 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update chart version, update one chart at a time</li> <li>Add new Tempo Helm Chart maintainers</li> <li>Merge branch main into priority-tempo</li> </ul> <h3 id="default-value-changes-151"> <a href="#default-value-changes-151" class="anchor-heading" aria-labelledby="default-value-changes-151"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 76145081..9d83323b 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,7 +1,7 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -62,7 +62,7 @@</span> ingester:
   # -- Annotations for the ingester StatefulSet
   annotations: {}
   # -- Number of replicas for the ingester
<span class="gd">-  replicas: 1
</span><span class="gi">+  replicas: 3
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -100,16 +100,17 @@</span> ingester:
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
<span class="gd">-  # @default -- Hard node and soft zone anti-affinity
</span><span class="gi">+  # @default -- Soft node and soft zone anti-affinity
</span>   affinity: |
     podAntiAffinity:
<span class="gd">-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
<span class="gi">+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
</span>           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="p">@@ -135,12 +136,101 @@</span> ingester:
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
   config:
<span class="gi">+    # -- Number of copies of spans to store in the ingester ring
+    replication_factor: 3
+    # -- Amount of time a trace must be idle before flushing it to the wal.
+    trace_idle_period: null
+    # -- How often to sweep all tenants and move traces from live -&gt; wal -&gt; completed blocks.
+    flush_check_period: null
</span>     # -- Maximum size of a block before cutting it
     max_block_bytes: null
     # -- Maximum length of time before cutting a block
     max_block_duration: null
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
<span class="gi">+  service:
+    # -- Annotations for ingester service
+    annotations: {}
+
+# Configuration for the metrics-generator
+metricsGenerator:
+  # -- Specifies whether a metrics-generator should be deployed
+  enabled: false
+  # -- Annotations for the metrics-generator StatefulSet
+  annotations: {}
+  # -- Number of replicas for the metrics-generator
+  replicas: 1
+  image:
+    # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for metrics-generator pods
+  priorityClassName: null
+  # -- Labels for metrics-generator pods
+  podLabels: {}
+  # -- Annotations for metrics-generator pods
+  podAnnotations: {}
+  # -- Additional CLI args for the metrics-generator
+  extraArgs: []
+  # -- Environment variables to add to the metrics-generator pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the metrics-generator pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the metrics-generator
+  resources: {}
+  # -- Grace period to allow the metrics-generator to shutdown before it is killed. Especially for the ingestor,
+  # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
+  # all data and to successfully leave the member ring on shutdown.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for metrics-generator pods
+  nodeSelector: {}
+  # -- Tolerations for metrics-generator pods
+  tolerations: []
+  # -- Extra volumes for metrics-generator pods
+  extraVolumeMounts: []
+  # -- Extra volumes for metrics-generator deployment
+  extraVolumes: []
+  # -- Default ports
+  ports:
+    - name: grpc
+      port: 9095
+      service: true
+    - name: http-memberlist
+      port: 7946
+      service: false
+    - name: http
+      port: 3100
+      service: true
+  config:
+    #  MaxItems is the amount of edges that will be stored in the store.
+    service_graphs_max_items: 10000
+    storage_remote_write: []
+    # - url: http://cortex/api/v1/push
+    #   send_exemplars: true
+    #   headers:
+    #     x-scope-orgid: operations
+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -213,6 +303,13 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    # -- Enable to log every received trace id to help debug ingestion
+    log_received_traces: null
+    # -- Disables write extension with inactive ingesters
+    extend_writes: null
+    # -- List of tags that will not be extracted from trace data for search lookups
+    search_tags_deny_list: []
</span> 
 compactor:
   image:
<span class="p">@@ -309,6 +406,9 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+  service:
+    # -- Annotations for querier service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -409,6 +509,8 @@</span> search:
   # -- Enable Tempo search
   enabled: false
 
<span class="gi">+multitenancyEnabled: false
+
</span> traces:
   jaeger:
     grpc:
<span class="p">@@ -456,14 +558,28 @@</span> traces:
   kafka: {}
 
 config: |
<span class="gd">-  multitenancy_enabled: false
</span><span class="gi">+  multitenancy_enabled: {{ .Values.multitenancyEnabled }}
</span>   search_enabled: {{ .Values.search.enabled }}
<span class="gi">+  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.metricsGenerator.enabled }}
+  metrics_generator:
+    ring:
+      kvstore:
+        store: memberlist
+    processor:
+      service_graphs:
+        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
+    storage:
+      path: /var/tempo/wal
+      remote_write:
+        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
+  {{- end }}
</span>   distributor:
     ring:
       kvstore:
<span class="p">@@ -521,6 +637,18 @@</span> config: |
       kafka:
         {{- toYaml .Values.traces.kafka | nindent 6 }}
       {{- end }}
<span class="gi">+    {{- if .Values.distributor.config.log_received_traces }}
+    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
+    {{- end }}
+    {{- if .Values.distributor.config.extend_writes }}
+    extend_writes: {{ .Values.distributor.config.extend_writes }}
+    {{- end }}
+    {{- if .Values.distributor.config.search_tags_deny_list }}
+    search_tags_deny_list:
+      {{- with .Values.distributor.config.search_tags_deny_list }}
+      {{- toYaml . | nindent 4 }}
+      {{- end }}
+    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="p">@@ -531,10 +659,16 @@</span> config: |
   ingester:
     lifecycler:
       ring:
<span class="gd">-        replication_factor: 1
</span><span class="gi">+        replication_factor: {{ .Values.ingester.config.replication_factor }}
</span>         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.trace_idle_period }}
+    trace_idle_period: {{ .Values.ingester.config.trace_idle_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.flush_check_period }}
+    flush_check_period: {{ .Values.ingester.config.flush_check_period }}
+    {{- end }}
</span>     {{- if .Values.ingester.config.max_block_bytes }}
     max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
     {{- end }}
<span class="p">@@ -613,6 +747,9 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /conf/overrides.yaml
<span class="gi">+  # metrics_generator_processors:
+  #   - service-graphs
+  #   - span-metrics
</span> 
 # Per tenants overrides
 overrides: |
<span class="p">@@ -623,16 +760,18 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="p">@@ -661,11 +800,16 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -743,8 +887,8 @@</span> gateway:
   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="gd">-    # -- The Docker registry for the gateway image
-    registry: docker.io
</span><span class="gi">+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="err">
</span></code></pre></div></div> <h2 id="0203"> <a href="#0203" class="anchor-heading" aria-labelledby="0203"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.3 </h2> <p><strong>Release date:</strong> 2022-06-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix version</li> </ul> <h3 id="default-value-changes-152"> <a href="#default-value-changes-152" class="anchor-heading" aria-labelledby="default-value-changes-152"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0180"> <a href="#0180" class="anchor-heading" aria-labelledby="0180"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.0 </h2> <p><strong>Release date:</strong> 2022-06-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.2&amp;color=success" alt="AppVersion: 1.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix(tempo-distributed): use priorityClassName values</li> </ul> <h3 id="default-value-changes-153"> <a href="#default-value-changes-153" class="anchor-heading" aria-labelledby="default-value-changes-153"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0202"> <a href="#0202" class="anchor-heading" aria-labelledby="0202"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.2 </h2> <p><strong>Release date:</strong> 2022-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>merge main branch</li> </ul> <h3 id="default-value-changes-154"> <a href="#default-value-changes-154" class="anchor-heading" aria-labelledby="default-value-changes-154"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 1fc1d625..9d83323b 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -148,6 +148,9 @@</span> ingester:
     max_block_duration: null
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
<span class="gi">+  service:
+    # -- Annotations for ingester service
+    annotations: {}
</span> 
 # Configuration for the metrics-generator
 metricsGenerator:
<span class="p">@@ -225,6 +228,9 @@</span> metricsGenerator:
     #   send_exemplars: true
     #   headers:
     #     x-scope-orgid: operations
<span class="gi">+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -400,6 +406,9 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+  service:
+    # -- Annotations for querier service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -763,7 +772,6 @@</span> memcached:
   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="p">@@ -792,6 +800,9 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0201"> <a href="#0201" class="anchor-heading" aria-labelledby="0201"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.1 </h2> <p><strong>Release date:</strong> 2022-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into add-option-to-configure-multi-tenancy-from-values-file</li> </ul> <h3 id="default-value-changes-155"> <a href="#default-value-changes-155" class="anchor-heading" aria-labelledby="default-value-changes-155"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fce8bb4b..1fc1d625 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,7 +1,7 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -751,16 +751,19 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
   service: memcached-client
<span class="gd">-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="p">@@ -794,6 +797,8 @@</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -871,8 +876,8 @@</span> gateway:
   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="gd">-    # -- The Docker registry for the gateway image
-    registry: docker.io
</span><span class="gi">+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="err">
</span></code></pre></div></div> <h2 id="0194"> <a href="#0194" class="anchor-heading" aria-labelledby="0194"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.4 </h2> <p><strong>Release date:</strong> 2022-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add option to configure multi_tenancy from values files</li> </ul> <h3 id="default-value-changes-156"> <a href="#default-value-changes-156" class="anchor-heading" aria-labelledby="default-value-changes-156"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f584b84e..fce8bb4b 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -500,6 +500,8 @@</span> search:
   # -- Enable Tempo search
   enabled: false
 
<span class="gi">+multitenancyEnabled: false
+
</span> traces:
   jaeger:
     grpc:
<span class="p">@@ -547,7 +549,7 @@</span> traces:
   kafka: {}
 
 config: |
<span class="gd">-  multitenancy_enabled: false
</span><span class="gi">+  multitenancy_enabled: {{ .Values.multitenancyEnabled }}
</span>   search_enabled: {{ .Values.search.enabled }}
   metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
   compactor:
<span class="err">
</span></code></pre></div></div> <h2 id="0201-1"> <a href="#0201-1" class="anchor-heading" aria-labelledby="0201-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.1 </h2> <p><strong>Release date:</strong> 2022-06-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update chart version</li> <li>fix lint-test</li> <li>typo</li> <li>typo</li> <li>typo</li> </ul> <h3 id="default-value-changes-157"> <a href="#default-value-changes-157" class="anchor-heading" aria-labelledby="default-value-changes-157"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7d76f0d1..fdd3c530 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -149,7 +149,7 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
   service:
<span class="gd">-    # -- Annotations for Memcached Exporter service
</span><span class="gi">+    # -- Annotations for ingester service
</span>     annotations: {}
 
 # Configuration for the metrics-generator
<span class="p">@@ -407,7 +407,7 @@</span> querier:
       # -- grpc client configuration
       grpc_client_config: {}
   service:
<span class="gd">-    # -- Annotations for compactor service
</span><span class="gi">+    # -- Annotations for querier service
</span>     annotations: {}
 
 # Configuration for the query-frontend
<span class="p">@@ -770,7 +770,6 @@</span> memcached:
   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  service: memcached-client
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="err">
</span></code></pre></div></div> <h2 id="0210-1"> <a href="#0210-1" class="anchor-heading" aria-labelledby="0210-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.0 </h2> <p><strong>Release date:</strong> 2022-06-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Set annotations for services from values file</li> </ul> <h3 id="default-value-changes-158"> <a href="#default-value-changes-158" class="anchor-heading" aria-labelledby="default-value-changes-158"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 36b7f465..7d76f0d1 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -148,6 +148,9 @@</span> ingester:
     max_block_duration: null
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
<span class="gi">+  service:
+    # -- Annotations for Memcached Exporter service
+    annotations: {}
</span> 
 # Configuration for the metrics-generator
 metricsGenerator:
<span class="p">@@ -225,6 +228,9 @@</span> metricsGenerator:
     #   send_exemplars: true
     #   headers:
     #     x-scope-orgid: operations
<span class="gi">+  service:
+    # -- Annotations for Metrics Generator service
+    annotations: {}
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -400,6 +406,9 @@</span> querier:
     frontend_worker:
       # -- grpc client configuration
       grpc_client_config: {}
<span class="gi">+  service:
+    # -- Annotations for compactor service
+    annotations: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -790,6 +799,9 @@</span> memcached:
               matchLabels:
                 {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  service:
+    # -- Annotations for memcached service
+    annotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0200"> <a href="#0200" class="anchor-heading" aria-labelledby="0200"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.0 </h2> <p><strong>Release date:</strong> 2022-06-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Set registry for Memcached, Memcached Exporter and gateway</li> </ul> <h3 id="default-value-changes-159"> <a href="#default-value-changes-159" class="anchor-heading" aria-labelledby="default-value-changes-159"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f584b84e..36b7f465 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -1,7 +1,7 @@</span>
 global:
   image:
     # -- Overrides the Docker registry globally for all images
<span class="gd">-    registry: null
</span><span class="gi">+    registry: docker.io
</span>   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="p">@@ -749,16 +749,19 @@</span> overrides: |
 memcached:
   # -- Specified whether the memcached cachce should be enabled
   enabled: true
<span class="gi">+  image:
+    # -- The Docker registry for the Memcached image. Overrides `global.image.registry`
+    registry: null
+    # -- Memcached Docker image repository
+    repository: memcached
+    # -- Memcached Docker image tag
+    tag: 1.5.17-alpine
+    # -- Memcached Docker image pull policy
+    pullPolicy: IfNotPresent
</span>   host: memcached
   # Number of replicas for memchached
   replicas: 1
   service: memcached-client
<span class="gd">-  # -- Memcached Docker image repository
-  repository: memcached
-  # -- Memcached Docker image tag
-  tag: 1.5.17-alpine
-  # -- Memcached Docker image pull policy
-  pullPolicy: IfNotPresent
</span>   # -- Additional CLI args for memcached
   extraArgs: []
   # -- Environment variables to add to memcached pods
<span class="p">@@ -792,6 +795,8 @@</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # -- The Docker registry for the Memcached Exporter image. Overrides `global.image.registry`
+    registry: null
</span>     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="p">@@ -869,8 +874,8 @@</span> gateway:
   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="gd">-    # -- The Docker registry for the gateway image
-    registry: docker.io
</span><span class="gi">+    # -- The Docker registry for the gateway image. Overrides `global.image.registry`
+    registry: null
</span>     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="err">
</span></code></pre></div></div> <h2 id="0193"> <a href="#0193" class="anchor-heading" aria-labelledby="0193"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.3 </h2> <p><strong>Release date:</strong> 2022-06-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add distributor configs</li> </ul> <h3 id="default-value-changes-160"> <a href="#default-value-changes-160" class="anchor-heading" aria-labelledby="default-value-changes-160"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3b6ac2b2..f584b84e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -297,6 +297,13 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    # -- Enable to log every received trace id to help debug ingestion
+    log_received_traces: null
+    # -- Disables write extension with inactive ingesters
+    extend_writes: null
+    # -- List of tags that will not be extracted from trace data for search lookups
+    search_tags_deny_list: []
</span> 
 compactor:
   image:
<span class="p">@@ -619,6 +626,18 @@</span> config: |
       kafka:
         {{- toYaml .Values.traces.kafka | nindent 6 }}
       {{- end }}
<span class="gi">+    {{- if .Values.distributor.config.log_received_traces }}
+    log_received_traces: {{ .Values.distributor.config.log_received_traces }}
+    {{- end }}
+    {{- if .Values.distributor.config.extend_writes }}
+    extend_writes: {{ .Values.distributor.config.extend_writes }}
+    {{- end }}
+    {{- if .Values.distributor.config.search_tags_deny_list }}
+    search_tags_deny_list:
+      {{- with .Values.distributor.config.search_tags_deny_list }}
+      {{- toYaml . | nindent 4 }}
+      {{- end }}
+    {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="err">
</span></code></pre></div></div> <h2 id="0192"> <a href="#0192" class="anchor-heading" aria-labelledby="0192"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.2 </h2> <p><strong>Release date:</strong> 2022-06-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add Tempo ingester configs that were left out</li> </ul> <h3 id="default-value-changes-161"> <a href="#default-value-changes-161" class="anchor-heading" aria-labelledby="default-value-changes-161"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 76d1cdb9..3b6ac2b2 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -138,6 +138,10 @@</span> ingester:
   config:
     # -- Number of copies of spans to store in the ingester ring
     replication_factor: 3
<span class="gi">+    # -- Amount of time a trace must be idle before flushing it to the wal.
+    trace_idle_period: null
+    # -- How often to sweep all tenants and move traces from live -&gt; wal -&gt; completed blocks.
+    flush_check_period: null
</span>     # -- Maximum size of a block before cutting it
     max_block_bytes: null
     # -- Maximum length of time before cutting a block
<span class="p">@@ -629,6 +633,12 @@</span> config: |
         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.trace_idle_period }}
+    trace_idle_period: {{ .Values.ingester.config.trace_idle_period }}
+    {{- end }}
+    {{- if .Values.ingester.config.flush_check_period }}
+    flush_check_period: {{ .Values.ingester.config.flush_check_period }}
+    {{- end }}
</span>     {{- if .Values.ingester.config.max_block_bytes }}
     max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
     {{- end }}
<span class="err">
</span></code></pre></div></div> <h2 id="0191"> <a href="#0191" class="anchor-heading" aria-labelledby="0191"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.1 </h2> <p><strong>Release date:</strong> 2022-05-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> fix volume name conflict</li> <li>Update readme and fix linting</li> <li>refactor metrics-generator</li> </ul> <h3 id="default-value-changes-162"> <a href="#default-value-changes-162" class="anchor-heading" aria-labelledby="default-value-changes-162"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index f418af45..76d1cdb9 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -153,17 +153,6 @@</span> metricsGenerator:
   annotations: {}
   # -- Number of replicas for the metrics-generator
   replicas: 1
<span class="gd">-  autoscaling:
-    # -- Enable autoscaling for the metrics-generator
-    enabled: false
-    # -- Minimum autoscaling replicas for the metrics-generator
-    minReplicas: 1
-    # -- Maximum autoscaling replicas for the metrics-generator
-    maxReplicas: 3
-    # -- Target CPU utilisation percentage for the metrics-generator
-    targetCPUUtilizationPercentage: 60
-    # -- Target memory utilisation percentage for the metrics-generator
-    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -213,22 +202,23 @@</span> metricsGenerator:
   extraVolumeMounts: []
   # -- Extra volumes for metrics-generator deployment
   extraVolumes: []
<span class="gd">-  persistence:
-    # -- Enable creating PVCs which is required when using boltdb-shipper
-    enabled: false
-    # -- Size of persistent disk
-    size: 10Gi
-    # -- Storage class to be used.
-    # If defined, storageClassName: &lt;storageClass&gt;.
-    # If set to "-", storageClassName: "", which disables dynamic provisioning.
-    # If empty or set to null, no storageClassName spec is
-    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
-    storageClass: null
</span><span class="gi">+  # -- Default ports
+  ports:
+    - name: grpc
+      port: 9095
+      service: true
+    - name: http-memberlist
+      port: 7946
+      service: false
+    - name: http
+      port: 3100
+      service: true
</span>   config:
     #  MaxItems is the amount of edges that will be stored in the store.
     service_graphs_max_items: 10000
     storage_remote_write: []
     # - url: http://cortex/api/v1/push
<span class="gi">+    #   send_exemplars: true
</span>     #   headers:
     #     x-scope-orgid: operations
 
<span class="p">@@ -562,7 +552,7 @@</span> config: |
         store: memberlist
     processor:
       service_graphs:
<span class="gd">-        max_items: {{ .Values.metricsGenerator.service_graphs_max_items }}
</span><span class="gi">+        max_items: {{ .Values.metricsGenerator.config.service_graphs_max_items }}
</span>     storage:
       path: /var/tempo/wal
       remote_write:
<span class="p">@@ -717,6 +707,9 @@</span> storage:
 # Global overrides
 global_overrides:
   per_tenant_override_config: /conf/overrides.yaml
<span class="gi">+  # metrics_generator_processors:
+  #   - service-graphs
+  #   - span-metrics
</span> 
 # Per tenants overrides
 overrides: |
<span class="err">
</span></code></pre></div></div> <h2 id="0190"> <a href="#0190" class="anchor-heading" aria-labelledby="0190"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.0 </h2> <p><strong>Release date:</strong> 2022-05-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Add metrics generator</li> <li>Change ingesters pod anti affinity logic</li> <li>Update readme</li> </ul> <h3 id="default-value-changes-163"> <a href="#default-value-changes-163" class="anchor-heading" aria-labelledby="default-value-changes-163"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index dbacb536..f418af45 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -100,16 +100,17 @@</span> ingester:
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
<span class="gd">-  # @default -- Hard node and soft zone anti-affinity
</span><span class="gi">+  # @default -- Soft node and soft zone anti-affinity
</span>   affinity: |
     podAntiAffinity:
<span class="gd">-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
</span>       preferredDuringSchedulingIgnoredDuringExecution:
         - weight: 100
<span class="gi">+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: kubernetes.io/hostname
+        - weight: 75
</span>           podAffinityTerm:
             labelSelector:
               matchLabels:
<span class="p">@@ -144,6 +145,93 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
 
<span class="gi">+# Configuration for the metrics-generator
+metricsGenerator:
+  # -- Specifies whether a metrics-generator should be deployed
+  enabled: false
+  # -- Annotations for the metrics-generator StatefulSet
+  annotations: {}
+  # -- Number of replicas for the metrics-generator
+  replicas: 1
+  autoscaling:
+    # -- Enable autoscaling for the metrics-generator
+    enabled: false
+    # -- Minimum autoscaling replicas for the metrics-generator
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the metrics-generator
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the metrics-generator
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the metrics-generator
+    targetMemoryUtilizationPercentage:
+  image:
+    # -- The Docker registry for the metrics-generator image. Overrides `tempo.image.registry`
+    registry: null
+    # -- Docker image repository for the metrics-generator image. Overrides `tempo.image.repository`
+    repository: null
+    # -- Docker image tag for the metrics-generator image. Overrides `tempo.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for metrics-generator pods
+  priorityClassName: null
+  # -- Labels for metrics-generator pods
+  podLabels: {}
+  # -- Annotations for metrics-generator pods
+  podAnnotations: {}
+  # -- Additional CLI args for the metrics-generator
+  extraArgs: []
+  # -- Environment variables to add to the metrics-generator pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the metrics-generator pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for the metrics-generator
+  resources: {}
+  # -- Grace period to allow the metrics-generator to shutdown before it is killed. Especially for the ingestor,
+  # this must be increased. It must be long enough so metrics-generators can be gracefully shutdown flushing/transferring
+  # all data and to successfully leave the member ring on shutdown.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for metrics-generator pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.metricsGeneratorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for metrics-generator pods
+  nodeSelector: {}
+  # -- Tolerations for metrics-generator pods
+  tolerations: []
+  # -- Extra volumes for metrics-generator pods
+  extraVolumeMounts: []
+  # -- Extra volumes for metrics-generator deployment
+  extraVolumes: []
+  persistence:
+    # -- Enable creating PVCs which is required when using boltdb-shipper
+    enabled: false
+    # -- Size of persistent disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+  config:
+    #  MaxItems is the amount of edges that will be stored in the store.
+    service_graphs_max_items: 10000
+    storage_remote_write: []
+    # - url: http://cortex/api/v1/push
+    #   headers:
+    #     x-scope-orgid: operations
+
</span> # Configuration for the distributor
 distributor:
   # -- Number of replicas for the distributor
<span class="p">@@ -460,12 +548,26 @@</span> traces:
 config: |
   multitenancy_enabled: false
   search_enabled: {{ .Values.search.enabled }}
<span class="gi">+  metrics_generator_enabled: {{ .Values.metricsGenerator.enabled }}
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
     ring:
       kvstore:
         store: memberlist
<span class="gi">+  {{- if .Values.metricsGenerator.enabled }}
+  metrics_generator:
+    ring:
+      kvstore:
+        store: memberlist
+    processor:
+      service_graphs:
+        max_items: {{ .Values.metricsGenerator.service_graphs_max_items }}
+    storage:
+      path: /var/tempo/wal
+      remote_write:
+        {{- toYaml .Values.metricsGenerator.config.storage_remote_write | nindent 6}}
+  {{- end }}
</span>   distributor:
     ring:
       kvstore:
<span class="err">
</span></code></pre></div></div> <h2 id="0182"> <a href="#0182" class="anchor-heading" aria-labelledby="0182"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.2 </h2> <p><strong>Release date:</strong> 2022-05-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> <li>Default to 3 replicas and RF=3</li> <li>Allow configurable replication factor for the ingester</li> <li>README update</li> </ul> <h3 id="default-value-changes-164"> <a href="#default-value-changes-164" class="anchor-heading" aria-labelledby="default-value-changes-164"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 76145081..dbacb536 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -62,7 +62,7 @@</span> ingester:
   # -- Annotations for the ingester StatefulSet
   annotations: {}
   # -- Number of replicas for the ingester
<span class="gd">-  replicas: 1
</span><span class="gi">+  replicas: 3
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -135,6 +135,8 @@</span> ingester:
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
   config:
<span class="gi">+    # -- Number of copies of spans to store in the ingester ring
+    replication_factor: 3
</span>     # -- Maximum size of a block before cutting it
     max_block_bytes: null
     # -- Maximum length of time before cutting a block
<span class="p">@@ -531,7 +533,7 @@</span> config: |
   ingester:
     lifecycler:
       ring:
<span class="gd">-        replication_factor: 1
</span><span class="gi">+        replication_factor: {{ .Values.ingester.config.replication_factor }}
</span>         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="err">
</span></code></pre></div></div> <h2 id="0181"> <a href="#0181" class="anchor-heading" aria-labelledby="0181"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.1 </h2> <p><strong>Release date:</strong> 2022-05-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update distributor deployment to use enabled</li> <li>Update distributor service to use enabled</li> <li>lint</li> <li>docs: update Upgrading entry</li> <li>docs: update README.md</li> <li>feat: add jeager, zipkin and opencensus receivers</li> <li>docs: add Upgrading entry</li> <li>docs: update README.md</li> <li>feat: add <code class="language-plaintext highlighter-rouge">enabled</code> and <code class="language-plaintext highlighter-rouge">receiverConfig</code> keys</li> </ul> <h3 id="default-value-changes-165"> <a href="#default-value-changes-165" class="anchor-heading" aria-labelledby="default-value-changes-165"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 469e2ce6..76145081 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -213,13 +213,6 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gd">-  config:
-    receivers:
-      otlp:
-        protocols:
-          # -- OTLP receiver advanced configuration
-          grpc: {}
-          http: {}
</span> 
 compactor:
   image:
<span class="p">@@ -418,23 +411,47 @@</span> search:
 
 traces:
   jaeger:
<span class="gd">-    # -- Enable Tempo to ingest Jaeger GRPC traces
-    grpc: false
-    # -- Enable Tempo to ingest Jaeger Thrift Binary traces
-    thriftBinary: false
-    # -- Enable Tempo to ingest Jaeger Thrift Compact traces
-    thriftCompact: false
-    # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
-    thriftHttp: false
-  # -- Enable Tempo to ingest Zipkin traces
-  zipkin: false
</span><span class="gi">+    grpc:
+      # -- Enable Tempo to ingest Jaeger GRPC traces
+      enabled: false
+      # -- Jaeger GRPC receiver config
+      receiverConfig: {}
+    thriftBinary:
+      # -- Enable Tempo to ingest Jaeger Thrift Binary traces
+      enabled: false
+      # -- Jaeger Thrift Binary receiver config
+      receiverConfig: {}
+    thriftCompact:
+      # -- Enable Tempo to ingest Jaeger Thrift Compact traces
+      enabled: false
+      # -- Jaeger Thrift Compact receiver config
+      receiverConfig: {}
+    thriftHttp:
+       # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
+      enabled: false
+      # -- Jaeger Thrift HTTP receiver config
+      receiverConfig: {}
+  zipkin:
+    # -- Enable Tempo to ingest Zipkin traces
+    enabled: false
+    # -- Zipkin receiver config
+    receiverConfig: {}
</span>   otlp:
<span class="gd">-    # -- Enable Tempo to ingest Open Telemetry HTTP traces
-    http: false
-    # -- Enable Tempo to ingest Open Telemetry GRPC traces
-    grpc: false
-  # -- Enable Tempo to ingest Open Census traces
-  opencensus: false
</span><span class="gi">+    http:
+      # -- Enable Tempo to ingest Open Telemetry HTTP traces
+      enabled: false
+      # -- HTTP receiver advanced config
+      receiverConfig: {}
+    grpc:
+      # -- Enable Tempo to ingest Open Telemetry GRPC traces
+      enabled: false
+      # -- GRPC receiver advanced config
+      receiverConfig: {}
+  opencensus:
+    # -- Enable Tempo to ingest Open Census traces
+    enabled: false
+    # -- Open Census receiver config
+    receiverConfig: {}
</span>   # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
   kafka: {}
 
<span class="p">@@ -452,51 +469,53 @@</span> config: |
       kvstore:
         store: memberlist
     receivers:
<span class="gd">-      {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
</span><span class="gi">+      {{- if  or (.Values.traces.jaeger.thriftCompact.enabled) (.Values.traces.jaeger.thriftBinary.enabled) (.Values.traces.jaeger.thriftHttp.enabled) (.Values.traces.jaeger.grpc.enabled) }}
</span>       jaeger:
         protocols:
<span class="gd">-          {{- if .Values.traces.jaeger.thriftCompact }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftCompact.enabled }}
</span>           thrift_compact:
<span class="gd">-            endpoint: 0.0.0.0:6831
</span><span class="gi">+            {{- $mergedJaegerThriftCompactConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6831") .Values.traces.jaeger.thriftCompact.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftCompactConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftBinary }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftBinary.enabled }}
</span>           thrift_binary:
<span class="gd">-            endpoint: 0.0.0.0:6832
</span><span class="gi">+            {{- $mergedJaegerThriftBinaryConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:6832") .Values.traces.jaeger.thriftBinary.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftBinaryConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.thriftHttp }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftHttp.enabled }}
</span>           thrift_http:
<span class="gd">-            endpoint: 0.0.0.0:14268
</span><span class="gi">+            {{- $mergedJaegerThriftHttpConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14268") .Values.traces.jaeger.thriftHttp.receiverConfig }}
+            {{- toYaml $mergedJaegerThriftHttpConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.jaeger.grpc }}
</span><span class="gi">+          {{- if .Values.traces.jaeger.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:14250
</span><span class="gi">+            {{- $mergedJaegerGrpcConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:14250") .Values.traces.jaeger.grpc.receiverConfig }}
+            {{- toYaml $mergedJaegerGrpcConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.zipkin}}
</span><span class="gi">+      {{- if .Values.traces.zipkin.enabled }}
</span>       zipkin:
<span class="gd">-        endpoint: 0.0.0.0:9411
</span><span class="gi">+        {{- $mergedZipkinReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:9411") .Values.traces.zipkin.receiverConfig }}
+        {{- toYaml $mergedZipkinReceiverConfig | nindent 6 }}
</span>       {{- end }}
<span class="gd">-      {{- if or (.Values.traces.otlp.http) (.Values.traces.otlp.grpc) }}
</span><span class="gi">+      {{- if or (.Values.traces.otlp.http.enabled) (.Values.traces.otlp.grpc.enabled) }}
</span>       otlp:
         protocols:
<span class="gd">-          {{- if .Values.traces.otlp.http }}
</span><span class="gi">+          {{- if .Values.traces.otlp.http.enabled }}
</span>           http:
<span class="gd">-            endpoint: 0.0.0.0:55681
-            {{- if .Values.distributor.config.receivers.otlp.protocols.http }}
-            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.http | nindent 10 }}
-            {{- end}}
</span><span class="gi">+            {{- $mergedOtlpHttpReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55681") .Values.traces.otlp.http.receiverConfig }}
+            {{- toYaml $mergedOtlpHttpReceiverConfig | nindent 10 }}
</span>           {{- end }}
<span class="gd">-          {{- if .Values.traces.otlp.grpc }}
</span><span class="gi">+          {{- if .Values.traces.otlp.grpc.enabled }}
</span>           grpc:
<span class="gd">-            endpoint: 0.0.0.0:4317
-            {{- if .Values.distributor.config.receivers.otlp.protocols.grpc }}
-            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.grpc | nindent 10 }}
-            {{- end}}
</span><span class="gi">+            {{- $mergedOtlpGrpcReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:4317") .Values.traces.otlp.grpc.receiverConfig }}
+            {{- toYaml $mergedOtlpGrpcReceiverConfig | nindent 10 }}
</span>           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.opencensus }}
</span><span class="gi">+      {{- if .Values.traces.opencensus.enabled }}
</span>       opencensus:
<span class="gd">-        endpoint: 0.0.0.0:55678
</span><span class="gi">+        {{- $mergedOpencensusReceiverConfig := mustMergeOverwrite (dict "endpoint" "0.0.0.0:55678") .Values.traces.opencensus.receiverConfig }}
+        {{- toYaml $mergedOpencensusReceiverConfig | nindent 6 }}
</span>       {{- end }}
       {{- if .Values.traces.kafka }}
       kafka:
<span class="err">
</span></code></pre></div></div> <h2 id="0180-1"> <a href="#0180-1" class="anchor-heading" aria-labelledby="0180-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.0 </h2> <p><strong>Release date:</strong> 2022-05-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into distr-config</li> </ul> <h3 id="default-value-changes-166"> <a href="#default-value-changes-166" class="anchor-heading" aria-labelledby="default-value-changes-166"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 6a09db28..469e2ce6 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -213,6 +213,13 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    receivers:
+      otlp:
+        protocols:
+          # -- OTLP receiver advanced configuration
+          grpc: {}
+          http: {}
</span> 
 compactor:
   image:
<span class="p">@@ -475,10 +482,16 @@</span> config: |
           {{- if .Values.traces.otlp.http }}
           http:
             endpoint: 0.0.0.0:55681
<span class="gi">+            {{- if .Values.distributor.config.receivers.otlp.protocols.http }}
+            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.http | nindent 10 }}
+            {{- end}}
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
             endpoint: 0.0.0.0:4317
<span class="gi">+            {{- if .Values.distributor.config.receivers.otlp.protocols.grpc }}
+            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.grpc | nindent 10 }}
+            {{- end}}
</span>           {{- end }}
       {{- end }}
       {{- if .Values.traces.opencensus }}
<span class="err">
</span></code></pre></div></div> <h2 id="0174"> <a href="#0174" class="anchor-heading" aria-labelledby="0174"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.4 </h2> <p><strong>Release date:</strong> 2022-05-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.1&amp;color=success" alt="AppVersion: 1.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>1.4.1</li> <li>fix typo</li> <li>Merge branch main into distr-config</li> </ul> <h3 id="default-value-changes-167"> <a href="#default-value-changes-167" class="anchor-heading" aria-labelledby="default-value-changes-167"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7ae23e5a..6a09db28 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -63,6 +63,17 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -131,9 +142,21 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
 
<span class="gi">+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -315,6 +338,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -663,6 +697,17 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="0180-2"> <a href="#0180-2" class="anchor-heading" aria-labelledby="0180-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.0 </h2> <p><strong>Release date:</strong> 2022-05-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>docs: update readme</li> </ul> <h3 id="default-value-changes-168"> <a href="#default-value-changes-168" class="anchor-heading" aria-labelledby="default-value-changes-168"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7ae23e5a..0827df5d 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -190,6 +190,13 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    receivers:
+      otlp:
+        protocols:
+          # -- OTLP Receiver advanced configuration
+          grpc: {}
+          http: {}
</span> 
 compactor:
   image:
<span class="p">@@ -441,10 +448,16 @@</span> config: |
           {{- if .Values.traces.otlp.http }}
           http:
             endpoint: 0.0.0.0:55681
<span class="gi">+            {{- if .Values.distributor.config.receivers.otlp.protocols.http }}
+            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.http | nindent 10 }}
+            {{- end}}
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
             endpoint: 0.0.0.0:4317
<span class="gi">+            {{- if .Values.distributor.config.receivers.otlp.protocols.grpc }}
+            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.grpc | nindent 10 }}
+            {{- end}}
</span>           {{- end }}
       {{- end }}
       {{- if .Values.traces.opencensus }}
<span class="err">
</span></code></pre></div></div> <h2 id="0173"> <a href="#0173" class="anchor-heading" aria-labelledby="0173"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.3 </h2> <p><strong>Release date:</strong> 2022-05-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Add pdb if resource has &gt; 1 replicas</li> <li>add http advanced config</li> </ul> <h3 id="default-value-changes-169"> <a href="#default-value-changes-169" class="anchor-heading" aria-labelledby="default-value-changes-169"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7ae23e5a..6a09db28 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -63,6 +63,17 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -131,9 +142,21 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
 
<span class="gi">+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -315,6 +338,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -663,6 +697,17 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="0180-3"> <a href="#0180-3" class="anchor-heading" aria-labelledby="0180-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.0 </h2> <p><strong>Release date:</strong> 2022-05-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Add distributor OTLP receiver advanced config</li> </ul> <h3 id="default-value-changes-170"> <a href="#default-value-changes-170" class="anchor-heading" aria-labelledby="default-value-changes-170"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7ae23e5a..5f68f907 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -190,6 +190,12 @@</span> distributor:
   extraVolumeMounts: []
   # -- Extra volumes for distributor deployment
   extraVolumes: []
<span class="gi">+  config:
+    receivers:
+      otlp:
+        protocols:
+          # -- grpc server configuration
+          grpc: {}
</span> 
 compactor:
   image:
<span class="p">@@ -445,6 +451,9 @@</span> config: |
           {{- if .Values.traces.otlp.grpc }}
           grpc:
             endpoint: 0.0.0.0:4317
<span class="gi">+            {{- if .Values.distributor.config.receivers.otlp.protocols.grpc }}
+            {{- toYaml .Values.distributor.config.receivers.otlp.protocols.grpc | nindent 10 }}
+            {{- end}}
</span>           {{- end }}
       {{- end }}
       {{- if .Values.traces.opencensus }}
<span class="err">
</span></code></pre></div></div> <h2 id="0172"> <a href="#0172" class="anchor-heading" aria-labelledby="0172"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.2 </h2> <p><strong>Release date:</strong> 2022-05-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into tempo-autoscaling</li> </ul> <h3 id="default-value-changes-171"> <a href="#default-value-changes-171" class="anchor-heading" aria-labelledby="default-value-changes-171"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 7ae23e5a..6a09db28 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -63,6 +63,17 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -131,9 +142,21 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
 
<span class="gi">+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -315,6 +338,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -663,6 +697,17 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="0171"> <a href="#0171" class="anchor-heading" aria-labelledby="0171"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.1 </h2> <p><strong>Release date:</strong> 2022-04-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Fix ingester values</li> </ul> <h3 id="default-value-changes-172"> <a href="#default-value-changes-172" class="anchor-heading" aria-labelledby="default-value-changes-172"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2bebf4f2..7ae23e5a 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -469,14 +469,14 @@</span> config: |
         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gd">-    {{- if .Values.ingester.config.maxBlockBytes }}
-    max_block_bytes: {{ .Values.ingester.config.maxBlockBytes }}
</span><span class="gi">+    {{- if .Values.ingester.config.max_block_bytes }}
+    max_block_bytes: {{ .Values.ingester.config.max_block_bytes }}
</span>     {{- end }}
<span class="gd">-    {{- if .Values.ingester.config.maxBlockDuration }}
-    max_block_duration: {{ .Values.ingester.config.maxBlockDuration }}
</span><span class="gi">+    {{- if .Values.ingester.config.max_block_duration }}
+    max_block_duration: {{ .Values.ingester.config.max_block_duration }}
</span>     {{- end }}
<span class="gd">-    {{- if .Values.ingester.config.completeBlockTimeout }}
-    complete_block_timeout: {{ .Values.ingester.config.completeBlockTimeout }}
</span><span class="gi">+    {{- if .Values.ingester.config.complete_block_timeout }}
+    complete_block_timeout: {{ .Values.ingester.config.complete_block_timeout }}
</span>     {{- end }}
   memberlist:
     abort_if_cluster_join_fails: false
<span class="err">
</span></code></pre></div></div> <h2 id="0170"> <a href="#0170" class="anchor-heading" aria-labelledby="0170"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.0 </h2> <p><strong>Release date:</strong> 2022-04-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.4.0&amp;color=success" alt="AppVersion: 1.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo 1.4.0</li> </ul> <h3 id="default-value-changes-173"> <a href="#default-value-changes-173" class="anchor-heading" aria-labelledby="default-value-changes-173"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="01612"> <a href="#01612" class="anchor-heading" aria-labelledby="01612"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.12 </h2> <p><strong>Release date:</strong> 2022-02-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> feat: support for autoscaling</li> <li>fix: update podManagementPolicy and updateStrategy to match loki-distrib</li> </ul> <h3 id="default-value-changes-174"> <a href="#default-value-changes-174" class="anchor-heading" aria-labelledby="default-value-changes-174"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2bebf4f2..6fc0ef12 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -63,6 +63,17 @@</span> ingester:
   annotations: {}
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -131,9 +142,21 @@</span> ingester:
     # -- Duration to keep blocks in the ingester after they have been flushed
     complete_block_timeout: null
 
<span class="gi">+# Configuration for the distributor
</span> distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -315,6 +338,17 @@</span> queryFrontend:
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -663,6 +697,17 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- Enable logging of 2xx and 3xx HTTP requests
   verboseLogging: true
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="01611"> <a href="#01611" class="anchor-heading" aria-labelledby="01611"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.11 </h2> <p><strong>Release date:</strong> 2022-04-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Additional annotations</li> <li>Update documentation</li> </ul> <h3 id="default-value-changes-175"> <a href="#default-value-changes-175" class="anchor-heading" aria-labelledby="default-value-changes-175"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 080dfe82..2bebf4f2 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -59,6 +59,8 @@</span> rbac:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Annotations for the ingester StatefulSet
+  annotations: {}
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="p">@@ -225,6 +227,9 @@</span> compactor:
     compaction:
       # -- Duration to keep blocks
       block_retention: 48h
<span class="gi">+  service:
+    # -- Annotations for compactor service
+    annotations: {}
</span> 
 # Configuration for the querier
 querier:
<span class="err">
</span></code></pre></div></div> <h2 id="01610"> <a href="#01610" class="anchor-heading" aria-labelledby="01610"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.10 </h2> <p><strong>Release date:</strong> 2022-04-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> fix: indentation of annotations</li> <li>Run helm docs through docker</li> <li>Helm docs for tempo distributed</li> </ul> <h3 id="default-value-changes-176"> <a href="#default-value-changes-176" class="anchor-heading" aria-labelledby="default-value-changes-176"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0169"> <a href="#0169" class="anchor-heading" aria-labelledby="0169"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.9 </h2> <p><strong>Release date:</strong> 2022-04-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version to 0.16.9</li> <li>Add ingester block configurations</li> </ul> <h3 id="default-value-changes-177"> <a href="#default-value-changes-177" class="anchor-heading" aria-labelledby="default-value-changes-177"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fadf9683..080dfe82 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -121,6 +121,13 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  config:
+    # -- Maximum size of a block before cutting it
+    max_block_bytes: null
+    # -- Maximum length of time before cutting a block
+    max_block_duration: null
+    # -- Duration to keep blocks in the ingester after they have been flushed
+    complete_block_timeout: null
</span> 
 distributor:
   # -- Number of replicas for the distributor
<span class="p">@@ -457,6 +464,15 @@</span> config: |
         kvstore:
           store: memberlist
       tokens_file_path: /var/tempo/tokens.json
<span class="gi">+    {{- if .Values.ingester.config.maxBlockBytes }}
+    max_block_bytes: {{ .Values.ingester.config.maxBlockBytes }}
+    {{- end }}
+    {{- if .Values.ingester.config.maxBlockDuration }}
+    max_block_duration: {{ .Values.ingester.config.maxBlockDuration }}
+    {{- end }}
+    {{- if .Values.ingester.config.completeBlockTimeout }}
+    complete_block_timeout: {{ .Values.ingester.config.completeBlockTimeout }}
+    {{- end }}
</span>   memberlist:
     abort_if_cluster_join_fails: false
     join_members:
<span class="err">
</span></code></pre></div></div> <h2 id="0168"> <a href="#0168" class="anchor-heading" aria-labelledby="0168"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.8 </h2> <p><strong>Release date:</strong> 2022-03-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version to 0.16.8</li> <li>Add metricRelabelings to ServiceMonitors</li> </ul> <h3 id="default-value-changes-178"> <a href="#default-value-changes-178" class="anchor-heading" aria-labelledby="default-value-changes-178"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 313b80ea..fadf9683 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -607,6 +607,9 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0167-1"> <a href="#0167-1" class="anchor-heading" aria-labelledby="0167-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.7 </h2> <p><strong>Release date:</strong> 2022-03-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add global configuration for pod annotations</li> <li>Add missing grpclb port to query-frontend</li> <li>generate helm doc</li> <li>update version in readme</li> </ul> <h3 id="default-value-changes-179"> <a href="#default-value-changes-179" class="anchor-heading" aria-labelledby="default-value-changes-179"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ce05c4b5..313b80ea 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -29,6 +29,8 @@</span> tempo:
     timeoutSeconds: 1
   # -- Global labels for all tempo pods
   podLabels: {}
<span class="gi">+  # -- Common annotations for all pods
+  podAnnotations: {}
</span>   # --- SecurityContext holds pod-level security attributes and common container settings
   securityContext: {}
   #  capabilities:
<span class="p">@@ -552,6 +554,8 @@</span> memcached:
   extraEnvFrom: []
   # -- Labels for memcached pods
   podLabels: {}
<span class="gi">+  # -- Annotations for memcached pods
+  podAnnotations: {}
</span>   # -- Resource requests and limits for memcached
   resources: {}
   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0166"> <a href="#0166" class="anchor-heading" aria-labelledby="0166"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.6 </h2> <p><strong>Release date:</strong> 2022-03-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add verboselogging flag</li> <li>Add missing comment, and update doc</li> </ul> <h3 id="default-value-changes-180"> <a href="#default-value-changes-180" class="anchor-heading" aria-labelledby="default-value-changes-180"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 851e959a..ce05c4b5 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -316,6 +316,7 @@</span> queryFrontend:
   serviceDiscovery:
     # -- Annotations for queryFrontendDiscovery service
     annotations: {}
<span class="gi">+  # -- The name of the PriorityClass for query-frontend pods
</span>   priorityClassName: null
   # -- Labels for queryFrontend pods
   podLabels: {}
<span class="p">@@ -634,6 +635,8 @@</span> gateway:
   enabled: false
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
</span>   image:
     # -- The Docker registry for the gateway image
     registry: docker.io
<span class="p">@@ -772,7 +775,18 @@</span> gateway:
 
         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="err">
</span></code></pre></div></div> <h2 id="0165"> <a href="#0165" class="anchor-heading" aria-labelledby="0165"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.5 </h2> <p><strong>Release date:</strong> 2022-03-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add annotation for query-frontend-discovery</li> <li>compactor is installed by default</li> </ul> <h3 id="default-value-changes-181"> <a href="#default-value-changes-181" class="anchor-heading" aria-labelledby="default-value-changes-181"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 337724d4..851e959a 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -313,7 +313,9 @@</span> queryFrontend:
     annotations: {}
     # -- Type of service for the queryFrontend
     type: ClusterIP
<span class="gd">-  # -- The name of the PriorityClass for query-frontend pods
</span><span class="gi">+  serviceDiscovery:
+    # -- Annotations for queryFrontendDiscovery service
+    annotations: {}
</span>   priorityClassName: null
   # -- Labels for queryFrontend pods
   podLabels: {}
<span class="err">
</span></code></pre></div></div> <h2 id="0164"> <a href="#0164" class="anchor-heading" aria-labelledby="0164"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.4 </h2> <p><strong>Release date:</strong> 2022-02-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.2&amp;color=success" alt="AppVersion: 1.3.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>1.3.1 =&gt; 1.3.2</li> </ul> <h3 id="default-value-changes-182"> <a href="#default-value-changes-182" class="anchor-heading" aria-labelledby="default-value-changes-182"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0163"> <a href="#0163" class="anchor-heading" aria-labelledby="0163"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.3 </h2> <p><strong>Release date:</strong> 2022-02-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add possibility to enable RBAC and PodSecurityPolicy</li> </ul> <h3 id="default-value-changes-183"> <a href="#default-value-changes-183" class="anchor-heading" aria-labelledby="default-value-changes-183"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 4647e149..337724d4 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -49,6 +49,12 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gi">+rbac:
+  # -- Specifies whether RBAC manifests should be created
+  create: false
+  # -- Specifies whether a PodSecurityPolicy should be created
+  pspEnabled: false
+
</span> # Configuration for the ingester
 ingester:
   # -- Number of replicas for the ingester
<span class="err">
</span></code></pre></div></div> <h2 id="0162"> <a href="#0162" class="anchor-heading" aria-labelledby="0162"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.2 </h2> <p><strong>Release date:</strong> 2022-02-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version to 0.16.2</li> <li>Run helm-docs to fix lint step of review</li> <li>Fix default value for new securityContext helm key</li> <li>Add possiblity to define securityContext</li> </ul> <h3 id="default-value-changes-184"> <a href="#default-value-changes-184" class="anchor-heading" aria-labelledby="default-value-changes-184"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 602b1009..4647e149 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -29,6 +29,14 @@</span> tempo:
     timeoutSeconds: 1
   # -- Global labels for all tempo pods
   podLabels: {}
<span class="gi">+  # --- SecurityContext holds pod-level security attributes and common container settings
+  securityContext: {}
+  #  capabilities:
+  #    drop:
+  #    - ALL
+  #  readOnlyRootFilesystem: true
+  #  runAsNonRoot: true
+  #  runAsUser: 1000
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0161"> <a href="#0161" class="anchor-heading" aria-labelledby="0161"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.1 </h2> <p><strong>Release date:</strong> 2022-02-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(tempo-distributed): add terminationGracePeriodSeconds</li> <li>doc fix 2</li> <li>doc fix</li> <li>Merge branch main into tempo_podlabels</li> </ul> <h3 id="default-value-changes-185"> <a href="#default-value-changes-185" class="anchor-heading" aria-labelledby="default-value-changes-185"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 88f27465..602b1009 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -591,6 +591,27 @@</span> serviceMonitor:
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
   tlsConfig: null
 
<span class="gi">+# Rules for the Prometheus Operator
+prometheusRule:
+  # -- If enabled, a PrometheusRule resource for Prometheus Operator is created
+  enabled: false
+  # -- Alternative namespace for the PrometheusRule resource
+  namespace: null
+  # -- PrometheusRule annotations
+  annotations: {}
+  # -- Additional PrometheusRule labels
+  labels: {}
+  # -- Contents of Prometheus rules file
+  groups: []
+  # - name: loki-rules
+  #   rules:
+  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
+  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
+  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
+  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0160"> <a href="#0160" class="anchor-heading" aria-labelledby="0160"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.0 </h2> <p><strong>Release date:</strong> 2022-02-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo podlabels</li> <li>Refresh docs</li> </ul> <h3 id="default-value-changes-186"> <a href="#default-value-changes-186" class="anchor-heading" aria-labelledby="default-value-changes-186"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index dbc626c1..88f27465 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -27,6 +27,8 @@</span> tempo:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  # -- Global labels for all tempo pods
+  podLabels: {}
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -52,6 +54,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Additional CLI args for the ingester
<span class="p">@@ -123,6 +127,8 @@</span> distributor:
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Additional CLI args for the distributor
<span class="p">@@ -170,6 +176,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -208,6 +216,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Additional CLI args for the querier
<span class="p">@@ -291,6 +301,8 @@</span> queryFrontend:
     type: ClusterIP
   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for queryFrontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Additional CLI args for the query-frontend
<span class="p">@@ -521,6 +533,8 @@</span> memcached:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached pods
   extraEnvFrom: []
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
</span>   # -- Resource requests and limits for memcached
   resources: {}
   # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -594,6 +608,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="0153"> <a href="#0153" class="anchor-heading" aria-labelledby="0153"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.3 </h2> <p><strong>Release date:</strong> 2022-02-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> <li>add prometheusrule for tempo-distributed</li> </ul> <h3 id="default-value-changes-187"> <a href="#default-value-changes-187" class="anchor-heading" aria-labelledby="default-value-changes-187"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index dbc626c1..d1348ad6 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -577,6 +577,27 @@</span> serviceMonitor:
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
   tlsConfig: null
 
<span class="gi">+# Rules for the Prometheus Operator
+prometheusRule:
+  # -- If enabled, a PrometheusRule resource for Prometheus Operator is created
+  enabled: false
+  # -- Alternative namespace for the PrometheusRule resource
+  namespace: null
+  # -- PrometheusRule annotations
+  annotations: {}
+  # -- Additional PrometheusRule labels
+  labels: {}
+  # -- Contents of Prometheus rules file
+  groups: []
+  # - name: loki-rules
+  #   rules:
+  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
+  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
+  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
+  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0152"> <a href="#0152" class="anchor-heading" aria-labelledby="0152"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.2 </h2> <p><strong>Release date:</strong> 2022-02-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.1&amp;color=success" alt="AppVersion: 1.3.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Tempo distributed charts to v1.3.1</li> <li>fix a space</li> <li>more fixes</li> <li>fix helm docs</li> <li>fix toYaml issue</li> </ul> <h3 id="default-value-changes-188"> <a href="#default-value-changes-188" class="anchor-heading" aria-labelledby="default-value-changes-188"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index c6874a70..dbc626c1 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -431,7 +431,7 @@</span> config: |
     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="gd">-    {{- toYaml .Values.global_overrides . | nindent 4 }}
</span><span class="gi">+    {{- toYaml .Values.global_overrides | nindent 2 }}
</span>   server:
     http_listen_port: {{ .Values.server.httpListenPort }}
     log_level: {{ .Values.server.logLevel }}
<span class="p">@@ -493,9 +493,8 @@</span> storage:
     backend: local
 
 # Global overrides
<span class="gd">-global_overrides: |
-  overrides:
-    per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+global_overrides:
+  per_tenant_override_config: /conf/overrides.yaml
</span> 
 # Per tenants overrides
 overrides: |
<span class="err">
</span></code></pre></div></div> <h2 id="0151"> <a href="#0151" class="anchor-heading" aria-labelledby="0151"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.1 </h2> <p><strong>Release date:</strong> 2022-01-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.0&amp;color=success" alt="AppVersion: 1.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>adds the posibility to set global overrides</li> </ul> <h3 id="default-value-changes-189"> <a href="#default-value-changes-189" class="anchor-heading" aria-labelledby="default-value-changes-189"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index d50602e4..c6874a70 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -431,7 +431,7 @@</span> config: |
     join_members:
       - {{ include "tempo.fullname" . }}-gossip-ring
   overrides:
<span class="gd">-    per_tenant_override_config: /conf/overrides.yaml
</span><span class="gi">+    {{- toYaml .Values.global_overrides . | nindent 4 }}
</span>   server:
     http_listen_port: {{ .Values.server.httpListenPort }}
     log_level: {{ .Values.server.logLevel }}
<span class="p">@@ -492,7 +492,12 @@</span> storage:
   trace:
     backend: local
 
<span class="gd">-# Set ingestion overrides
</span><span class="gi">+# Global overrides
+global_overrides: |
+  overrides:
+    per_tenant_override_config: /conf/overrides.yaml
+
+# Per tenants overrides
</span> overrides: |
   overrides: {}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0150"> <a href="#0150" class="anchor-heading" aria-labelledby="0150"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.0 </h2> <p><strong>Release date:</strong> 2022-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.3.0&amp;color=success" alt="AppVersion: 1.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>1.3</li> <li>ci: fix trailing spaces</li> <li>fix: fix indentation</li> </ul> <h3 id="default-value-changes-190"> <a href="#default-value-changes-190" class="anchor-heading" aria-labelledby="default-value-changes-190"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 127452c2..d50602e4 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -470,19 +470,14 @@</span> config: |
 server:
   # --  HTTP server listen host
   httpListenPort: 3100
<span class="gd">-
</span>   # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
   logLevel: info
<span class="gd">-
</span>   # -- Log format. Can be set to logfmt (default) or json.
   logFormat: logfmt
<span class="gd">-  
</span>   # -- Max gRPC message size that can be received
   grpc_server_max_recv_msg_size: 4194304
<span class="gd">-  
</span>   # -- Max gRPC message size that can be sent
   grpc_server_max_send_msg_size: 4194304
<span class="gd">-
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="err">
</span></code></pre></div></div> <h2 id="0140"> <a href="#0140" class="anchor-heading" aria-labelledby="0140"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.14.0 </h2> <p><strong>Release date:</strong> 2022-01-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat!: add custom grpc configuration to server</li> <li>fix: update docs</li> <li>refactor: move grpc_client_config</li> <li>fix(doc): update README</li> <li>fix: add doc for grpc_client_config</li> </ul> <h3 id="default-value-changes-191"> <a href="#default-value-changes-191" class="anchor-heading" aria-labelledby="default-value-changes-191"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index d7aac23f..127452c2 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -244,6 +244,10 @@</span> querier:
   extraVolumeMounts: []
   # -- Extra volumes for querier deployment
   extraVolumes: []
<span class="gi">+  config:
+    frontend_worker:
+      # -- grpc client configuration
+      grpc_client_config: {}
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -411,9 +415,9 @@</span> config: |
   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="gd">-      {{- if .Values.querier.config.grpc_client_config }}
</span><span class="gi">+      {{- if .Values.querier.config.frontend_worker.grpc_client_config }}
</span>       grpc_client_config:
<span class="gd">-        {{- toYaml .Values.querier.config.grpc_client_config | nindent 6 }}
</span><span class="gi">+        {{- toYaml .Values.querier.config.frontend_worker.grpc_client_config | nindent 6 }}
</span>       {{- end }}
   ingester:
     lifecycler:
<span class="p">@@ -432,6 +436,8 @@</span> config: |
     http_listen_port: {{ .Values.server.httpListenPort }}
     log_level: {{ .Values.server.logLevel }}
     log_format: {{ .Values.server.logFormat }}
<span class="gi">+    grpc_server_max_recv_msg_size: {{ .Values.server.grpc_server_max_recv_msg_size }}
+    grpc_server_max_send_msg_size: {{ .Values.server.grpc_server_max_send_msg_size }}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -470,6 +476,12 @@</span> server:
 
   # -- Log format. Can be set to logfmt (default) or json.
   logFormat: logfmt
<span class="gi">+  
+  # -- Max gRPC message size that can be received
+  grpc_server_max_recv_msg_size: 4194304
+  
+  # -- Max gRPC message size that can be sent
+  grpc_server_max_send_msg_size: 4194304
</span> 
 # To configure a different storage backend instead of local storage:
 # storage:
<span class="err">
</span></code></pre></div></div> <h2 id="0130"> <a href="#0130" class="anchor-heading" aria-labelledby="0130"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.13.0 </h2> <p><strong>Release date:</strong> 2022-01-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat: add custom querier grpc client config</li> </ul> <h3 id="default-value-changes-192"> <a href="#default-value-changes-192" class="anchor-heading" aria-labelledby="default-value-changes-192"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fcc14741..d7aac23f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -411,6 +411,10 @@</span> config: |
   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="gi">+      {{- if .Values.querier.config.grpc_client_config }}
+      grpc_client_config:
+        {{- toYaml .Values.querier.config.grpc_client_config | nindent 6 }}
+      {{- end }}
</span>   ingester:
     lifecycler:
       ring:
<span class="err">
</span></code></pre></div></div> <h2 id="0123"> <a href="#0123" class="anchor-heading" aria-labelledby="0123"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.3 </h2> <p><strong>Release date:</strong> 2021-11-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Switch otlp http port from 55681 =&gt; 4318</li> </ul> <h3 id="default-value-changes-193"> <a href="#default-value-changes-193" class="anchor-heading" aria-labelledby="default-value-changes-193"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fcc14741..12248e09 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -393,7 +393,7 @@</span> config: |
         protocols:
           {{- if .Values.traces.otlp.http }}
           http:
<span class="gd">-            endpoint: 0.0.0.0:55681
</span><span class="gi">+            endpoint: 0.0.0.0:4318
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
<span class="p">@@ -735,7 +735,7 @@</span> gateway:
           }
 
           location = /otlp/v1/traces {
<span class="gd">-            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:55681/v1/traces;
</span><span class="gi">+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:4318/v1/traces;
</span>           }
 
           location ^~ /api {
<span class="err">
</span></code></pre></div></div> <h2 id="0122"> <a href="#0122" class="anchor-heading" aria-labelledby="0122"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.2 </h2> <p><strong>Release date:</strong> 2021-11-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> configure server with dedicated helm values</li> <li>fix: merge conflicts</li> </ul> <h3 id="default-value-changes-194"> <a href="#default-value-changes-194" class="anchor-heading" aria-labelledby="default-value-changes-194"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a0f5bc97..fcc14741 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -425,7 +425,9 @@</span> config: |
   overrides:
     per_tenant_override_config: /conf/overrides.yaml
   server:
<span class="gd">-    {{- toYaml .Values.server | nindent 4}}
</span><span class="gi">+    http_listen_port: {{ .Values.server.httpListenPort }}
+    log_level: {{ .Values.server.logLevel }}
+    log_format: {{ .Values.server.logFormat }}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -457,12 +459,13 @@</span> config: |
 # Refers to https://grafana.com/docs/tempo/latest/configuration/#server
 server:
   # --  HTTP server listen host
<span class="gd">-  http_listen_port: 3100
</span><span class="gi">+  httpListenPort: 3100
</span> 
   # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
<span class="gd">-  log_level: info
</span><span class="gi">+  logLevel: info
+
</span>   # -- Log format. Can be set to logfmt (default) or json.
<span class="gd">-  log_format: logfmt
</span><span class="gi">+  logFormat: logfmt
</span> 
 # To configure a different storage backend instead of local storage:
 # storage:
<span class="err">
</span></code></pre></div></div> <h2 id="0121"> <a href="#0121" class="anchor-heading" aria-labelledby="0121"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.1 </h2> <p><strong>Release date:</strong> 2021-11-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> allow configuration of the kafka receiver</li> </ul> <h3 id="default-value-changes-195"> <a href="#default-value-changes-195" class="anchor-heading" aria-labelledby="default-value-changes-195"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 8ee40bac..a0f5bc97 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -341,12 +341,14 @@</span> traces:
   # -- Enable Tempo to ingest Zipkin traces
   zipkin: false
   otlp:
<span class="gd">-    # -- Enable Tempo to ingest Open Telementry HTTP traces
</span><span class="gi">+    # -- Enable Tempo to ingest Open Telemetry HTTP traces
</span>     http: false
<span class="gd">-    # -- Enable Tempo to ingest Open Telementry GRPC traces
</span><span class="gi">+    # -- Enable Tempo to ingest Open Telemetry GRPC traces
</span>     grpc: false
   # -- Enable Tempo to ingest Open Census traces
   opencensus: false
<span class="gi">+  # -- Enable Tempo to ingest traces from Kafka. Reference: https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkareceiver
+  kafka: {}
</span> 
 config: |
   multitenancy_enabled: false
<span class="p">@@ -398,10 +400,14 @@</span> config: |
             endpoint: 0.0.0.0:4317
           {{- end }}
       {{- end }}
<span class="gd">-      {{- if .Values.traces.opencensus}}
</span><span class="gi">+      {{- if .Values.traces.opencensus }}
</span>       opencensus:
         endpoint: 0.0.0.0:55678
       {{- end }}
<span class="gi">+      {{- if .Values.traces.kafka }}
+      kafka:
+        {{- toYaml .Values.traces.kafka | nindent 6 }}
+      {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
<span class="err">
</span></code></pre></div></div> <h2 id="0120"> <a href="#0120" class="anchor-heading" aria-labelledby="0120"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.0 </h2> <p><strong>Release date:</strong> 2021-11-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix: helm documentation</li> </ul> <h3 id="default-value-changes-196"> <a href="#default-value-changes-196" class="anchor-heading" aria-labelledby="default-value-changes-196"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 15f79d9f..8ee40bac 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -28,7 +28,6 @@</span> tempo:
     initialDelaySeconds: 30
     timeoutSeconds: 1
 
<span class="gd">-
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -40,7 +39,6 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gd">-
</span> # Configuration for the ingester
 ingester:
   # -- Number of replicas for the ingester
<span class="p">@@ -421,7 +419,7 @@</span> config: |
   overrides:
     per_tenant_override_config: /conf/overrides.yaml
   server:
<span class="gd">-    http_listen_port: 3100
</span><span class="gi">+    {{- toYaml .Values.server | nindent 4}}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -449,6 +447,17 @@</span> config: |
         service: memcached-client
         timeout: 500ms
 
<span class="gi">+# Set Tempo server configuration
+# Refers to https://grafana.com/docs/tempo/latest/configuration/#server
+server:
+  # --  HTTP server listen host
+  http_listen_port: 3100
+
+  # -- Log level. Can be set to trace, debug, info (default), warn error, fatal, panic
+  log_level: info
+  # -- Log format. Can be set to logfmt (default) or json.
+  log_format: logfmt
+
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="err">
</span></code></pre></div></div> <h2 id="0113"> <a href="#0113" class="anchor-heading" aria-labelledby="0113"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.3 </h2> <p><strong>Release date:</strong> 2021-11-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix empty compactor replicas</li> <li>fix: revert double quotes</li> </ul> <h3 id="default-value-changes-197"> <a href="#default-value-changes-197" class="anchor-heading" aria-labelledby="default-value-changes-197"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 15f79d9f..ddbf1e00 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -163,6 +163,8 @@</span> distributor:
   extraVolumes: []
 
 compactor:
<span class="gi">+  # -- Number of replicas for the compactor
+  replicas: 1
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0120-1"> <a href="#0120-1" class="anchor-heading" aria-labelledby="0120-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.0 </h2> <p><strong>Release date:</strong> 2021-11-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li> </ul> <h3 id="default-value-changes-198"> <a href="#default-value-changes-198" class="anchor-heading" aria-labelledby="default-value-changes-198"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 15f79d9f..1b0cdbce 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -5,11 +5,11 @@</span> global:
   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
<span class="gd">-  clusterDomain: "cluster.local"
</span><span class="gi">+  clusterDomain: 'cluster.local'
</span>   # -- configures DNS service name
<span class="gd">-  dnsService: "kube-dns"
</span><span class="gi">+  dnsService: 'kube-dns'
</span>   # -- configures DNS service namespace
<span class="gd">-  dnsNamespace: "kube-system"
</span><span class="gi">+  dnsNamespace: 'kube-system'
</span> # -- Overrides the chart's computed fullname
 # fullnameOverride: tempo
 tempo:
<span class="p">@@ -28,7 +28,6 @@</span> tempo:
     initialDelaySeconds: 30
     timeoutSeconds: 1
 
<span class="gd">-
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -40,7 +39,6 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gd">-
</span> # Configuration for the ingester
 ingester:
   # -- Number of replicas for the ingester
<span class="p">@@ -120,7 +118,7 @@</span> distributor:
     # -- Type of service for the distributor
     type: ClusterIP
     # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
<span class="gd">-    loadBalancerIP: ""
</span><span class="gi">+    loadBalancerIP: ''
</span>     # -- If type is LoadBalancer limit incoming traffic from IPs.
     loadBalancerSourceRanges: []
   # -- The name of the PriorityClass for distributor pods
<span class="p">@@ -421,7 +419,7 @@</span> config: |
   overrides:
     per_tenant_override_config: /conf/overrides.yaml
   server:
<span class="gd">-    http_listen_port: 3100
</span><span class="gi">+    {{- toYaml .Values.server | nindent 4}}
</span>   storage:
     trace:
       backend: {{.Values.storage.trace.backend}}
<span class="p">@@ -449,6 +447,13 @@</span> config: |
         service: memcached-client
         timeout: 500ms
 
<span class="gi">+# Set Tempo server configuration
+# Refers to https://grafana.com/docs/tempo/latest/configuration/#server
+server:
+  http_listen_port: 3100
+  log_level: info
+  log_format: logfmt
+
</span> # To configure a different storage backend instead of local storage:
 # storage:
 #   trace:
<span class="p">@@ -662,9 +667,9 @@</span> gateway:
               '"$request" $body_bytes_sent "$http_referer" '
               '"$http_user_agent" "$http_x_forwarded_for"';
     # -- Allows appending custom configuration to the server block
<span class="gd">-    serverSnippet: ""
</span><span class="gi">+    serverSnippet: ''
</span>     # -- Allows appending custom configuration to the http block
<span class="gd">-    httpSnippet: ""
</span><span class="gi">+    httpSnippet: ''
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="err">
</span></code></pre></div></div> <h2 id="0112"> <a href="#0112" class="anchor-heading" aria-labelledby="0112"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.2 </h2> <p><strong>Release date:</strong> 2021-11-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.1&amp;color=success" alt="AppVersion: 1.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update tempo-distributed to 1.2.1</li> </ul> <h3 id="default-value-changes-199"> <a href="#default-value-changes-199" class="anchor-heading" aria-labelledby="default-value-changes-199"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0111"> <a href="#0111" class="anchor-heading" aria-labelledby="0111"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.1 </h2> <p><strong>Release date:</strong> 2021-11-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.0&amp;color=success" alt="AppVersion: 1.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Add relabeling configuration to ServiceMonitors</li> <li>Add search flag to tempo-distributed chart</li> <li>Add search flag to tempo-distributed chart</li> </ul> <h3 id="default-value-changes-200"> <a href="#default-value-changes-200" class="anchor-heading" aria-labelledby="default-value-changes-200"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index cc5e760e..15f79d9f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -327,6 +327,7 @@</span> queryFrontend:
   extraVolumes: []
 
 search:
<span class="gi">+  # -- Enable Tempo search
</span>   enabled: false
 
 traces:
<span class="p">@@ -535,6 +536,9 @@</span> serviceMonitor:
   interval: null
   # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
   scrapeTimeout: null
<span class="gi">+  # -- ServiceMonitor relabel configs to apply to samples before scraping
+  # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+  relabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0110"> <a href="#0110" class="anchor-heading" aria-labelledby="0110"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.0 </h2> <p><strong>Release date:</strong> 2021-11-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.0&amp;color=success" alt="AppVersion: 1.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add search flag to tempo-distributed chart</li> </ul> <h3 id="default-value-changes-201"> <a href="#default-value-changes-201" class="anchor-heading" aria-labelledby="default-value-changes-201"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 43fd73ef..cc5e760e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -326,6 +326,9 @@</span> queryFrontend:
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
 
<span class="gi">+search:
+  enabled: false
+
</span> traces:
   jaeger:
     # -- Enable Tempo to ingest Jaeger GRPC traces
<span class="p">@@ -348,6 +351,7 @@</span> traces:
 
 config: |
   multitenancy_enabled: false
<span class="gi">+  search_enabled: {{ .Values.search.enabled }}
</span>   compactor:
     compaction:
       block_retention: {{ .Values.compactor.config.compaction.block_retention }}
<span class="err">
</span></code></pre></div></div> <h2 id="0100"> <a href="#0100" class="anchor-heading" aria-labelledby="0100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.10.0 </h2> <p><strong>Release date:</strong> 2021-11-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.2.0&amp;color=success" alt="AppVersion: 1.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>1.2</li> <li>include updated version in README</li> </ul> <h3 id="default-value-changes-202"> <a href="#default-value-changes-202" class="anchor-heading" aria-labelledby="default-value-changes-202"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0917"> <a href="#0917" class="anchor-heading" aria-labelledby="0917"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.17 </h2> <p><strong>Release date:</strong> 2021-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.1.0&amp;color=success" alt="AppVersion: 1.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>add missing tempo.gatewayAuthSecret definition</li> <li>Fix docs</li> </ul> <h3 id="default-value-changes-203"> <a href="#default-value-changes-203" class="anchor-heading" aria-labelledby="default-value-changes-203"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index dffe711f..43fd73ef 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -192,7 +192,6 @@</span> compactor:
   extraVolumeMounts: []
   # -- Extra volumes for compactor deployment
   extraVolumes: []
<span class="gd">-  # -- Configuration options for the compactor
</span>   config:
     compaction:
       # -- Duration to keep blocks
<span class="err">
</span></code></pre></div></div> <h2 id="0916"> <a href="#0916" class="anchor-heading" aria-labelledby="0916"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.16 </h2> <p><strong>Release date:</strong> 2021-10-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.1.0&amp;color=success" alt="AppVersion: 1.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add flag for block retention</li> </ul> <h3 id="default-value-changes-204"> <a href="#default-value-changes-204" class="anchor-heading" aria-labelledby="default-value-changes-204"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 3485cfec..dffe711f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -192,6 +192,11 @@</span> compactor:
   extraVolumeMounts: []
   # -- Extra volumes for compactor deployment
   extraVolumes: []
<span class="gi">+  # -- Configuration options for the compactor
+  config:
+    compaction:
+      # -- Duration to keep blocks
+      block_retention: 48h
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -346,7 +351,7 @@</span> config: |
   multitenancy_enabled: false
   compactor:
     compaction:
<span class="gd">-      block_retention: 48h
</span><span class="gi">+      block_retention: {{ .Values.compactor.config.compaction.block_retention }}
</span>     ring:
       kvstore:
         store: memberlist
<span class="err">
</span></code></pre></div></div> <h2 id="0915"> <a href="#0915" class="anchor-heading" aria-labelledby="0915"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.15 </h2> <p><strong>Release date:</strong> 2021-09-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.1.0&amp;color=success" alt="AppVersion: 1.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add gateway component to tempo-distributed</li> <li>helm-docs</li> <li>fix version</li> </ul> <h3 id="default-value-changes-205"> <a href="#default-value-changes-205" class="anchor-heading" aria-labelledby="default-value-changes-205"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index bd1be43e..3485cfec 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -4,9 +4,14 @@</span> global:
     registry: null
   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
<span class="gi">+  # -- configures cluster domain ("cluster.local" by default)
+  clusterDomain: "cluster.local"
+  # -- configures DNS service name
+  dnsService: "kube-dns"
+  # -- configures DNS service namespace
+  dnsNamespace: "kube-system"
</span> # -- Overrides the chart's computed fullname
 # fullnameOverride: tempo
<span class="gd">-# -- Overrides the chart's computed fullname
</span> tempo:
   image:
     # -- The Docker registry
<span class="p">@@ -526,3 +531,209 @@</span> serviceMonitor:
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
   tlsConfig: null
<span class="gi">+
+# Configuration for the gateway
+gateway:
+  # -- Specifies whether the gateway should be enabled
+  enabled: false
+  # -- Number of replicas for the gateway
+  replicas: 1
+  image:
+    # -- The Docker registry for the gateway image
+    registry: docker.io
+    # -- The gateway image repository
+    repository: nginxinc/nginx-unprivileged
+    # -- The gateway image tag
+    tag: 1.19-alpine
+    # -- The gateway image pull policy
+    pullPolicy: IfNotPresent
+  # -- The name of the PriorityClass for gateway pods
+  priorityClassName: null
+  # -- Annotations for gateway pods
+  podAnnotations: {}
+  # -- Additional CLI args for the gateway
+  extraArgs: []
+  # -- Environment variables to add to the gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the gateway pods
+  extraEnvFrom: []
+  # -- Volumes to add to the gateway pods
+  extraVolumes: []
+  # -- Volume mounts to add to the gateway pods
+  extraVolumeMounts: []
+  # -- Resource requests and limits for the gateway
+  resources: {}
+  # -- Grace period to allow the gateway to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.gatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.gatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for gateway pods
+  nodeSelector: {}
+  # -- Tolerations for gateway pods
+  tolerations: []
+  # Gateway service configuration
+  service:
+    # -- Port of the gateway service
+    port: 80
+    # -- Type of the gateway service
+    type: ClusterIP
+    # -- ClusterIP of the gateway service
+    clusterIP: null
+    # -- Node port if service type is NodePort
+    nodePort: null
+    # -- Load balancer IPO address if service type is LoadBalancer
+    loadBalancerIP: null
+    # -- Annotations for the gateway service
+    annotations: {}
+    # -- Labels for gateway service
+    labels: {}
+  # Gateway ingress configuration
+  ingress:
+    # -- Specifies whether an ingress for the gateway should be created
+    enabled: false
+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: nginx
+    # -- Annotations for the gateway ingress
+    annotations: {}
+    # -- Hosts configuration for the gateway ingress
+    hosts:
+      - host: gateway.tempo.example.com
+        paths:
+          - path: /
+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
+    # -- TLS configuration for the gateway ingress
+    tls:
+      - secretName: tempo-gateway-tls
+        hosts:
+          - gateway.tempo.example.com
+  # Basic auth configuration
+  basicAuth:
+    # -- Enables basic authentication for the gateway
+    enabled: false
+    # -- The basic auth username for the gateway
+    username: null
+    # -- The basic auth password for the gateway
+    password: null
+    # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
+    # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
+    # high CPU load.
+    htpasswd: &gt;-
+      {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
+    # -- Existing basic auth secret to use. Must contain '.htpasswd'
+    existingSecret: null
+  # Configures the readiness probe for the gateway
+  readinessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 15
+    timeoutSeconds: 1
+  nginxConfig:
+    # -- NGINX log format
+    logFormat: |-
+      main '$remote_addr - $remote_user [$time_local]  $status '
+              '"$request" $body_bytes_sent "$http_referer" '
+              '"$http_user_agent" "$http_x_forwarded_for"';
+    # -- Allows appending custom configuration to the server block
+    serverSnippet: ""
+    # -- Allows appending custom configuration to the http block
+    httpSnippet: ""
+    # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
+    # @default -- See values.yaml
+    file: |
+      worker_processes  5;  ## Default: 1
+      error_log  /dev/stderr;
+      pid        /tmp/nginx.pid;
+      worker_rlimit_nofile 8192;
+
+      events {
+        worker_connections  4096;  ## Default: 1024
+      }
+
+      http {
+        client_body_temp_path /tmp/client_temp;
+        proxy_temp_path       /tmp/proxy_temp_path;
+        fastcgi_temp_path     /tmp/fastcgi_temp;
+        uwsgi_temp_path       /tmp/uwsgi_temp;
+        scgi_temp_path        /tmp/scgi_temp;
+
+        default_type application/octet-stream;
+        log_format   {{ .Values.gateway.nginxConfig.logFormat }}
+        access_log   /dev/stderr  main;
+        sendfile     on;
+        tcp_nopush   on;
+        resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
+
+        {{- with .Values.gateway.nginxConfig.httpSnippet }}
+        {{ . | nindent 2 }}
+        {{- end }}
+
+        server {
+          listen             8080;
+
+          {{- if .Values.gateway.basicAuth.enabled }}
+          auth_basic           "Tempo";
+          auth_basic_user_file /etc/nginx/secrets/.htpasswd;
+          {{- end }}
+
+          location = / {
+            return 200 'OK';
+            auth_basic off;
+          }
+
+          location = /jaeger/api/traces {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:14268/api/traces;
+          }
+
+          location = /zipkin/spans {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:9411/spans;
+          }
+
+          location = /otlp/v1/traces {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:55681/v1/traces;
+          }
+
+          location ^~ /api {
+            proxy_pass       http://{{ include "tempo.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /flush {
+            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /shutdown {
+            proxy_pass       http://{{ include "tempo.ingesterFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /distributor/ring {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /ingester/ring {
+            proxy_pass       http://{{ include "tempo.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /compactor/ring {
+            proxy_pass       http://{{ include "tempo.compactorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          {{- with .Values.gateway.nginxConfig.serverSnippet }}
+          {{ . | nindent 4 }}
+          {{- end }}
+        }
+      }
</span><span class="err">
</span></code></pre></div></div> <h2 id="0914"> <a href="#0914" class="anchor-heading" aria-labelledby="0914"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.14 </h2> <p><strong>Release date:</strong> 2021-09-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.1&amp;color=success" alt="AppVersion: 1.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updated to 1.1</li> <li>Made the jaeger endpoint optional, not required if relying on grafana ui only.Works for grafana &gt; 7.5</li> <li>Removed redundant service ports from queryfronted</li> <li>Fixed ci linting Made tempo-query enabled by default</li> </ul> <h3 id="default-value-changes-206"> <a href="#default-value-changes-206" class="anchor-heading" aria-labelledby="default-value-changes-206"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index e2bef787..bd1be43e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -241,7 +241,8 @@</span> querier:
 # Configuration for the query-frontend
 queryFrontend:
   query:
<span class="gd">-    enabled: true # required for grafana version &lt;7.5 for compatibility with jaeger-ui. Doesn't work on ARM arch
</span><span class="gi">+    # -- Required for grafana version &lt;7.5 for compatibility with jaeger-ui. Doesn't work on ARM arch
+    enabled: true
</span>     image:
       # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
       registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0913"> <a href="#0913" class="anchor-heading" aria-labelledby="0913"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.13 </h2> <p><strong>Release date:</strong> 2021-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.0.1&amp;color=success" alt="AppVersion: 1.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fixed ci linting Made tempo-query enabled by default</li> <li>Add option to disable tempo-query sidecar, no needed for grafana &gt; 7.5</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-207"> <a href="#default-value-changes-207" class="anchor-heading" aria-labelledby="default-value-changes-207"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index fc98bc3f..e2bef787 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -241,6 +241,7 @@</span> querier:
 # Configuration for the query-frontend
 queryFrontend:
   query:
<span class="gi">+    enabled: true # required for grafana version &lt;7.5 for compatibility with jaeger-ui. Doesn't work on ARM arch
</span>     image:
       # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
       registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0912"> <a href="#0912" class="anchor-heading" aria-labelledby="0912"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.12 </h2> <p><strong>Release date:</strong> 2021-06-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.0.1&amp;color=success" alt="AppVersion: 1.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump distributed to force rebuild of index.yaml</li> </ul> <h3 id="default-value-changes-208"> <a href="#default-value-changes-208" class="anchor-heading" aria-labelledby="default-value-changes-208"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0911"> <a href="#0911" class="anchor-heading" aria-labelledby="0911"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.11 </h2> <p><strong>Release date:</strong> 2021-06-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.0.1&amp;color=success" alt="AppVersion: 1.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>upped version</li> <li>Set gossip ring service to be headless</li> </ul> <h3 id="default-value-changes-209"> <a href="#default-value-changes-209" class="anchor-heading" aria-labelledby="default-value-changes-209"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0910"> <a href="#0910" class="anchor-heading" aria-labelledby="0910"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.10 </h2> <p><strong>Release date:</strong> 2021-06-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.0.1&amp;color=success" alt="AppVersion: 1.0.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Upgrade to 1.0.1</li> <li>Fix readme</li> </ul> <h3 id="default-value-changes-210"> <a href="#default-value-changes-210" class="anchor-heading" aria-labelledby="default-value-changes-210"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="099"> <a href="#099" class="anchor-heading" aria-labelledby="099"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.9 </h2> <p><strong>Release date:</strong> 2021-06-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.0.0&amp;color=success" alt="AppVersion: 1.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch main into tempo_auth</li> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Bump default appversion to 1.0.0</li> <li>Update README.md</li> <li>Update README.md</li> <li>Add multitenancy_enabled: false</li> <li>Fix template</li> <li>Fix docs</li> </ul> <h3 id="default-value-changes-211"> <a href="#default-value-changes-211" class="anchor-heading" aria-labelledby="default-value-changes-211"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 836cd0ad..fc98bc3f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -336,6 +336,7 @@</span> traces:
   opencensus: false
 
 config: |
<span class="gi">+  multitenancy_enabled: false
</span>   compactor:
     compaction:
       block_retention: 48h
<span class="err">
</span></code></pre></div></div> <h2 id="098"> <a href="#098" class="anchor-heading" aria-labelledby="098"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.8 </h2> <p><strong>Release date:</strong> 2021-06-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Remove auth_enabled from tempo</li> </ul> <h3 id="default-value-changes-212"> <a href="#default-value-changes-212" class="anchor-heading" aria-labelledby="default-value-changes-212"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 765229f1..836cd0ad 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -336,7 +336,6 @@</span> traces:
   opencensus: false
 
 config: |
<span class="gd">-  auth_enabled: false
</span>   compactor:
     compaction:
       block_retention: 48h
<span class="err">
</span></code></pre></div></div> <h2 id="097"> <a href="#097" class="anchor-heading" aria-labelledby="097"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.7 </h2> <p><strong>Release date:</strong> 2021-06-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat: <a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> Allow to configure storage backend through chart values</li> <li>Merge branch main into add-frontend-discovery</li> </ul> <h3 id="default-value-changes-213"> <a href="#default-value-changes-213" class="anchor-heading" aria-labelledby="default-value-changes-213"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2331ec7f..765229f1 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -408,7 +408,19 @@</span> config: |
     http_listen_port: 3100
   storage:
     trace:
<span class="gd">-      backend: local
</span><span class="gi">+      backend: {{.Values.storage.trace.backend}}
+      {{- if eq .Values.storage.trace.backend "gcs"}}
+      gcs:
+        {{- toYaml .Values.storage.trace.gcs | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.trace.backend "s3"}}
+      s3:
+        {{- toYaml .Values.storage.trace.s3 | nindent 6}}
+      {{- end}}
+      {{- if eq .Values.storage.trace.backend "azure"}}
+      azure:
+        {{- toYaml .Values.storage.trace.azure | nindent 6}}
+      {{- end}}
</span>       blocklist_poll: 5m
       local:
         path: /var/tempo/traces
<span class="p">@@ -421,6 +433,24 @@</span> config: |
         service: memcached-client
         timeout: 500ms
 
<span class="gi">+# To configure a different storage backend instead of local storage:
+# storage:
+#   trace:
+#     backend: azure
+#     azure:
+#       container-name:
+#       storage-account-name:
+#       storage-account-key:
+# -- the supported storage backends are gcs, s3 and azure
+# -- as specified in https://grafana.com/docs/tempo/latest/configuration/#storage
+storage:
+  trace:
+    backend: local
+
+# Set ingestion overrides
+overrides: |
+  overrides: {}
+
</span> # memcached is for all of the Tempo pieces to coordinate with each other.
 # you can use your self memcacherd by set enable: false and host + service
 memcached:
<span class="err">
</span></code></pre></div></div> <h2 id="096"> <a href="#096" class="anchor-heading" aria-labelledby="096"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.6 </h2> <p><strong>Release date:</strong> 2021-05-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> <li>update readme</li> </ul> <h3 id="default-value-changes-214"> <a href="#default-value-changes-214" class="anchor-heading" aria-labelledby="default-value-changes-214"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="094"> <a href="#094" class="anchor-heading" aria-labelledby="094"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.4 </h2> <p><strong>Release date:</strong> 2021-05-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>configure querier to use the headless frontend service</li> </ul> <h3 id="default-value-changes-215"> <a href="#default-value-changes-215" class="anchor-heading" aria-labelledby="default-value-changes-215"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 41997a96..2331ec7f 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -390,7 +390,7 @@</span> config: |
       {{- end }}
   querier:
     frontend_worker:
<span class="gd">-      frontend_address: {{ include "tempo.queryFrontendFullname" . }}:9095
</span><span class="gi">+      frontend_address: {{ include "tempo.queryFrontendFullname" . }}-discovery:9095
</span>   ingester:
     lifecycler:
       ring:
<span class="err">
</span></code></pre></div></div> <h2 id="095"> <a href="#095" class="anchor-heading" aria-labelledby="095"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.5 </h2> <p><strong>Release date:</strong> 2021-05-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Explicitly set ingestion overrides</li> </ul> <h3 id="default-value-changes-216"> <a href="#default-value-changes-216" class="anchor-heading" aria-labelledby="default-value-changes-216"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 41997a96..f2955811 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -421,6 +421,10 @@</span> config: |
         service: memcached-client
         timeout: 500ms
 
<span class="gi">+# Set ingestion overrides
+overrides: |
+  overrides: {}
+
</span> # memcached is for all of the Tempo pieces to coordinate with each other.
 # you can use your self memcacherd by set enable: false and host + service
 memcached:
<span class="err">
</span></code></pre></div></div> <h2 id="094-1"> <a href="#094-1" class="anchor-heading" aria-labelledby="094-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.4 </h2> <p><strong>Release date:</strong> 2021-04-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat: make possible to change service type for queryFrontend in Grafana tempo</li> </ul> <h3 id="default-value-changes-217"> <a href="#default-value-changes-217" class="anchor-heading" aria-labelledby="default-value-changes-217"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 2fc09fe2..41997a96 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -274,6 +274,8 @@</span> queryFrontend:
   service:
     # -- Annotations for queryFrontend service
     annotations: {}
<span class="gi">+    # -- Type of service for the queryFrontend
+    type: ClusterIP
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="err">
</span></code></pre></div></div> <h2 id="093"> <a href="#093" class="anchor-heading" aria-labelledby="093"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.3 </h2> <p><strong>Release date:</strong> 2021-04-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Rebuild tempo-distributed chart</li> </ul> <h3 id="default-value-changes-218"> <a href="#default-value-changes-218" class="anchor-heading" aria-labelledby="default-value-changes-218"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="092"> <a href="#092" class="anchor-heading" aria-labelledby="092"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.2 </h2> <p><strong>Release date:</strong> 2021-04-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.7.0&amp;color=success" alt="AppVersion: 0.7.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Upgraded to 0.7.0</li> </ul> <h3 id="default-value-changes-219"> <a href="#default-value-changes-219" class="anchor-heading" aria-labelledby="default-value-changes-219"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="091"> <a href="#091" class="anchor-heading" aria-labelledby="091"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.1 </h2> <p><strong>Release date:</strong> 2021-04-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix versions.</li> <li>Set explicit kvstore in default config.</li> <li>Merge branch main into tempo_labels</li> </ul> <h3 id="default-value-changes-220"> <a href="#default-value-changes-220" class="anchor-heading" aria-labelledby="default-value-changes-220"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 040a3f17..2fc09fe2 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -342,6 +342,9 @@</span> config: |
       kvstore:
         store: memberlist
   distributor:
<span class="gi">+    ring:
+      kvstore:
+        store: memberlist
</span>     receivers:
       {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
       jaeger:
<span class="p">@@ -372,11 +375,11 @@</span> config: |
         protocols:
           {{- if .Values.traces.otlp.http }}
           http:
<span class="gd">-            endpoint: 0.0.0.0:55680
</span><span class="gi">+            endpoint: 0.0.0.0:55681
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
<span class="gd">-            endpoint: 0.0.0.0:55680
</span><span class="gi">+            endpoint: 0.0.0.0:4317
</span>           {{- end }}
       {{- end }}
       {{- if .Values.traces.opencensus}}
<span class="p">@@ -390,6 +393,8 @@</span> config: |
     lifecycler:
       ring:
         replication_factor: 1
<span class="gi">+        kvstore:
+          store: memberlist
</span>       tokens_file_path: /var/tempo/tokens.json
   memberlist:
     abort_if_cluster_join_fails: false
<span class="err">
</span></code></pre></div></div> <h2 id="090"> <a href="#090" class="anchor-heading" aria-labelledby="090"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.0 </h2> <p><strong>Release date:</strong> 2021-04-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update upgrade docs.</li> </ul> <h3 id="default-value-changes-221"> <a href="#default-value-changes-221" class="anchor-heading" aria-labelledby="default-value-changes-221"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="089"> <a href="#089" class="anchor-heading" aria-labelledby="089"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.9 </h2> <p><strong>Release date:</strong> 2021-03-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>change otlp ports for distrubuted chart too</li> <li>Update docs and memcached label.</li> </ul> <h3 id="default-value-changes-222"> <a href="#default-value-changes-222" class="anchor-heading" aria-labelledby="default-value-changes-222"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 040a3f17..216d14dd 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -372,11 +372,11 @@</span> config: |
         protocols:
           {{- if .Values.traces.otlp.http }}
           http:
<span class="gd">-            endpoint: 0.0.0.0:55680
</span><span class="gi">+            endpoint: 0.0.0.0:55681
</span>           {{- end }}
           {{- if .Values.traces.otlp.grpc }}
           grpc:
<span class="gd">-            endpoint: 0.0.0.0:55680
</span><span class="gi">+            endpoint: 0.0.0.0:4317
</span>           {{- end }}
       {{- end }}
       {{- if .Values.traces.opencensus}}
<span class="err">
</span></code></pre></div></div> <h2 id="090-1"> <a href="#090-1" class="anchor-heading" aria-labelledby="090-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.0 </h2> <p><strong>Release date:</strong> 2021-03-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Shorten component labels.</li> </ul> <h3 id="default-value-changes-223"> <a href="#default-value-changes-223" class="anchor-heading" aria-labelledby="default-value-changes-223"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="088"> <a href="#088" class="anchor-heading" aria-labelledby="088"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.8 </h2> <p><strong>Release date:</strong> 2021-03-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="allow%20Tempo%20server%20custom%20configuration">tempo-distributed</a> update maintainers</li> </ul> <h3 id="default-value-changes-224"> <a href="#default-value-changes-224" class="anchor-heading" aria-labelledby="default-value-changes-224"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="087"> <a href="#087" class="anchor-heading" aria-labelledby="087"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.7 </h2> <p><strong>Release date:</strong> 2021-03-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Added podAnnotations into tempo-distributed templates - Fixes #315</li> <li>Update README.md</li> <li>Fix another typo</li> <li>Update docs</li> </ul> <h3 id="default-value-changes-225"> <a href="#default-value-changes-225" class="anchor-heading" aria-labelledby="default-value-changes-225"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 377bc7b0..040a3f17 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -417,7 +417,7 @@</span> config: |
 # memcached is for all of the Tempo pieces to coordinate with each other.
 # you can use your self memcacherd by set enable: false and host + service
 memcached:
<span class="gd">-  # -- Specified whether the memcached cachce shoudl be enabled
</span><span class="gi">+  # -- Specified whether the memcached cachce should be enabled
</span>   enabled: true
   host: memcached
   # Number of replicas for memchached
<span class="err">
</span></code></pre></div></div> <h2 id="086"> <a href="#086" class="anchor-heading" aria-labelledby="086"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.6 </h2> <p><strong>Release date:</strong> 2021-03-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump versions</li> <li>Fix typo</li> </ul> <h3 id="default-value-changes-226"> <a href="#default-value-changes-226" class="anchor-heading" aria-labelledby="default-value-changes-226"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 81ee63cc..377bc7b0 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -422,7 +422,7 @@</span> memcached:
   host: memcached
   # Number of replicas for memchached
   replicas: 1
<span class="gd">-  servicte: memcached-client
</span><span class="gi">+  service: memcached-client
</span>   # -- Memcached Docker image repository
   repository: memcached
   # -- Memcached Docker image tag
<span class="err">
</span></code></pre></div></div> <h2 id="085"> <a href="#085" class="anchor-heading" aria-labelledby="085"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.5 </h2> <p><strong>Release date:</strong> 2021-03-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add compactor to ring.</li> </ul> <h3 id="default-value-changes-227"> <a href="#default-value-changes-227" class="anchor-heading" aria-labelledby="default-value-changes-227"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="084"> <a href="#084" class="anchor-heading" aria-labelledby="084"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.4 </h2> <p><strong>Release date:</strong> 2021-03-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add config reload and Servicemonitor JQ.</li> <li>Merge branch main into service-monitors</li> </ul> <h3 id="default-value-changes-228"> <a href="#default-value-changes-228" class="anchor-heading" aria-labelledby="default-value-changes-228"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="083"> <a href="#083" class="anchor-heading" aria-labelledby="083"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.3 </h2> <p><strong>Release date:</strong> 2021-03-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version.</li> <li>Add new lines.</li> <li>Use proper labels memcached.</li> <li>Fix ServiceAccount on Tempo Distributed chart</li> <li>Sync port names with statefulset memcached.</li> <li>Update service monitor port memcached exporter.</li> </ul> <h3 id="default-value-changes-229"> <a href="#default-value-changes-229" class="anchor-heading" aria-labelledby="default-value-changes-229"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ab22ee1e..81ee63cc 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -486,4 +486,4 @@</span> serviceMonitor:
   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="gd">-  tlsConfig: null
</span>\ No newline at end of file
<span class="gi">+  tlsConfig: null
</span><span class="err">
</span></code></pre></div></div> <h2 id="082"> <a href="#082" class="anchor-heading" aria-labelledby="082"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.2 </h2> <p><strong>Release date:</strong> 2021-03-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add serviceMonitors for tempo distributed.</li> <li>Removed default jaeger tracing in QueryFE.</li> <li>Use selector labels for querier and queryFE deployment selectors.</li> </ul> <h3 id="default-value-changes-230"> <a href="#default-value-changes-230" class="anchor-heading" aria-labelledby="default-value-changes-230"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ada3b1f7..ab22ee1e 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -466,3 +466,24 @@</span> memcachedExporter:
     pullPolicy: IfNotPresent
     # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+
+# ServiceMonitor configuration
+serviceMonitor:
+  # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
+  enabled: false
+  # -- Alternative namespace for ServiceMonitor resources
+  namespace: null
+  # -- Namespace selector for ServiceMonitor resources
+  namespaceSelector: {}
+  # -- ServiceMonitor annotations
+  annotations: {}
+  # -- Additional ServiceMonitor labels
+  labels: {}
+  # -- ServiceMonitor scrape interval
+  interval: null
+  # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
+  scrapeTimeout: null
+  # -- ServiceMonitor will use http by default, but you can pick https as well
+  scheme: http
+  # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
+  tlsConfig: null
</span>\ No newline at end of file
<span class="err">
</span></code></pre></div></div> <h2 id="081"> <a href="#081" class="anchor-heading" aria-labelledby="081"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.1 </h2> <p><strong>Release date:</strong> 2021-02-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix querier replicas count.</li> <li>Port names to many characters.</li> <li>Updated README.</li> <li>Update Jager Agent host.</li> <li>Removed jaeger.enabled. Split OTLP.</li> <li>resolve conflicts by pulling in main branch.</li> </ul> <h3 id="default-value-changes-231"> <a href="#default-value-changes-231" class="anchor-heading" aria-labelledby="default-value-changes-231"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index a2848f29..ada3b1f7 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -315,8 +315,6 @@</span> queryFrontend:
 
 traces:
   jaeger:
<span class="gd">-    # -- Enable Tempo to ingest Jaeger traces. Enabling protocols from Jaeger is mandatory.
-    enabled: false
</span>     # -- Enable Tempo to ingest Jaeger GRPC traces
     grpc: false
     # -- Enable Tempo to ingest Jaeger Thrift Binary traces
<span class="p">@@ -327,8 +325,11 @@</span> traces:
     thriftHttp: false
   # -- Enable Tempo to ingest Zipkin traces
   zipkin: false
<span class="gd">-  # -- Enable Tempo to ingest Open Telementry traces
-  otlp: false
</span><span class="gi">+  otlp:
+    # -- Enable Tempo to ingest Open Telementry HTTP traces
+    http: false
+    # -- Enable Tempo to ingest Open Telementry GRPC traces
+    grpc: false
</span>   # -- Enable Tempo to ingest Open Census traces
   opencensus: false
 
<span class="p">@@ -342,7 +343,7 @@</span> config: |
         store: memberlist
   distributor:
     receivers:
<span class="gd">-      {{ if .Values.traces.jaeger.enabled }}
</span><span class="gi">+      {{- if  or (.Values.traces.jaeger.thriftCompact) (.Values.traces.jaeger.thriftBinary) (.Values.traces.jaeger.thriftHttp) (.Values.traces.jaeger.grpc) }}
</span>       jaeger:
         protocols:
           {{- if .Values.traces.jaeger.thriftCompact }}
<span class="p">@@ -366,13 +367,17 @@</span> config: |
       zipkin:
         endpoint: 0.0.0.0:9411
       {{- end }}
<span class="gd">-      {{- if .Values.traces.otlp}}
</span><span class="gi">+      {{- if or (.Values.traces.otlp.http) (.Values.traces.otlp.grpc) }}
</span>       otlp:
         protocols:
<span class="gi">+          {{- if .Values.traces.otlp.http }}
</span>           http:
             endpoint: 0.0.0.0:55680
<span class="gi">+          {{- end }}
+          {{- if .Values.traces.otlp.grpc }}
</span>           grpc:
             endpoint: 0.0.0.0:55680
<span class="gi">+          {{- end }}
</span>       {{- end }}
       {{- if .Values.traces.opencensus}}
       opencensus:
<span class="err">
</span></code></pre></div></div> <h2 id="080"> <a href="#080" class="anchor-heading" aria-labelledby="080"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.8.0 </h2> <p><strong>Release date:</strong> 2021-02-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Make protocols opt-in.</li> <li>Fix memcached exporter image.</li> <li>Remove wrong indent.</li> </ul> <h3 id="default-value-changes-232"> <a href="#default-value-changes-232" class="anchor-heading" aria-labelledby="default-value-changes-232"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index e3f5cea8..a2848f29 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -313,6 +313,24 @@</span> queryFrontend:
   # -- Extra volumes for query-frontend deployment
   extraVolumes: []
 
<span class="gi">+traces:
+  jaeger:
+    # -- Enable Tempo to ingest Jaeger traces. Enabling protocols from Jaeger is mandatory.
+    enabled: false
+    # -- Enable Tempo to ingest Jaeger GRPC traces
+    grpc: false
+    # -- Enable Tempo to ingest Jaeger Thrift Binary traces
+    thriftBinary: false
+    # -- Enable Tempo to ingest Jaeger Thrift Compact traces
+    thriftCompact: false
+    # -- Enable Tempo to ingest Jaeger Thrift HTTP traces
+    thriftHttp: false
+  # -- Enable Tempo to ingest Zipkin traces
+  zipkin: false
+  # -- Enable Tempo to ingest Open Telementry traces
+  otlp: false
+  # -- Enable Tempo to ingest Open Census traces
+  opencensus: false
</span> 
 config: |
   auth_enabled: false
<span class="p">@@ -324,16 +342,42 @@</span> config: |
         store: memberlist
   distributor:
     receivers:
<span class="gi">+      {{ if .Values.traces.jaeger.enabled }}
</span>       jaeger:
         protocols:
<span class="gd">-          grpc:
-            endpoint: 0.0.0.0:14250
-          thrift_binary:
-            endpoint: 0.0.0.0:6832
</span><span class="gi">+          {{- if .Values.traces.jaeger.thriftCompact }}
</span>           thrift_compact:
             endpoint: 0.0.0.0:6831
<span class="gi">+          {{- end }}
+          {{- if .Values.traces.jaeger.thriftBinary }}
+          thrift_binary:
+            endpoint: 0.0.0.0:6832
+          {{- end }}
+          {{- if .Values.traces.jaeger.thriftHttp }}
</span>           thrift_http:
             endpoint: 0.0.0.0:14268
<span class="gi">+          {{- end }}
+          {{- if .Values.traces.jaeger.grpc }}
+          grpc:
+            endpoint: 0.0.0.0:14250
+          {{- end }}
+      {{- end }}
+      {{- if .Values.traces.zipkin}}
+      zipkin:
+        endpoint: 0.0.0.0:9411
+      {{- end }}
+      {{- if .Values.traces.otlp}}
+      otlp:
+        protocols:
+          http:
+            endpoint: 0.0.0.0:55680
+          grpc:
+            endpoint: 0.0.0.0:55680
+      {{- end }}
+      {{- if .Values.traces.opencensus}}
+      opencensus:
+        endpoint: 0.0.0.0:55678
+      {{- end }}
</span>   querier:
     frontend_worker:
       frontend_address: {{ include "tempo.queryFrontendFullname" . }}:9095
<span class="err">
</span></code></pre></div></div> <h2 id="071"> <a href="#071" class="anchor-heading" aria-labelledby="071"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.7.1 </h2> <p><strong>Release date:</strong> 2021-02-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add options for LoadBalancer.</li> <li>Removed persistent volume compactor.</li> <li>Added new lines.</li> </ul> <h3 id="default-value-changes-233"> <a href="#default-value-changes-233" class="anchor-heading" aria-labelledby="default-value-changes-233"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index da78b257..e3f5cea8 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -112,7 +112,12 @@</span> distributor:
   service:
     # -- Annotations for distributor service
     annotations: {}
<span class="gi">+    # -- Type of service for the distributor
</span>     type: ClusterIP
<span class="gi">+    # -- If type is LoadBalancer you can assign the IP to the LoadBalancer
+    loadBalancerIP: ""
+    # -- If type is LoadBalancer limit incoming traffic from IPs.
+    loadBalancerSourceRanges: []
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Annotations for distributor pods
<span class="p">@@ -182,17 +187,6 @@</span> compactor:
   extraVolumeMounts: []
   # -- Extra volumes for compactor deployment
   extraVolumes: []
<span class="gd">-  persistence:
-    # -- Enable creating PVCs for the compactor
-    enabled: false
-    # -- Size of persistent disk
-    size: 10Gi
-    # -- Storage class to be used.
-    # If defined, storageClassName: &lt;storageClass&gt;.
-    # If set to "-", storageClassName: "", which disables dynamic provisioning.
-    # If empty or set to null, no storageClassName spec is
-    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
-    storageClass: null
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -243,17 +237,6 @@</span> querier:
   extraVolumeMounts: []
   # -- Extra volumes for querier deployment
   extraVolumes: []
<span class="gd">-  persistence:
-    # -- Enable creating PVCs for the querier cache
-    enabled: false
-    # -- Size of persistent disk
-    size: 10Gi
-    # -- Storage class to be used.
-    # If defined, storageClassName: &lt;storageClass&gt;.
-    # If set to "-", storageClassName: "", which disables dynamic provisioning.
-    # If empty or set to null, no storageClassName spec is
-    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
-    storageClass: null
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -288,6 +271,9 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
     tag: null
<span class="gi">+  service:
+    # -- Annotations for queryFrontend service
+    annotations: {}
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="p">@@ -430,4 +416,4 @@</span> memcachedExporter:
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
     # -- Memcached Exporter resource requests and limits
<span class="gd">-  resources: {}
</span>\ No newline at end of file
<span class="gi">+  resources: {}
</span><span class="err">
</span></code></pre></div></div> <h2 id="070"> <a href="#070" class="anchor-heading" aria-labelledby="070"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.7.0 </h2> <p><strong>Release date:</strong> 2021-02-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Added missing values in templates. Formatted chart. Synced chart to be more like loki-distributed.</li> <li>regen docs</li> <li>made compactor required</li> <li>cleaned up docs</li> <li>added readiness</li> </ul> <h3 id="default-value-changes-234"> <a href="#default-value-changes-234" class="anchor-heading" aria-labelledby="default-value-changes-234"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index 4938ba7c..da78b257 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -16,6 +16,13 @@</span> tempo:
     # -- Overrides the image tag whose default is the chart's appVersion
     tag: null
     pullPolicy: IfNotPresent
<span class="gi">+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 30
+    timeoutSeconds: 1
+
</span> 
 serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
<span class="p">@@ -58,24 +65,28 @@</span> ingester:
   terminationGracePeriodSeconds: 300
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
-    # podAntiAffinity:
-    #   requiredDuringSchedulingIgnoredDuringExecution:
-    #     - labelSelector:
-    #         matchLabels:
-    #           {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
-    #       topologyKey: kubernetes.io/hostname
-    #   preferredDuringSchedulingIgnoredDuringExecution:
-    #     - weight: 100
-    #       podAffinityTerm:
-    #         labelSelector:
-    #           matchLabels:
-    #             {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
-    #         topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
   tolerations: []
<span class="gi">+  # -- Extra volumes for ingester pods
+  extraVolumeMounts: []
+  # -- Extra volumes for ingester deployment
+  extraVolumes: []
</span>   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="p">@@ -118,28 +129,30 @@</span> distributor:
   terminationGracePeriodSeconds: 30
   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
-    # podAntiAffinity:
-    #   requiredDuringSchedulingIgnoredDuringExecution:
-    #     - labelSelector:
-    #         matchLabels:
-    #           {{- include "tempo.distributorSelectorLabels" . | nindent 10 }}
-    #       topologyKey: kubernetes.io/hostname
-    #   preferredDuringSchedulingIgnoredDuringExecution:
-    #     - weight: 100
-    #       podAffinityTerm:
-    #         labelSelector:
-    #           matchLabels:
-    #             {{- include "tempo.distributorSelectorLabels" . | nindent 12 }}
-    #         topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.distributorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.distributorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
   tolerations: []
<span class="gi">+  # -- Extra volumes for distributor pods
+  extraVolumeMounts: []
+  # -- Extra volumes for distributor deployment
+  extraVolumes: []
</span> 
 compactor:
<span class="gd">-  # -- Specifies whether compactor should be enabled
-  enabled: false
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
     registry: null
<span class="p">@@ -165,6 +178,10 @@</span> compactor:
   nodeSelector: {}
   # -- Tolerations for compactor pods
   tolerations: []
<span class="gi">+  # -- Extra volumes for compactor pods
+  extraVolumeMounts: []
+  # -- Extra volumes for compactor deployment
+  extraVolumes: []
</span>   persistence:
     # -- Enable creating PVCs for the compactor
     enabled: false
<span class="p">@@ -204,24 +221,28 @@</span> querier:
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
-    # podAntiAffinity:
-    #   requiredDuringSchedulingIgnoredDuringExecution:
-    #     - labelSelector:
-    #         matchLabels:
-    #           {{- include "tempo.querierSelectorLabels" . | nindent 10 }}
-    #       topologyKey: kubernetes.io/hostname
-    #   preferredDuringSchedulingIgnoredDuringExecution:
-    #     - weight: 100
-    #       podAffinityTerm:
-    #         labelSelector:
-    #           matchLabels:
-    #             {{- include "tempo.querierSelectorLabels" . | nindent 12 }}
-    #         topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.querierSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.querierSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- Extra volumes for querier pods
+  extraVolumeMounts: []
+  # -- Extra volumes for querier deployment
+  extraVolumes: []
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -246,6 +267,16 @@</span> queryFrontend:
       tag: null
     # -- Resource requests and limits for the query
     resources: {}
<span class="gi">+    # -- Additional CLI args for tempo-query pods
+    extraArgs: []
+    # -- Environment variables to add to the tempo-query pods
+    extraEnv: []
+    # -- Environment variables from secrets or configmaps to add to the tempo-query pods
+    extraEnvFrom: []
+    # -- Extra volumes for tempo-query pods
+    extraVolumeMounts: []
+    # -- Extra volumes for tempo-query deployment
+    extraVolumes: []
</span>     config: |
       backend: 127.0.0.1:3100
   # -- Number of replicas for the query-frontend
<span class="p">@@ -273,24 +304,28 @@</span> queryFrontend:
   terminationGracePeriodSeconds: 30
   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
-    # podAntiAffinity:
-    #   requiredDuringSchedulingIgnoredDuringExecution:
-    #     - labelSelector:
-    #         matchLabels:
-    #           {{- include "tempo.queryFrontendSelectorLabels" . | nindent 10 }}
-    #       topologyKey: kubernetes.io/hostname
-    #   preferredDuringSchedulingIgnoredDuringExecution:
-    #     - weight: 100
-    #       podAffinityTerm:
-    #         labelSelector:
-    #           matchLabels:
-    #             {{- include "tempo.queryFrontendSelectorLabels" . | nindent 12 }}
-    #         topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.queryFrontendSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.queryFrontendSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
   tolerations: []
<span class="gi">+  # -- Extra volumes for query-frontend pods
+  extraVolumeMounts: []
+  # -- Extra volumes for query-frontend deployment
+  extraVolumes: []
</span> 
 
 config: |
<span class="p">@@ -347,14 +382,52 @@</span> config: |
 # memcached is for all of the Tempo pieces to coordinate with each other.
 # you can use your self memcacherd by set enable: false and host + service
 memcached:
<span class="gi">+  # -- Specified whether the memcached cachce shoudl be enabled
</span>   enabled: true
   host: memcached
<span class="gi">+  # Number of replicas for memchached
</span>   replicas: 1
   servicte: memcached-client
<span class="gi">+  # -- Memcached Docker image repository
</span>   repository: memcached
<span class="gi">+  # -- Memcached Docker image tag
</span>   tag: 1.5.17-alpine
<span class="gi">+  # -- Memcached Docker image pull policy
</span>   pullPolicy: IfNotPresent
<span class="gd">-  exporter:
</span><span class="gi">+  # -- Additional CLI args for memcached
+  extraArgs: []
+  # -- Environment variables to add to memcached pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to memcached pods
+  extraEnvFrom: []
+  # -- Resource requests and limits for memcached
+  resources: {}
+  # -- Affinity for memcached pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "tempo.memcachedSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "tempo.memcachedSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+
+memcachedExporter:
+  # -- Specifies whether the Memcached Exporter should be enabled
+  enabled: false
+  image:
+    # -- Memcached Exporter Docker image repository
</span>     repository: prom/memcached-exporter
<span class="gi">+    # -- Memcached Exporter Docker image tag
</span>     tag: v0.8.0
<span class="gi">+    # -- Memcached Exporter Docker image pull policy
</span>     pullPolicy: IfNotPresent
<span class="gi">+    # -- Memcached Exporter resource requests and limits
+  resources: {}
</span>\ No newline at end of file
<span class="err">
</span></code></pre></div></div> <h2 id="060"> <a href="#060" class="anchor-heading" aria-labelledby="060"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.6.0 </h2> <p><strong>Release date:</strong> 2021-02-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.6.0&amp;color=success" alt="AppVersion: 0.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updated version and cleaned up config</li> </ul> <h3 id="default-value-changes-235"> <a href="#default-value-changes-235" class="anchor-heading" aria-labelledby="default-value-changes-235"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/tempo-distributed/values.yaml b/charts/tempo-distributed/values.yaml
index ee28f6aa..4938ba7c 100644
</span><span class="gd">--- a/charts/tempo-distributed/values.yaml
</span><span class="gi">+++ b/charts/tempo-distributed/values.yaml
</span><span class="p">@@ -320,6 +320,7 @@</span> config: |
     lifecycler:
       ring:
         replication_factor: 1
<span class="gi">+      tokens_file_path: /var/tempo/tokens.json
</span>   memberlist:
     abort_if_cluster_join_fails: false
     join_members:
<span class="p">@@ -331,16 +332,12 @@</span> config: |
   storage:
     trace:
       backend: local
<span class="gd">-      blocklist_poll: 0
</span><span class="gi">+      blocklist_poll: 5m
</span>       local:
         path: /var/tempo/traces
<span class="gd">-      pool:
-        max_workers: 10
-        queue_depth: 100
</span>       wal:
<span class="gd">-        bloom_filter_false_positive: 0.01
-        index_downsample: 11
</span>         path: /var/tempo/wal
<span class="gi">+      cache: memcached
</span>       memcached:
         consistent_hash: true
         host: {{ include "tempo.fullname" . }}-memcached
<span class="err">
</span></code></pre></div></div> <h2 id="050"> <a href="#050" class="anchor-heading" aria-labelledby="050"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.0 </h2> <p><strong>Release date:</strong> 2021-02-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.5.0&amp;color=success" alt="AppVersion: 0.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Set chart version to app version</li> </ul> <h3 id="default-value-changes-236"> <a href="#default-value-changes-236" class="anchor-heading" aria-labelledby="default-value-changes-236"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="011"> <a href="#011" class="anchor-heading" aria-labelledby="011"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.1.1 </h2> <p><strong>Release date:</strong> 2021-01-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=0.5.0&amp;color=success" alt="AppVersion: 0.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>tempo: add microservice mode</li> </ul> <h3 id="default-value-changes-237"> <a href="#default-value-changes-237" class="anchor-heading" aria-labelledby="default-value-changes-237"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">global:
</span>  image:
    # -- Overrides the Docker registry globally for all images
    registry: null
  # -- Overrides the priorityClassName for all pods
  priorityClassName: null
# -- Overrides the chart's computed fullname
# fullnameOverride: tempo
# -- Overrides the chart's computed fullname
<span class="p">tempo:
</span>  image:
    # -- The Docker registry
    registry: docker.io
    # -- Docker image repository
    repository: grafana/tempo
    # -- Overrides the image tag whose default is the chart's appVersion
    tag: null
    pullPolicy: IfNotPresent
<span class="err">
</span><span class="p">serviceAccount:
</span>  # -- Specifies whether a ServiceAccount should be created
  create: true
  # -- The name of the ServiceAccount to use.
  # If not set and create is true, a name is generated using the fullname template
  name: null
  # -- Image pull secrets for the service account
  imagePullSecrets: []
  # -- Annotations for the service account
  annotations: {}
<span class="err">

</span># Configuration for the ingester
<span class="p">ingester:
</span>  # -- Number of replicas for the ingester
  replicas: 1
  image:
    # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
    registry: null
    # -- Docker image repository for the ingester image. Overrides `tempo.image.repository`
    repository: null
    # -- Docker image tag for the ingester image. Overrides `tempo.image.tag`
    tag: null
  # -- The name of the PriorityClass for ingester pods
  priorityClassName: null
  # -- Annotations for ingester pods
  podAnnotations: {}
  # -- Additional CLI args for the ingester
  extraArgs: []
  # -- Environment variables to add to the ingester pods
  extraEnv: []
  # -- Environment variables from secrets or configmaps to add to the ingester pods
  extraEnvFrom: []
  # -- Resource requests and limits for the ingester
  resources: {}
  # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
  # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
  # all data and to successfully leave the member ring on shutdown.
  terminationGracePeriodSeconds: 300
  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: {}
    # podAntiAffinity:
    #   requiredDuringSchedulingIgnoredDuringExecution:
    #     - labelSelector:
    #         matchLabels:
    #           {{- include "tempo.ingesterSelectorLabels" . | nindent 10 }}
    #       topologyKey: kubernetes.io/hostname
    #   preferredDuringSchedulingIgnoredDuringExecution:
    #     - weight: 100
    #       podAffinityTerm:
    #         labelSelector:
    #           matchLabels:
    #             {{- include "tempo.ingesterSelectorLabels" . | nindent 12 }}
    #         topologyKey: failure-domain.beta.kubernetes.io/zone
  # -- Node selector for ingester pods
  nodeSelector: {}
  # -- Tolerations for ingester pods
  tolerations: []
  persistence:
    # -- Enable creating PVCs which is required when using boltdb-shipper
    enabled: false
    # -- Size of persistent disk
    size: 10Gi
    # -- Storage class to be used.
    # If defined, storageClassName: &lt;storageClass&gt;.
    # If set to "-", storageClassName: "", which disables dynamic provisioning.
    # If empty or set to null, no storageClassName spec is
    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
    storageClass: null
<span class="err">
</span><span class="p">distributor:
</span>  # -- Number of replicas for the distributor
  replicas: 1
  image:
    # -- The Docker registry for the ingester image. Overrides `tempo.image.registry`
    registry: null
    # -- Docker image repository for the ingester image. Overrides `tempo.image.repository`
    repository: null
    # -- Docker image tag for the ingester image. Overrides `tempo.image.tag`
    tag: null
  service:
    # -- Annotations for distributor service
    annotations: {}
    type: ClusterIP
  # -- The name of the PriorityClass for distributor pods
  priorityClassName: null
  # -- Annotations for distributor pods
  podAnnotations: {}
  # -- Additional CLI args for the distributor
  extraArgs: []
  # -- Environment variables to add to the distributor pods
  extraEnv: []
  # -- Environment variables from secrets or configmaps to add to the distributor pods
  extraEnvFrom: []
  # -- Resource requests and limits for the distributor
  resources: {}
  # -- Grace period to allow the distributor to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: {}
    # podAntiAffinity:
    #   requiredDuringSchedulingIgnoredDuringExecution:
    #     - labelSelector:
    #         matchLabels:
    #           {{- include "tempo.distributorSelectorLabels" . | nindent 10 }}
    #       topologyKey: kubernetes.io/hostname
    #   preferredDuringSchedulingIgnoredDuringExecution:
    #     - weight: 100
    #       podAffinityTerm:
    #         labelSelector:
    #           matchLabels:
    #             {{- include "tempo.distributorSelectorLabels" . | nindent 12 }}
    #         topologyKey: failure-domain.beta.kubernetes.io/zone
  # -- Node selector for distributor pods
  nodeSelector: {}
  # -- Tolerations for distributor pods
  tolerations: []
<span class="err">
</span><span class="p">compactor:
</span>  # -- Specifies whether compactor should be enabled
  enabled: false
  image:
    # -- The Docker registry for the compactor image. Overrides `tempo.image.registry`
    registry: null
    # -- Docker image repository for the compactor image. Overrides `tempo.image.repository`
    repository: null
    # -- Docker image tag for the compactor image. Overrides `tempo.image.tag`
    tag: null
  # -- The name of the PriorityClass for compactor pods
  priorityClassName: null
  # -- Annotations for compactor pods
  podAnnotations: {}
  # -- Additional CLI args for the compactor
  extraArgs: []
  # -- Environment variables to add to the compactor pods
  extraEnv: []
  # -- Environment variables from secrets or configmaps to add to the compactor pods
  extraEnvFrom: []
  # -- Resource requests and limits for the compactor
  resources: {}
  # -- Grace period to allow the compactor to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # -- Node selector for compactor pods
  nodeSelector: {}
  # -- Tolerations for compactor pods
  tolerations: []
  persistence:
    # -- Enable creating PVCs for the compactor
    enabled: false
    # -- Size of persistent disk
    size: 10Gi
    # -- Storage class to be used.
    # If defined, storageClassName: &lt;storageClass&gt;.
    # If set to "-", storageClassName: "", which disables dynamic provisioning.
    # If empty or set to null, no storageClassName spec is
    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
    storageClass: null
<span class="err">
</span># Configuration for the querier
<span class="p">querier:
</span>  # -- Number of replicas for the querier
  replicas: 1
  image:
    # -- The Docker registry for the querier image. Overrides `tempo.image.registry`
    registry: null
    # -- Docker image repository for the querier image. Overrides `tempo.image.repository`
    repository: null
    # -- Docker image tag for the querier image. Overrides `tempo.image.tag`
    tag: null
  # -- The name of the PriorityClass for querier pods
  priorityClassName: null
  # -- Annotations for querier pods
  podAnnotations: {}
  # -- Additional CLI args for the querier
  extraArgs: []
  # -- Environment variables to add to the querier pods
  extraEnv: []
  # -- Environment variables from secrets or configmaps to add to the querier pods
  extraEnvFrom: []
  # -- Resource requests and limits for the querier
  resources: {}
  # -- Grace period to allow the querier to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: {}
    # podAntiAffinity:
    #   requiredDuringSchedulingIgnoredDuringExecution:
    #     - labelSelector:
    #         matchLabels:
    #           {{- include "tempo.querierSelectorLabels" . | nindent 10 }}
    #       topologyKey: kubernetes.io/hostname
    #   preferredDuringSchedulingIgnoredDuringExecution:
    #     - weight: 100
    #       podAffinityTerm:
    #         labelSelector:
    #           matchLabels:
    #             {{- include "tempo.querierSelectorLabels" . | nindent 12 }}
    #         topologyKey: failure-domain.beta.kubernetes.io/zone
  # -- Node selector for querier pods
  nodeSelector: {}
  # -- Tolerations for querier pods
  tolerations: []
  persistence:
    # -- Enable creating PVCs for the querier cache
    enabled: false
    # -- Size of persistent disk
    size: 10Gi
    # -- Storage class to be used.
    # If defined, storageClassName: &lt;storageClass&gt;.
    # If set to "-", storageClassName: "", which disables dynamic provisioning.
    # If empty or set to null, no storageClassName spec is
    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
    storageClass: null
<span class="err">
</span># Configuration for the query-frontend
<span class="p">queryFrontend:
</span>  query:
    image:
      # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
      registry: null
      # -- Docker image repository for the query-frontend image. Overrides `tempo.image.repository`
      repository: grafana/tempo-query
      # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
      tag: null
    # -- Resource requests and limits for the query
    resources: {}
    config: |
      backend: 127.0.0.1:3100
  # -- Number of replicas for the query-frontend
  replicas: 1
  image:
    # -- The Docker registry for the query-frontend image. Overrides `tempo.image.registry`
    registry: null
    # -- Docker image repository for the query-frontend image. Overrides `tempo.image.repository`
    repository: null
    # -- Docker image tag for the query-frontend image. Overrides `tempo.image.tag`
    tag: null
  # -- The name of the PriorityClass for query-frontend pods
  priorityClassName: null
  # -- Annotations for query-frontend pods
  podAnnotations: {}
  # -- Additional CLI args for the query-frontend
  extraArgs: []
  # -- Environment variables to add to the query-frontend pods
  extraEnv: []
  # -- Environment variables from secrets or configmaps to add to the query-frontend pods
  extraEnvFrom: []
  # -- Resource requests and limits for the query-frontend
  resources: {}
  # -- Grace period to allow the query-frontend to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: {}
    # podAntiAffinity:
    #   requiredDuringSchedulingIgnoredDuringExecution:
    #     - labelSelector:
    #         matchLabels:
    #           {{- include "tempo.queryFrontendSelectorLabels" . | nindent 10 }}
    #       topologyKey: kubernetes.io/hostname
    #   preferredDuringSchedulingIgnoredDuringExecution:
    #     - weight: 100
    #       podAffinityTerm:
    #         labelSelector:
    #           matchLabels:
    #             {{- include "tempo.queryFrontendSelectorLabels" . | nindent 12 }}
    #         topologyKey: failure-domain.beta.kubernetes.io/zone
  # -- Node selector for query-frontend pods
  nodeSelector: {}
  # -- Tolerations for query-frontend pods
  tolerations: []
<span class="err">

</span><span class="p">config: |
</span>  auth_enabled: false
  compactor:
    compaction:
      block_retention: 48h
    ring:
      kvstore:
        store: memberlist
  distributor:
    receivers:
      jaeger:
        protocols:
          grpc:
            endpoint: 0.0.0.0:14250
          thrift_binary:
            endpoint: 0.0.0.0:6832
          thrift_compact:
            endpoint: 0.0.0.0:6831
          thrift_http:
            endpoint: 0.0.0.0:14268
  querier:
    frontend_worker:
      frontend_address: {{ include "tempo.queryFrontendFullname" . }}:9095
  ingester:
    lifecycler:
      ring:
        replication_factor: 1
  memberlist:
    abort_if_cluster_join_fails: false
    join_members:
      - {{ include "tempo.fullname" . }}-gossip-ring
  overrides:
    per_tenant_override_config: /conf/overrides.yaml
  server:
    http_listen_port: 3100
  storage:
    trace:
      backend: local
      blocklist_poll: 0
      local:
        path: /var/tempo/traces
      pool:
        max_workers: 10
        queue_depth: 100
      wal:
        bloom_filter_false_positive: 0.01
        index_downsample: 11
        path: /var/tempo/wal
      memcached:
        consistent_hash: true
        host: {{ include "tempo.fullname" . }}-memcached
        service: memcached-client
        timeout: 500ms
<span class="err">
</span># memcached is for all of the Tempo pieces to coordinate with each other.
# you can use your self memcacherd by set enable: false and host + service
<span class="p">memcached:
</span>  enabled: true
  host: memcached
  replicas: 1
  servicte: memcached-client
  repository: memcached
  tag: 1.5.17-alpine
  pullPolicy: IfNotPresent
  exporter:
    repository: prom/memcached-exporter
    tag: v0.8.0
    pullPolicy: IfNotPresent
<span class="err">
</span></code></pre></div></div>
<hr> <p>Autogenerated from Helm Chart and git history using <a href="https://github.com/mogensen/helm-changelog" target="_blank" rel="noopener noreferrer">helm-changelog</a></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
