<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/changelogs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/changelogs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(9)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(9) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(4) > ul > li:nth-child(9) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(9) > ul.nav-list { display: block; } </style> <script src="/changelogs/assets/js/vendor/lunr.min.js"></script> <script src="/changelogs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>loki-distributed | Changelogs</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="loki-distributed" /> <meta name="author" content="Baptiste ROUX" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="https://baprx.github.io/changelogs/grafana/helm-charts/loki-distributed" /> <meta property="og:url" content="https://baprx.github.io/changelogs/grafana/helm-charts/loki-distributed" /> <meta property="og:site_name" content="Changelogs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="loki-distributed" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Baptiste ROUX"},"headline":"loki-distributed","url":"https://baprx.github.io/changelogs/grafana/helm-charts/loki-distributed"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewbox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewbox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewbox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewbox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/changelogs/" class="site-title lh-tight"> Changelogs </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewbox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list">
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in argoproj/argo-helm category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/argoproj/argo-helm" class="nav-list-link">argoproj/argo-helm</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-cd" class="nav-list-link">argo-cd</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-events" class="nav-list-link">argo-events</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-rollouts" class="nav-list-link">argo-rollouts</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argo-workflows" class="nav-list-link">argo-workflows</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argocd-apps" class="nav-list-link">argocd-apps</a></li>
<li class="nav-list-item"><a href="/changelogs/argoproj/argo-helm/argocd-image-updater" class="nav-list-link">argocd-image-updater</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in authelia/chartrepo category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/authelia/chartrepo" class="nav-list-link">authelia/chartrepo</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/authelia/chartrepo/authelia" class="nav-list-link">authelia</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in bitnami/charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/bitnami/charts" class="nav-list-link">bitnami/charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/CHART_NAME" class="nav-list-link">CHART_NAME</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/airflow" class="nav-list-link">airflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/apache" class="nav-list-link">apache</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/apisix" class="nav-list-link">apisix</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/appsmith" class="nav-list-link">appsmith</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/argo-cd" class="nav-list-link">argo-cd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/argo-workflows" class="nav-list-link">argo-workflows</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/aspnet-core" class="nav-list-link">aspnet-core</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/cassandra" class="nav-list-link">cassandra</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/cert-manager" class="nav-list-link">cert-manager</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/clickhouse" class="nav-list-link">clickhouse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/common" class="nav-list-link">common</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/concourse" class="nav-list-link">concourse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/consul" class="nav-list-link">consul</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/contour" class="nav-list-link">contour</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/deepspeed" class="nav-list-link">deepspeed</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/discourse" class="nav-list-link">discourse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/dokuwiki" class="nav-list-link">dokuwiki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/drupal" class="nav-list-link">drupal</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/ejbca" class="nav-list-link">ejbca</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/elasticsearch" class="nav-list-link">elasticsearch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/etcd" class="nav-list-link">etcd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/external-dns" class="nav-list-link">external-dns</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/flink" class="nav-list-link">flink</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/fluent-bit" class="nav-list-link">fluent-bit</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/fluentd" class="nav-list-link">fluentd</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/flux" class="nav-list-link">flux</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/ghost" class="nav-list-link">ghost</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/gitea" class="nav-list-link">gitea</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana" class="nav-list-link">grafana</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-loki" class="nav-list-link">grafana-loki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-mimir" class="nav-list-link">grafana-mimir</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-operator" class="nav-list-link">grafana-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/grafana-tempo" class="nav-list-link">grafana-tempo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/haproxy" class="nav-list-link">haproxy</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/harbor" class="nav-list-link">harbor</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/influxdb" class="nav-list-link">influxdb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jaeger" class="nav-list-link">jaeger</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jasperreports" class="nav-list-link">jasperreports</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jenkins" class="nav-list-link">jenkins</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/joomla" class="nav-list-link">joomla</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/jupyterhub" class="nav-list-link">jupyterhub</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kafka" class="nav-list-link">kafka</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/keycloak" class="nav-list-link">keycloak</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kiam" class="nav-list-link">kiam</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kibana" class="nav-list-link">kibana</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kong" class="nav-list-link">kong</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kube-prometheus" class="nav-list-link">kube-prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kube-state-metrics" class="nav-list-link">kube-state-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kubeapps" class="nav-list-link">kubeapps</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kuberay" class="nav-list-link">kuberay</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/kubernetes-event-exporter" class="nav-list-link">kubernetes-event-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/logstash" class="nav-list-link">logstash</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/magento" class="nav-list-link">magento</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mariadb" class="nav-list-link">mariadb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mariadb-galera" class="nav-list-link">mariadb-galera</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mastodon" class="nav-list-link">mastodon</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/matomo" class="nav-list-link">matomo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mediawiki" class="nav-list-link">mediawiki</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/memcached" class="nav-list-link">memcached</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/metallb" class="nav-list-link">metallb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/metrics-server" class="nav-list-link">metrics-server</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/milvus" class="nav-list-link">milvus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/minio" class="nav-list-link">minio</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mlflow" class="nav-list-link">mlflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mongodb" class="nav-list-link">mongodb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mongodb-sharded" class="nav-list-link">mongodb-sharded</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/moodle" class="nav-list-link">moodle</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/multus-cni" class="nav-list-link">multus-cni</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/mysql" class="nav-list-link">mysql</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nats" class="nav-list-link">nats</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nginx" class="nav-list-link">nginx</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/nginx-ingress-controller" class="nav-list-link">nginx-ingress-controller</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/node-exporter" class="nav-list-link">node-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/oauth2-proxy" class="nav-list-link">oauth2-proxy</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/odoo" class="nav-list-link">odoo</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/opencart" class="nav-list-link">opencart</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/opensearch" class="nav-list-link">opensearch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/osclass" class="nav-list-link">osclass</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/parse" class="nav-list-link">parse</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/phpbb" class="nav-list-link">phpbb</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/phpmyadmin" class="nav-list-link">phpmyadmin</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/pinniped" class="nav-list-link">pinniped</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/postgresql" class="nav-list-link">postgresql</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/postgresql-ha" class="nav-list-link">postgresql-ha</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/prestashop" class="nav-list-link">prestashop</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/prometheus" class="nav-list-link">prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/pytorch" class="nav-list-link">pytorch</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/rabbitmq" class="nav-list-link">rabbitmq</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/rabbitmq-cluster-operator" class="nav-list-link">rabbitmq-cluster-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redis" class="nav-list-link">redis</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redis-cluster" class="nav-list-link">redis-cluster</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/redmine" class="nav-list-link">redmine</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/schema-registry" class="nav-list-link">schema-registry</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/sealed-secrets" class="nav-list-link">sealed-secrets</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/solr" class="nav-list-link">solr</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/sonarqube" class="nav-list-link">sonarqube</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/spark" class="nav-list-link">spark</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/spring-cloud-dataflow" class="nav-list-link">spring-cloud-dataflow</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/supabase" class="nav-list-link">supabase</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/tensorflow-resnet" class="nav-list-link">tensorflow-resnet</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/thanos" class="nav-list-link">thanos</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/tomcat" class="nav-list-link">tomcat</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/vault" class="nav-list-link">vault</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/whereabouts" class="nav-list-link">whereabouts</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/wildfly" class="nav-list-link">wildfly</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/wordpress" class="nav-list-link">wordpress</a></li>
<li class="nav-list-item"><a href="/changelogs/bitnami/charts/zookeeper" class="nav-list-link">zookeeper</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in grafana/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/grafana/helm-charts" class="nav-list-link">grafana/helm-charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/agent-operator" class="nav-list-link">agent-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-logs" class="nav-list-link">enterprise-logs</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-logs-simple" class="nav-list-link">enterprise-logs-simple</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/enterprise-metrics" class="nav-list-link">enterprise-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/fluent-bit" class="nav-list-link">fluent-bit</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/grafana" class="nav-list-link">grafana</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/lgtm-distributed" class="nav-list-link">lgtm-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-canary" class="nav-list-link">loki-canary</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-distributed" class="nav-list-link">loki-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/loki-stack" class="nav-list-link">loki-stack</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/promtail" class="nav-list-link">promtail</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/rollout-operator" class="nav-list-link">rollout-operator</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/snyk-exporter" class="nav-list-link">snyk-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/synthetic-monitoring-agent" class="nav-list-link">synthetic-monitoring-agent</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo" class="nav-list-link">tempo</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo-distributed" class="nav-list-link">tempo-distributed</a></li>
<li class="nav-list-item"><a href="/changelogs/grafana/helm-charts/tempo-vulture" class="nav-list-link">tempo-vulture</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in kubernetes/ingress-nginx category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/kubernetes/ingress-nginx" class="nav-list-link">kubernetes/ingress-nginx</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/kubernetes/ingress-nginx/ingress-nginx" class="nav-list-link">ingress-nginx</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in minio/operator category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/minio/operator" class="nav-list-link">minio/operator</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/minio/operator/operator" class="nav-list-link">operator</a></li>
<li class="nav-list-item"><a href="/changelogs/minio/operator/tenant" class="nav-list-link">tenant</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in prometheus-community/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/prometheus-community/helm-charts" class="nav-list-link">prometheus-community/helm-charts</a><ul class="nav-list">
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/alertmanager" class="nav-list-link">alertmanager</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/alertmanager-snmp-notifier" class="nav-list-link">alertmanager-snmp-notifier</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/crds" class="nav-list-link">crds</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/jiralert" class="nav-list-link">jiralert</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/kube-prometheus-stack" class="nav-list-link">kube-prometheus-stack</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/kube-state-metrics" class="nav-list-link">kube-state-metrics</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prom-label-proxy" class="nav-list-link">prom-label-proxy</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus" class="nav-list-link">prometheus</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-adapter" class="nav-list-link">prometheus-adapter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-blackbox-exporter" class="nav-list-link">prometheus-blackbox-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-cloudwatch-exporter" class="nav-list-link">prometheus-cloudwatch-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-conntrack-stats-exporter" class="nav-list-link">prometheus-conntrack-stats-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-consul-exporter" class="nav-list-link">prometheus-consul-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-couchdb-exporter" class="nav-list-link">prometheus-couchdb-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-druid-exporter" class="nav-list-link">prometheus-druid-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-elasticsearch-exporter" class="nav-list-link">prometheus-elasticsearch-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-fastly-exporter" class="nav-list-link">prometheus-fastly-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-ipmi-exporter" class="nav-list-link">prometheus-ipmi-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-json-exporter" class="nav-list-link">prometheus-json-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-kafka-exporter" class="nav-list-link">prometheus-kafka-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-memcached-exporter" class="nav-list-link">prometheus-memcached-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-modbus-exporter" class="nav-list-link">prometheus-modbus-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-mongodb-exporter" class="nav-list-link">prometheus-mongodb-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-mysql-exporter" class="nav-list-link">prometheus-mysql-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-nats-exporter" class="nav-list-link">prometheus-nats-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-nginx-exporter" class="nav-list-link">prometheus-nginx-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-node-exporter" class="nav-list-link">prometheus-node-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-opencost-exporter" class="nav-list-link">prometheus-opencost-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-operator-admission-webhook" class="nav-list-link">prometheus-operator-admission-webhook</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-operator-crds" class="nav-list-link">prometheus-operator-crds</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pgbouncer-exporter" class="nav-list-link">prometheus-pgbouncer-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pingdom-exporter" class="nav-list-link">prometheus-pingdom-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pingmesh-exporter" class="nav-list-link">prometheus-pingmesh-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-postgres-exporter" class="nav-list-link">prometheus-postgres-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-pushgateway" class="nav-list-link">prometheus-pushgateway</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-rabbitmq-exporter" class="nav-list-link">prometheus-rabbitmq-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-redis-exporter" class="nav-list-link">prometheus-redis-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-smartctl-exporter" class="nav-list-link">prometheus-smartctl-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-snmp-exporter" class="nav-list-link">prometheus-snmp-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-stackdriver-exporter" class="nav-list-link">prometheus-stackdriver-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-statsd-exporter" class="nav-list-link">prometheus-statsd-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-systemd-exporter" class="nav-list-link">prometheus-systemd-exporter</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-to-sd" class="nav-list-link">prometheus-to-sd</a></li>
<li class="nav-list-item"><a href="/changelogs/prometheus-community/helm-charts/prometheus-windows-exporter" class="nav-list-link">prometheus-windows-exporter</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in traefik/traefik-helm-chart category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/traefik/traefik-helm-chart" class="nav-list-link">traefik/traefik-helm-chart</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/traefik/traefik-helm-chart/traefik" class="nav-list-link">traefik</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in vmware-tanzu/helm-charts category" aria-pressed="false"> <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/changelogs/vmware-tanzu/helm-charts" class="nav-list-link">vmware-tanzu/helm-charts</a><ul class="nav-list"><li class="nav-list-item"><a href="/changelogs/vmware-tanzu/helm-charts/velero" class="nav-list-link">velero</a></li></ul>
</li>
</ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Changelogs" aria-label="Search Changelogs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/changelogs/grafana/helm-charts">grafana/helm-charts</a></li> <li class="breadcrumb-nav-list-item"><span>loki-distributed</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="loki-distributed"> <a href="#loki-distributed" class="anchor-heading" aria-labelledby="loki-distributed"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> loki-distributed </h1> <h2 id="next-release"> <a href="#next-release" class="anchor-heading" aria-labelledby="next-release"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Next Release </h2> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update README.md</li> </ul> <h3 id="default-value-changes"> <a href="#default-value-changes" class="anchor-heading" aria-labelledby="default-value-changes"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0782"> <a href="#0782" class="anchor-heading" aria-labelledby="0782"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.78.2 </h2> <p><strong>Release date:</strong> 2024-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch ‘grafana:main’ into main</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Allow setting labels and annotations in secret</li> </ul> <h3 id="default-value-changes-1"> <a href="#default-value-changes-1" class="anchor-heading" aria-labelledby="default-value-changes-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ab32c0e8..0f0bc162 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -78,6 +78,10 @@</span> loki:
   existingSecretForConfig: ""
   # -- Store the loki configuration as a secret.
   configAsSecret: false
<span class="gi">+  # -- Annotations for the secret with loki configuration.
+  configSecretAnnotations: {}
+  # -- Additional labels for the secret with loki configuration.
+  configSecretLabels: {}
</span>   # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
   appProtocol: ""
   # -- Common annotations for all loki services
<span class="err">
</span></code></pre></div></div> <h2 id="0781"> <a href="#0781" class="anchor-heading" aria-labelledby="0781"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.78.1 </h2> <p><strong>Release date:</strong> 2023-12-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update loki-distributed chart version</li> <li>Search for some valid value when comparing to <code class="language-plaintext highlighter-rouge">null</code>
</li> </ul> <h3 id="default-value-changes-2"> <a href="#default-value-changes-2" class="anchor-heading" aria-labelledby="default-value-changes-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0780"> <a href="#0780" class="anchor-heading" aria-labelledby="0780"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.78.0 </h2> <p><strong>Release date:</strong> 2023-12-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump version to 0.78.0</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> manage compactor as statefulset</li> <li>Merge branch ‘main’ into feature/ingester-deployment</li> <li>Revert changes to values.test.yaml</li> <li>Update docs</li> <li>Allow matchExpression on ServiceMonitors</li> <li>Update Docs</li> </ul> <h3 id="default-value-changes-3"> <a href="#default-value-changes-3" class="anchor-heading" aria-labelledby="default-value-changes-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c7d62a43..ab32c0e8 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -224,7 +224,7 @@</span> loki:
   # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
   schemaConfig:
     configs:
<span class="gd">-    - from: 2020-09-07
</span><span class="gi">+    - from: "2020-09-07"
</span>       store: boltdb-shipper
       object_store: filesystem
       schema: v11
<span class="p">@@ -283,6 +283,12 @@</span> serviceMonitor:
   namespace: null
   # -- Namespace selector for ServiceMonitor resources
   namespaceSelector: {}
<span class="gi">+  # -- Optional expressions to match on
+  matchExpressions: []
+    # - key: prometheus.io/service-monitor
+    #   operator: NotIn
+    #   values:
+    #     - "false"
</span>   # -- ServiceMonitor annotations
   annotations: {}
   # -- Additional ServiceMonitor labels
<span class="p">@@ -1319,6 +1325,10 @@</span> gateway:
 
 # Configuration for the compactor
 compactor:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
+  # -- Number of replicas for the compactor
+  replicas: 1
</span>   # -- Specifies whether compactor should be enabled
   enabled: false
   # -- hostAliases to add
<span class="p">@@ -1369,6 +1379,10 @@</span> compactor:
   extraVolumeMounts: []
   # -- Volumes to add to the compactor pods
   extraVolumes: []
<span class="gi">+  # -- readiness probe settings for ingester pods. If empty, use `loki.readinessProbe`
+  readinessProbe: {}
+  # -- liveness probe settings for ingester pods. If empty use `loki.livenessProbe`
+  livenessProbe: {}
</span>   # -- Resource requests and limits for the compactor
   resources: {}
   # -- Containers to add to the compactor pods
<span class="p">@@ -1397,6 +1411,24 @@</span> compactor:
     storageClass: null
     # -- Annotations for compactor PVCs
     annotations: {}
<span class="gi">+    # -- List of the compactor PVCs
+    # @notationType -- list
+    claims:
+      - name: data
+        size: 10Gi
+        #   -- Storage class to be used.
+        #   If defined, storageClassName: &lt;storageClass&gt;.
+        #   If set to "-", storageClassName: "", which disables dynamic provisioning.
+        #   If empty or set to null, no storageClassName spec is
+        #   set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+        storageClass: null
+      # - name: wal
+      #   size: 150Gi
+    # -- Enable StatefulSetAutoDeletePVC feature
+    enableStatefulSetAutoDeletePVC: false
+    whenDeleted: Retain
+    whenScaled: Retain
+
</span>   serviceAccount:
     create: false
     # -- The name of the ServiceAccount to use for the compactor.
<span class="err">
</span></code></pre></div></div> <h2 id="0770"> <a href="#0770" class="anchor-heading" aria-labelledby="0770"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.77.0 </h2> <p><strong>Release date:</strong> 2023-10-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart version</li> <li>Query frontend joins the memberlist</li> </ul> <h3 id="default-value-changes-4"> <a href="#default-value-changes-4" class="anchor-heading" aria-labelledby="default-value-changes-4"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0760"> <a href="#0760" class="anchor-heading" aria-labelledby="0760"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.76.0 </h2> <p><strong>Release date:</strong> 2023-10-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Ingester deployment to include same labels as StatefulSet</li> </ul> <h3 id="default-value-changes-5"> <a href="#default-value-changes-5" class="anchor-heading" aria-labelledby="default-value-changes-5"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0761"> <a href="#0761" class="anchor-heading" aria-labelledby="0761"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.76.1 </h2> <p><strong>Release date:</strong> 2023-10-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.2&amp;color=success" alt="AppVersion: 2.9.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Corrected date format</li> <li>readme</li> <li>Update Loki to 2.9.2</li> <li>typo</li> <li>update the docs</li> </ul> <h3 id="default-value-changes-6"> <a href="#default-value-changes-6" class="anchor-heading" aria-labelledby="default-value-changes-6"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c7d62a43..66ae8eea 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -224,7 +224,7 @@</span> loki:
   # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
   schemaConfig:
     configs:
<span class="gd">-    - from: 2020-09-07
</span><span class="gi">+    - from: "2020-09-07"
</span>       store: boltdb-shipper
       object_store: filesystem
       schema: v11
<span class="err">
</span></code></pre></div></div> <h2 id="0760-1"> <a href="#0760-1" class="anchor-heading" aria-labelledby="0760-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.76.0 </h2> <p><strong>Release date:</strong> 2023-10-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update Chart version</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Enable custom metrics for HPA</li> <li>add appProtocol for ruler</li> <li>add appProtocol for query scheduler and index gateway</li> <li>fix docs</li> </ul> <h3 id="default-value-changes-7"> <a href="#default-value-changes-7" class="anchor-heading" aria-labelledby="default-value-changes-7"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 6f749c29..c7d62a43 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -391,7 +391,16 @@</span> ingester:
     # -- Target CPU utilisation percentage for the ingester
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
<span class="gd">-    targetMemoryUtilizationPercentage:
</span><span class="gi">+    targetMemoryUtilizationPercentage: null
+    # -- Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)
+    customMetrics: []
+    # - type: Pods
+    #   pods:
+    #     metric:
+    #       name: loki_lines_total
+    #     target:
+    #       type: AverageValue
+    #       averageValue: 10k
</span>     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="p">@@ -497,7 +506,6 @@</span> ingester:
     enableStatefulSetAutoDeletePVC: false
     whenDeleted: Retain
     whenScaled: Retain
<span class="gd">-
</span>   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -522,7 +530,16 @@</span> distributor:
     # -- Target CPU utilisation percentage for the distributor
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
<span class="gd">-    targetMemoryUtilizationPercentage:
</span><span class="gi">+    targetMemoryUtilizationPercentage: null
+    # -- Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)
+    customMetrics: []
+    # - type: Pods
+    #   pods:
+    #     metric:
+    #       name: loki_lines_total
+    #     target:
+    #       type: AverageValue
+    #       averageValue: 10k
</span>     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="p">@@ -611,7 +628,16 @@</span> querier:
     # -- Target CPU utilisation percentage for the querier
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
<span class="gd">-    targetMemoryUtilizationPercentage:
</span><span class="gi">+    targetMemoryUtilizationPercentage: null
+    # -- Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)
+    customMetrics: []
+    # - type: External
+    #   external:
+    #     metric:
+    #       name: loki_inflight_queries
+    #     target:
+    #       type: AverageValue
+    #       averageValue: 12
</span>     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="p">@@ -726,7 +752,16 @@</span> queryFrontend:
     # -- Target CPU utilisation percentage for the query-frontend
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
<span class="gd">-    targetMemoryUtilizationPercentage:
</span><span class="gi">+    targetMemoryUtilizationPercentage: null
+    # -- Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)
+    customMetrics: []
+    # - type: Pods
+    #   pods:
+    #     metric:
+    #       name: loki_query_rate
+    #     target:
+    #       type: AverageValue
+    #       averageValue: 100
</span>     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="p">@@ -860,6 +895,9 @@</span> queryScheduler:
   nodeSelector: {}
   # -- Tolerations for query-scheduler pods
   tolerations: []
<span class="gi">+  # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+  appProtocol:
+    grpc: ""
</span> 
 # Configuration for the table-manager
 tableManager:
<span class="p">@@ -980,7 +1018,20 @@</span> gateway:
     # -- Target CPU utilisation percentage for the gateway
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
<span class="gd">-    targetMemoryUtilizationPercentage:
</span><span class="gi">+    targetMemoryUtilizationPercentage: null
+    # -- Allows one to define custom metrics using the HPA/v2 schema (for example, Resource, Object or External metrics)
+    customMetrics: []
+    # - type: Object
+    #   object:
+    #     metric:
+    #       name: requests-per-second
+    #     describedObject:
+    #       apiVersion: networking.k8s.io/v1
+    #       kind: Ingress
+    #       name: main-route
+    #     target:
+    #       type: Values
+    #       averageValue: 10k
</span>     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="p">@@ -1444,6 +1495,9 @@</span> ruler:
     storageClass: null
     # -- Annotations for ruler PVCs
     annotations: {}
<span class="gi">+  # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+  appProtocol:
+    grpc: ""
</span>   # -- Directories containing rules files
   directories: {}
     # tenant_foo:
<span class="p">@@ -1598,6 +1652,9 @@</span> indexGateway:
     enableStatefulSetAutoDeletePVC: false
     whenDeleted: Retain
     whenScaled: Retain
<span class="gi">+  # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+  appProtocol:
+    grpc: ""
</span> 
 memcached:
   readinessProbe:
<span class="err">
</span></code></pre></div></div> <h2 id="0750"> <a href="#0750" class="anchor-heading" aria-labelledby="0750"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.75.0 </h2> <p><strong>Release date:</strong> 2023-10-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Query scheduler and index gateway join the memberlist</li> </ul> <h3 id="default-value-changes-8"> <a href="#default-value-changes-8" class="anchor-heading" aria-labelledby="default-value-changes-8"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index bf83a533..6f749c29 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1517,6 +1517,8 @@</span> indexGateway:
   enabled: false
   # -- Number of replicas for the index-gateway
   replicas: 1
<span class="gi">+  # -- Whether the index gateway should join the memberlist hashring
+  joinMemberlist: true
</span>   # -- hostAliases to add
   hostAliases: []
   #  - ip: 1.2.3.4
<span class="err">
</span></code></pre></div></div> <h2 id="0746"> <a href="#0746" class="anchor-heading" aria-labelledby="0746"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.6 </h2> <p><strong>Release date:</strong> 2023-09-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Enable StatefulSetAutoDeletePVC feature for indexGateway</li> <li>Merge branch ‘main’ into main</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-9"> <a href="#default-value-changes-9" class="anchor-heading" aria-labelledby="default-value-changes-9"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 105b0767..bf83a533 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -493,6 +493,10 @@</span> ingester:
         storageClass: null
       # - name: wal
       #   size: 150Gi
<span class="gi">+    # -- Enable StatefulSetAutoDeletePVC feature
+    enableStatefulSetAutoDeletePVC: false
+    whenDeleted: Retain
+    whenScaled: Retain
</span> 
   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
<span class="p">@@ -1588,6 +1592,10 @@</span> indexGateway:
     storageClass: null
     # -- Annotations for index gateway PVCs
     annotations: {}
<span class="gi">+    # -- Enable StatefulSetAutoDeletePVC feature
+    enableStatefulSetAutoDeletePVC: false
+    whenDeleted: Retain
+    whenScaled: Retain
</span> 
 memcached:
   readinessProbe:
<span class="err">
</span></code></pre></div></div> <h2 id="0745"> <a href="#0745" class="anchor-heading" aria-labelledby="0745"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.5 </h2> <p><strong>Release date:</strong> 2023-09-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch ‘main’ into enable-enableStatefulSetAutoDeletePVC-ingester-loki</li> <li>Update README.md</li> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-10"> <a href="#default-value-changes-10" class="anchor-heading" aria-labelledby="default-value-changes-10"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0744"> <a href="#0744" class="anchor-heading" aria-labelledby="0744"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.4 </h2> <p><strong>Release date:</strong> 2023-09-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update tags of the memcached images</li> <li>Avoid errors with linters</li> <li>regenerate doc</li> </ul> <h3 id="default-value-changes-11"> <a href="#default-value-changes-11" class="anchor-heading" aria-labelledby="default-value-changes-11"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b9e46ff9..105b0767 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1605,7 +1605,7 @@</span> memcached:
     # -- Memcached Docker image repository
     repository: memcached
     # -- Memcached Docker image tag
<span class="gd">-    tag: 1.6.17-alpine
</span><span class="gi">+    tag: 1.6.21-alpine
</span>     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
   # -- Labels for memcached pods
<span class="p">@@ -1637,7 +1637,7 @@</span> memcachedExporter:
     # -- Memcached Exporter Docker image repository
     repository: prom/memcached-exporter
     # -- Memcached Exporter Docker image tag
<span class="gd">-    tag: v0.6.0
</span><span class="gi">+    tag: v0.13.0
</span>     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
   # -- Labels for memcached-exporter pods
<span class="err">
</span></code></pre></div></div> <h2 id="0743"> <a href="#0743" class="anchor-heading" aria-labelledby="0743"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.3 </h2> <p><strong>Release date:</strong> 2023-09-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into feature/loki-distributed-config-as-secret</li> </ul> <h3 id="default-value-changes-12"> <a href="#default-value-changes-12" class="anchor-heading" aria-labelledby="default-value-changes-12"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0742"> <a href="#0742" class="anchor-heading" aria-labelledby="0742"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.2 </h2> <p><strong>Release date:</strong> 2023-09-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.1&amp;color=success" alt="AppVersion: 2.9.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump loki version to 2.9.1</li> </ul> <h3 id="default-value-changes-13"> <a href="#default-value-changes-13" class="anchor-heading" aria-labelledby="default-value-changes-13"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0741"> <a href="#0741" class="anchor-heading" aria-labelledby="0741"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.1 </h2> <p><strong>Release date:</strong> 2023-09-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.0&amp;color=success" alt="AppVersion: 2.9.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Enable StatefulSetAutoDeletePVC feature for ingester</li> </ul> <h3 id="default-value-changes-14"> <a href="#default-value-changes-14" class="anchor-heading" aria-labelledby="default-value-changes-14"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b9e46ff9..e41c4310 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -493,6 +493,10 @@</span> ingester:
         storageClass: null
       # - name: wal
       #   size: 150Gi
<span class="gi">+    # -- Enable StatefulSetAutoDeletePVC feature
+    enableStatefulSetAutoDeletePVC: false
+    whenDeleted: Retain
+    whenScaled: Retain
</span> 
   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
<span class="err">
</span></code></pre></div></div> <h2 id="0742-1"> <a href="#0742-1" class="anchor-heading" aria-labelledby="0742-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.2 </h2> <p><strong>Release date:</strong> 2023-09-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.0&amp;color=success" alt="AppVersion: 2.9.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>remove pointless label</li> <li>Update README.md</li> <li>Update values.yaml</li> </ul> <h3 id="default-value-changes-15"> <a href="#default-value-changes-15" class="anchor-heading" aria-labelledby="default-value-changes-15"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e99bfc02..b9e46ff9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -480,8 +480,8 @@</span> ingester:
     enabled: false
     # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
     inMemory: false
<span class="gd">-      # -- List of the ingester PVCs
-      # @notationType -- list
</span><span class="gi">+    # -- List of the ingester PVCs
+    # @notationType -- list
</span>     claims:
       - name: data
         size: 10Gi
<span class="err">
</span></code></pre></div></div> <h2 id="0741-1"> <a href="#0741-1" class="anchor-heading" aria-labelledby="0741-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.1 </h2> <p><strong>Release date:</strong> 2023-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.0&amp;color=success" alt="AppVersion: 2.9.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-16"> <a href="#default-value-changes-16" class="anchor-heading" aria-labelledby="default-value-changes-16"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 1dd4252a..e99bfc02 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -76,6 +76,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Store the loki configuration as a secret.
+  configAsSecret: false
</span>   # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
   appProtocol: ""
   # -- Common annotations for all loki services
<span class="p">@@ -1714,6 +1716,10 @@</span> memcachedChunks:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- List of additional PVCs to be created for the memcached-chunks statefulset
+  volumeClaimTemplates: []
+  # -- List of additional volumes to be mounted for the memcached-chunks statefulset
+  extraVolumeMounts: []
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0712"> <a href="#0712" class="anchor-heading" aria-labelledby="0712"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.2 </h2> <p><strong>Release date:</strong> 2023-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.4&amp;color=success" alt="AppVersion: 2.8.4"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update values.yaml</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-17"> <a href="#default-value-changes-17" class="anchor-heading" aria-labelledby="default-value-changes-17"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a2fe8f28..1dd4252a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -105,6 +105,10 @@</span> loki:
       join_members:
         - {{ include "loki.fullname" . }}-memberlist
 
<span class="gi">+    ingester_client:
+      grpc_client_config:
+        grpc_compression: gzip
+
</span>     ingester:
       lifecycler:
         ring:
<span class="err">
</span></code></pre></div></div> <h2 id="0740"> <a href="#0740" class="anchor-heading" aria-labelledby="0740"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.74.0 </h2> <p><strong>Release date:</strong> 2023-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.0&amp;color=success" alt="AppVersion: 2.9.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into feature/loki-distributed-config-as-secret</li> </ul> <h3 id="default-value-changes-18"> <a href="#default-value-changes-18" class="anchor-heading" aria-labelledby="default-value-changes-18"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a0e2848c..63298ac9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -76,6 +76,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Store the loki configuration as a secret.
+  configAsSecret: false
</span>   # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
   appProtocol: ""
   # -- Common annotations for all loki services
<span class="err">
</span></code></pre></div></div> <h2 id="0730"> <a href="#0730" class="anchor-heading" aria-labelledby="0730"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.73.0 </h2> <p><strong>Release date:</strong> 2023-09-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.9.0&amp;color=success" alt="AppVersion: 2.9.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Loki to v2.9</li> <li>regenerate docs</li> </ul> <h3 id="default-value-changes-19"> <a href="#default-value-changes-19" class="anchor-heading" aria-labelledby="default-value-changes-19"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a10724d4..a0e2848c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -20,6 +20,12 @@</span> fullnameOverride: null
 # -- Image pull secrets for Docker images
 imagePullSecrets: []
 
<span class="gi">+# -- hostAliases to add
+hostAliases: []
+#  - ip: 1.2.3.4
+#    hostnames:
+#      - domain.tld
+
</span> loki:
   # -- If set, these annotations are added to all of the Kubernetes controllers
   # (Deployments, StatefulSets, etc) that this chart launches. Use this to
<span class="p">@@ -364,6 +370,11 @@</span> ingester:
   kind: StatefulSet
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -419,6 +430,8 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- Lifecycle for the ingester container
+  lifecycle: {}
</span>   # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
<span class="p">@@ -446,6 +459,8 @@</span> ingester:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for ingester pods
+  maxSurge: 0
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -482,6 +497,11 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -551,6 +571,8 @@</span> distributor:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for distributor pods
+  maxSurge: 0
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -564,6 +586,11 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`
     enabled: false
<span class="p">@@ -644,6 +671,8 @@</span> querier:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for querier pods
+  maxSurge: 0
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -672,6 +701,11 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the query-frontend
     enabled: false
<span class="p">@@ -758,6 +792,11 @@</span> queryScheduler:
   # It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers;
   # it's also recommended that this value evenly divides the latter
   replicas: 2
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the query-scheduler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -816,6 +855,11 @@</span> queryScheduler:
 tableManager:
   # -- Specifies whether the table-manager should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -907,6 +951,11 @@</span> ingress:
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for the gateway
   replicas: 1
   # -- Enable logging of 2xx and 3xx HTTP requests
<span class="p">@@ -1211,6 +1260,11 @@</span> gateway:
 compactor:
   # -- Specifies whether compactor should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1266,6 +1320,9 @@</span> compactor:
   nodeSelector: {}
   # -- Tolerations for compactor pods
   tolerations: []
<span class="gi">+  # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+  appProtocol:
+    grpc: ""
</span>   persistence:
     # -- Enable creating PVCs for the compactor
     enabled: false
<span class="p">@@ -1300,6 +1357,11 @@</span> ruler:
   kind: Deployment
   # -- Number of replicas for the ruler
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the ruler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1445,6 +1507,11 @@</span> indexGateway:
   enabled: false
   # -- Number of replicas for the index-gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1582,6 +1649,11 @@</span> memcachedExporter:
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-chunks
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
<span class="p">@@ -1638,10 +1710,19 @@</span> memcachedChunks:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- List of additional PVCs to be created for the memcached-chunks statefulset
+  volumeClaimTemplates: []
+  # -- List of additional volumes to be mounted for the memcached-chunks statefulset
+  extraVolumeMounts: []
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-frontend
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
<span class="p">@@ -1704,6 +1785,11 @@</span> memcachedIndexQueries:
   enabled: false
   # -- Number of replicas for memcached-index-queries
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
   # -- Labels for memcached-index-queries pods
<span class="p">@@ -1764,6 +1850,11 @@</span> memcachedIndexWrites:
   enabled: false
   # -- Number of replicas for memcached-index-writes
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
   # -- Labels for memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0710"> <a href="#0710" class="anchor-heading" aria-labelledby="0710"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.0 </h2> <p><strong>Release date:</strong> 2023-09-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>use config-secret if “configAsSecret” is true</li> </ul> <h3 id="default-value-changes-20"> <a href="#default-value-changes-20" class="anchor-heading" aria-labelledby="default-value-changes-20"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0705"> <a href="#0705" class="anchor-heading" aria-labelledby="0705"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.5 </h2> <p><strong>Release date:</strong> 2023-09-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add secret for loki config</li> </ul> <h3 id="default-value-changes-21"> <a href="#default-value-changes-21" class="anchor-heading" aria-labelledby="default-value-changes-21"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a10724d4..fb7d2875 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -70,6 +70,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Store the loki configuration as a secret.
+  configAsSecret: false
</span>   # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
   appProtocol: ""
   # -- Common annotations for all loki services
<span class="err">
</span></code></pre></div></div> <h2 id="0720"> <a href="#0720" class="anchor-heading" aria-labelledby="0720"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.72.0 </h2> <p><strong>Release date:</strong> 2023-08-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.4&amp;color=success" alt="AppVersion: 2.8.4"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add support for additional pvcs to the memcached statefulset</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump loki version to 2.8.4</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update README.md</li> </ul> <h3 id="default-value-changes-22"> <a href="#default-value-changes-22" class="anchor-heading" aria-labelledby="default-value-changes-22"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a2fe8f28..a0e2848c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1710,6 +1710,10 @@</span> memcachedChunks:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- List of additional PVCs to be created for the memcached-chunks statefulset
+  volumeClaimTemplates: []
+  # -- List of additional volumes to be mounted for the memcached-chunks statefulset
+  extraVolumeMounts: []
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0712-1"> <a href="#0712-1" class="anchor-heading" aria-labelledby="0712-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.2 </h2> <p><strong>Release date:</strong> 2023-08-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.4&amp;color=success" alt="AppVersion: 2.8.4"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> enable grpc compression by default</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-23"> <a href="#default-value-changes-23" class="anchor-heading" aria-labelledby="default-value-changes-23"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a2fe8f28..449ab58c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -104,6 +104,10 @@</span> loki:
     memberlist:
       join_members:
         - {{ include "loki.fullname" . }}-memberlist
<span class="gi">+    
+    ingester_client:
+      grpc_client_config:
+        grpc_compression: gzip
</span> 
     ingester:
       lifecycler:
<span class="err">
</span></code></pre></div></div> <h2 id="0711"> <a href="#0711" class="anchor-heading" aria-labelledby="0711"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.1 </h2> <p><strong>Release date:</strong> 2023-07-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed-compactor-grpc</li> <li>Merge branch ‘main’ into hostAliases_for_loki-distributed</li> </ul> <h3 id="default-value-changes-24"> <a href="#default-value-changes-24" class="anchor-heading" aria-labelledby="default-value-changes-24"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 1f564b80..a2fe8f28 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -430,6 +430,8 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- Lifecycle for the ingester container
+  lifecycle: {}
</span>   # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
<span class="p">@@ -1318,6 +1320,9 @@</span> compactor:
   nodeSelector: {}
   # -- Tolerations for compactor pods
   tolerations: []
<span class="gi">+  # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+  appProtocol:
+    grpc: ""
</span>   persistence:
     # -- Enable creating PVCs for the compactor
     enabled: false
<span class="err">
</span></code></pre></div></div> <h2 id="0710-1"> <a href="#0710-1" class="anchor-heading" aria-labelledby="0710-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.0 </h2> <p><strong>Release date:</strong> 2023-07-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into hostAliases_for_loki-distributed</li> </ul> <h3 id="default-value-changes-25"> <a href="#default-value-changes-25" class="anchor-heading" aria-labelledby="default-value-changes-25"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 4a95316d..1f564b80 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -20,6 +20,12 @@</span> fullnameOverride: null
 # -- Image pull secrets for Docker images
 imagePullSecrets: []
 
<span class="gi">+# -- hostAliases to add
+hostAliases: []
+#  - ip: 1.2.3.4
+#    hostnames:
+#      - domain.tld
+
</span> loki:
   # -- If set, these annotations are added to all of the Kubernetes controllers
   # (Deployments, StatefulSets, etc) that this chart launches. Use this to
<span class="p">@@ -364,6 +370,11 @@</span> ingester:
   kind: StatefulSet
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -484,6 +495,11 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -568,6 +584,11 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`
     enabled: false
<span class="p">@@ -678,6 +699,11 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the query-frontend
     enabled: false
<span class="p">@@ -764,6 +790,11 @@</span> queryScheduler:
   # It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers;
   # it's also recommended that this value evenly divides the latter
   replicas: 2
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the query-scheduler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -822,6 +853,11 @@</span> queryScheduler:
 tableManager:
   # -- Specifies whether the table-manager should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -913,6 +949,11 @@</span> ingress:
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for the gateway
   replicas: 1
   # -- Enable logging of 2xx and 3xx HTTP requests
<span class="p">@@ -1217,6 +1258,11 @@</span> gateway:
 compactor:
   # -- Specifies whether compactor should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1306,6 +1352,11 @@</span> ruler:
   kind: Deployment
   # -- Number of replicas for the ruler
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the ruler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1451,6 +1502,11 @@</span> indexGateway:
   enabled: false
   # -- Number of replicas for the index-gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1588,6 +1644,11 @@</span> memcachedExporter:
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-chunks
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
<span class="p">@@ -1648,6 +1709,11 @@</span> memcachedChunks:
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-frontend
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
<span class="p">@@ -1710,6 +1776,11 @@</span> memcachedIndexQueries:
   enabled: false
   # -- Number of replicas for memcached-index-queries
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
   # -- Labels for memcached-index-queries pods
<span class="p">@@ -1770,6 +1841,11 @@</span> memcachedIndexWrites:
   enabled: false
   # -- Number of replicas for memcached-index-writes
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
   # -- Labels for memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0707"> <a href="#0707" class="anchor-heading" aria-labelledby="0707"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.7 </h2> <p><strong>Release date:</strong> 2023-07-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into lifecycle-hooks-for-ingester</li> <li>regenerate docs</li> </ul> <h3 id="default-value-changes-26"> <a href="#default-value-changes-26" class="anchor-heading" aria-labelledby="default-value-changes-26"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a10724d4..94e20e37 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -419,6 +419,8 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- Lifecycle for the ingester container
+  lifecycle: {}
</span>   # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
<span class="p">@@ -446,6 +448,8 @@</span> ingester:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for ingester pods
+  maxSurge: 0
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -551,6 +555,8 @@</span> distributor:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for distributor pods
+  maxSurge: 0
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -644,6 +650,8 @@</span> querier:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for querier pods
+  maxSurge: 0
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="err">
</span></code></pre></div></div> <h2 id="0710-2"> <a href="#0710-2" class="anchor-heading" aria-labelledby="0710-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.0 </h2> <p><strong>Release date:</strong> 2023-07-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>apply suggestions</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-27"> <a href="#default-value-changes-27" class="anchor-heading" aria-labelledby="default-value-changes-27"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a10724d4..283acabc 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -20,6 +20,12 @@</span> fullnameOverride: null
 # -- Image pull secrets for Docker images
 imagePullSecrets: []
 
<span class="gi">+# -- hostAliases to add
+hostAliases: []
+#  - ip: 1.2.3.4
+#    hostnames:
+#      - domain.tld
+
</span> loki:
   # -- If set, these annotations are added to all of the Kubernetes controllers
   # (Deployments, StatefulSets, etc) that this chart launches. Use this to
<span class="p">@@ -364,6 +370,11 @@</span> ingester:
   kind: StatefulSet
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the ingester
     enabled: false
<span class="p">@@ -482,6 +493,11 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the distributor
     enabled: false
<span class="p">@@ -564,6 +580,11 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`
     enabled: false
<span class="p">@@ -672,6 +693,11 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   autoscaling:
     # -- Enable autoscaling for the query-frontend
     enabled: false
<span class="p">@@ -758,6 +784,11 @@</span> queryScheduler:
   # It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers;
   # it's also recommended that this value evenly divides the latter
   replicas: 2
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the query-scheduler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -816,6 +847,11 @@</span> queryScheduler:
 tableManager:
   # -- Specifies whether the table-manager should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -907,6 +943,11 @@</span> ingress:
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: true
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for the gateway
   replicas: 1
   # -- Enable logging of 2xx and 3xx HTTP requests
<span class="p">@@ -1211,6 +1252,11 @@</span> gateway:
 compactor:
   # -- Specifies whether compactor should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the compactor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1300,6 +1346,11 @@</span> ruler:
   kind: Deployment
   # -- Number of replicas for the ruler
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the ruler image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1445,6 +1496,11 @@</span> indexGateway:
   enabled: false
   # -- Number of replicas for the index-gateway
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   image:
     # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -1582,6 +1638,11 @@</span> memcachedExporter:
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-chunks
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
<span class="p">@@ -1642,6 +1703,11 @@</span> memcachedChunks:
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
   enabled: false
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- Number of replicas for memcached-frontend
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
<span class="p">@@ -1704,6 +1770,11 @@</span> memcachedIndexQueries:
   enabled: false
   # -- Number of replicas for memcached-index-queries
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
   # -- Labels for memcached-index-queries pods
<span class="p">@@ -1764,6 +1835,11 @@</span> memcachedIndexWrites:
   enabled: false
   # -- Number of replicas for memcached-index-writes
   replicas: 1
<span class="gi">+  # -- hostAliases to add
+  hostAliases: []
+  #  - ip: 1.2.3.4
+  #    hostnames:
+  #      - domain.tld
</span>   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
   # -- Labels for memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0706"> <a href="#0706" class="anchor-heading" aria-labelledby="0706"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.6 </h2> <p><strong>Release date:</strong> 2023-07-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into update_strategies</li> <li>set hostAliases for each component instead of global</li> </ul> <h3 id="default-value-changes-28"> <a href="#default-value-changes-28" class="anchor-heading" aria-labelledby="default-value-changes-28"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a10724d4..4a95316d 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -446,6 +446,8 @@</span> ingester:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for ingester pods
+  maxSurge: 0
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -551,6 +553,8 @@</span> distributor:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for distributor pods
+  maxSurge: 0
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -644,6 +648,8 @@</span> querier:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gi">+  # -- Max Surge for querier pods
+  maxSurge: 0
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="err">
</span></code></pre></div></div> <h2 id="0710-3"> <a href="#0710-3" class="anchor-heading" aria-labelledby="0710-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.71.0 </h2> <p><strong>Release date:</strong> 2023-07-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>add hostAliases</li> <li>Merge branch ‘main’ into main</li> <li>Update README.md</li> <li>Merge branch ‘main’ into lifecycle-hooks-for-ingester</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-29"> <a href="#default-value-changes-29" class="anchor-heading" aria-labelledby="default-value-changes-29"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 400c5e2f..61eff000 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -20,6 +20,12 @@</span> fullnameOverride: null
 # -- Image pull secrets for Docker images
 imagePullSecrets: []
 
<span class="gi">+# -- hostAliases to add
+hostAliases: []
+#  - ip: 1.2.3.4
+#    hostnames:
+#      - domain.tld
+
</span> loki:
   # -- If set, these annotations are added to all of the Kubernetes controllers
   # (Deployments, StatefulSets, etc) that this chart launches. Use this to
<span class="p">@@ -375,6 +381,13 @@</span> ingester:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -486,6 +499,13 @@</span> distributor:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -561,6 +581,13 @@</span> querier:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -607,7 +634,20 @@</span> querier:
           {{- include "loki.querierSelectorLabels" . | nindent 6 }}
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="p">@@ -649,6 +689,13 @@</span> queryFrontend:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -881,6 +928,13 @@</span> gateway:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   # -- See `kubectl explain deployment.spec.strategy` for more,
   # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
   deploymentStrategy:
<span class="p">@@ -1178,8 +1232,22 @@</span> compactor:
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gd">-  # -- Specify the compactor affinity
-  affinity: {}
</span><span class="gi">+  # -- Affinity for compactor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.compactorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.compactorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="err">
</span></code></pre></div></div> <h2 id="0705-1"> <a href="#0705-1" class="anchor-heading" aria-labelledby="0705-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.5 </h2> <p><strong>Release date:</strong> 2023-07-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-30"> <a href="#default-value-changes-30" class="anchor-heading" aria-labelledby="default-value-changes-30"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 400c5e2f..9d83dcae 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -412,6 +412,8 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- Lifecycle for the ingester container
+  lifecycle: {}
</span>   # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
<span class="err">
</span></code></pre></div></div> <h2 id="0704"> <a href="#0704" class="anchor-heading" aria-labelledby="0704"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.4 </h2> <p><strong>Release date:</strong> 2023-07-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> fixed an issue with the compactor affinity</li> </ul> <h3 id="default-value-changes-31"> <a href="#default-value-changes-31" class="anchor-heading" aria-labelledby="default-value-changes-31"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0703"> <a href="#0703" class="anchor-heading" aria-labelledby="0703"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.3 </h2> <p><strong>Release date:</strong> 2023-07-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.3&amp;color=success" alt="AppVersion: 2.8.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump loki version to 2.8.3</li> <li>Update README.md</li> <li>Templatizing maxSurge for deployments</li> </ul> <h3 id="default-value-changes-32"> <a href="#default-value-changes-32" class="anchor-heading" aria-labelledby="default-value-changes-32"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0702"> <a href="#0702" class="anchor-heading" aria-labelledby="0702"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.2 </h2> <p><strong>Release date:</strong> 2023-07-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge upstream to fix conflicts</li> </ul> <h3 id="default-value-changes-33"> <a href="#default-value-changes-33" class="anchor-heading" aria-labelledby="default-value-changes-33"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 9d9fda45..a10724d4 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -249,6 +249,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="p">@@ -626,7 +628,20 @@</span> querier:
           {{- include "loki.querierSelectorLabels" . | nindent 6 }}
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="p">@@ -1211,8 +1226,22 @@</span> compactor:
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gd">-  # -- Specify the compactor affinity
-  affinity: {}
</span><span class="gi">+  # -- Affinity for compactor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.compactorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.compactorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="err">
</span></code></pre></div></div> <h2 id="06917"> <a href="#06917" class="anchor-heading" aria-labelledby="06917"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.17 </h2> <p><strong>Release date:</strong> 2023-07-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>typo</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> support custom lifecycle hooks on ingester</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-34"> <a href="#default-value-changes-34" class="anchor-heading" aria-labelledby="default-value-changes-34"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ad317c5a..9d9fda45 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -373,6 +373,13 @@</span> ingester:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -484,6 +491,13 @@</span> distributor:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -559,6 +573,13 @@</span> querier:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -647,6 +668,13 @@</span> queryFrontend:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -879,6 +907,13 @@</span> gateway:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   # -- See `kubectl explain deployment.spec.strategy` for more,
   # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
   deploymentStrategy:
<span class="err">
</span></code></pre></div></div> <h2 id="0701"> <a href="#0701" class="anchor-heading" aria-labelledby="0701"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.1 </h2> <p><strong>Release date:</strong> 2023-07-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into default-affinity-values</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add grpc port to compactor service</li> <li>feat(loki-distributed): annotations for ingester-headless service</li> <li>Fix readme</li> <li>Disable all behaviours by default</li> </ul> <h3 id="default-value-changes-35"> <a href="#default-value-changes-35" class="anchor-heading" aria-labelledby="default-value-changes-35"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ad317c5a..b4156eb5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -249,6 +249,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="p">@@ -605,7 +607,20 @@</span> querier:
           {{- include "loki.querierSelectorLabels" . | nindent 6 }}
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="p">@@ -1176,8 +1191,22 @@</span> compactor:
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gd">-  # -- Specify the compactor affinity
-  affinity: {}
</span><span class="gi">+  # -- Affinity for compactor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.compactorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.compactorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="err">
</span></code></pre></div></div> <h2 id="06917-1"> <a href="#06917-1" class="anchor-heading" aria-labelledby="06917-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.17 </h2> <p><strong>Release date:</strong> 2023-06-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update chart release</li> <li>Update documentation and chart release</li> <li>Extend behaviours to all autoscaler</li> </ul> <h3 id="default-value-changes-36"> <a href="#default-value-changes-36" class="anchor-heading" aria-labelledby="default-value-changes-36"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index d39b97fd..a3777fba 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -376,20 +376,10 @@</span> ingester:
     behavior:
       # -- Enable autoscaling behaviours
       enabled: false
<span class="gd">-      # -- deine scale down policies
-      scaleDown:
-        stabilizationWindowSeconds: 1800
-        policies:
-          - type: Pods
-            value: 1
-            periodSeconds: 300
-      # -- deine scale up policies
-      scaleUp:
-        stabilizationWindowSeconds: 1800
-        policies:
-          - type: Pods
-            value: 1
-            periodSeconds: 300
</span><span class="gi">+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -501,6 +491,13 @@</span> distributor:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the distributor
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: true
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -576,6 +573,13 @@</span> querier:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the querier
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: true
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -664,6 +668,13 @@</span> queryFrontend:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the query-frontend
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: true
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -896,6 +907,13 @@</span> gateway:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: true
+      # -- define scale down policies, must conform to HPAScalingRules
+      scaleDown: {}
+      # -- define scale up policies, must conform to HPAScalingRules
+      scaleUp: {}
</span>   # -- See `kubectl explain deployment.spec.strategy` for more,
   # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
   deploymentStrategy:
<span class="err">
</span></code></pre></div></div> <h2 id="06916"> <a href="#06916" class="anchor-heading" aria-labelledby="06916"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.16 </h2> <p><strong>Release date:</strong> 2023-06-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Properly write behaviour configuration</li> </ul> <h3 id="default-value-changes-37"> <a href="#default-value-changes-37" class="anchor-heading" aria-labelledby="default-value-changes-37"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ad317c5a..d39b97fd 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -373,6 +373,23 @@</span> ingester:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the ingester
     targetMemoryUtilizationPercentage:
<span class="gi">+    behavior:
+      # -- Enable autoscaling behaviours
+      enabled: false
+      # -- deine scale down policies
+      scaleDown:
+        stabilizationWindowSeconds: 1800
+        policies:
+          - type: Pods
+            value: 1
+            periodSeconds: 300
+      # -- deine scale up policies
+      scaleUp:
+        stabilizationWindowSeconds: 1800
+        policies:
+          - type: Pods
+            value: 1
+            periodSeconds: 300
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="06917-2"> <a href="#06917-2" class="anchor-heading" aria-labelledby="06917-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.17 </h2> <p><strong>Release date:</strong> 2023-06-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use consistent default value for affinity for querier and compactor</li> </ul> <h3 id="default-value-changes-38"> <a href="#default-value-changes-38" class="anchor-heading" aria-labelledby="default-value-changes-38"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ad317c5a..ae0fa117 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -605,7 +605,20 @@</span> querier:
           {{- include "loki.querierSelectorLabels" . | nindent 6 }}
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="p">@@ -1176,8 +1189,22 @@</span> compactor:
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gd">-  # -- Specify the compactor affinity
-  affinity: {}
</span><span class="gi">+  # -- Affinity for compactor pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.compactorSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.compactorSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="err">
</span></code></pre></div></div> <h2 id="06916-1"> <a href="#06916-1" class="anchor-heading" aria-labelledby="06916-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.16 </h2> <p><strong>Release date:</strong> 2023-06-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add behaviour block to ingester autoscaler</li> </ul> <h3 id="default-value-changes-39"> <a href="#default-value-changes-39" class="anchor-heading" aria-labelledby="default-value-changes-39"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0700"> <a href="#0700" class="anchor-heading" aria-labelledby="0700"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.0 </h2> <p><strong>Release date:</strong> 2023-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into service-account-labels</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-40"> <a href="#default-value-changes-40" class="anchor-heading" aria-labelledby="default-value-changes-40"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ad317c5a..400c5e2f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -249,6 +249,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="err">
</span></code></pre></div></div> <h2 id="06916-2"> <a href="#06916-2" class="anchor-heading" aria-labelledby="06916-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.16 </h2> <p><strong>Release date:</strong> 2023-05-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge branch ‘main’ into update-loki</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-41"> <a href="#default-value-changes-41" class="anchor-heading" aria-labelledby="default-value-changes-41"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index d3a449fb..ad317c5a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -450,16 +450,20 @@</span> ingester:
     enabled: false
     # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
     inMemory: false
<span class="gd">-    # -- Size of persistent or memory disk
-    size: 10Gi
-    # -- Storage class to be used.
-    # If defined, storageClassName: &lt;storageClass&gt;.
-    # If set to "-", storageClassName: "", which disables dynamic provisioning.
-    # If empty or set to null, no storageClassName spec is
-    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
-    storageClass: null
-    # -- Annotations for ingester PVCs
-    annotations: {}
</span><span class="gi">+      # -- List of the ingester PVCs
+      # @notationType -- list
+    claims:
+      - name: data
+        size: 10Gi
+        #   -- Storage class to be used.
+        #   If defined, storageClassName: &lt;storageClass&gt;.
+        #   If set to "-", storageClassName: "", which disables dynamic provisioning.
+        #   If empty or set to null, no storageClassName spec is
+        #   set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+        storageClass: null
+      # - name: wal
+      #   size: 150Gi
+
</span>   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="err">
</span></code></pre></div></div> <h2 id="06915"> <a href="#06915" class="anchor-heading" aria-labelledby="06915"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.15 </h2> <p><strong>Release date:</strong> 2023-05-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.2&amp;color=success" alt="AppVersion: 2.8.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-42"> <a href="#default-value-changes-42" class="anchor-heading" aria-labelledby="default-value-changes-42"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0700-1"> <a href="#0700-1" class="anchor-heading" aria-labelledby="0700-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.0 </h2> <p><strong>Release date:</strong> 2023-05-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into service-account-labels</li> <li>use helm-docs version 1.8.1</li> <li>Merge branch ‘main’ into loki-distributed/ingester-dynamic-pv-claims</li> <li>ingester.persistence.claims is a list</li> <li>Update charts/loki-distributed/values.yaml</li> <li>Update charts/loki-distributed/values.yaml</li> <li>Update charts/loki-distributed/values.yaml</li> <li>fix helm-docs</li> <li>ingester.persistence.claims is a list</li> <li>ingester.persistence.claims is a list</li> <li>not touching other charts</li> </ul> <h3 id="default-value-changes-43"> <a href="#default-value-changes-43" class="anchor-heading" aria-labelledby="default-value-changes-43"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 9aa26b97..51eb7b75 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -171,7 +171,7 @@</span> loki:
         cache:
           {{- if .Values.memcachedFrontend.enabled }}
           memcached_client:
<span class="gd">-            host: {{ include "loki.memcachedFrontendFullname" . }}
</span><span class="gi">+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
</span>             consistent_hash: true
           {{- else }}
           embedded_cache:
<span class="p">@@ -249,6 +249,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="err">
</span></code></pre></div></div> <h2 id="06915-1"> <a href="#06915-1" class="anchor-heading" aria-labelledby="06915-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.15 </h2> <p><strong>Release date:</strong> 2023-04-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.0&amp;color=success" alt="AppVersion: 2.8.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>run helm-docs</li> </ul> <h3 id="default-value-changes-44"> <a href="#default-value-changes-44" class="anchor-heading" aria-labelledby="default-value-changes-44"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="06913"> <a href="#06913" class="anchor-heading" aria-labelledby="06913"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.13 </h2> <p><strong>Release date:</strong> 2023-04-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.0&amp;color=success" alt="AppVersion: 2.8.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>resolve conflict</li> </ul> <h3 id="default-value-changes-45"> <a href="#default-value-changes-45" class="anchor-heading" aria-labelledby="default-value-changes-45"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 9aa26b97..01cb6990 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -450,16 +450,19 @@</span> ingester:
     enabled: false
     # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
     inMemory: false
<span class="gd">-    # -- Size of persistent or memory disk
-    size: 10Gi
-    # -- Storage class to be used.
-    # If defined, storageClassName: &lt;storageClass&gt;.
-    # If set to "-", storageClassName: "", which disables dynamic provisioning.
-    # If empty or set to null, no storageClassName spec is
-    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
-    storageClass: null
-    # -- Annotations for ingester PVCs
-    annotations: {}
</span><span class="gi">+
+    claims:
+      # - name: data
+      #   size: 10Gi
+      #   -- Storage class to be used.
+      #   If defined, storageClassName: &lt;storageClass&gt;.
+      #   If set to "-", storageClassName: "", which disables dynamic provisioning.
+      #   If empty or set to null, no storageClassName spec is
+      #   set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+      #   storageClass: null
+      # - name: wal
+      #   size: 150Gi
+
</span>   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="err">
</span></code></pre></div></div> <h2 id="06915-2"> <a href="#06915-2" class="anchor-heading" aria-labelledby="06915-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.15 </h2> <p><strong>Release date:</strong> 2023-04-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.1&amp;color=success" alt="AppVersion: 2.8.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Loki to version 2.8.1</li> </ul> <h3 id="default-value-changes-46"> <a href="#default-value-changes-46" class="anchor-heading" aria-labelledby="default-value-changes-46"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="06914"> <a href="#06914" class="anchor-heading" aria-labelledby="06914"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.14 </h2> <p><strong>Release date:</strong> 2023-04-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.0&amp;color=success" alt="AppVersion: 2.8.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into fix-memcached-frontend</li> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-47"> <a href="#default-value-changes-47" class="anchor-heading" aria-labelledby="default-value-changes-47"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index eeef7ef7..d3a449fb 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -171,7 +171,7 @@</span> loki:
         cache:
           {{- if .Values.memcachedFrontend.enabled }}
           memcached_client:
<span class="gd">-            host: {{ include "loki.memcachedFrontendFullname" . }}
</span><span class="gi">+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
</span>             consistent_hash: true
           {{- else }}
           embedded_cache:
<span class="p">@@ -183,7 +183,7 @@</span> loki:
       {{- if .Values.queryScheduler.enabled }}
       scheduler_address: {{ include "loki.querySchedulerFullname" . }}:9095
       {{- else }}
<span class="gd">-      frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
</span><span class="gi">+      frontend_address: {{ include "loki.queryFrontendFullname" . }}-headless:9095
</span>       {{- end }}
 
     frontend:
<span class="err">
</span></code></pre></div></div> <h2 id="06913-1"> <a href="#06913-1" class="anchor-heading" aria-labelledby="06913-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.13 </h2> <p><strong>Release date:</strong> 2023-04-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.0&amp;color=success" alt="AppVersion: 2.8.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>helm-docs</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Override Loki server section</li> <li>fix: querry-frontend url</li> </ul> <h3 id="default-value-changes-48"> <a href="#default-value-changes-48" class="anchor-heading" aria-labelledby="default-value-changes-48"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48055075..eeef7ef7 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -74,13 +74,18 @@</span> loki:
   appProtocol: ""
   # -- Common annotations for all loki services
   serviceAnnotations: {}
<span class="gi">+  # Loki server configuration
+  # Refers to https://grafana.com/docs/loki/latest/configuration/#server
+  server:
+    # -- HTTP server listen port
+    http_listen_port: 3100
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
     auth_enabled: false
 
     server:
<span class="gd">-      http_listen_port: 3100
</span><span class="gi">+      {{- toYaml .Values.loki.server | nindent 6 }}
</span> 
     common:
       compactor_address: http://{{ include "loki.compactorFullname" . }}:3100
<span class="err">
</span></code></pre></div></div> <h2 id="06912"> <a href="#06912" class="anchor-heading" aria-labelledby="06912"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.12 </h2> <p><strong>Release date:</strong> 2023-04-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.8.0&amp;color=success" alt="AppVersion: 2.8.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into fix-memcached-frontend</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Bump Loki to version 2.8</li> </ul> <h3 id="default-value-changes-49"> <a href="#default-value-changes-49" class="anchor-heading" aria-labelledby="default-value-changes-49"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="06911"> <a href="#06911" class="anchor-heading" aria-labelledby="06911"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.11 </h2> <p><strong>Release date:</strong> 2023-04-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.5&amp;color=success" alt="AppVersion: 2.7.5"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update version</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> fixed ‘no such host’ error</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-50"> <a href="#default-value-changes-50" class="anchor-heading" aria-labelledby="default-value-changes-50"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48055075..a0fc3dd4 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -166,7 +166,7 @@</span> loki:
         cache:
           {{- if .Values.memcachedFrontend.enabled }}
           memcached_client:
<span class="gd">-            host: {{ include "loki.memcachedFrontendFullname" . }}
</span><span class="gi">+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
</span>             consistent_hash: true
           {{- else }}
           embedded_cache:
<span class="err">
</span></code></pre></div></div> <h2 id="06910"> <a href="#06910" class="anchor-heading" aria-labelledby="06910"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.10 </h2> <p><strong>Release date:</strong> 2023-04-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.5&amp;color=success" alt="AppVersion: 2.7.5"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-51"> <a href="#default-value-changes-51" class="anchor-heading" aria-labelledby="default-value-changes-51"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0700-2"> <a href="#0700-2" class="anchor-heading" aria-labelledby="0700-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.0 </h2> <p><strong>Release date:</strong> 2023-03-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.5&amp;color=success" alt="AppVersion: 2.7.5"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Bump Loki to version 2.7.5</li> </ul> <h3 id="default-value-changes-52"> <a href="#default-value-changes-52" class="anchor-heading" aria-labelledby="default-value-changes-52"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0699"> <a href="#0699" class="anchor-heading" aria-labelledby="0699"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.9 </h2> <p><strong>Release date:</strong> 2023-02-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.4&amp;color=success" alt="AppVersion: 2.7.4"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add extraContainers to loki distributed ruler statefulset</li> <li>Removed last extra space added after running helm-docs</li> <li>Removed last extra space added after running helm-docs</li> <li>Removed added spaces from the loki-distributed chart</li> <li>Fixed app version loki-distributed version number and updated helm docs</li> </ul> <h3 id="default-value-changes-53"> <a href="#default-value-changes-53" class="anchor-heading" aria-labelledby="default-value-changes-53"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0698"> <a href="#0698" class="anchor-heading" aria-labelledby="0698"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.8 </h2> <p><strong>Release date:</strong> 2023-03-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.5&amp;color=success" alt="AppVersion: 2.7.5"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bumped version loki-distributed version number and updated helm docs</li> <li>Merge branch ‘main’ into feature/loki-distributed-add-namespaces</li> <li>Ran script to generate updated readme file for loki-distributed helm chart</li> </ul> <h3 id="default-value-changes-54"> <a href="#default-value-changes-54" class="anchor-heading" aria-labelledby="default-value-changes-54"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0697"> <a href="#0697" class="anchor-heading" aria-labelledby="0697"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.7 </h2> <p><strong>Release date:</strong> 2023-03-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.4&amp;color=success" alt="AppVersion: 2.7.4"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bumped loki version to 2.7.4</li> </ul> <h3 id="default-value-changes-55"> <a href="#default-value-changes-55" class="anchor-heading" aria-labelledby="default-value-changes-55"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0700-3"> <a href="#0700-3" class="anchor-heading" aria-labelledby="0700-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.0 </h2> <p><strong>Release date:</strong> 2023-02-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into service-account-labels</li> </ul> <h3 id="default-value-changes-56"> <a href="#default-value-changes-56" class="anchor-heading" aria-labelledby="default-value-changes-56"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48055075..643f709f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -244,6 +244,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="err">
</span></code></pre></div></div> <h2 id="0697-1"> <a href="#0697-1" class="anchor-heading" aria-labelledby="0697-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.7 </h2> <p><strong>Release date:</strong> 2023-02-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Updated resources to follow the release namespace</li> </ul> <h3 id="default-value-changes-57"> <a href="#default-value-changes-57" class="anchor-heading" aria-labelledby="default-value-changes-57"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0696"> <a href="#0696" class="anchor-heading" aria-labelledby="0696"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.6 </h2> <p><strong>Release date:</strong> 2023-02-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add Prometheus rules example</li> </ul> <h3 id="default-value-changes-58"> <a href="#default-value-changes-58" class="anchor-heading" aria-labelledby="default-value-changes-58"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b9873d17..48055075 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -298,14 +298,58 @@</span> prometheusRule:
   labels: {}
   # -- Contents of Prometheus rules file
   groups: []
<span class="gd">-  # - name: loki-rules
-  #   rules:
-  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
-  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
-  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
-  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
-  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
-  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
</span><span class="gi">+  #  - name: loki_rules
+  #    rules:
+  #      - expr: histogram_quantile(0.99, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, job))
+  #        record: cluster_job:loki_request_duration_seconds:99quantile
+  #      - expr: histogram_quantile(0.50, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, job))
+  #        record: cluster_job:loki_request_duration_seconds:50quantile
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, job) / sum(rate(loki_request_duration_seconds_count[1m]))
+  #          by (cluster, job)
+  #        record: cluster_job:loki_request_duration_seconds:avg
+  #      - expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, cluster, job)
+  #        record: cluster_job:loki_request_duration_seconds_bucket:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, job)
+  #        record: cluster_job:loki_request_duration_seconds_sum:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_count[1m])) by (cluster, job)
+  #        record: cluster_job:loki_request_duration_seconds_count:sum_rate
+  #      - expr: histogram_quantile(0.99, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, job, route))
+  #        record: cluster_job_route:loki_request_duration_seconds:99quantile
+  #      - expr: histogram_quantile(0.50, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, job, route))
+  #        record: cluster_job_route:loki_request_duration_seconds:50quantile
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, job, route)
+  #          / sum(rate(loki_request_duration_seconds_count[1m])) by (cluster, job, route)
+  #        record: cluster_job_route:loki_request_duration_seconds:avg
+  #      - expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, cluster, job,
+  #          route)
+  #        record: cluster_job_route:loki_request_duration_seconds_bucket:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, job, route)
+  #        record: cluster_job_route:loki_request_duration_seconds_sum:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_count[1m])) by (cluster, job, route)
+  #        record: cluster_job_route:loki_request_duration_seconds_count:sum_rate
+  #      - expr: histogram_quantile(0.99, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, namespace, job, route))
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds:99quantile
+  #      - expr: histogram_quantile(0.50, sum(rate(loki_request_duration_seconds_bucket[1m]))
+  #          by (le, cluster, namespace, job, route))
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds:50quantile
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, namespace,
+  #          job, route) / sum(rate(loki_request_duration_seconds_count[1m])) by (cluster,
+  #          namespace, job, route)
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds:avg
+  #      - expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, cluster, namespace,
+  #          job, route)
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds_bucket:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_sum[1m])) by (cluster, namespace,
+  #          job, route)
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds_sum:sum_rate
+  #      - expr: sum(rate(loki_request_duration_seconds_count[1m])) by (cluster, namespace,
+  #          job, route)
+  #        record: cluster_namespace_job_route:loki_request_duration_seconds_count:sum_rate
</span> 
 # Configuration for the ingester
 ingester:
<span class="err">
</span></code></pre></div></div> <h2 id="0695"> <a href="#0695" class="anchor-heading" aria-labelledby="0695"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.5 </h2> <p><strong>Release date:</strong> 2023-02-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>README update</li> </ul> <h3 id="default-value-changes-59"> <a href="#default-value-changes-59" class="anchor-heading" aria-labelledby="default-value-changes-59"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0694"> <a href="#0694" class="anchor-heading" aria-labelledby="0694"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.4 </h2> <p><strong>Release date:</strong> 2023-02-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>merging with upstream</li> <li>updated helm docs</li> </ul> <h3 id="default-value-changes-60"> <a href="#default-value-changes-60" class="anchor-heading" aria-labelledby="default-value-changes-60"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index afc5812d..b9873d17 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -802,10 +802,10 @@</span> ingress:
       - /prometheus/api/v1/alerts
   hosts:
     - loki.example.com
<span class="gd">-#  tls:
-#    - hosts:
-#       - loki.example.com
-#      secretName: loki-distributed-tls
</span><span class="gi">+  # tls:
+  #   - secretName: loki-distributed-tls
+  #     hosts:
+  #       - loki.example.com
</span> 
 # Configuration for the gateway
 gateway:
<span class="p">@@ -936,10 +936,12 @@</span> gateway:
             # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
             # pathType: Prefix
     # -- TLS configuration for the gateway ingress
<span class="gd">-    tls:
-      - secretName: loki-gateway-tls
-        hosts:
-          - gateway.loki.example.com
</span><span class="gi">+    tls: []
+    # tls:
+    #   - secretName: loki-gateway-tls
+    #     hosts:
+    #       - gateway.loki.example.com
+
</span>   # Basic auth configuration
   basicAuth:
     # -- Enables basic authentication for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="0700-4"> <a href="#0700-4" class="anchor-heading" aria-labelledby="0700-4"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.70.0 </h2> <p><strong>Release date:</strong> 2023-02-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>added optional labels to serviceAccount</li> </ul> <h3 id="default-value-changes-61"> <a href="#default-value-changes-61" class="anchor-heading" aria-labelledby="default-value-changes-61"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index afc5812d..5fc7aae9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -244,6 +244,8 @@</span> serviceAccount:
   name: null
   # -- Image pull secrets for the service account
   imagePullSecrets: []
<span class="gi">+  # -- Labels for the service account
+  labels: {}
</span>   # -- Annotations for the service account
   annotations: {}
   # -- Set this toggle to false to opt out of automounting API credentials for the service account
<span class="err">
</span></code></pre></div></div> <h2 id="0694-1"> <a href="#0694-1" class="anchor-heading" aria-labelledby="0694-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.4 </h2> <p><strong>Release date:</strong> 2023-02-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.3&amp;color=success" alt="AppVersion: 2.7.3"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update loki version to 2.7.3</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update to loki version to 2.7.2</li> <li>README update</li> </ul> <h3 id="default-value-changes-62"> <a href="#default-value-changes-62" class="anchor-heading" aria-labelledby="default-value-changes-62"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0693"> <a href="#0693" class="anchor-heading" aria-labelledby="0693"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.3 </h2> <p><strong>Release date:</strong> 2023-01-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>merge upstream</li> </ul> <h3 id="default-value-changes-63"> <a href="#default-value-changes-63" class="anchor-heading" aria-labelledby="default-value-changes-63"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index afc5812d..b9873d17 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -802,10 +802,10 @@</span> ingress:
       - /prometheus/api/v1/alerts
   hosts:
     - loki.example.com
<span class="gd">-#  tls:
-#    - hosts:
-#       - loki.example.com
-#      secretName: loki-distributed-tls
</span><span class="gi">+  # tls:
+  #   - secretName: loki-distributed-tls
+  #     hosts:
+  #       - loki.example.com
</span> 
 # Configuration for the gateway
 gateway:
<span class="p">@@ -936,10 +936,12 @@</span> gateway:
             # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
             # pathType: Prefix
     # -- TLS configuration for the gateway ingress
<span class="gd">-    tls:
-      - secretName: loki-gateway-tls
-        hosts:
-          - gateway.loki.example.com
</span><span class="gi">+    tls: []
+    # tls:
+    #   - secretName: loki-gateway-tls
+    #     hosts:
+    #       - gateway.loki.example.com
+
</span>   # Basic auth configuration
   basicAuth:
     # -- Enables basic authentication for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="0692"> <a href="#0692" class="anchor-heading" aria-labelledby="0692"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.2 </h2> <p><strong>Release date:</strong> 2023-01-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #2121 from zaldnoay/fix_loki_compactor_address</li> </ul> <h3 id="default-value-changes-64"> <a href="#default-value-changes-64" class="anchor-heading" aria-labelledby="default-value-changes-64"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e19ab16b..afc5812d 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -83,7 +83,7 @@</span> loki:
       http_listen_port: 3100
 
     common:
<span class="gd">-      compactor_address: {{ include "loki.compactorFullname" . }}:3100
</span><span class="gi">+      compactor_address: http://{{ include "loki.compactorFullname" . }}:3100
</span> 
     distributor:
       ring:
<span class="err">
</span></code></pre></div></div> <h2 id="0691"> <a href="#0691" class="anchor-heading" aria-labelledby="0691"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.1 </h2> <p><strong>Release date:</strong> 2023-01-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #2128 from Siebjee/revert-breakage-2127</li> </ul> <h3 id="default-value-changes-65"> <a href="#default-value-changes-65" class="anchor-heading" aria-labelledby="default-value-changes-65"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0692-1"> <a href="#0692-1" class="anchor-heading" aria-labelledby="0692-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.2 </h2> <p><strong>Release date:</strong> 2023-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump loki-distributed version</li> <li>Fixed compactor address without protocol schema</li> </ul> <h3 id="default-value-changes-66"> <a href="#default-value-changes-66" class="anchor-heading" aria-labelledby="default-value-changes-66"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e19ab16b..afc5812d 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -83,7 +83,7 @@</span> loki:
       http_listen_port: 3100
 
     common:
<span class="gd">-      compactor_address: {{ include "loki.compactorFullname" . }}:3100
</span><span class="gi">+      compactor_address: http://{{ include "loki.compactorFullname" . }}:3100
</span> 
     distributor:
       ring:
<span class="err">
</span></code></pre></div></div> <h2 id="0691-1"> <a href="#0691-1" class="anchor-heading" aria-labelledby="0691-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.1 </h2> <p><strong>Release date:</strong> 2023-01-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge upstream/main into pull-request/main</li> </ul> <h3 id="default-value-changes-67"> <a href="#default-value-changes-67" class="anchor-heading" aria-labelledby="default-value-changes-67"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0690"> <a href="#0690" class="anchor-heading" aria-labelledby="0690"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.0 </h2> <p><strong>Release date:</strong> 2023-01-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge remote-tracking branch ‘upstream/main’</li> </ul> <h3 id="default-value-changes-68"> <a href="#default-value-changes-68" class="anchor-heading" aria-labelledby="default-value-changes-68"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2e63a744..e19ab16b 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -166,7 +166,7 @@</span> loki:
         cache:
           {{- if .Values.memcachedFrontend.enabled }}
           memcached_client:
<span class="gd">-            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
</span><span class="gi">+            host: {{ include "loki.memcachedFrontendFullname" . }}
</span>             consistent_hash: true
           {{- else }}
           embedded_cache:
<span class="err">
</span></code></pre></div></div> <h2 id="0691-2"> <a href="#0691-2" class="anchor-heading" aria-labelledby="0691-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.1 </h2> <p><strong>Release date:</strong> 2023-01-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update helm-docs</li> </ul> <h3 id="default-value-changes-69"> <a href="#default-value-changes-69" class="anchor-heading" aria-labelledby="default-value-changes-69"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0693-1"> <a href="#0693-1" class="anchor-heading" aria-labelledby="0693-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.3 </h2> <p><strong>Release date:</strong> 2023-01-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Disable default TLS secret for Gateway Ingress object</li> </ul> <h3 id="default-value-changes-70"> <a href="#default-value-changes-70" class="anchor-heading" aria-labelledby="default-value-changes-70"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2e63a744..71644444 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -802,10 +802,10 @@</span> ingress:
       - /prometheus/api/v1/alerts
   hosts:
     - loki.example.com
<span class="gd">-#  tls:
-#    - hosts:
-#       - loki.example.com
-#      secretName: loki-distributed-tls
</span><span class="gi">+  # tls:
+  #   - secretName: loki-distributed-tls
+  #     hosts:
+  #       - loki.example.com
</span> 
 # Configuration for the gateway
 gateway:
<span class="p">@@ -936,10 +936,12 @@</span> gateway:
             # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
             # pathType: Prefix
     # -- TLS configuration for the gateway ingress
<span class="gd">-    tls:
-      - secretName: loki-gateway-tls
-        hosts:
-          - gateway.loki.example.com
</span><span class="gi">+    tls: []
+    # tls:
+    #   - secretName: loki-gateway-tls
+    #     hosts:
+    #       - gateway.loki.example.com
+
</span>   # Basic auth configuration
   basicAuth:
     # -- Enables basic authentication for the gateway
<span class="err">
</span></code></pre></div></div> <h2 id="0691-3"> <a href="#0691-3" class="anchor-heading" aria-labelledby="0691-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.1 </h2> <p><strong>Release date:</strong> 2023-01-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Revert <a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Update query-fronted service to set clusterIP #2110</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump the version number up</li> </ul> <h3 id="default-value-changes-71"> <a href="#default-value-changes-71" class="anchor-heading" aria-labelledby="default-value-changes-71"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0690-1"> <a href="#0690-1" class="anchor-heading" aria-labelledby="0690-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.69.0 </h2> <p><strong>Release date:</strong> 2023-01-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-72"> <a href="#default-value-changes-72" class="anchor-heading" aria-labelledby="default-value-changes-72"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index d7dedaaf..2e63a744 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -82,6 +82,9 @@</span> loki:
     server:
       http_listen_port: 3100
 
<span class="gi">+    common:
+      compactor_address: {{ include "loki.compactorFullname" . }}:3100
+
</span>     distributor:
       ring:
         kvstore:
<span class="p">@@ -138,7 +141,8 @@</span> loki:
       max_look_back_period: 0s
       {{- if .Values.memcachedChunks.enabled }}
       chunk_cache_config:
<span class="gd">-        enable_fifocache: false
</span><span class="gi">+        embedded_cache:
+          enabled: false
</span>         memcached_client:
           consistent_hash: true
           addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
<span class="p">@@ -165,9 +169,8 @@</span> loki:
             addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
             consistent_hash: true
           {{- else }}
<span class="gd">-          enable_fifocache: true
-          fifocache:
-            max_size_items: 1024
</span><span class="gi">+          embedded_cache:
+            enabled: true
</span>             ttl: 24h
           {{- end }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0681"> <a href="#0681" class="anchor-heading" aria-labelledby="0681"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.68.1 </h2> <p><strong>Release date:</strong> 2023-01-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into fix_query_frontend_service_template</li> </ul> <h3 id="default-value-changes-73"> <a href="#default-value-changes-73" class="anchor-heading" aria-labelledby="default-value-changes-73"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..d7dedaaf 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1068,7 +1068,7 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $api_prom_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="p">@@ -1088,7 +1088,7 @@</span> gateway:
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $loki_api_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="err">
</span></code></pre></div></div> <h2 id="0673"> <a href="#0673" class="anchor-heading" aria-labelledby="0673"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.3 </h2> <p><strong>Release date:</strong> 2023-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version</li> <li>Update charts/loki-distributed/README.md</li> </ul> <h3 id="default-value-changes-74"> <a href="#default-value-changes-74" class="anchor-heading" aria-labelledby="default-value-changes-74"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0680"> <a href="#0680" class="anchor-heading" aria-labelledby="0680"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.68.0 </h2> <p><strong>Release date:</strong> 2023-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/loki-distributed/Chart.yaml</li> </ul> <h3 id="default-value-changes-75"> <a href="#default-value-changes-75" class="anchor-heading" aria-labelledby="default-value-changes-75"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..d7dedaaf 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1068,7 +1068,7 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $api_prom_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="p">@@ -1088,7 +1088,7 @@</span> gateway:
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $loki_api_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="err">
</span></code></pre></div></div> <h2 id="0672"> <a href="#0672" class="anchor-heading" aria-labelledby="0672"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.2 </h2> <p><strong>Release date:</strong> 2023-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update query-fronted service to set clusterIP</li> </ul> <h3 id="default-value-changes-76"> <a href="#default-value-changes-76" class="anchor-heading" aria-labelledby="default-value-changes-76"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0680-1"> <a href="#0680-1" class="anchor-heading" aria-labelledby="0680-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.68.0 </h2> <p><strong>Release date:</strong> 2023-01-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> add stanzas to upgrading notes</li> </ul> <h3 id="default-value-changes-77"> <a href="#default-value-changes-77" class="anchor-heading" aria-labelledby="default-value-changes-77"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..fe64a137 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -82,6 +82,9 @@</span> loki:
     server:
       http_listen_port: 3100
 
<span class="gi">+    common:
+      compactor_address: {{ include "loki.compactorFullname" . }}:3100
+
</span>     distributor:
       ring:
         kvstore:
<span class="p">@@ -138,7 +141,8 @@</span> loki:
       max_look_back_period: 0s
       {{- if .Values.memcachedChunks.enabled }}
       chunk_cache_config:
<span class="gd">-        enable_fifocache: false
</span><span class="gi">+        embedded_cache:
+          enabled: false
</span>         memcached_client:
           consistent_hash: true
           addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
<span class="p">@@ -165,9 +169,8 @@</span> loki:
             addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
             consistent_hash: true
           {{- else }}
<span class="gd">-          enable_fifocache: true
-          fifocache:
-            max_size_items: 1024
</span><span class="gi">+          embedded_cache:
+            enabled: true
</span>             ttl: 24h
           {{- end }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0673-1"> <a href="#0673-1" class="anchor-heading" aria-labelledby="0673-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.3 </h2> <p><strong>Release date:</strong> 2023-01-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed-query-frontend-headless-service</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> add compactor_address to CI cache-values</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> add an upgrading note to README</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> add an upgrading note</li> </ul> <h3 id="default-value-changes-78"> <a href="#default-value-changes-78" class="anchor-heading" aria-labelledby="default-value-changes-78"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..d7dedaaf 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1068,7 +1068,7 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $api_prom_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="p">@@ -1088,7 +1088,7 @@</span> gateway:
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $loki_api_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="err">
</span></code></pre></div></div> <h2 id="0680-2"> <a href="#0680-2" class="anchor-heading" aria-labelledby="0680-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.68.0 </h2> <p><strong>Release date:</strong> 2023-01-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.7.1&amp;color=success" alt="AppVersion: 2.7.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> update to loki version 2.7.1</li> </ul> <h3 id="default-value-changes-79"> <a href="#default-value-changes-79" class="anchor-heading" aria-labelledby="default-value-changes-79"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..fe64a137 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -82,6 +82,9 @@</span> loki:
     server:
       http_listen_port: 3100
 
<span class="gi">+    common:
+      compactor_address: {{ include "loki.compactorFullname" . }}:3100
+
</span>     distributor:
       ring:
         kvstore:
<span class="p">@@ -138,7 +141,8 @@</span> loki:
       max_look_back_period: 0s
       {{- if .Values.memcachedChunks.enabled }}
       chunk_cache_config:
<span class="gd">-        enable_fifocache: false
</span><span class="gi">+        embedded_cache:
+          enabled: false
</span>         memcached_client:
           consistent_hash: true
           addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
<span class="p">@@ -165,9 +169,8 @@</span> loki:
             addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
             consistent_hash: true
           {{- else }}
<span class="gd">-          enable_fifocache: true
-          fifocache:
-            max_size_items: 1024
</span><span class="gi">+          embedded_cache:
+            enabled: true
</span>             ttl: 24h
           {{- end }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0672-1"> <a href="#0672-1" class="anchor-heading" aria-labelledby="0672-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.2 </h2> <p><strong>Release date:</strong> 2022-12-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Do not set ingester StatefulSet replicas when HPA enabled</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Update HPAs to support autoscaling/v2 schema</li> </ul> <h3 id="default-value-changes-80"> <a href="#default-value-changes-80" class="anchor-heading" aria-labelledby="default-value-changes-80"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0671"> <a href="#0671" class="anchor-heading" aria-labelledby="0671"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.1 </h2> <p><strong>Release date:</strong> 2022-12-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Change memcached_client addresses for query_range</li> </ul> <h3 id="default-value-changes-81"> <a href="#default-value-changes-81" class="anchor-heading" aria-labelledby="default-value-changes-81"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aeafa88d..d1533cd6 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -162,7 +162,7 @@</span> loki:
         cache:
           {{- if .Values.memcachedFrontend.enabled }}
           memcached_client:
<span class="gd">-            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
</span><span class="gi">+            host: {{ include "loki.memcachedFrontendFullname" . }}
</span>             consistent_hash: true
           {{- else }}
           enable_fifocache: true
<span class="err">
</span></code></pre></div></div> <h2 id="0670"> <a href="#0670" class="anchor-heading" aria-labelledby="0670"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.67.0 </h2> <p><strong>Release date:</strong> 2022-12-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into fix/issue-1683-pvc-annotations</li> </ul> <h3 id="default-value-changes-82"> <a href="#default-value-changes-82" class="anchor-heading" aria-labelledby="default-value-changes-82"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 046b4aed..aeafa88d 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -406,6 +406,8 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for ingester PVCs
+    annotations: {}
</span>   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -567,6 +569,8 @@</span> querier:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for querier PVCs
+    annotations: {}
</span>   # -- Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -1151,6 +1155,8 @@</span> compactor:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for compactor PVCs
+    annotations: {}
</span>   serviceAccount:
     create: false
     # -- The name of the ServiceAccount to use for the compactor.
<span class="p">@@ -1242,6 +1248,8 @@</span> ruler:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for ruler PVCs
+    annotations: {}
</span>   # -- Directories containing rules files
   directories: {}
     # tenant_foo:
<span class="p">@@ -1383,6 +1391,8 @@</span> indexGateway:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for index gateway PVCs
+    annotations: {}
</span> 
 memcached:
   readinessProbe:
<span class="err">
</span></code></pre></div></div> <h2 id="0668"> <a href="#0668" class="anchor-heading" aria-labelledby="0668"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.8 </h2> <p><strong>Release date:</strong> 2022-12-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Relax autoscaling/v2 compatibility to 1.23</li> </ul> <h3 id="default-value-changes-83"> <a href="#default-value-changes-83" class="anchor-heading" aria-labelledby="default-value-changes-83"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0667"> <a href="#0667" class="anchor-heading" aria-labelledby="0667"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.7 </h2> <p><strong>Release date:</strong> 2022-12-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into jandersen-plaid-checksum-config</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-84"> <a href="#default-value-changes-84" class="anchor-heading" aria-labelledby="default-value-changes-84"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0666"> <a href="#0666" class="anchor-heading" aria-labelledby="0666"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.6 </h2> <p><strong>Release date:</strong> 2022-12-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-85"> <a href="#default-value-changes-85" class="anchor-heading" aria-labelledby="default-value-changes-85"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0665"> <a href="#0665" class="anchor-heading" aria-labelledby="0665"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.5 </h2> <p><strong>Release date:</strong> 2022-12-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> <li>Update README.md</li> <li>Merge branch ‘main’ into loki-distributed-pdb-creation-condition</li> </ul> <h3 id="default-value-changes-86"> <a href="#default-value-changes-86" class="anchor-heading" aria-labelledby="default-value-changes-86"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 03d2f02f..046b4aed 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -829,7 +829,7 @@</span> gateway:
     # -- The gateway image repository
     repository: nginxinc/nginx-unprivileged
     # -- The gateway image tag
<span class="gd">-    tag: 1.19-alpine
</span><span class="gi">+    tag: 1.20.2-alpine
</span>     # -- The gateway image pull policy
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
<span class="err">
</span></code></pre></div></div> <h2 id="0664"> <a href="#0664" class="anchor-heading" aria-labelledby="0664"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.4 </h2> <p><strong>Release date:</strong> 2022-12-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Fail when components have more than 1 replica but do not have maxUnavailable set</li> </ul> <h3 id="default-value-changes-87"> <a href="#default-value-changes-87" class="anchor-heading" aria-labelledby="default-value-changes-87"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0663"> <a href="#0663" class="anchor-heading" aria-labelledby="0663"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.3 </h2> <p><strong>Release date:</strong> 2022-11-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump loki-distributed chart version to 0.66.3</li> </ul> <h3 id="default-value-changes-88"> <a href="#default-value-changes-88" class="anchor-heading" aria-labelledby="default-value-changes-88"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0662"> <a href="#0662" class="anchor-heading" aria-labelledby="0662"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.2 </h2> <p><strong>Release date:</strong> 2022-11-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki-distributed: Create PDBs only if maxUnavailable is set</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Update image gateway to 1.20.2-alpine. 1.20.x stable branch. Security Scan: 1.19-alpine: nginxinc/nginx-unprivileged:1.19-alpine (alpine 3.13.5) Total: 96 (UNKNOWN: 0, LOW: 6, MEDIUM: 29, HIGH: 52, CRITICAL: 9) Security Scan: 1.20.2-alpine: nginxinc/nginx-unprivileged:1.20.2-alpine (alpine 3.14.6) Total: 22 (UNKNOWN: 0, LOW: 2, MEDIUM: 8, HIGH: 9, CRITICAL: 3)</li> </ul> <h3 id="default-value-changes-89"> <a href="#default-value-changes-89" class="anchor-heading" aria-labelledby="default-value-changes-89"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0663-1"> <a href="#0663-1" class="anchor-heading" aria-labelledby="0663-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.3 </h2> <p><strong>Release date:</strong> 2022-11-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add headless service to query frontend</li> <li>Disable access_log for gateway.</li> </ul> <h3 id="default-value-changes-90"> <a href="#default-value-changes-90" class="anchor-heading" aria-labelledby="default-value-changes-90"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index d95f0568..c8b61405 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1032,6 +1032,7 @@</span> gateway:
           location = / {
             return 200 'OK';
             auth_basic off;
<span class="gi">+            access_log off;
</span>           }
 
           location = /api/prom/push {
<span class="p">@@ -1063,7 +1064,7 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $api_prom_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="p">@@ -1083,7 +1084,7 @@</span> gateway:
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}-headless.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
</span>             proxy_pass       $loki_api_backend:3100$request_uri;
             proxy_http_version 1.1;
           }
<span class="err">
</span></code></pre></div></div> <h2 id="0662-1"> <a href="#0662-1" class="anchor-heading" aria-labelledby="0662-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.2 </h2> <p><strong>Release date:</strong> 2022-11-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into jandersen-plaid-checksum-config</li> </ul> <h3 id="default-value-changes-91"> <a href="#default-value-changes-91" class="anchor-heading" aria-labelledby="default-value-changes-91"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0661"> <a href="#0661" class="anchor-heading" aria-labelledby="0661"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.1 </h2> <p><strong>Release date:</strong> 2022-11-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update chart version and badge</li> <li>fix ingester topologySpreadConstraints</li> </ul> <h3 id="default-value-changes-92"> <a href="#default-value-changes-92" class="anchor-heading" aria-labelledby="default-value-changes-92"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index d27b0971..d95f0568 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -362,7 +362,7 @@</span> ingester:
   # @default -- Defaults to allow skew no more then 1 node per AZ
   topologySpreadConstraints: |
     - maxSkew: 1
<span class="gd">-      topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+      topologyKey: kubernetes.io/hostname
</span>       whenUnsatisfiable: ScheduleAnyway
       labelSelector:
         matchLabels:
<span class="err">
</span></code></pre></div></div> <h2 id="0660"> <a href="#0660" class="anchor-heading" aria-labelledby="0660"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.66.0 </h2> <p><strong>Release date:</strong> 2022-11-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki-distributed: bump memcached from 1.6.7-alpine to 1.6.17-alpine</li> <li>Merge branch ‘main’ into handle-eks-minor-versions</li> </ul> <h3 id="default-value-changes-93"> <a href="#default-value-changes-93" class="anchor-heading" aria-labelledby="default-value-changes-93"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e7b45da5..d27b0971 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -491,7 +491,7 @@</span> querier:
   # -- Number of replicas for the querier
   replicas: 1
   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
</span><span class="gi">+    # -- Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`
</span>     enabled: false
     # -- Minimum autoscaling replicas for the querier
     minReplicas: 1
<span class="p">@@ -1399,7 +1399,7 @@</span> memcached:
     # -- Memcached Docker image repository
     repository: memcached
     # -- Memcached Docker image tag
<span class="gd">-    tag: 1.6.7-alpine
</span><span class="gi">+    tag: 1.6.17-alpine
</span>     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
   # -- Labels for memcached pods
<span class="err">
</span></code></pre></div></div> <h2 id="0653"> <a href="#0653" class="anchor-heading" aria-labelledby="0653"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.65.3 </h2> <p><strong>Release date:</strong> 2022-11-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updating the loki-distributed chart version</li> <li>Updating the loki-distributed chart version</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-94"> <a href="#default-value-changes-94" class="anchor-heading" aria-labelledby="default-value-changes-94"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0652"> <a href="#0652" class="anchor-heading" aria-labelledby="0652"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.65.2 </h2> <p><strong>Release date:</strong> 2022-11-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Merge pull request #1968 from patsevanton/main</li> <li>Merge branch ‘main’ into loki-querier-fix-comment</li> <li>bump helm-chart version</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Mount /var/loki to emptyDir in tableManager</li> <li>Fixing the template</li> <li>Adding new line at the end of file</li> <li>Adding new line at the end of file</li> <li>Using the semverCompare to check for gitversion</li> <li>Update the README with helm docs information</li> <li>Merge remote-tracking branch ‘origin/main’ into jandersen-plaid-checksum-config</li> <li>updating readme.md with version 0.65.1</li> </ul> <h3 id="default-value-changes-95"> <a href="#default-value-changes-95" class="anchor-heading" aria-labelledby="default-value-changes-95"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e7b45da5..7abb7d8c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -491,7 +491,7 @@</span> querier:
   # -- Number of replicas for the querier
   replicas: 1
   autoscaling:
<span class="gd">-    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
</span><span class="gi">+    # -- Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`
</span>     enabled: false
     # -- Minimum autoscaling replicas for the querier
     minReplicas: 1
<span class="err">
</span></code></pre></div></div> <h2 id="0651"> <a href="#0651" class="anchor-heading" aria-labelledby="0651"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.65.1 </h2> <p><strong>Release date:</strong> 2022-11-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Handling the eks minor versions which has plus sign</li> <li>Merge branch ‘grafana:main’ into main</li> <li>Update README.md</li> <li>Merge branch ‘main’ into switchservicetype</li> </ul> <h3 id="default-value-changes-96"> <a href="#default-value-changes-96" class="anchor-heading" aria-labelledby="default-value-changes-96"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 72cbe549..e7b45da5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -123,6 +123,12 @@</span> loki:
     {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
     {{- end}}
     {{- toYaml .Values.loki.storageConfig | nindent 2}}
<span class="gi">+    {{- if .Values.memcachedIndexQueries.enabled }}
+      index_queries_cache_config:
+        memcached_client:
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexQueriesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+          consistent_hash: true
+    {{- end}}
</span>     {{- end}}
 
     runtime_config:
<span class="p">@@ -130,6 +136,19 @@</span> loki:
 
     chunk_store_config:
       max_look_back_period: 0s
<span class="gi">+      {{- if .Values.memcachedChunks.enabled }}
+      chunk_cache_config:
+        enable_fifocache: false
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
+      {{- if .Values.memcachedIndexWrites.enabled }}
+      write_dedupe_cache_config:
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexWritesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
</span> 
     table_manager:
       retention_deletes_enabled: false
<span class="p">@@ -141,10 +160,16 @@</span> loki:
       cache_results: true
       results_cache:
         cache:
<span class="gi">+          {{- if .Values.memcachedFrontend.enabled }}
+          memcached_client:
+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+            consistent_hash: true
+          {{- else }}
</span>           enable_fifocache: true
           fifocache:
             max_size_items: 1024
             ttl: 24h
<span class="gi">+          {{- end }}
</span> 
     frontend_worker:
       {{- if .Values.queryScheduler.enabled }}
<span class="p">@@ -1469,6 +1494,17 @@</span> memcachedChunks:
   nodeSelector: {}
   # -- Tolerations for memcached-chunks pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
<span class="p">@@ -1518,6 +1554,17 @@</span> memcachedFrontend:
   nodeSelector: {}
   # -- Tolerations for memcached-frontend pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexQueries:
   # -- Specifies whether the Memcached index queries cache should be enabled
<span class="p">@@ -1567,6 +1614,17 @@</span> memcachedIndexQueries:
   nodeSelector: {}
   # -- Tolerations for memcached-index-queries pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexWrites:
   # -- Specifies whether the Memcached index writes cache should be enabled
<span class="p">@@ -1616,6 +1674,17 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 networkPolicy:
   # -- Specifies whether Network Policies should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0650"> <a href="#0650" class="anchor-heading" aria-labelledby="0650"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.65.0 </h2> <p><strong>Release date:</strong> 2022-11-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-97"> <a href="#default-value-changes-97" class="anchor-heading" aria-labelledby="default-value-changes-97"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0640"> <a href="#0640" class="anchor-heading" aria-labelledby="0640"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.64.0 </h2> <p><strong>Release date:</strong> 2022-11-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add HPA support for k8s &gt;=1.25-0</li> <li>chore: Fix typo in loki-distributed values</li> </ul> <h3 id="default-value-changes-98"> <a href="#default-value-changes-98" class="anchor-heading" aria-labelledby="default-value-changes-98"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0641"> <a href="#0641" class="anchor-heading" aria-labelledby="0641"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.64.1 </h2> <p><strong>Release date:</strong> 2022-11-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Checksum the contents of configmaps instead of the resources</li> </ul> <h3 id="default-value-changes-99"> <a href="#default-value-changes-99" class="anchor-heading" aria-labelledby="default-value-changes-99"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 72cbe549..e7b45da5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -123,6 +123,12 @@</span> loki:
     {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
     {{- end}}
     {{- toYaml .Values.loki.storageConfig | nindent 2}}
<span class="gi">+    {{- if .Values.memcachedIndexQueries.enabled }}
+      index_queries_cache_config:
+        memcached_client:
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexQueriesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+          consistent_hash: true
+    {{- end}}
</span>     {{- end}}
 
     runtime_config:
<span class="p">@@ -130,6 +136,19 @@</span> loki:
 
     chunk_store_config:
       max_look_back_period: 0s
<span class="gi">+      {{- if .Values.memcachedChunks.enabled }}
+      chunk_cache_config:
+        enable_fifocache: false
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
+      {{- if .Values.memcachedIndexWrites.enabled }}
+      write_dedupe_cache_config:
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexWritesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
</span> 
     table_manager:
       retention_deletes_enabled: false
<span class="p">@@ -141,10 +160,16 @@</span> loki:
       cache_results: true
       results_cache:
         cache:
<span class="gi">+          {{- if .Values.memcachedFrontend.enabled }}
+          memcached_client:
+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+            consistent_hash: true
+          {{- else }}
</span>           enable_fifocache: true
           fifocache:
             max_size_items: 1024
             ttl: 24h
<span class="gi">+          {{- end }}
</span> 
     frontend_worker:
       {{- if .Values.queryScheduler.enabled }}
<span class="p">@@ -1469,6 +1494,17 @@</span> memcachedChunks:
   nodeSelector: {}
   # -- Tolerations for memcached-chunks pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
<span class="p">@@ -1518,6 +1554,17 @@</span> memcachedFrontend:
   nodeSelector: {}
   # -- Tolerations for memcached-frontend pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexQueries:
   # -- Specifies whether the Memcached index queries cache should be enabled
<span class="p">@@ -1567,6 +1614,17 @@</span> memcachedIndexQueries:
   nodeSelector: {}
   # -- Tolerations for memcached-index-queries pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexWrites:
   # -- Specifies whether the Memcached index writes cache should be enabled
<span class="p">@@ -1616,6 +1674,17 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 networkPolicy:
   # -- Specifies whether Network Policies should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0640-1"> <a href="#0640-1" class="anchor-heading" aria-labelledby="0640-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.64.0 </h2> <p><strong>Release date:</strong> 2022-11-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>chore(loki-distributed): bump helm-chart version</li> </ul> <h3 id="default-value-changes-100"> <a href="#default-value-changes-100" class="anchor-heading" aria-labelledby="default-value-changes-100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0632"> <a href="#0632" class="anchor-heading" aria-labelledby="0632"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.2 </h2> <p><strong>Release date:</strong> 2022-11-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(query-frontend): switch to standard k8s service</li> <li>Add lifecyle to gracefully shutdown memcached</li> </ul> <h3 id="default-value-changes-101"> <a href="#default-value-changes-101" class="anchor-heading" aria-labelledby="default-value-changes-101"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0640-2"> <a href="#0640-2" class="anchor-heading" aria-labelledby="0640-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.64.0 </h2> <p><strong>Release date:</strong> 2022-10-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add memcached config when components are enabled</li> </ul> <h3 id="default-value-changes-102"> <a href="#default-value-changes-102" class="anchor-heading" aria-labelledby="default-value-changes-102"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 72cbe549..e7b45da5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -123,6 +123,12 @@</span> loki:
     {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
     {{- end}}
     {{- toYaml .Values.loki.storageConfig | nindent 2}}
<span class="gi">+    {{- if .Values.memcachedIndexQueries.enabled }}
+      index_queries_cache_config:
+        memcached_client:
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexQueriesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+          consistent_hash: true
+    {{- end}}
</span>     {{- end}}
 
     runtime_config:
<span class="p">@@ -130,6 +136,19 @@</span> loki:
 
     chunk_store_config:
       max_look_back_period: 0s
<span class="gi">+      {{- if .Values.memcachedChunks.enabled }}
+      chunk_cache_config:
+        enable_fifocache: false
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedChunksFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
+      {{- if .Values.memcachedIndexWrites.enabled }}
+      write_dedupe_cache_config:
+        memcached_client:
+          consistent_hash: true
+          addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedIndexWritesFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+      {{- end }}
</span> 
     table_manager:
       retention_deletes_enabled: false
<span class="p">@@ -141,10 +160,16 @@</span> loki:
       cache_results: true
       results_cache:
         cache:
<span class="gi">+          {{- if .Values.memcachedFrontend.enabled }}
+          memcached_client:
+            addresses: dnssrv+_memcached-client._tcp.{{ include "loki.memcachedFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}
+            consistent_hash: true
+          {{- else }}
</span>           enable_fifocache: true
           fifocache:
             max_size_items: 1024
             ttl: 24h
<span class="gi">+          {{- end }}
</span> 
     frontend_worker:
       {{- if .Values.queryScheduler.enabled }}
<span class="p">@@ -1469,6 +1494,17 @@</span> memcachedChunks:
   nodeSelector: {}
   # -- Tolerations for memcached-chunks pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedFrontend:
   # -- Specifies whether the Memcached frontend cache should be enabled
<span class="p">@@ -1518,6 +1554,17 @@</span> memcachedFrontend:
   nodeSelector: {}
   # -- Tolerations for memcached-frontend pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexQueries:
   # -- Specifies whether the Memcached index queries cache should be enabled
<span class="p">@@ -1567,6 +1614,17 @@</span> memcachedIndexQueries:
   nodeSelector: {}
   # -- Tolerations for memcached-index-queries pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 memcachedIndexWrites:
   # -- Specifies whether the Memcached index writes cache should be enabled
<span class="p">@@ -1616,6 +1674,17 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+  persistence:
+    # -- Enable creating PVCs which will persist cached data through restarts
+    enabled: false
+    # -- Size of persistent or memory disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
</span> 
 networkPolicy:
   # -- Specifies whether Network Policies should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0632-1"> <a href="#0632-1" class="anchor-heading" aria-labelledby="0632-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.2 </h2> <p><strong>Release date:</strong> 2022-10-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #1906 from cwyl02/main</li> </ul> <h3 id="default-value-changes-103"> <a href="#default-value-changes-103" class="anchor-heading" aria-labelledby="default-value-changes-103"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0631"> <a href="#0631" class="anchor-heading" aria-labelledby="0631"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.1 </h2> <p><strong>Release date:</strong> 2022-10-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #1843 from alexandre1984rj/querier_topology_spread_constraints</li> </ul> <h3 id="default-value-changes-104"> <a href="#default-value-changes-104" class="anchor-heading" aria-labelledby="default-value-changes-104"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 9737427f..72cbe549 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -511,22 +511,18 @@</span> querier:
   initContainers: []
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for querier pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: kubernetes.io/hostname
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.querierSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
-    podAntiAffinity:
-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
-      preferredDuringSchedulingIgnoredDuringExecution:
-        - weight: 100
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: {}
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="err">
</span></code></pre></div></div> <h2 id="0632-2"> <a href="#0632-2" class="anchor-heading" aria-labelledby="0632-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.2 </h2> <p><strong>Release date:</strong> 2022-10-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>chore: bump chart version</li> <li>fix: apply loki.annotations to more controller obj</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Fix PSP deprecation after k8s 1.25+</li> </ul> <h3 id="default-value-changes-105"> <a href="#default-value-changes-105" class="anchor-heading" aria-labelledby="default-value-changes-105"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0631-1"> <a href="#0631-1" class="anchor-heading" aria-labelledby="0631-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.1 </h2> <p><strong>Release date:</strong> 2022-10-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into querier_topology_spread_constraints</li> </ul> <h3 id="default-value-changes-106"> <a href="#default-value-changes-106" class="anchor-heading" aria-labelledby="default-value-changes-106"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 9737427f..72cbe549 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -511,22 +511,18 @@</span> querier:
   initContainers: []
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for querier pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: kubernetes.io/hostname
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.querierSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
-    podAntiAffinity:
-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
-      preferredDuringSchedulingIgnoredDuringExecution:
-        - weight: 100
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: {}
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="err">
</span></code></pre></div></div> <h2 id="0630"> <a href="#0630" class="anchor-heading" aria-labelledby="0630"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.63.0 </h2> <p><strong>Release date:</strong> 2022-10-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart version and update Readme template</li> <li>loki-distributed update memcached usage documentation</li> <li>Merge branch ‘main’ into feature/introduce-app-protocol-gateway-service</li> </ul> <h3 id="default-value-changes-107"> <a href="#default-value-changes-107" class="anchor-heading" aria-labelledby="default-value-changes-107"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0620"> <a href="#0620" class="anchor-heading" aria-labelledby="0620"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.62.0 </h2> <p><strong>Release date:</strong> 2022-10-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update chart version</li> </ul> <h3 id="default-value-changes-108"> <a href="#default-value-changes-108" class="anchor-heading" aria-labelledby="default-value-changes-108"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 27fe269e..9737427f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -884,6 +884,8 @@</span> gateway:
     loadBalancerIP: null
     # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
     loadBalancerSourceRanges: []
<span class="gi">+    # -- Set appProtocol for the service
+    appProtocol: null
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0610"> <a href="#0610" class="anchor-heading" aria-labelledby="0610"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.61.0 </h2> <p><strong>Release date:</strong> 2022-10-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add memberlist ports to ruler deployment and sts</li> <li>Remove trailing newlines from annotations</li> <li>Fix compactor values reference</li> </ul> <h3 id="default-value-changes-109"> <a href="#default-value-changes-109" class="anchor-heading" aria-labelledby="default-value-changes-109"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0600"> <a href="#0600" class="anchor-heading" aria-labelledby="0600"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.60.0 </h2> <p><strong>Release date:</strong> 2022-10-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version and README</li> </ul> <h3 id="default-value-changes-110"> <a href="#default-value-changes-110" class="anchor-heading" aria-labelledby="default-value-changes-110"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0580"> <a href="#0580" class="anchor-heading" aria-labelledby="0580"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.58.0 </h2> <p><strong>Release date:</strong> 2022-10-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add annotation value for all PVCs</li> <li>update topologySpreadConstraints topologyKey</li> <li>update topologyKey</li> </ul> <h3 id="default-value-changes-111"> <a href="#default-value-changes-111" class="anchor-heading" aria-labelledby="default-value-changes-111"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 27fe269e..6a27c23a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -381,6 +381,8 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for ingester PVCs
+    annotations: {}
</span>   # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -546,6 +548,8 @@</span> querier:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for querier PVCs
+    annotations: {}
</span>   # -- Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.
   appProtocol:
     # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
<span class="p">@@ -1127,6 +1131,8 @@</span> compactor:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for compactor PVCs
+    annotations: {}
</span>   serviceAccount:
     create: false
     # -- The name of the ServiceAccount to use for the compactor.
<span class="p">@@ -1218,6 +1224,8 @@</span> ruler:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for ruler PVCs
+    annotations: {}
</span>   # -- Directories containing rules files
   directories: {}
     # tenant_foo:
<span class="p">@@ -1359,6 +1367,8 @@</span> indexGateway:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+    # -- Annotations for index gateway PVCs
+    annotations: {}
</span> 
 memcached:
   readinessProbe:
<span class="err">
</span></code></pre></div></div> <h2 id="0581"> <a href="#0581" class="anchor-heading" aria-labelledby="0581"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.58.1 </h2> <p><strong>Release date:</strong> 2022-09-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update docs and chart values</li> <li>Update values.yaml</li> <li>Add topologySpreadConstraints to deployment querier</li> </ul> <h3 id="default-value-changes-112"> <a href="#default-value-changes-112" class="anchor-heading" aria-labelledby="default-value-changes-112"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 27fe269e..c4675d98 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -511,22 +511,18 @@</span> querier:
   initContainers: []
   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
<span class="gi">+  # -- topologySpread for querier pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.querierSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
-    podAntiAffinity:
-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
-      preferredDuringSchedulingIgnoredDuringExecution:
-        - weight: 100
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: {}
</span>   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
   # -- Node selector for querier pods
<span class="err">
</span></code></pre></div></div> <h2 id="0580-1"> <a href="#0580-1" class="anchor-heading" aria-labelledby="0580-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.58.0 </h2> <p><strong>Release date:</strong> 2022-09-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add topologySpreadConstraints to statefulset querier</li> </ul> <h3 id="default-value-changes-113"> <a href="#default-value-changes-113" class="anchor-heading" aria-labelledby="default-value-changes-113"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0590"> <a href="#0590" class="anchor-heading" aria-labelledby="0590"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.59.0 </h2> <p><strong>Release date:</strong> 2022-09-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump version and update docs</li> <li>Add new appProtocol field</li> </ul> <h3 id="default-value-changes-114"> <a href="#default-value-changes-114" class="anchor-heading" aria-labelledby="default-value-changes-114"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 27fe269e..9737427f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -884,6 +884,8 @@</span> gateway:
     loadBalancerIP: null
     # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
     loadBalancerSourceRanges: []
<span class="gi">+    # -- Set appProtocol for the service
+    appProtocol: null
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0580-2"> <a href="#0580-2" class="anchor-heading" aria-labelledby="0580-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.58.0 </h2> <p><strong>Release date:</strong> 2022-09-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Introduce runtimeConfig</li> <li>Merge branch ‘main’ into loki-distributed/initContainers</li> </ul> <h3 id="default-value-changes-115"> <a href="#default-value-changes-115" class="anchor-heading" aria-labelledby="default-value-changes-115"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 712122a0..27fe269e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -125,6 +125,9 @@</span> loki:
     {{- toYaml .Values.loki.storageConfig | nindent 2}}
     {{- end}}
 
<span class="gi">+    runtime_config:
+      file: /var/{{ include "loki.name" . }}-runtime/runtime.yaml
+
</span>     chunk_store_config:
       max_look_back_period: 0s
 
<span class="p">@@ -201,6 +204,10 @@</span> loki:
 
   # -- Structured loki configuration, takes precedence over `loki.config`, `loki.schemaConfig`, `loki.storageConfig`
   structuredConfig: {}
<span class="gi">+
+# -- Provides a reloadable runtime configuration file for some specific configuration
+runtimeConfig: {}
+
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="err">
</span></code></pre></div></div> <h2 id="0570"> <a href="#0570" class="anchor-heading" aria-labelledby="0570"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.57.0 </h2> <p><strong>Release date:</strong> 2022-09-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add initContainers</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-116"> <a href="#default-value-changes-116" class="anchor-heading" aria-labelledby="default-value-changes-116"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ecd87508..712122a0 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -320,6 +320,8 @@</span> ingester:
   resources: {}
   # -- Containers to add to the ingester pods
   extraContainers: []
<span class="gi">+  # -- Init containers to add to the ingester pods
+  initContainers: []
</span>   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
<span class="p">@@ -498,6 +500,8 @@</span> querier:
   resources: {}
   # -- Containers to add to the querier pods
   extraContainers: []
<span class="gi">+  # -- Init containers to add to the querier pods
+  initContainers: []
</span>   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1097,6 +1101,8 @@</span> compactor:
   resources: {}
   # -- Containers to add to the compactor pods
   extraContainers: []
<span class="gi">+  # -- Init containers to add to the compactor pods
+  initContainers: []
</span>   # -- Grace period to allow the compactor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Node selector for compactor pods
<span class="p">@@ -1166,6 +1172,8 @@</span> ruler:
   resources: {}
   # -- Containers to add to the ruler pods
   extraContainers: []
<span class="gi">+  # -- Init containers to add to the ruler pods
+  initContainers: []
</span>   # -- Grace period to allow the ruler to shutdown before it is killed
   terminationGracePeriodSeconds: 300
   # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1305,6 +1313,8 @@</span> indexGateway:
   resources: {}
   # -- Containers to add to the index-gateway pods
   extraContainers: []
<span class="gi">+  # -- Init containers to add to the index-gateway pods
+  initContainers: []
</span>   # -- Grace period to allow the index-gateway to shutdown before it is killed.
   terminationGracePeriodSeconds: 300
   # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0569"> <a href="#0569" class="anchor-heading" aria-labelledby="0569"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.9 </h2> <p><strong>Release date:</strong> 2022-09-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into patch-1</li> </ul> <h3 id="default-value-changes-117"> <a href="#default-value-changes-117" class="anchor-heading" aria-labelledby="default-value-changes-117"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0568"> <a href="#0568" class="anchor-heading" aria-labelledby="0568"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.8 </h2> <p><strong>Release date:</strong> 2022-09-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> fix: pdb conditional deployment</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> fix: pdbs should take the right value</li> </ul> <h3 id="default-value-changes-118"> <a href="#default-value-changes-118" class="anchor-heading" aria-labelledby="default-value-changes-118"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 671cb158..ecd87508 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -670,6 +670,8 @@</span> queryScheduler:
               matchLabels:
                 {{- include "loki.querySchedulerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: 1
</span>   # -- Node selector for query-scheduler pods
   nodeSelector: {}
   # -- Tolerations for query-scheduler pods
<span class="p">@@ -1495,6 +1497,8 @@</span> memcachedFrontend:
               matchLabels:
                 {{- include "loki.memcachedFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: 1
</span>   # -- Node selector for memcached-frontend pods
   nodeSelector: {}
   # -- Tolerations for memcached-frontend pods
<span class="err">
</span></code></pre></div></div> <h2 id="0567"> <a href="#0567" class="anchor-heading" aria-labelledby="0567"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.7 </h2> <p><strong>Release date:</strong> 2022-09-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update memcached service entries to be istio compliant</li> <li>Change memcached service portnames istio compliant</li> <li>Change memcached service portnames istio compliant</li> <li>Change memcached service portnames istio compliant</li> <li>Change memcached service portnames istio compliant</li> <li>fix: make ingester statefulset consistent with existing pattern</li> </ul> <h3 id="default-value-changes-119"> <a href="#default-value-changes-119" class="anchor-heading" aria-labelledby="default-value-changes-119"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0566"> <a href="#0566" class="anchor-heading" aria-labelledby="0566"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.6 </h2> <p><strong>Release date:</strong> 2022-02-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a>: add support for autoscaling ingester</li> <li>regenerate docs</li> <li>Revert “docs fix”</li> <li>docs fix</li> </ul> <h3 id="default-value-changes-120"> <a href="#default-value-changes-120" class="anchor-heading" aria-labelledby="default-value-changes-120"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2feb2e7b..671cb158 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -278,6 +278,17 @@</span> ingester:
   kind: StatefulSet
   # -- Number of replicas for the ingester
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the ingester
+    enabled: false
+    # -- Minimum autoscaling replicas for the ingester
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the ingester
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the ingester
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the ingester
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0565"> <a href="#0565" class="anchor-heading" aria-labelledby="0565"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.5 </h2> <p><strong>Release date:</strong> 2022-08-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update version</li> <li>Fix fatal typo</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-121"> <a href="#default-value-changes-121" class="anchor-heading" aria-labelledby="default-value-changes-121"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0564"> <a href="#0564" class="anchor-heading" aria-labelledby="0564"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.4 </h2> <p><strong>Release date:</strong> 2022-08-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-122"> <a href="#default-value-changes-122" class="anchor-heading" aria-labelledby="default-value-changes-122"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 22e16898..2feb2e7b 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -324,7 +324,22 @@</span> ingester:
           {{- include "loki.ingesterSelectorLabels" . | nindent 6 }}
   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: {}
</span><span class="gi">+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.ingesterSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -415,6 +430,8 @@</span> distributor:
               matchLabels:
                 {{- include "loki.distributorSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -488,6 +505,8 @@</span> querier:
               matchLabels:
                 {{- include "loki.querierSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -574,6 +593,8 @@</span> queryFrontend:
               matchLabels:
                 {{- include "loki.queryFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -817,6 +838,8 @@</span> gateway:
               matchLabels:
                 {{- include "loki.gatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -1148,6 +1171,8 @@</span> ruler:
               matchLabels:
                 {{- include "loki.rulerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for ruler pods
   nodeSelector: {}
   # -- Tolerations for ruler pods
<span class="p">@@ -1285,6 +1310,8 @@</span> indexGateway:
               matchLabels:
                 {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for index-gateway pods
   nodeSelector: {}
   # -- Tolerations for index-gateway pods
<span class="p">@@ -1408,6 +1435,8 @@</span> memcachedChunks:
               matchLabels:
                 {{- include "loki.memcachedChunksSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-chunks pods
   nodeSelector: {}
   # -- Tolerations for memcached-chunks pods
<span class="p">@@ -1502,6 +1531,8 @@</span> memcachedIndexQueries:
               matchLabels:
                 {{- include "loki.memcachedIndexQueriesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-index-queries pods
   nodeSelector: {}
   # -- Tolerations for memcached-index-queries pods
<span class="p">@@ -1549,6 +1580,8 @@</span> memcachedIndexWrites:
               matchLabels:
                 {{- include "loki.memcachedIndexWritesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-index-writes pods
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0563"> <a href="#0563" class="anchor-heading" aria-labelledby="0563"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.3 </h2> <p><strong>Release date:</strong> 2022-08-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-123"> <a href="#default-value-changes-123" class="anchor-heading" aria-labelledby="default-value-changes-123"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 33c64c39..22e16898 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -346,6 +346,10 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -415,6 +419,10 @@</span> distributor:
   nodeSelector: {}
   # -- Tolerations for distributor pods
   tolerations: []
<span class="gi">+    # -- Adds the appProtocol field to the distributor service. This allows distributor to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -497,6 +505,10 @@</span> querier:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -566,6 +578,10 @@</span> queryFrontend:
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
   tolerations: []
<span class="gi">+  # -- Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the query-scheduler
 queryScheduler:
<span class="err">
</span></code></pre></div></div> <h2 id="0562"> <a href="#0562" class="anchor-heading" aria-labelledby="0562"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.2 </h2> <p><strong>Release date:</strong> 2022-08-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into ingester_readinessprobe</li> <li>Merge branch ‘main’ into loki_inmemory_persistence</li> </ul> <h3 id="default-value-changes-124"> <a href="#default-value-changes-124" class="anchor-heading" aria-labelledby="default-value-changes-124"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 61f1e351..33c64c39 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -329,10 +329,16 @@</span> ingester:
   nodeSelector: {}
   # -- Tolerations for ingester pods
   tolerations: []
<span class="gi">+  # -- readiness probe settings for ingester pods. If empty, use `loki.readinessProbe`
+  readinessProbe: {}
+  # -- liveness probe settings for ingester pods. If empty use `loki.livenessProbe`
+  livenessProbe: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="p">@@ -1270,7 +1276,9 @@</span> indexGateway:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in indexGateway will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="err">
</span></code></pre></div></div> <h2 id="0561"> <a href="#0561" class="anchor-heading" aria-labelledby="0561"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.1 </h2> <p><strong>Release date:</strong> 2022-08-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add appProtocol grpc field to distributor, ingester, querier and query frontend</li> <li>add compactor to memberlist</li> </ul> <h3 id="default-value-changes-125"> <a href="#default-value-changes-125" class="anchor-heading" aria-labelledby="default-value-changes-125"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 61f1e351..3051ff08 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -340,6 +340,10 @@</span> ingester:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- Adds the appProtocol field to the ingester service. This allows ingester to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the distributor
 distributor:
<span class="p">@@ -409,6 +413,10 @@</span> distributor:
   nodeSelector: {}
   # -- Tolerations for distributor pods
   tolerations: []
<span class="gi">+    # -- Adds the appProtocol field to the distributor service. This allows distributor to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the querier
 querier:
<span class="p">@@ -491,6 +499,10 @@</span> querier:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  # -- Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the query-frontend
 queryFrontend:
<span class="p">@@ -560,6 +572,10 @@</span> queryFrontend:
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
   tolerations: []
<span class="gi">+  # -- Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.
+  appProtocol:
+    # -- Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"
+    grpc: ""
</span> 
 # Configuration for the query-scheduler
 queryScheduler:
<span class="err">
</span></code></pre></div></div> <h2 id="0560"> <a href="#0560" class="anchor-heading" aria-labelledby="0560"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.0 </h2> <p><strong>Release date:</strong> 2022-08-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Address reviews and fix docs</li> </ul> <h3 id="default-value-changes-126"> <a href="#default-value-changes-126" class="anchor-heading" aria-labelledby="default-value-changes-126"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3b4c0605..61f1e351 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -144,11 +144,18 @@</span> loki:
             ttl: 24h
 
     frontend_worker:
<span class="gi">+      {{- if .Values.queryScheduler.enabled }}
+      scheduler_address: {{ include "loki.querySchedulerFullname" . }}:9095
+      {{- else }}
</span>       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="gi">+      {{- end }}
</span> 
     frontend:
       log_queries_longer_than: 5s
       compress_responses: true
<span class="gi">+      {{- if .Values.queryScheduler.enabled }}
+      scheduler_address: {{ include "loki.querySchedulerFullname" . }}:9095
+      {{- end }}
</span>       tail_proxy_url: http://{{ include "loki.querierFullname" . }}:3100
 
     compactor:
<span class="p">@@ -554,6 +561,66 @@</span> queryFrontend:
   # -- Tolerations for query-frontend pods
   tolerations: []
 
<span class="gi">+# Configuration for the query-scheduler
+queryScheduler:
+  # -- Specifies whether the query-scheduler should be decoupled from the query-frontend
+  enabled: false
+  # -- Number of replicas for the query-scheduler.
+  # It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers;
+  # it's also recommended that this value evenly divides the latter
+  replicas: 2
+  image:
+    # -- The Docker registry for the query-scheduler image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the query-scheduler image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the query-scheduler image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for query-scheduler pods
+  priorityClassName: null
+  # -- Labels for query-scheduler pods
+  podLabels: {}
+  # -- Annotations for query-scheduler pods
+  podAnnotations: {}
+  # -- Labels for query-scheduler service
+  serviceLabels: {}
+  # -- Additional CLI args for the query-scheduler
+  extraArgs: []
+  # -- Environment variables to add to the query-scheduler pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the query-scheduler pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the query-scheduler pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the query-scheduler pods
+  extraVolumes: []
+  # -- Resource requests and limits for the query-scheduler
+  resources: {}
+  # -- Containers to add to the query-scheduler pods
+  extraContainers: []
+  # -- Grace period to allow the query-scheduler to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- Affinity for query-scheduler pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querySchedulerSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querySchedulerSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for query-scheduler pods
+  nodeSelector: {}
+  # -- Tolerations for query-scheduler pods
+  tolerations: []
+
</span> # Configuration for the table-manager
 tableManager:
   # -- Specifies whether the table-manager should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0558"> <a href="#0558" class="anchor-heading" aria-labelledby="0558"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.8 </h2> <p><strong>Release date:</strong> 2022-08-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump Chart.yaml version and README.md</li> <li>Update values.yaml</li> </ul> <h3 id="default-value-changes-127"> <a href="#default-value-changes-127" class="anchor-heading" aria-labelledby="default-value-changes-127"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index be54f5ca..b2a1aade 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1223,8 +1223,6 @@</span> indexGateway:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Pod Disruption Budget maxUnavailable
   maxUnavailable: null
<span class="gd">-  # -- Pod Disruption Budget maxUnavailable
-  maxUnavailable: null
</span>   # -- Node selector for index-gateway pods
   nodeSelector: {}
   # -- Tolerations for index-gateway pods
<span class="err">
</span></code></pre></div></div> <h2 id="0557"> <a href="#0557" class="anchor-heading" aria-labelledby="0557"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.7 </h2> <p><strong>Release date:</strong> 2022-08-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-128"> <a href="#default-value-changes-128" class="anchor-heading" aria-labelledby="default-value-changes-128"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ef73fc92..be54f5ca 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -46,6 +51,8 @@</span> loki:
   podLabels: {}
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -63,6 +70,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -130,7 +141,7 @@</span> loki:
           enable_fifocache: true
           fifocache:
             max_size_items: 1024
<span class="gd">-            validity: 24h
</span><span class="gi">+            ttl: 24h
</span> 
     frontend_worker:
       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="p">@@ -225,6 +236,9 @@</span> serviceMonitor:
   # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
   # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
   metricRelabelings: []
<span class="gi">+  # --ServiceMonitor will add labels from the service to the Prometheus metric
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec
+  targetLabels: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="p">@@ -264,6 +278,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Labels for ingester pods
<span class="p">@@ -290,6 +306,15 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.ingesterSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
   affinity: |
<span class="p">@@ -346,6 +371,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Labels for distributor pods
<span class="p">@@ -415,6 +442,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Labels for querier pods
<span class="p">@@ -461,6 +490,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -495,6 +526,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Labels for query-frontend pods
<span class="p">@@ -553,6 +586,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Labels for table-manager pods
<span class="p">@@ -598,6 +633,39 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="p">@@ -687,6 +755,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -699,6 +769,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="p">@@ -736,6 +808,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -747,8 +820,14 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -757,6 +836,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -776,6 +857,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="p">@@ -792,7 +875,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -812,13 +899,17 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           # Ruler
<span class="p">@@ -836,21 +927,29 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -870,12 +969,16 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Labels for compactor pods
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Specify the compactor affinity
+  affinity: {}
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -937,6 +1040,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Labels for compactor pods
<span class="p">@@ -983,6 +1088,8 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using recording rules
     enabled: false
<span class="p">@@ -1135,6 +1242,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -1159,6 +1275,10 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="p">@@ -1176,6 +1296,13 @@</span> memcachedExporter:
   podLabels: {}
   # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+  # -- The SecurityContext for memcachedExporter containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0484"> <a href="#0484" class="anchor-heading" aria-labelledby="0484"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.4 </h2> <p><strong>Release date:</strong> 2022-08-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update templates/<em>/poddisruptionbudget-</em>.yaml</li> <li>Fix some fmt errors and add docs</li> </ul> <h3 id="default-value-changes-129"> <a href="#default-value-changes-129" class="anchor-heading" aria-labelledby="default-value-changes-129"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..ef73fc92 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -306,6 +306,8 @@</span> ingester:
               matchLabels:
                 {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -384,6 +386,8 @@</span> distributor:
               matchLabels:
                 {{- include "loki.distributorSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -451,6 +455,8 @@</span> querier:
               matchLabels:
                 {{- include "loki.querierSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -529,6 +535,8 @@</span> queryFrontend:
               matchLabels:
                 {{- include "loki.queryFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -673,6 +681,8 @@</span> gateway:
               matchLabels:
                 {{- include "loki.gatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for gateway pods
   nodeSelector: {}
   # -- Tolerations for gateway pods
<span class="p">@@ -967,6 +977,8 @@</span> ruler:
               matchLabels:
                 {{- include "loki.rulerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for ruler pods
   nodeSelector: {}
   # -- Tolerations for ruler pods
<span class="p">@@ -1102,6 +1114,10 @@</span> indexGateway:
               matchLabels:
                 {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for index-gateway pods
   nodeSelector: {}
   # -- Tolerations for index-gateway pods
<span class="p">@@ -1203,6 +1219,8 @@</span> memcachedChunks:
               matchLabels:
                 {{- include "loki.memcachedChunksSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-chunks pods
   nodeSelector: {}
   # -- Tolerations for memcached-chunks pods
<span class="p">@@ -1297,6 +1315,8 @@</span> memcachedIndexQueries:
               matchLabels:
                 {{- include "loki.memcachedIndexQueriesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-index-queries pods
   nodeSelector: {}
   # -- Tolerations for memcached-index-queries pods
<span class="p">@@ -1344,6 +1364,8 @@</span> memcachedIndexWrites:
               matchLabels:
                 {{- include "loki.memcachedIndexWritesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # -- Pod Disruption Budget maxUnavailable
+  maxUnavailable: null
</span>   # -- Node selector for memcached-index-writes pods
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0560-1"> <a href="#0560-1" class="anchor-heading" aria-labelledby="0560-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.56.0 </h2> <p><strong>Release date:</strong> 2022-08-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add an option for deploying query-schedulers</li> </ul> <h3 id="default-value-changes-130"> <a href="#default-value-changes-130" class="anchor-heading" aria-labelledby="default-value-changes-130"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3b4c0605..4b9c35d7 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -144,11 +144,18 @@</span> loki:
             ttl: 24h
 
     frontend_worker:
<span class="gi">+      {{- if .Values.queryScheduler.enabled }}
+      scheduler_address: {{ include "loki.querySchedulerFullname" . }}:9095
+      {{- else }}
</span>       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="gi">+      {{- end }}
</span> 
     frontend:
       log_queries_longer_than: 5s
       compress_responses: true
<span class="gi">+      {{- if .Values.queryScheduler.enabled }}
+      scheduler_address: {{ include "loki.querySchedulerFullname" . }}:9095
+      {{- end }}
</span>       tail_proxy_url: http://{{ include "loki.querierFullname" . }}:3100
 
     compactor:
<span class="p">@@ -554,6 +561,65 @@</span> queryFrontend:
   # -- Tolerations for query-frontend pods
   tolerations: []
 
<span class="gi">+# Configuration for the query-scheduler
+queryScheduler:
+  enabled: false
+  # -- Number of replicas for the query-scheduler.
+  # It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers;
+  # it's also recommended that this value evenly divides the latter 
+  replicas: 2
+  image:
+    # -- The Docker registry for the query-scheduler image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the query-scheduler image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the query-scheduler image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for query-scheduler pods
+  priorityClassName: null
+  # -- Labels for query-scheduler pods
+  podLabels: {}
+  # -- Annotations for query-scheduler pods
+  podAnnotations: {}
+  # -- Labels for query-scheduler service
+  serviceLabels: {}
+  # -- Additional CLI args for the query-scheduler
+  extraArgs: []
+  # -- Environment variables to add to the query-scheduler pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the query-scheduler pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the query-scheduler pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the query-scheduler pods
+  extraVolumes: []
+  # -- Resource requests and limits for the query-scheduler
+  resources: {}
+  # -- Containers to add to the query-scheduler pods
+  extraContainers: []
+  # -- Grace period to allow the query-scheduler to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # -- Affinity for query-scheduler pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.querySchedulerSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.querySchedulerSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for query-scheduler pods
+  nodeSelector: {}
+  # -- Tolerations for query-scheduler pods
+  tolerations: []
+
</span> # Configuration for the table-manager
 tableManager:
   # -- Specifies whether the table-manager should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0558-1"> <a href="#0558-1" class="anchor-heading" aria-labelledby="0558-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.8 </h2> <p><strong>Release date:</strong> 2022-08-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>another version bump</li> <li>Merge branch ‘main’ into loki_inmemory_persistence</li> </ul> <h3 id="default-value-changes-131"> <a href="#default-value-changes-131" class="anchor-heading" aria-labelledby="default-value-changes-131"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3b4c0605..ab2bd45a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -325,7 +325,9 @@</span> ingester:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="p">@@ -1203,7 +1205,9 @@</span> indexGateway:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in indexGateway will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="err">
</span></code></pre></div></div> <h2 id="0557-1"> <a href="#0557-1" class="anchor-heading" aria-labelledby="0557-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.7 </h2> <p><strong>Release date:</strong> 2022-08-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into patch-1</li> <li>Update statefulset-querier.yaml</li> <li>Update deployment-query-frontend.yaml</li> <li>Update deployment-ruler.yaml</li> <li>Update deployment-table-manager.yaml</li> <li>Update statefulset-ingester.yaml</li> <li>Update deployment-distributor.yaml</li> <li>Merge branch ‘main’ into main</li> <li>Merge branch ‘main’ into ingester_readinessprobe</li> </ul> <h3 id="default-value-changes-132"> <a href="#default-value-changes-132" class="anchor-heading" aria-labelledby="default-value-changes-132"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index f54e4788..3b4c0605 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -51,6 +51,8 @@</span> loki:
   podLabels: {}
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -139,7 +141,7 @@</span> loki:
           enable_fifocache: true
           fifocache:
             max_size_items: 1024
<span class="gd">-            validity: 24h
</span><span class="gi">+            ttl: 24h
</span> 
     frontend_worker:
       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="p">@@ -276,6 +278,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Labels for ingester pods
<span class="p">@@ -352,6 +356,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Labels for distributor pods
<span class="p">@@ -419,6 +425,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Labels for querier pods
<span class="p">@@ -499,6 +507,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Labels for query-frontend pods
<span class="p">@@ -555,6 +565,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Labels for table-manager pods
<span class="p">@@ -934,12 +946,16 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Labels for compactor pods
   podLabels: {}
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Specify the compactor affinity
+  affinity: {}
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -1001,6 +1017,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Labels for compactor pods
<span class="err">
</span></code></pre></div></div> <h2 id="0556"> <a href="#0556" class="anchor-heading" aria-labelledby="0556"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.6 </h2> <p><strong>Release date:</strong> 2022-08-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> <li>mv readinessProbe and livenessProbe to _helper.tpl</li> <li>update default values and generate docs</li> <li>enable customization of readiness and liveness probe configuration for Loki Ingester</li> <li>Merge branch ‘main’ into deprecated-validity</li> <li>update Chart.yaml and README.md</li> <li>Merge branch ‘main’ into loki_inmemory_persistence</li> </ul> <h3 id="default-value-changes-133"> <a href="#default-value-changes-133" class="anchor-heading" aria-labelledby="default-value-changes-133"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index fef6c051..0f0f3f87 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -318,6 +318,10 @@</span> ingester:
   nodeSelector: {}
   # -- Tolerations for ingester pods
   tolerations: []
<span class="gi">+  # -- readiness probe settings for ingester pods. If empty, use `loki.readinessProbe`
+  readinessProbe: {}
+  # -- liveness probe settings for ingester pods. If empty use `loki.livenessProbe`
+  livenessProbe: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="p">@@ -866,6 +870,7 @@</span> gateway:
           location = /api/prom/push {
             set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
             proxy_pass       $api_prom_push_backend:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /api/prom/tail {
<span class="p">@@ -873,6 +878,7 @@</span> gateway:
             proxy_pass       $api_prom_tail_backend:3100$request_uri;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           # Ruler
<span class="p">@@ -892,11 +898,13 @@</span> gateway:
           location ~ /api/prom/.* {
             set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
             proxy_pass       $api_prom_backend:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/push {
             set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
             proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="p">@@ -904,11 +912,13 @@</span> gateway:
             proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /loki/api/.* {
             set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
             proxy_pass       $loki_api_backend:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="err">
</span></code></pre></div></div> <h2 id="0555"> <a href="#0555" class="anchor-heading" aria-labelledby="0555"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.5 </h2> <p><strong>Release date:</strong> 2022-08-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>version bump</li> </ul> <h3 id="default-value-changes-134"> <a href="#default-value-changes-134" class="anchor-heading" aria-labelledby="default-value-changes-134"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0554"> <a href="#0554" class="anchor-heading" aria-labelledby="0554"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.4 </h2> <p><strong>Release date:</strong> 2022-08-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add warning about using inMemory variable</li> </ul> <h3 id="default-value-changes-135"> <a href="#default-value-changes-135" class="anchor-heading" aria-labelledby="default-value-changes-135"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index fef6c051..c35e0470 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -321,7 +321,9 @@</span> ingester:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in ingester will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="p">@@ -1179,7 +1181,9 @@</span> indexGateway:
   persistence:
     # -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
<span class="gd">-    # -- Size of persistent disk
</span><span class="gi">+    # -- Use emptyDir with ramdisk for storage. **Please note that all data in indexGateway will be lost on pod restart**
+    inMemory: false
+    # -- Size of persistent or memory disk
</span>     size: 10Gi
     # -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
<span class="err">
</span></code></pre></div></div> <h2 id="0555-1"> <a href="#0555-1" class="anchor-heading" aria-labelledby="0555-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.5 </h2> <p><strong>Release date:</strong> 2022-08-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into patch-1</li> <li>add support for in-memory disk in ingester and indexGateway</li> <li>Merge branch ‘main’ into loki-distributed-nginx-istio-patch</li> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-136"> <a href="#default-value-changes-136" class="anchor-heading" aria-labelledby="default-value-changes-136"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..7f250749 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -28,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -37,6 +47,8 @@</span> loki:
     tag: null
     # -- Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Common labels for all pods
+  podLabels: {}
</span>   # -- Common annotations for all pods
   podAnnotations: {}
   # -- The number of old ReplicaSets to retain to allow rollback
<span class="p">@@ -56,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -84,31 +100,28 @@</span> loki:
       chunk_encoding: snappy
       chunk_retain_period: 1m
       max_transfer_retries: 0
<span class="gi">+      wal:
+        dir: /var/loki/wal
</span> 
     limits_config:
       enforce_metric_name: false
       reject_old_samples: true
       reject_old_samples_max_age: 168h
       max_cache_freshness_per_query: 10m
<span class="gi">+      split_queries_by_interval: 15m
</span> 
<span class="gi">+    {{- if .Values.loki.schemaConfig}}
</span>     schema_config:
<span class="gd">-      configs:
-        - from: 2020-09-07
-          store: boltdb-shipper
-          object_store: filesystem
-          schema: v11
-          index:
-            prefix: loki_index_
-            period: 24h
-
</span><span class="gi">+    {{- toYaml .Values.loki.schemaConfig | nindent 2}}
+    {{- end}}
+    {{- if .Values.loki.storageConfig}}
</span>     storage_config:
<span class="gd">-      boltdb_shipper:
-        shared_store: filesystem
-        active_index_directory: /var/loki/index
-        cache_location: /var/loki/cache
-        cache_ttl: 168h
-      filesystem:
-        directory: /var/loki/chunks
</span><span class="gi">+    {{- if .Values.indexGateway.enabled}}
+    {{- $indexGatewayClient := dict "server_address" (printf "dns:///%s:9095" (include "loki.indexGatewayFullname" .)) }}
+    {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
+    {{- end}}
+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
+    {{- end}}
</span> 
     chunk_store_config:
       max_look_back_period: 0s
<span class="p">@@ -120,7 +133,6 @@</span> loki:
     query_range:
       align_queries_with_step: true
       max_retries: 5
<span class="gd">-      split_queries_by_interval: 15m
</span>       cache_results: true
       results_cache:
         cache:
<span class="p">@@ -152,6 +164,34 @@</span> loki:
       alertmanager_url: https://alertmanager.xx
       external_url: https://alertmanager.xx
 
<span class="gi">+  # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
+  schemaConfig:
+    configs:
+    - from: 2020-09-07
+      store: boltdb-shipper
+      object_store: filesystem
+      schema: v11
+      index:
+        prefix: loki_index_
+        period: 24h
+
+  # -- Check https://grafana.com/docs/loki/latest/configuration/#storage_config for more info on how to configure storages
+  storageConfig:
+    boltdb_shipper:
+      shared_store: filesystem
+      active_index_directory: /var/loki/index
+      cache_location: /var/loki/cache
+      cache_ttl: 168h
+    filesystem:
+      directory: /var/loki/chunks
+# -- Uncomment to configure each storage individually
+#   azure: {}
+#   gcs: {}
+#   s3: {}
+#   boltdb: {}
+
+  # -- Structured loki configuration, takes precedence over `loki.config`, `loki.schemaConfig`, `loki.storageConfig`
+  structuredConfig: {}
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -167,8 +207,10 @@</span> serviceAccount:
 
 # RBAC configuration
 rbac:
<span class="gd">-  # -- If enabled, a PodSecurityPolicy is created
</span><span class="gi">+  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp.
</span>   pspEnabled: false
<span class="gi">+  # -- For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to use the SecurityContextConstraints.
+  sccEnabled: false
</span> 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="p">@@ -189,6 +231,12 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
+  # --ServiceMonitor will add labels from the service to the Prometheus metric
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec
+  targetLabels: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="p">@@ -217,6 +265,8 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="p">@@ -228,6 +278,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Labels for ingestor service
<span class="p">@@ -244,26 +296,24 @@</span> ingester:
   extraVolumes: []
   # -- Resource requests and limits for the ingester
   resources: {}
<span class="gi">+  # -- Containers to add to the ingester pods
+  extraContainers: []
</span>   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.ingesterSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
-    podAntiAffinity:
-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "loki.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
-      preferredDuringSchedulingIgnoredDuringExecution:
-        - weight: 100
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: {}
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -284,6 +334,17 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -293,6 +354,8 @@</span> distributor:
     tag: null
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Labels for distributor service
<span class="p">@@ -309,6 +372,8 @@</span> distributor:
   extraVolumes: []
   # -- Resource requests and limits for the distributor
   resources: {}
<span class="gi">+  # -- Containers to add to the distributor pods
+  extraContainers: []
</span>   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -336,6 +401,17 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -345,6 +421,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Labels for querier service
<span class="p">@@ -361,6 +439,8 @@</span> querier:
   extraVolumes: []
   # -- Resource requests and limits for the querier
   resources: {}
<span class="gi">+  # -- Containers to add to the querier pods
+  extraContainers: []
</span>   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -383,6 +463,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -399,6 +481,17 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -408,6 +501,8 @@</span> queryFrontend:
     tag: null
   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for query-frontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Labels for query-frontend service
<span class="p">@@ -424,6 +519,8 @@</span> queryFrontend:
   extraVolumes: []
   # -- Resource requests and limits for the query-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the query-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -460,6 +557,8 @@</span> tableManager:
     tag: null
   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
<span class="gi">+  # -- Labels for table-manager pods
+  podLabels: {}
</span>   # -- Annotations for table-manager pods
   podAnnotations: {}
   # -- Labels for table-manager service
<span class="p">@@ -476,6 +575,8 @@</span> tableManager:
   extraVolumes: []
   # -- Resource requests and limits for the table-manager
   resources: {}
<span class="gi">+  # -- Containers to add to the table-manager pods
+  extraContainers: []
</span>   # -- Grace period to allow the table-manager to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -499,14 +600,60 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gd">-  # -- See `kubectl explain deployment.spec.strategy` for more
-  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span><span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
+  # -- See `kubectl explain deployment.spec.strategy` for more,
+  # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span>   deploymentStrategy:
     type: RollingUpdate
   image:
<span class="p">@@ -520,6 +667,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="p">@@ -547,6 +696,8 @@</span> gateway:
     allowPrivilegeEscalation: false
   # -- Resource requests and limits for the gateway
   resources: {}
<span class="gi">+  # -- Containers to add to the gateway pods
+  extraContainers: []
</span>   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -569,6 +720,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -581,6 +734,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="p">@@ -590,7 +745,9 @@</span> gateway:
     # -- Specifies whether an ingress for the gateway should be created
     enabled: false
     # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
<span class="gd">-    # ingressClassName: nginx
</span><span class="gi">+    # For example: `ingressClassName: nginx`
+    ingressClassName: ''
+
</span>     # -- Annotations for the gateway ingress
     annotations: {}
     # -- Hosts configuration for the gateway ingress
<span class="p">@@ -616,6 +773,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -627,8 +785,14 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -637,6 +801,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -656,12 +822,29 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -681,31 +864,57 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
+          }
+
+          # Ruler
+          location ~ /prometheus/api/v1/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /prometheus/api/v1/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -727,8 +936,12 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Specify the compactor affinity
+  affinity: {}
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="p">@@ -743,6 +956,8 @@</span> compactor:
   extraVolumes: []
   # -- Resource requests and limits for the compactor
   resources: {}
<span class="gi">+  # -- Containers to add to the compactor pods
+  extraContainers: []
</span>   # -- Grace period to allow the compactor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Node selector for compactor pods
<span class="p">@@ -777,6 +992,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: Deployment
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -788,6 +1005,8 @@</span> ruler:
     tag: null
   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for ruler pods
   podAnnotations: {}
   # -- Labels for ruler service
<span class="p">@@ -804,6 +1023,8 @@</span> ruler:
   extraVolumes: []
   # -- Resource requests and limits for the ruler
   resources: {}
<span class="gi">+  # -- Containers to add to the ruler pods
+  extraContainers: []
</span>   # -- Grace period to allow the ruler to shutdown before it is killed
   terminationGracePeriodSeconds: 300
   # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -826,8 +1047,10 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="p">@@ -904,7 +1127,85 @@</span> ruler:
     #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
     #           for: 2m
 
<span class="gi">+# Configuration for the index-gateway
+indexGateway:
+  # -- Specifies whether the index-gateway should be enabled
+  enabled: false
+  # -- Number of replicas for the index-gateway
+  replicas: 1
+  image:
+    # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the index-gateway image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the index-gateway image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for index-gateway pods
+  priorityClassName: null
+  # -- Labels for index-gateway pods
+  podLabels: {}
+  # -- Annotations for index-gateway pods
+  podAnnotations: {}
+  # -- Labels for index-gateway service
+  serviceLabels: {}
+  # -- Additional CLI args for the index-gateway
+  extraArgs: []
+  # -- Environment variables to add to the index-gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the index-gateway pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the index-gateway pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the index-gateway pods
+  extraVolumes: []
+  # -- Resource requests and limits for the index-gateway
+  resources: {}
+  # -- Containers to add to the index-gateway pods
+  extraContainers: []
+  # -- Grace period to allow the index-gateway to shutdown before it is killed.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.indexGatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for index-gateway pods
+  nodeSelector: {}
+  # -- Tolerations for index-gateway pods
+  tolerations: []
+  persistence:
+    # -- Enable creating PVCs which is required when using boltdb-shipper
+    enabled: false
+    # -- Size of persistent disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+
</span> memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -914,6 +1215,8 @@</span> memcached:
     tag: 1.6.7-alpine
     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
</span>   # -- The SecurityContext for memcached pods
   podSecurityContext:
     fsGroup: 11211
<span class="p">@@ -927,7 +1230,10 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gd">-
</span><span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="p">@@ -941,8 +1247,17 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached-exporter pods
+  podLabels: {}
</span>   # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+  # -- The SecurityContext for memcachedExporter containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="p">@@ -951,6 +1266,8 @@</span> memcachedChunks:
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-chunks pods
+  podLabels: {}
</span>   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
   # -- Labels for memcached-chunks service
<span class="p">@@ -964,6 +1281,8 @@</span> memcachedChunks:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-chunks
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-chunks pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-chunks to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -994,6 +1313,8 @@</span> memcachedFrontend:
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-frontend pods
+  podLabels: {}
</span>   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
   # -- Labels for memcached-frontend service
<span class="p">@@ -1007,6 +1328,8 @@</span> memcachedFrontend:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1037,6 +1360,8 @@</span> memcachedIndexQueries:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-queries pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
   # -- Labels for memcached-index-queries service
<span class="p">@@ -1050,6 +1375,8 @@</span> memcachedIndexQueries:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-queries
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-queries pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-queries to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1080,6 +1407,8 @@</span> memcachedIndexWrites:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-writes pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
   # -- Labels for memcached-index-writes service
<span class="p">@@ -1093,6 +1422,8 @@</span> memcachedIndexWrites:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-writes
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-writes pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-writes to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0554-1"> <a href="#0554-1" class="anchor-heading" aria-labelledby="0554-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.4 </h2> <p><strong>Release date:</strong> 2022-08-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart.yaml and update README.md</li> </ul> <h3 id="default-value-changes-137"> <a href="#default-value-changes-137" class="anchor-heading" aria-labelledby="default-value-changes-137"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0361"> <a href="#0361" class="anchor-heading" aria-labelledby="0361"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.1 </h2> <p><strong>Release date:</strong> 2022-08-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/loki-distributed/templates/compactor/deployment-compactor.yaml</li> <li>Merge branch ‘main’ into add-topologySpreadConstraints</li> </ul> <h3 id="default-value-changes-138"> <a href="#default-value-changes-138" class="anchor-heading" aria-labelledby="default-value-changes-138"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..24134f6e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -39,6 +39,8 @@</span> loki:
     pullPolicy: IfNotPresent
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -226,6 +228,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Annotations for ingester pods
<span class="p">@@ -291,6 +295,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Annotations for distributor pods
<span class="p">@@ -343,6 +349,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Annotations for querier pods
<span class="p">@@ -406,6 +414,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="p">@@ -458,6 +468,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Annotations for table-manager pods
<span class="p">@@ -725,6 +737,8 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Annotations for compactor pods
<span class="p">@@ -786,6 +800,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Annotations for ruler pods
<span class="err">
</span></code></pre></div></div> <h2 id="0553"> <a href="#0553" class="anchor-heading" aria-labelledby="0553"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.3 </h2> <p><strong>Release date:</strong> 2022-08-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into deprecated-validity</li> <li>Merge branch ‘main’ into add-servicemonitor-targetlabels</li> </ul> <h3 id="default-value-changes-139"> <a href="#default-value-changes-139" class="anchor-heading" aria-labelledby="default-value-changes-139"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c33b2771..1ae7279e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -139,7 +139,7 @@</span> loki:
           enable_fifocache: true
           fifocache:
             max_size_items: 1024
<span class="gd">-            validity: 24h
</span><span class="gi">+            ttl: 24h
</span> 
     frontend_worker:
       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="p">@@ -234,6 +234,9 @@</span> serviceMonitor:
   # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
   # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
   metricRelabelings: []
<span class="gi">+  # --ServiceMonitor will add labels from the service to the Prometheus metric
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec
+  targetLabels: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0552"> <a href="#0552" class="anchor-heading" aria-labelledby="0552"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.2 </h2> <p><strong>Release date:</strong> 2022-08-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart.yaml and update README.md</li> </ul> <h3 id="default-value-changes-140"> <a href="#default-value-changes-140" class="anchor-heading" aria-labelledby="default-value-changes-140"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0551"> <a href="#0551" class="anchor-heading" aria-labelledby="0551"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.1 </h2> <p><strong>Release date:</strong> 2022-08-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed-nginx-istio-patch</li> <li>Merge branch ‘main’ into patch-1</li> </ul> <h3 id="default-value-changes-141"> <a href="#default-value-changes-141" class="anchor-heading" aria-labelledby="default-value-changes-141"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..3206fe58 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -28,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -37,6 +47,8 @@</span> loki:
     tag: null
     # -- Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Common labels for all pods
+  podLabels: {}
</span>   # -- Common annotations for all pods
   podAnnotations: {}
   # -- The number of old ReplicaSets to retain to allow rollback
<span class="p">@@ -56,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -84,31 +100,28 @@</span> loki:
       chunk_encoding: snappy
       chunk_retain_period: 1m
       max_transfer_retries: 0
<span class="gi">+      wal:
+        dir: /var/loki/wal
</span> 
     limits_config:
       enforce_metric_name: false
       reject_old_samples: true
       reject_old_samples_max_age: 168h
       max_cache_freshness_per_query: 10m
<span class="gi">+      split_queries_by_interval: 15m
</span> 
<span class="gi">+    {{- if .Values.loki.schemaConfig}}
</span>     schema_config:
<span class="gd">-      configs:
-        - from: 2020-09-07
-          store: boltdb-shipper
-          object_store: filesystem
-          schema: v11
-          index:
-            prefix: loki_index_
-            period: 24h
-
</span><span class="gi">+    {{- toYaml .Values.loki.schemaConfig | nindent 2}}
+    {{- end}}
+    {{- if .Values.loki.storageConfig}}
</span>     storage_config:
<span class="gd">-      boltdb_shipper:
-        shared_store: filesystem
-        active_index_directory: /var/loki/index
-        cache_location: /var/loki/cache
-        cache_ttl: 168h
-      filesystem:
-        directory: /var/loki/chunks
</span><span class="gi">+    {{- if .Values.indexGateway.enabled}}
+    {{- $indexGatewayClient := dict "server_address" (printf "dns:///%s:9095" (include "loki.indexGatewayFullname" .)) }}
+    {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
+    {{- end}}
+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
+    {{- end}}
</span> 
     chunk_store_config:
       max_look_back_period: 0s
<span class="p">@@ -120,7 +133,6 @@</span> loki:
     query_range:
       align_queries_with_step: true
       max_retries: 5
<span class="gd">-      split_queries_by_interval: 15m
</span>       cache_results: true
       results_cache:
         cache:
<span class="p">@@ -152,6 +164,34 @@</span> loki:
       alertmanager_url: https://alertmanager.xx
       external_url: https://alertmanager.xx
 
<span class="gi">+  # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
+  schemaConfig:
+    configs:
+    - from: 2020-09-07
+      store: boltdb-shipper
+      object_store: filesystem
+      schema: v11
+      index:
+        prefix: loki_index_
+        period: 24h
+
+  # -- Check https://grafana.com/docs/loki/latest/configuration/#storage_config for more info on how to configure storages
+  storageConfig:
+    boltdb_shipper:
+      shared_store: filesystem
+      active_index_directory: /var/loki/index
+      cache_location: /var/loki/cache
+      cache_ttl: 168h
+    filesystem:
+      directory: /var/loki/chunks
+# -- Uncomment to configure each storage individually
+#   azure: {}
+#   gcs: {}
+#   s3: {}
+#   boltdb: {}
+
+  # -- Structured loki configuration, takes precedence over `loki.config`, `loki.schemaConfig`, `loki.storageConfig`
+  structuredConfig: {}
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -167,8 +207,10 @@</span> serviceAccount:
 
 # RBAC configuration
 rbac:
<span class="gd">-  # -- If enabled, a PodSecurityPolicy is created
</span><span class="gi">+  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp.
</span>   pspEnabled: false
<span class="gi">+  # -- For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to use the SecurityContextConstraints.
+  sccEnabled: false
</span> 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="p">@@ -189,6 +231,9 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="p">@@ -217,6 +262,8 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="p">@@ -228,6 +275,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Labels for ingestor service
<span class="p">@@ -244,6 +293,8 @@</span> ingester:
   extraVolumes: []
   # -- Resource requests and limits for the ingester
   resources: {}
<span class="gi">+  # -- Containers to add to the ingester pods
+  extraContainers: []
</span>   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
<span class="p">@@ -284,6 +335,17 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -293,6 +355,8 @@</span> distributor:
     tag: null
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Labels for distributor service
<span class="p">@@ -309,6 +373,8 @@</span> distributor:
   extraVolumes: []
   # -- Resource requests and limits for the distributor
   resources: {}
<span class="gi">+  # -- Containers to add to the distributor pods
+  extraContainers: []
</span>   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -336,6 +402,17 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -345,6 +422,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Labels for querier service
<span class="p">@@ -361,6 +440,8 @@</span> querier:
   extraVolumes: []
   # -- Resource requests and limits for the querier
   resources: {}
<span class="gi">+  # -- Containers to add to the querier pods
+  extraContainers: []
</span>   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -383,6 +464,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -399,6 +482,17 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -408,6 +502,8 @@</span> queryFrontend:
     tag: null
   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for query-frontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Labels for query-frontend service
<span class="p">@@ -424,6 +520,8 @@</span> queryFrontend:
   extraVolumes: []
   # -- Resource requests and limits for the query-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the query-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -460,6 +558,8 @@</span> tableManager:
     tag: null
   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
<span class="gi">+  # -- Labels for table-manager pods
+  podLabels: {}
</span>   # -- Annotations for table-manager pods
   podAnnotations: {}
   # -- Labels for table-manager service
<span class="p">@@ -476,6 +576,8 @@</span> tableManager:
   extraVolumes: []
   # -- Resource requests and limits for the table-manager
   resources: {}
<span class="gi">+  # -- Containers to add to the table-manager pods
+  extraContainers: []
</span>   # -- Grace period to allow the table-manager to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -499,14 +601,60 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gd">-  # -- See `kubectl explain deployment.spec.strategy` for more
-  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span><span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
+  # -- See `kubectl explain deployment.spec.strategy` for more,
+  # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span>   deploymentStrategy:
     type: RollingUpdate
   image:
<span class="p">@@ -520,6 +668,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="p">@@ -547,6 +697,8 @@</span> gateway:
     allowPrivilegeEscalation: false
   # -- Resource requests and limits for the gateway
   resources: {}
<span class="gi">+  # -- Containers to add to the gateway pods
+  extraContainers: []
</span>   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -569,6 +721,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -581,6 +735,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="p">@@ -590,7 +746,9 @@</span> gateway:
     # -- Specifies whether an ingress for the gateway should be created
     enabled: false
     # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
<span class="gd">-    # ingressClassName: nginx
</span><span class="gi">+    # For example: `ingressClassName: nginx`
+    ingressClassName: ''
+
</span>     # -- Annotations for the gateway ingress
     annotations: {}
     # -- Hosts configuration for the gateway ingress
<span class="p">@@ -616,6 +774,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -627,8 +786,14 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -637,6 +802,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -656,12 +823,29 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -681,31 +865,57 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
+          }
+
+          # Ruler
+          location ~ /prometheus/api/v1/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /prometheus/api/v1/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
+            proxy_http_version 1.1;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -727,6 +937,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Labels for compactor service
<span class="p">@@ -743,6 +955,8 @@</span> compactor:
   extraVolumes: []
   # -- Resource requests and limits for the compactor
   resources: {}
<span class="gi">+  # -- Containers to add to the compactor pods
+  extraContainers: []
</span>   # -- Grace period to allow the compactor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Node selector for compactor pods
<span class="p">@@ -777,6 +991,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: Deployment
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -788,6 +1004,8 @@</span> ruler:
     tag: null
   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for ruler pods
   podAnnotations: {}
   # -- Labels for ruler service
<span class="p">@@ -804,6 +1022,8 @@</span> ruler:
   extraVolumes: []
   # -- Resource requests and limits for the ruler
   resources: {}
<span class="gi">+  # -- Containers to add to the ruler pods
+  extraContainers: []
</span>   # -- Grace period to allow the ruler to shutdown before it is killed
   terminationGracePeriodSeconds: 300
   # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -826,8 +1046,10 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="p">@@ -904,7 +1126,85 @@</span> ruler:
     #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
     #           for: 2m
 
<span class="gi">+# Configuration for the index-gateway
+indexGateway:
+  # -- Specifies whether the index-gateway should be enabled
+  enabled: false
+  # -- Number of replicas for the index-gateway
+  replicas: 1
+  image:
+    # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the index-gateway image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the index-gateway image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for index-gateway pods
+  priorityClassName: null
+  # -- Labels for index-gateway pods
+  podLabels: {}
+  # -- Annotations for index-gateway pods
+  podAnnotations: {}
+  # -- Labels for index-gateway service
+  serviceLabels: {}
+  # -- Additional CLI args for the index-gateway
+  extraArgs: []
+  # -- Environment variables to add to the index-gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the index-gateway pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the index-gateway pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the index-gateway pods
+  extraVolumes: []
+  # -- Resource requests and limits for the index-gateway
+  resources: {}
+  # -- Containers to add to the index-gateway pods
+  extraContainers: []
+  # -- Grace period to allow the index-gateway to shutdown before it is killed.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.indexGatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for index-gateway pods
+  nodeSelector: {}
+  # -- Tolerations for index-gateway pods
+  tolerations: []
+  persistence:
+    # -- Enable creating PVCs which is required when using boltdb-shipper
+    enabled: false
+    # -- Size of persistent disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+
</span> memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -914,6 +1214,8 @@</span> memcached:
     tag: 1.6.7-alpine
     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
</span>   # -- The SecurityContext for memcached pods
   podSecurityContext:
     fsGroup: 11211
<span class="p">@@ -927,7 +1229,10 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gd">-
</span><span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="p">@@ -941,8 +1246,17 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached-exporter pods
+  podLabels: {}
</span>   # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+  # -- The SecurityContext for memcachedExporter containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="p">@@ -951,6 +1265,8 @@</span> memcachedChunks:
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-chunks pods
+  podLabels: {}
</span>   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
   # -- Labels for memcached-chunks service
<span class="p">@@ -964,6 +1280,8 @@</span> memcachedChunks:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-chunks
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-chunks pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-chunks to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -994,6 +1312,8 @@</span> memcachedFrontend:
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-frontend pods
+  podLabels: {}
</span>   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
   # -- Labels for memcached-frontend service
<span class="p">@@ -1007,6 +1327,8 @@</span> memcachedFrontend:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1037,6 +1359,8 @@</span> memcachedIndexQueries:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-queries pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
   # -- Labels for memcached-index-queries service
<span class="p">@@ -1050,6 +1374,8 @@</span> memcachedIndexQueries:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-queries
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-queries pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-queries to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1080,6 +1406,8 @@</span> memcachedIndexWrites:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-writes pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
   # -- Labels for memcached-index-writes service
<span class="p">@@ -1093,6 +1421,8 @@</span> memcachedIndexWrites:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-writes
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-writes pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-writes to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0552-1"> <a href="#0552-1" class="anchor-heading" aria-labelledby="0552-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.2 </h2> <p><strong>Release date:</strong> 2022-08-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump again.</li> </ul> <h3 id="default-value-changes-142"> <a href="#default-value-changes-142" class="anchor-heading" aria-labelledby="default-value-changes-142"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0361-1"> <a href="#0361-1" class="anchor-heading" aria-labelledby="0361-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.1 </h2> <p><strong>Release date:</strong> 2022-08-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart.yaml, update values.yaml and README.md</li> <li>bump version</li> </ul> <h3 id="default-value-changes-143"> <a href="#default-value-changes-143" class="anchor-heading" aria-labelledby="default-value-changes-143"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..8ad18507 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -729,6 +729,8 @@</span> compactor:
   priorityClassName: null
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Specify the compactor affinity
+  affinity: {}
</span>   # -- Labels for compactor service
   serviceLabels: {}
   # -- Additional CLI args for the compactor
<span class="err">
</span></code></pre></div></div> <h2 id="0551-1"> <a href="#0551-1" class="anchor-heading" aria-labelledby="0551-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.1 </h2> <p><strong>Release date:</strong> 2022-08-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into deprecated-validity</li> </ul> <h3 id="default-value-changes-144"> <a href="#default-value-changes-144" class="anchor-heading" aria-labelledby="default-value-changes-144"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c184803f..d3728bda 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -464,6 +464,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -599,6 +601,39 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="p">@@ -686,6 +721,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -735,6 +772,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -753,6 +791,7 @@</span> gateway:
     initialDelaySeconds: 30
   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -824,11 +863,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -848,21 +889,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -993,6 +1038,8 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using recording rules
     enabled: false
<span class="p">@@ -1176,6 +1223,8 @@</span> memcached:
     allowPrivilegeEscalation: false
   # -- Common annotations for all memcached services
   serviceAnnotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="p">@@ -1193,6 +1242,13 @@</span> memcachedExporter:
   podLabels: {}
   # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+  # -- The SecurityContext for memcachedExporter containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0541"> <a href="#0541" class="anchor-heading" aria-labelledby="0541"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.54.1 </h2> <p><strong>Release date:</strong> 2022-08-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart.yaml version and update README.md</li> <li>Update statefulset-ingester.yaml</li> <li>Update deployment-ingester.yaml</li> <li>Merge branch ‘main’ into add-topologySpreadConstraints</li> <li>Update Chart.yaml and README.md</li> </ul> <h3 id="default-value-changes-145"> <a href="#default-value-changes-145" class="anchor-heading" aria-labelledby="default-value-changes-145"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..c184803f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -63,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -130,7 +139,7 @@</span> loki:
           enable_fifocache: true
           fifocache:
             max_size_items: 1024
<span class="gd">-            validity: 24h
</span><span class="gi">+            ttl: 24h
</span> 
     frontend_worker:
       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="p">@@ -737,6 +746,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -747,6 +761,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -766,6 +782,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="p">@@ -782,7 +800,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -1119,6 +1141,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -1143,6 +1174,8 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0551-2"> <a href="#0551-2" class="anchor-heading" aria-labelledby="0551-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.1 </h2> <p><strong>Release date:</strong> 2022-08-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump Chart.yaml and README.md</li> </ul> <h3 id="default-value-changes-146"> <a href="#default-value-changes-146" class="anchor-heading" aria-labelledby="default-value-changes-146"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..0a21cfe5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -290,22 +290,18 @@</span> ingester:
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gi">+  # -- topologySpread for ingester pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Defaults to allow skew no more then 1 node per AZ
+  topologySpreadConstraints: |
+    - maxSkew: 1
+      topologyKey: failure-domain.beta.kubernetes.io/zone
+      whenUnsatisfiable: ScheduleAnyway
+      labelSelector:
+        matchLabels:
+          {{- include "loki.ingesterSelectorLabels" . | nindent 6 }}
</span>   # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
   # @default -- Hard node and soft zone anti-affinity
<span class="gd">-  affinity: |
-    podAntiAffinity:
-      requiredDuringSchedulingIgnoredDuringExecution:
-        - labelSelector:
-            matchLabels:
-              {{- include "loki.ingesterSelectorLabels" . | nindent 10 }}
-          topologyKey: kubernetes.io/hostname
-      preferredDuringSchedulingIgnoredDuringExecution:
-        - weight: 100
-          podAffinityTerm:
-            labelSelector:
-              matchLabels:
-                {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
-            topologyKey: failure-domain.beta.kubernetes.io/zone
</span><span class="gi">+  affinity: {}
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="err">
</span></code></pre></div></div> <h2 id="0550"> <a href="#0550" class="anchor-heading" aria-labelledby="0550"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.55.0 </h2> <p><strong>Release date:</strong> 2022-08-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Allow to set a container securityContext for memcached-exporter</li> <li>bump version</li> </ul> <h3 id="default-value-changes-147"> <a href="#default-value-changes-147" class="anchor-heading" aria-labelledby="default-value-changes-147"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 4e76a017..217a4a1a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1242,6 +1242,13 @@</span> memcachedExporter:
   podLabels: {}
   # -- Memcached Exporter resource requests and limits
   resources: {}
<span class="gi">+  # -- The SecurityContext for memcachedExporter containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0542"> <a href="#0542" class="anchor-heading" aria-labelledby="0542"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.54.2 </h2> <p><strong>Release date:</strong> 2022-08-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into add-servicemonitor-targetlabels</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-148"> <a href="#default-value-changes-148" class="anchor-heading" aria-labelledby="default-value-changes-148"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 5b4f4de4..87f35339 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -467,6 +467,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -722,6 +724,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -771,6 +775,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -789,6 +794,7 @@</span> gateway:
     initialDelaySeconds: 30
   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -860,11 +866,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -884,21 +892,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -1029,6 +1041,8 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using recording rules
     enabled: false
<span class="p">@@ -1212,6 +1226,8 @@</span> memcached:
     allowPrivilegeEscalation: false
   # -- Common annotations for all memcached services
   serviceAnnotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0534"> <a href="#0534" class="anchor-heading" aria-labelledby="0534"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.4 </h2> <p><strong>Release date:</strong> 2022-08-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Update statefulset-querier.yaml</li> <li>Update values.yaml</li> <li>Merge branch ‘main’ into feat/add-dns-config-support</li> </ul> <h3 id="default-value-changes-149"> <a href="#default-value-changes-149" class="anchor-heading" aria-labelledby="default-value-changes-149"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2105f029..5b4f4de4 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -234,6 +234,9 @@</span> serviceMonitor:
   # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
   # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
   metricRelabelings: []
<span class="gi">+  # --ServiceMonitor will add labels from the service to the Prometheus metric
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec
+  targetLabels: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0541-1"> <a href="#0541-1" class="anchor-heading" aria-labelledby="0541-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.54.1 </h2> <p><strong>Release date:</strong> 2022-07-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump Chart.yaml version</li> <li>Update README.md and values.yaml comment</li> </ul> <h3 id="default-value-changes-150"> <a href="#default-value-changes-150" class="anchor-heading" aria-labelledby="default-value-changes-150"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2105f029..4f964550 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -464,6 +464,8 @@</span> querier:
   nodeSelector: {}
   # -- Tolerations for querier pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for querier pods
+  dnsConfig: { }
</span>   persistence:
     # -- Enable creating PVCs for the querier cache
     enabled: false
<span class="p">@@ -719,6 +721,8 @@</span> gateway:
   nodeSelector: {}
   # -- Tolerations for gateway pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for gateway pods
+  dnsConfig: {}
</span>   # Gateway service configuration
   service:
     # -- Port of the gateway service
<span class="p">@@ -768,6 +772,7 @@</span> gateway:
     # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
     # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
     # high CPU load.
<span class="gi">+    # @default -- See values.yaml
</span>     htpasswd: &gt;-
       {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
<span class="p">@@ -786,6 +791,7 @@</span> gateway:
     initialDelaySeconds: 30
   nginxConfig:
     # -- NGINX log format
<span class="gi">+    # @default -- See values.yaml
</span>     logFormat: |-
       main '$remote_addr - $remote_user [$time_local]  $status '
               '"$request" $body_bytes_sent "$http_referer" '
<span class="p">@@ -1026,6 +1032,8 @@</span> ruler:
   nodeSelector: {}
   # -- Tolerations for ruler pods
   tolerations: []
<span class="gi">+  # -- DNSConfig for ruler pods
+  dnsConfig: {}
</span>   persistence:
     # -- Enable creating PVCs which is required when using recording rules
     enabled: false
<span class="err">
</span></code></pre></div></div> <h2 id="0540"> <a href="#0540" class="anchor-heading" aria-labelledby="0540"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.54.0 </h2> <p><strong>Release date:</strong> 2022-07-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add optional appProtocol to memcached services</li> <li>Update README.md</li> <li>Merge branch ‘main’ into nginx-proxypass-use-var</li> <li>Update README.md</li> <li>Update Chart.yaml</li> <li>:memo: Chart to v0.53.3</li> </ul> <h3 id="default-value-changes-151"> <a href="#default-value-changes-151" class="anchor-heading" aria-labelledby="default-value-changes-151"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2105f029..b0fe9e84 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -857,11 +857,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -881,21 +883,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -1209,6 +1215,8 @@</span> memcached:
     allowPrivilegeEscalation: false
   # -- Common annotations for all memcached services
   serviceAnnotations: {}
<span class="gi">+  # -- Adds the appProtocol field to the memcached services. This allows memcached to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0533"> <a href="#0533" class="anchor-heading" aria-labelledby="0533"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.3 </h2> <p><strong>Release date:</strong> 2022-07-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>:bookmark: Bump chart to v0.53.3</li> <li>:memo: Add targetLabels doc</li> <li>Fix templates end</li> <li>Add comment</li> <li>Update default value for targetLabels</li> </ul> <h3 id="default-value-changes-152"> <a href="#default-value-changes-152" class="anchor-heading" aria-labelledby="default-value-changes-152"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2105f029..5b4f4de4 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -234,6 +234,9 @@</span> serviceMonitor:
   # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
   # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
   metricRelabelings: []
<span class="gi">+  # --ServiceMonitor will add labels from the service to the Prometheus metric
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec
+  targetLabels: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0532"> <a href="#0532" class="anchor-heading" aria-labelledby="0532"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.2 </h2> <p><strong>Release date:</strong> 2022-07-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add targetLabels list</li> <li>Add DNSConfig support to loki-distributed chart components</li> </ul> <h3 id="default-value-changes-153"> <a href="#default-value-changes-153" class="anchor-heading" aria-labelledby="default-value-changes-153"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0540-1"> <a href="#0540-1" class="anchor-heading" aria-labelledby="0540-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.54.0 </h2> <p><strong>Release date:</strong> 2022-07-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>bump version</li> </ul> <h3 id="default-value-changes-154"> <a href="#default-value-changes-154" class="anchor-heading" aria-labelledby="default-value-changes-154"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2105f029..d347c278 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -731,6 +731,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0532-1"> <a href="#0532-1" class="anchor-heading" aria-labelledby="0532-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.2 </h2> <p><strong>Release date:</strong> 2022-07-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.1&amp;color=success" alt="AppVersion: 2.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> updated loki release version to 2.6.1 and bumped version of the chart</li> </ul> <h3 id="default-value-changes-155"> <a href="#default-value-changes-155" class="anchor-heading" aria-labelledby="default-value-changes-155"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0531"> <a href="#0531" class="anchor-heading" aria-labelledby="0531"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.1 </h2> <p><strong>Release date:</strong> 2022-07-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed-fix-netpol-typo</li> </ul> <h3 id="default-value-changes-156"> <a href="#default-value-changes-156" class="anchor-heading" aria-labelledby="default-value-changes-156"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0530"> <a href="#0530" class="anchor-heading" aria-labelledby="0530"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.0 </h2> <p><strong>Release date:</strong> 2022-07-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed/1459-add-a-pure-ingress-option</li> <li>Added conditional statement to the remaining templates and set maxUnavailable to null on values.yaml</li> <li>Added conditional statement to the template</li> <li>Default maxUnavailable to null in values.yaml</li> <li>Removed static value</li> <li>Added maxUnavailble parameter to the remaining pdb templates</li> </ul> <h3 id="default-value-changes-157"> <a href="#default-value-changes-157" class="anchor-heading" aria-labelledby="default-value-changes-157"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..2105f029 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -63,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -590,6 +599,39 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="p">@@ -737,6 +779,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -747,6 +794,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -766,6 +815,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="p">@@ -782,7 +833,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -1119,6 +1174,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -1143,6 +1207,8 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0484-1"> <a href="#0484-1" class="anchor-heading" aria-labelledby="0484-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.4 </h2> <p><strong>Release date:</strong> 2022-06-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Allow to set maxUnavailable=0 so it does not prevent karpneter from evicting the loki pods when scaling down the nodes</li> </ul> <h3 id="default-value-changes-158"> <a href="#default-value-changes-158" class="anchor-heading" aria-labelledby="default-value-changes-158"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..ec7b455d 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -306,6 +306,8 @@</span> ingester:
               matchLabels:
                 {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for ingester pods
   nodeSelector: {}
   # -- Tolerations for ingester pods
<span class="p">@@ -384,6 +386,8 @@</span> distributor:
               matchLabels:
                 {{- include "loki.distributorSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for distributor pods
   nodeSelector: {}
   # -- Tolerations for distributor pods
<span class="p">@@ -451,6 +455,8 @@</span> querier:
               matchLabels:
                 {{- include "loki.querierSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for querier pods
   nodeSelector: {}
   # -- Tolerations for querier pods
<span class="p">@@ -529,6 +535,8 @@</span> queryFrontend:
               matchLabels:
                 {{- include "loki.queryFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for query-frontend pods
   nodeSelector: {}
   # -- Tolerations for query-frontend pods
<span class="p">@@ -675,6 +683,8 @@</span> gateway:
             topologyKey: failure-domain.beta.kubernetes.io/zone
   # -- Node selector for gateway pods
   nodeSelector: {}
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Tolerations for gateway pods
   tolerations: []
   # Gateway service configuration
<span class="p">@@ -967,6 +977,8 @@</span> ruler:
               matchLabels:
                 {{- include "loki.rulerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for ruler pods
   nodeSelector: {}
   # -- Tolerations for ruler pods
<span class="p">@@ -1102,6 +1114,8 @@</span> indexGateway:
               matchLabels:
                 {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gi">+  # Pod Disruption Budget maxUnavailable
+  maxUnavailable: 0
</span>   # -- Node selector for index-gateway pods
   nodeSelector: {}
   # -- Tolerations for index-gateway pods
<span class="err">
</span></code></pre></div></div> <h2 id="0530-1"> <a href="#0530-1" class="anchor-heading" aria-labelledby="0530-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.53.0 </h2> <p><strong>Release date:</strong> 2022-07-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Correcting CI test failures</li> <li>Merge branch ‘main’ into nginx-proxypass-use-var</li> </ul> <h3 id="default-value-changes-159"> <a href="#default-value-changes-159" class="anchor-heading" aria-labelledby="default-value-changes-159"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..f0d1d93c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -590,6 +590,39 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0521"> <a href="#0521" class="anchor-heading" aria-labelledby="0521"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.52.1 </h2> <p><strong>Release date:</strong> 2022-07-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> fix netpol template typo</li> </ul> <h3 id="default-value-changes-160"> <a href="#default-value-changes-160" class="anchor-heading" aria-labelledby="default-value-changes-160"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0520"> <a href="#0520" class="anchor-heading" aria-labelledby="0520"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.52.0 </h2> <p><strong>Release date:</strong> 2022-07-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>use ttl to replace deprecated validity</li> </ul> <h3 id="default-value-changes-161"> <a href="#default-value-changes-161" class="anchor-heading" aria-labelledby="default-value-changes-161"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 847490ea..c184803f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -139,7 +139,7 @@</span> loki:
           enable_fifocache: true
           fifocache:
             max_size_items: 1024
<span class="gd">-            validity: 24h
</span><span class="gi">+            ttl: 24h
</span> 
     frontend_worker:
       frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="err">
</span></code></pre></div></div> <h2 id="0521-1"> <a href="#0521-1" class="anchor-heading" aria-labelledby="0521-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.52.1 </h2> <p><strong>Release date:</strong> 2022-07-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> </ul> <h3 id="default-value-changes-162"> <a href="#default-value-changes-162" class="anchor-heading" aria-labelledby="default-value-changes-162"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 847490ea..02e920ee 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -698,6 +698,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0520-1"> <a href="#0520-1" class="anchor-heading" aria-labelledby="0520-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.52.0 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.6.0&amp;color=success" alt="AppVersion: 2.6.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>[loki-canary] updated loki release version to 2.6.0 and bumped version of the chart</li> </ul> <h3 id="default-value-changes-163"> <a href="#default-value-changes-163" class="anchor-heading" aria-labelledby="default-value-changes-163"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0513"> <a href="#0513" class="anchor-heading" aria-labelledby="0513"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.51.3 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into nginx-proxypass-use-var</li> <li>Merge branch ‘main’ into loki-distr-readme</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-164"> <a href="#default-value-changes-164" class="anchor-heading" aria-labelledby="default-value-changes-164"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 260949e1..fb875f7e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -68,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -778,6 +782,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="p">@@ -818,11 +824,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -842,21 +850,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="p">@@ -1168,6 +1180,8 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0512"> <a href="#0512" class="anchor-heading" aria-labelledby="0512"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.51.2 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-165"> <a href="#default-value-changes-165" class="anchor-heading" aria-labelledby="default-value-changes-165"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0491"> <a href="#0491" class="anchor-heading" aria-labelledby="0491"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.1 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update README.md.gotmpl</li> </ul> <h3 id="default-value-changes-166"> <a href="#default-value-changes-166" class="anchor-heading" aria-labelledby="default-value-changes-166"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0511"> <a href="#0511" class="anchor-heading" aria-labelledby="0511"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.51.1 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into fix/loki-distributed-proxy-http_1.1</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-167"> <a href="#default-value-changes-167" class="anchor-heading" aria-labelledby="default-value-changes-167"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a84af091..847490ea 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -63,6 +68,10 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -737,6 +746,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -747,6 +761,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -784,7 +800,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -1121,6 +1141,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -1145,6 +1174,8 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0486"> <a href="#0486" class="anchor-heading" aria-labelledby="0486"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.6 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> </ul> <h3 id="default-value-changes-168"> <a href="#default-value-changes-168" class="anchor-heading" aria-labelledby="default-value-changes-168"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0485"> <a href="#0485" class="anchor-heading" aria-labelledby="0485"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.5 </h2> <p><strong>Release date:</strong> 2022-07-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.1&amp;color=success" alt="AppVersion: 2.5.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>resolve conflicts and bump version</li> </ul> <h3 id="default-value-changes-169"> <a href="#default-value-changes-169" class="anchor-heading" aria-labelledby="default-value-changes-169"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..a84af091 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -766,6 +766,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0511-1"> <a href="#0511-1" class="anchor-heading" aria-labelledby="0511-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.51.1 </h2> <p><strong>Release date:</strong> 2022-07-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into nginx-proxypass-use-var</li> </ul> <h3 id="default-value-changes-170"> <a href="#default-value-changes-170" class="anchor-heading" aria-labelledby="default-value-changes-170"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 1b482ba1..59931e77 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -822,11 +822,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -846,21 +848,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="err">
</span></code></pre></div></div> <h2 id="0510"> <a href="#0510" class="anchor-heading" aria-labelledby="0510"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.51.0 </h2> <p><strong>Release date:</strong> 2022-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add service annotations to loki and memcached</li> <li>Add <code class="language-plaintext highlighter-rouge">with</code> on <code class="language-plaintext highlighter-rouge">loadBalancerIP</code>
</li> </ul> <h3 id="default-value-changes-171"> <a href="#default-value-changes-171" class="anchor-heading" aria-labelledby="default-value-changes-171"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 919940eb..1b482ba1 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -70,6 +70,8 @@</span> loki:
   existingSecretForConfig: ""
   # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
   appProtocol: ""
<span class="gi">+  # -- Common annotations for all loki services
+  serviceAnnotations: {}
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -1170,6 +1172,8 @@</span> memcached:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Common annotations for all memcached services
+  serviceAnnotations: {}
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0501"> <a href="#0501" class="anchor-heading" aria-labelledby="0501"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.50.1 </h2> <p><strong>Release date:</strong> 2022-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart version and README</li> </ul> <h3 id="default-value-changes-172"> <a href="#default-value-changes-172" class="anchor-heading" aria-labelledby="default-value-changes-172"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0500"> <a href="#0500" class="anchor-heading" aria-labelledby="0500"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.50.0 </h2> <p><strong>Release date:</strong> 2022-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>resolve conflicts</li> </ul> <h3 id="default-value-changes-173"> <a href="#default-value-changes-173" class="anchor-heading" aria-labelledby="default-value-changes-173"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index aef15617..2128e3cc 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -68,6 +68,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -759,6 +761,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -794,7 +798,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0491-1"> <a href="#0491-1" class="anchor-heading" aria-labelledby="0491-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.1 </h2> <p><strong>Release date:</strong> 2022-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use <code class="language-plaintext highlighter-rouge">with</code> instead <code class="language-plaintext highlighter-rouge">if</code>
</li> </ul> <h3 id="default-value-changes-174"> <a href="#default-value-changes-174" class="anchor-heading" aria-labelledby="default-value-changes-174"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 219c36d5..aef15617 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -694,6 +694,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0501-1"> <a href="#0501-1" class="anchor-heading" aria-labelledby="0501-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.50.1 </h2> <p><strong>Release date:</strong> 2022-07-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use variables to specify address in nginx proxy_pass directive to re-resolve domain names when TTLs expire</li> </ul> <h3 id="default-value-changes-175"> <a href="#default-value-changes-175" class="anchor-heading" aria-labelledby="default-value-changes-175"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 919940eb..dc9ac4aa 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -820,11 +820,13 @@</span> gateway:
           }
 
           location = /api/prom/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_push_backend:3100$request_uri;
</span>           }
 
           location = /api/prom/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
<span class="p">@@ -844,21 +846,25 @@</span> gateway:
           }
 
           location ~ /api/prom/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $api_prom_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $api_prom_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/push {
<span class="gd">-            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_push_backend http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_push_backend:3100$request_uri;
</span>           }
 
           location = /loki/api/v1/tail {
<span class="gd">-            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_v1_tail_backend http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_v1_tail_backend:3100$request_uri;
</span>             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
           }
 
           location ~ /loki/api/.* {
<span class="gd">-            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+            set $loki_api_backend http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }};
+            proxy_pass       $loki_api_backend:3100$request_uri;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="err">
</span></code></pre></div></div> <h2 id="0500-1"> <a href="#0500-1" class="anchor-heading" aria-labelledby="0500-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.50.0 </h2> <p><strong>Release date:</strong> 2022-07-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge pull request #1549 from jdgeisler/main</li> <li>Update README.md</li> <li>Update README.md</li> <li>Merge branch ‘main’ into loki-distr-readme</li> </ul> <h3 id="default-value-changes-176"> <a href="#default-value-changes-176" class="anchor-heading" aria-labelledby="default-value-changes-176"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..919940eb 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -28,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -37,6 +47,8 @@</span> loki:
     tag: null
     # -- Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Common labels for all pods
+  podLabels: {}
</span>   # -- Common annotations for all pods
   podAnnotations: {}
   # -- The number of old ReplicaSets to retain to allow rollback
<span class="p">@@ -56,6 +68,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -84,31 +98,28 @@</span> loki:
       chunk_encoding: snappy
       chunk_retain_period: 1m
       max_transfer_retries: 0
<span class="gi">+      wal:
+        dir: /var/loki/wal
</span> 
     limits_config:
       enforce_metric_name: false
       reject_old_samples: true
       reject_old_samples_max_age: 168h
       max_cache_freshness_per_query: 10m
<span class="gi">+      split_queries_by_interval: 15m
</span> 
<span class="gi">+    {{- if .Values.loki.schemaConfig}}
</span>     schema_config:
<span class="gd">-      configs:
-        - from: 2020-09-07
-          store: boltdb-shipper
-          object_store: filesystem
-          schema: v11
-          index:
-            prefix: loki_index_
-            period: 24h
-
</span><span class="gi">+    {{- toYaml .Values.loki.schemaConfig | nindent 2}}
+    {{- end}}
+    {{- if .Values.loki.storageConfig}}
</span>     storage_config:
<span class="gd">-      boltdb_shipper:
-        shared_store: filesystem
-        active_index_directory: /var/loki/index
-        cache_location: /var/loki/cache
-        cache_ttl: 168h
-      filesystem:
-        directory: /var/loki/chunks
</span><span class="gi">+    {{- if .Values.indexGateway.enabled}}
+    {{- $indexGatewayClient := dict "server_address" (printf "dns:///%s:9095" (include "loki.indexGatewayFullname" .)) }}
+    {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
+    {{- end}}
+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
+    {{- end}}
</span> 
     chunk_store_config:
       max_look_back_period: 0s
<span class="p">@@ -120,7 +131,6 @@</span> loki:
     query_range:
       align_queries_with_step: true
       max_retries: 5
<span class="gd">-      split_queries_by_interval: 15m
</span>       cache_results: true
       results_cache:
         cache:
<span class="p">@@ -152,6 +162,34 @@</span> loki:
       alertmanager_url: https://alertmanager.xx
       external_url: https://alertmanager.xx
 
<span class="gi">+  # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
+  schemaConfig:
+    configs:
+    - from: 2020-09-07
+      store: boltdb-shipper
+      object_store: filesystem
+      schema: v11
+      index:
+        prefix: loki_index_
+        period: 24h
+
+  # -- Check https://grafana.com/docs/loki/latest/configuration/#storage_config for more info on how to configure storages
+  storageConfig:
+    boltdb_shipper:
+      shared_store: filesystem
+      active_index_directory: /var/loki/index
+      cache_location: /var/loki/cache
+      cache_ttl: 168h
+    filesystem:
+      directory: /var/loki/chunks
+# -- Uncomment to configure each storage individually
+#   azure: {}
+#   gcs: {}
+#   s3: {}
+#   boltdb: {}
+
+  # -- Structured loki configuration, takes precedence over `loki.config`, `loki.schemaConfig`, `loki.storageConfig`
+  structuredConfig: {}
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -167,8 +205,10 @@</span> serviceAccount:
 
 # RBAC configuration
 rbac:
<span class="gd">-  # -- If enabled, a PodSecurityPolicy is created
</span><span class="gi">+  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp.
</span>   pspEnabled: false
<span class="gi">+  # -- For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to use the SecurityContextConstraints.
+  sccEnabled: false
</span> 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="p">@@ -189,6 +229,9 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="p">@@ -217,6 +260,8 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="p">@@ -228,6 +273,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Labels for ingestor service
<span class="p">@@ -244,6 +291,8 @@</span> ingester:
   extraVolumes: []
   # -- Resource requests and limits for the ingester
   resources: {}
<span class="gi">+  # -- Containers to add to the ingester pods
+  extraContainers: []
</span>   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
<span class="p">@@ -284,6 +333,17 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -293,6 +353,8 @@</span> distributor:
     tag: null
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Labels for distributor service
<span class="p">@@ -309,6 +371,8 @@</span> distributor:
   extraVolumes: []
   # -- Resource requests and limits for the distributor
   resources: {}
<span class="gi">+  # -- Containers to add to the distributor pods
+  extraContainers: []
</span>   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -336,6 +400,17 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -345,6 +420,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Labels for querier service
<span class="p">@@ -361,6 +438,8 @@</span> querier:
   extraVolumes: []
   # -- Resource requests and limits for the querier
   resources: {}
<span class="gi">+  # -- Containers to add to the querier pods
+  extraContainers: []
</span>   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -399,6 +478,17 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -408,6 +498,8 @@</span> queryFrontend:
     tag: null
   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for query-frontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Labels for query-frontend service
<span class="p">@@ -424,6 +516,8 @@</span> queryFrontend:
   extraVolumes: []
   # -- Resource requests and limits for the query-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the query-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -460,6 +554,8 @@</span> tableManager:
     tag: null
   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
<span class="gi">+  # -- Labels for table-manager pods
+  podLabels: {}
</span>   # -- Annotations for table-manager pods
   podAnnotations: {}
   # -- Labels for table-manager service
<span class="p">@@ -476,6 +572,8 @@</span> tableManager:
   extraVolumes: []
   # -- Resource requests and limits for the table-manager
   resources: {}
<span class="gi">+  # -- Containers to add to the table-manager pods
+  extraContainers: []
</span>   # -- Grace period to allow the table-manager to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -505,8 +603,21 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gd">-  # -- See `kubectl explain deployment.spec.strategy` for more
-  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span><span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
+  # -- See `kubectl explain deployment.spec.strategy` for more,
+  # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span>   deploymentStrategy:
     type: RollingUpdate
   image:
<span class="p">@@ -520,6 +631,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="p">@@ -547,6 +660,8 @@</span> gateway:
     allowPrivilegeEscalation: false
   # -- Resource requests and limits for the gateway
   resources: {}
<span class="gi">+  # -- Containers to add to the gateway pods
+  extraContainers: []
</span>   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -590,7 +705,9 @@</span> gateway:
     # -- Specifies whether an ingress for the gateway should be created
     enabled: false
     # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
<span class="gd">-    # ingressClassName: nginx
</span><span class="gi">+    # For example: `ingressClassName: nginx`
+    ingressClassName: ''
+
</span>     # -- Annotations for the gateway ingress
     annotations: {}
     # -- Hosts configuration for the gateway ingress
<span class="p">@@ -627,6 +744,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -637,6 +759,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -658,10 +782,25 @@</span> gateway:
 
         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -690,6 +829,20 @@</span> gateway:
             proxy_set_header Connection "upgrade";
           }
 
<span class="gi">+          # Ruler
+          location ~ /prometheus/api/v1/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /prometheus/api/v1/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
</span>           location ~ /api/prom/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
           }
<span class="p">@@ -727,6 +880,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Labels for compactor service
<span class="p">@@ -743,6 +898,8 @@</span> compactor:
   extraVolumes: []
   # -- Resource requests and limits for the compactor
   resources: {}
<span class="gi">+  # -- Containers to add to the compactor pods
+  extraContainers: []
</span>   # -- Grace period to allow the compactor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Node selector for compactor pods
<span class="p">@@ -777,6 +934,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: Deployment
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -788,6 +947,8 @@</span> ruler:
     tag: null
   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for ruler pods
   podAnnotations: {}
   # -- Labels for ruler service
<span class="p">@@ -804,6 +965,8 @@</span> ruler:
   extraVolumes: []
   # -- Resource requests and limits for the ruler
   resources: {}
<span class="gi">+  # -- Containers to add to the ruler pods
+  extraContainers: []
</span>   # -- Grace period to allow the ruler to shutdown before it is killed
   terminationGracePeriodSeconds: 300
   # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -827,7 +990,7 @@</span> ruler:
   # -- Tolerations for ruler pods
   tolerations: []
   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="p">@@ -904,7 +1067,85 @@</span> ruler:
     #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
     #           for: 2m
 
<span class="gi">+# Configuration for the index-gateway
+indexGateway:
+  # -- Specifies whether the index-gateway should be enabled
+  enabled: false
+  # -- Number of replicas for the index-gateway
+  replicas: 1
+  image:
+    # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the index-gateway image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the index-gateway image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for index-gateway pods
+  priorityClassName: null
+  # -- Labels for index-gateway pods
+  podLabels: {}
+  # -- Annotations for index-gateway pods
+  podAnnotations: {}
+  # -- Labels for index-gateway service
+  serviceLabels: {}
+  # -- Additional CLI args for the index-gateway
+  extraArgs: []
+  # -- Environment variables to add to the index-gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the index-gateway pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the index-gateway pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the index-gateway pods
+  extraVolumes: []
+  # -- Resource requests and limits for the index-gateway
+  resources: {}
+  # -- Containers to add to the index-gateway pods
+  extraContainers: []
+  # -- Grace period to allow the index-gateway to shutdown before it is killed.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.indexGatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for index-gateway pods
+  nodeSelector: {}
+  # -- Tolerations for index-gateway pods
+  tolerations: []
+  persistence:
+    # -- Enable creating PVCs which is required when using boltdb-shipper
+    enabled: false
+    # -- Size of persistent disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+
</span> memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="p">@@ -914,6 +1155,8 @@</span> memcached:
     tag: 1.6.7-alpine
     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
</span>   # -- The SecurityContext for memcached pods
   podSecurityContext:
     fsGroup: 11211
<span class="p">@@ -928,7 +1171,6 @@</span> memcached:
         - ALL
     allowPrivilegeEscalation: false
 
<span class="gd">-
</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="p">@@ -941,6 +1183,8 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached-exporter pods
+  podLabels: {}
</span>   # -- Memcached Exporter resource requests and limits
   resources: {}
 
<span class="p">@@ -951,6 +1195,8 @@</span> memcachedChunks:
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-chunks pods
+  podLabels: {}
</span>   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
   # -- Labels for memcached-chunks service
<span class="p">@@ -964,6 +1210,8 @@</span> memcachedChunks:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-chunks
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-chunks pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-chunks to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -994,6 +1242,8 @@</span> memcachedFrontend:
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-frontend pods
+  podLabels: {}
</span>   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
   # -- Labels for memcached-frontend service
<span class="p">@@ -1007,6 +1257,8 @@</span> memcachedFrontend:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1037,6 +1289,8 @@</span> memcachedIndexQueries:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-queries pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
   # -- Labels for memcached-index-queries service
<span class="p">@@ -1050,6 +1304,8 @@</span> memcachedIndexQueries:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-queries
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-queries pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-queries to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1080,6 +1336,8 @@</span> memcachedIndexWrites:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-writes pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
   # -- Labels for memcached-index-writes service
<span class="p">@@ -1093,6 +1351,8 @@</span> memcachedIndexWrites:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-writes
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-writes pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-writes to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0491-2"> <a href="#0491-2" class="anchor-heading" aria-labelledby="0491-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.1 </h2> <p><strong>Release date:</strong> 2022-06-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>update readme</li> </ul> <h3 id="default-value-changes-177"> <a href="#default-value-changes-177" class="anchor-heading" aria-labelledby="default-value-changes-177"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0500-2"> <a href="#0500-2" class="anchor-heading" aria-labelledby="0500-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.50.0 </h2> <p><strong>Release date:</strong> 2022-06-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add optional appProtocol to memberlist svc</li> <li>Merge pull request #1272 from joemiller/nginx-resolver-config</li> </ul> <h3 id="default-value-changes-178"> <a href="#default-value-changes-178" class="anchor-heading" aria-labelledby="default-value-changes-178"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..32833dda 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -63,6 +68,8 @@</span> loki:
     allowPrivilegeEscalation: false
   # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
   existingSecretForConfig: ""
<span class="gi">+  # -- Adds the appProtocol field to the memberlist service. This allows memberlist to work with istio protocol selection. Ex: "http" or "tcp"
+  appProtocol: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -737,6 +744,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -1119,6 +1131,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="err">
</span></code></pre></div></div> <h2 id="0490"> <a href="#0490" class="anchor-heading" aria-labelledby="0490"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.0 </h2> <p><strong>Release date:</strong> 2022-06-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Prevent the top level ingress and gateway service from both being enabled.</li> </ul> <h3 id="default-value-changes-179"> <a href="#default-value-changes-179" class="anchor-heading" aria-labelledby="default-value-changes-179"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..f0d1d93c 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -590,6 +590,39 @@</span> tableManager:
   # -- Tolerations for table-manager pods
   tolerations: []
 
<span class="gi">+# Use either this ingress or the gateway, but not both at once.
+# If you enable this, make sure to disable the gateway.
+# You'll need to supply authn configuration for your ingress controller.
+ingress:
+  enabled: false
+#  ingressClassName: nginx
+  annotations: {}
+#    nginx.ingress.kubernetes.io/auth-type: basic
+#    nginx.ingress.kubernetes.io/auth-secret: loki-distributed-basic-auth
+#    nginx.ingress.kubernetes.io/auth-secret-type: auth-map
+#    nginx.ingress.kubernetes.io/configuration-snippet: |
+#      proxy_set_header X-Scope-OrgID $remote_user;
+  paths:
+    distributor:
+      - /api/prom/push
+      - /loki/api/v1/push
+    querier:
+      - /api/prom/tail
+      - /loki/api/v1/tail
+    query-frontend:
+      - /loki/api
+    ruler:
+      - /api/prom/rules
+      - /loki/api/v1/rules
+      - /prometheus/api/v1/rules
+      - /prometheus/api/v1/alerts
+  hosts:
+    - loki.example.com
+#  tls:
+#    - hosts:
+#       - loki.example.com
+#      secretName: loki-distributed-tls
+
</span> # Configuration for the gateway
 gateway:
   # -- Specifies whether the gateway should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0491-3"> <a href="#0491-3" class="anchor-heading" aria-labelledby="0491-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.1 </h2> <p><strong>Release date:</strong> 2022-06-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add param <code class="language-plaintext highlighter-rouge">loadBalancerSourceRanges</code> on gateway service</li> <li>Merge branch ‘main’ into loki-distributed-configure-liveness-probes</li> </ul> <h3 id="default-value-changes-180"> <a href="#default-value-changes-180" class="anchor-heading" aria-labelledby="default-value-changes-180"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 219c36d5..aef15617 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -694,6 +694,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Load balancer allow traffic from CIDR list if service type is LoadBalancer
+    loadBalancerSourceRanges: []
</span>     # -- Annotations for the gateway service
     annotations: {}
     # -- Labels for gateway service
<span class="err">
</span></code></pre></div></div> <h2 id="0490-1"> <a href="#0490-1" class="anchor-heading" aria-labelledby="0490-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.0 </h2> <p><strong>Release date:</strong> 2022-06-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Configure Loki liveness probes</li> <li>loki-distributed: update readme</li> </ul> <h3 id="default-value-changes-181"> <a href="#default-value-changes-181" class="anchor-heading" aria-labelledby="default-value-changes-181"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..219c36d5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -33,6 +33,11 @@</span> loki:
       port: http
     initialDelaySeconds: 30
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 300
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -737,6 +742,11 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gi">+  livenessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 30
</span>   nginxConfig:
     # -- NGINX log format
     logFormat: |-
<span class="p">@@ -1119,6 +1129,15 @@</span> indexGateway:
     storageClass: null
 
 memcached:
<span class="gi">+  readinessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 5
+    timeoutSeconds: 1
+  livenessProbe:
+    tcpSocket:
+      port: http
+    initialDelaySeconds: 10
</span>   image:
     # -- The Docker registry for the memcached
     registry: docker.io
<span class="err">
</span></code></pre></div></div> <h2 id="0486-1"> <a href="#0486-1" class="anchor-heading" aria-labelledby="0486-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.6 </h2> <p><strong>Release date:</strong> 2022-06-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update Chart.yaml</li> <li>Fix ignoring KubeVersion having platform versions</li> </ul> <h3 id="default-value-changes-182"> <a href="#default-value-changes-182" class="anchor-heading" aria-labelledby="default-value-changes-182"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0485-1"> <a href="#0485-1" class="anchor-heading" aria-labelledby="0485-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.5 </h2> <p><strong>Release date:</strong> 2022-06-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>By default nginx uses HTTP/1.0 for proxied requests : https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version</li> </ul> <h3 id="default-value-changes-183"> <a href="#default-value-changes-183" class="anchor-heading" aria-labelledby="default-value-changes-183"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..a84af091 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -766,6 +766,8 @@</span> gateway:
         uwsgi_temp_path       /tmp/uwsgi_temp;
         scgi_temp_path        /tmp/scgi_temp;
 
<span class="gi">+        proxy_http_version    1.1;
+
</span>         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
 
<span class="err">
</span></code></pre></div></div> <h2 id="0490-2"> <a href="#0490-2" class="anchor-heading" aria-labelledby="0490-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.0 </h2> <p><strong>Release date:</strong> 2022-06-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into nginx-resolver-config</li> </ul> <h3 id="default-value-changes-184"> <a href="#default-value-changes-184" class="anchor-heading" aria-labelledby="default-value-changes-184"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..5023f7d9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -747,6 +747,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -782,7 +784,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0485-2"> <a href="#0485-2" class="anchor-heading" aria-labelledby="0485-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.5 </h2> <p><strong>Release date:</strong> 2022-06-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use policy/v1 API for PodDisruptionBudgets in loki-distributed</li> <li>Add a pure ingress option to use instead of the gateway service</li> </ul> <h3 id="default-value-changes-185"> <a href="#default-value-changes-185" class="anchor-heading" aria-labelledby="default-value-changes-185"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0490-3"> <a href="#0490-3" class="anchor-heading" aria-labelledby="0490-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.0 </h2> <p><strong>Release date:</strong> 2022-05-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into nginx-resolver-config</li> </ul> <h3 id="default-value-changes-186"> <a href="#default-value-changes-186" class="anchor-heading" aria-labelledby="default-value-changes-186"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..5023f7d9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -747,6 +747,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -782,7 +784,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0484-2"> <a href="#0484-2" class="anchor-heading" aria-labelledby="0484-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.4 </h2> <p><strong>Release date:</strong> 2022-05-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Ensure querier is mounting data directory</li> <li>Update values.yaml</li> <li>Update deployment-ingester.yaml</li> </ul> <h3 id="default-value-changes-187"> <a href="#default-value-changes-187" class="anchor-heading" aria-labelledby="default-value-changes-187"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0483"> <a href="#0483" class="anchor-heading" aria-labelledby="0483"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.3 </h2> <p><strong>Release date:</strong> 2022-05-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update statefulset-ingester.yaml</li> </ul> <h3 id="default-value-changes-188"> <a href="#default-value-changes-188" class="anchor-heading" aria-labelledby="default-value-changes-188"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0490-4"> <a href="#0490-4" class="anchor-heading" aria-labelledby="0490-4"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.49.0 </h2> <p><strong>Release date:</strong> 2022-04-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(loki-distributed): new var gateway.nginxConfig.resolver</li> </ul> <h3 id="default-value-changes-189"> <a href="#default-value-changes-189" class="anchor-heading" aria-labelledby="default-value-changes-189"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 48060aa1..5023f7d9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -747,6 +747,8 @@</span> gateway:
     serverSnippet: ""
     # -- Allows appending custom configuration to the http block
     httpSnippet: ""
<span class="gi">+    # -- Allows overriding the DNS resolver address nginx will use.
+    resolver: ""
</span>     # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
     # @default -- See values.yaml
     file: |
<span class="p">@@ -782,7 +784,11 @@</span> gateway:
 
         sendfile     on;
         tcp_nopush   on;
<span class="gi">+        {{- if .Values.gateway.nginxConfig.resolver }}
+        resolver {{ .Values.gateway.nginxConfig.resolver }};
+        {{- else }}
</span>         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="gi">+        {{- end }}
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0483-1"> <a href="#0483-1" class="anchor-heading" aria-labelledby="0483-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.3 </h2> <p><strong>Release date:</strong> 2022-04-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump helm-docs version to 1.8.1</li> <li>chore(mimir-distributed): remove trailing whitespace</li> <li>fix(mimir-distributed): add legacy ruler endpoints</li> <li>remove whitespace</li> </ul> <h3 id="default-value-changes-190"> <a href="#default-value-changes-190" class="anchor-heading" aria-labelledby="default-value-changes-190"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 4ca413e5..48060aa1 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -698,7 +698,9 @@</span> gateway:
     # -- Specifies whether an ingress for the gateway should be created
     enabled: false
     # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
<span class="gd">-    # ingressClassName: nginx
</span><span class="gi">+    # For example: `ingressClassName: nginx`
+    ingressClassName: ''
+
</span>     # -- Annotations for the gateway ingress
     annotations: {}
     # -- Hosts configuration for the gateway ingress
<span class="p">@@ -809,6 +811,20 @@</span> gateway:
             proxy_set_header Connection "upgrade";
           }
 
<span class="gi">+          # Ruler
+          location ~ /prometheus/api/v1/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /prometheus/api/v1/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /api/prom/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
</span>           location ~ /api/prom/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
           }
<span class="p">@@ -826,13 +842,6 @@</span> gateway:
           location ~ /loki/api/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
           }
<span class="gd">-      
-          location ~ /prometheus/api/v1/alerts.* {
-            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-          }
-          location ~ /prometheus/api/v1/rules.* {
-            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-          }
</span> 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
           {{ . | nindent 4 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0482"> <a href="#0482" class="anchor-heading" aria-labelledby="0482"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.2 </h2> <p><strong>Release date:</strong> 2022-04-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(loki-distributed): proxy api calls to the Prometheus backend from the gateway</li> </ul> <h3 id="default-value-changes-191"> <a href="#default-value-changes-191" class="anchor-heading" aria-labelledby="default-value-changes-191"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b93c903a..4ca413e5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -826,6 +826,13 @@</span> gateway:
           location ~ /loki/api/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
           }
<span class="gi">+      
+          location ~ /prometheus/api/v1/alerts.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+          location ~ /prometheus/api/v1/rules.* {
+            proxy_pass       http://{{ include "loki.rulerFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
</span> 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
           {{ . | nindent 4 }}
<span class="err">
</span></code></pre></div></div> <h2 id="0481"> <a href="#0481" class="anchor-heading" aria-labelledby="0481"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.1 </h2> <p><strong>Release date:</strong> 2022-04-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add metricRelabelings to ServiceMonitors</li> <li>Fix cache-values CI config</li> <li>Move split queries config to limits section</li> <li>regenerate docs for latest version</li> </ul> <h3 id="default-value-changes-192"> <a href="#default-value-changes-192" class="anchor-heading" aria-labelledby="default-value-changes-192"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 7b352f9e..b93c903a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -99,6 +99,7 @@</span> loki:
       reject_old_samples: true
       reject_old_samples_max_age: 168h
       max_cache_freshness_per_query: 10m
<span class="gi">+      split_queries_by_interval: 15m
</span> 
     {{- if .Values.loki.schemaConfig}}
     schema_config:
<span class="p">@@ -123,7 +124,6 @@</span> loki:
     query_range:
       align_queries_with_step: true
       max_retries: 5
<span class="gd">-      split_queries_by_interval: 15m
</span>       cache_results: true
       results_cache:
         cache:
<span class="p">@@ -222,6 +222,9 @@</span> serviceMonitor:
   # -- ServiceMonitor relabel configs to apply to samples before scraping
   # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
   relabelings: []
<span class="gi">+  # -- ServiceMonitor metric relabel configs to apply to samples before ingestion
+  # https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#endpoint
+  metricRelabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0480"> <a href="#0480" class="anchor-heading" aria-labelledby="0480"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.48.0 </h2> <p><strong>Release date:</strong> 2022-04-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.5.0&amp;color=success" alt="AppVersion: 2.5.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>upgrade to loki version 2.5.0</li> <li>fix: exec helm docs</li> </ul> <h3 id="default-value-changes-193"> <a href="#default-value-changes-193" class="anchor-heading" aria-labelledby="default-value-changes-193"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0474"> <a href="#0474" class="anchor-heading" aria-labelledby="0474"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.47.4 </h2> <p><strong>Release date:</strong> 2022-04-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix: s3 example documentation in gotmpl, bump chart version</li> <li>Merge remote-tracking branch ‘upstream/main’ into main</li> </ul> <h3 id="default-value-changes-194"> <a href="#default-value-changes-194" class="anchor-heading" aria-labelledby="default-value-changes-194"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0473"> <a href="#0473" class="anchor-heading" aria-labelledby="0473"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.47.3 </h2> <p><strong>Release date:</strong> 2022-04-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version and update generated documentation</li> <li>Ensure ingester container name matches the component name</li> </ul> <h3 id="default-value-changes-195"> <a href="#default-value-changes-195" class="anchor-heading" aria-labelledby="default-value-changes-195"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0472"> <a href="#0472" class="anchor-heading" aria-labelledby="0472"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.47.2 </h2> <p><strong>Release date:</strong> 2022-04-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> bump new version for #1131</li> <li>Merge pull request #1131 from tkit/loki-distributed_index_gateway_client</li> <li>Fix loki-distributed metric duplication</li> </ul> <h3 id="default-value-changes-196"> <a href="#default-value-changes-196" class="anchor-heading" aria-labelledby="default-value-changes-196"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0471"> <a href="#0471" class="anchor-heading" aria-labelledby="0471"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.47.1 </h2> <p><strong>Release date:</strong> 2022-03-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into loki-distributed_index_gateway_client</li> </ul> <h3 id="default-value-changes-197"> <a href="#default-value-changes-197" class="anchor-heading" aria-labelledby="default-value-changes-197"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 5b9c9478..7b352f9e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -106,11 +106,11 @@</span> loki:
     {{- end}}
     {{- if .Values.loki.storageConfig}}
     storage_config:
<span class="gd">-    {{- toYaml .Values.loki.storageConfig | nindent 2}}
</span>     {{- if .Values.indexGateway.enabled}}
<span class="gd">-      index_gateway_client:
-        server_address: dns:///{{ include "loki.indexGatewayFullname" . }}:9095
</span><span class="gi">+    {{- $indexGatewayClient := dict "server_address" (printf "dns:///%s:9095" (include "loki.indexGatewayFullname" .)) }}
+    {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
</span>     {{- end}}
<span class="gi">+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
</span>     {{- end}}
 
     chunk_store_config:
<span class="err">
</span></code></pre></div></div> <h2 id="0470"> <a href="#0470" class="anchor-heading" aria-labelledby="0470"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.47.0 </h2> <p><strong>Release date:</strong> 2022-03-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(loki-distributed): add support for extraContainers like cortex</li> </ul> <h3 id="default-value-changes-198"> <a href="#default-value-changes-198" class="anchor-heading" aria-labelledby="default-value-changes-198"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b11f30bc..5b9c9478 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -281,6 +281,8 @@</span> ingester:
   extraVolumes: []
   # -- Resource requests and limits for the ingester
   resources: {}
<span class="gi">+  # -- Containers to add to the ingester pods
+  extraContainers: []
</span>   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
<span class="p">@@ -359,6 +361,8 @@</span> distributor:
   extraVolumes: []
   # -- Resource requests and limits for the distributor
   resources: {}
<span class="gi">+  # -- Containers to add to the distributor pods
+  extraContainers: []
</span>   # -- Grace period to allow the distributor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -424,6 +428,8 @@</span> querier:
   extraVolumes: []
   # -- Resource requests and limits for the querier
   resources: {}
<span class="gi">+  # -- Containers to add to the querier pods
+  extraContainers: []
</span>   # -- Grace period to allow the querier to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -500,6 +506,8 @@</span> queryFrontend:
   extraVolumes: []
   # -- Resource requests and limits for the query-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the query-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow the query-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -554,6 +562,8 @@</span> tableManager:
   extraVolumes: []
   # -- Resource requests and limits for the table-manager
   resources: {}
<span class="gi">+  # -- Containers to add to the table-manager pods
+  extraContainers: []
</span>   # -- Grace period to allow the table-manager to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -640,6 +650,8 @@</span> gateway:
     allowPrivilegeEscalation: false
   # -- Resource requests and limits for the gateway
   resources: {}
<span class="gi">+  # -- Containers to add to the gateway pods
+  extraContainers: []
</span>   # -- Grace period to allow the gateway to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -849,6 +861,8 @@</span> compactor:
   extraVolumes: []
   # -- Resource requests and limits for the compactor
   resources: {}
<span class="gi">+  # -- Containers to add to the compactor pods
+  extraContainers: []
</span>   # -- Grace period to allow the compactor to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Node selector for compactor pods
<span class="p">@@ -914,6 +928,8 @@</span> ruler:
   extraVolumes: []
   # -- Resource requests and limits for the ruler
   resources: {}
<span class="gi">+  # -- Containers to add to the ruler pods
+  extraContainers: []
</span>   # -- Grace period to allow the ruler to shutdown before it is killed
   terminationGracePeriodSeconds: 300
   # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1047,6 +1063,8 @@</span> indexGateway:
   extraVolumes: []
   # -- Resource requests and limits for the index-gateway
   resources: {}
<span class="gi">+  # -- Containers to add to the index-gateway pods
+  extraContainers: []
</span>   # -- Grace period to allow the index-gateway to shutdown before it is killed.
   terminationGracePeriodSeconds: 300
   # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1146,6 +1164,8 @@</span> memcachedChunks:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-chunks
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-chunks pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-chunks to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1191,6 +1211,8 @@</span> memcachedFrontend:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-frontend
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-frontend pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-frontend to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1236,6 +1258,8 @@</span> memcachedIndexQueries:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-queries
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-queries pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-queries to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
<span class="p">@@ -1281,6 +1305,8 @@</span> memcachedIndexWrites:
   extraEnvFrom: []
   # -- Resource requests and limits for memcached-index-writes
   resources: {}
<span class="gi">+  # -- Containers to add to the memcached-index-writes pods
+  extraContainers: []
</span>   # -- Grace period to allow memcached-index-writes to shutdown before it is killed
   terminationGracePeriodSeconds: 30
   # -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
<span class="err">
</span></code></pre></div></div> <h2 id="0465"> <a href="#0465" class="anchor-heading" aria-labelledby="0465"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.5 </h2> <p><strong>Release date:</strong> 2022-03-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Insert index_gateway_client into the correct position</li> <li>fix: s3 example documentation</li> <li>bumped version of loki-distributed helm chart to re-run release action</li> </ul> <h3 id="default-value-changes-199"> <a href="#default-value-changes-199" class="anchor-heading" aria-labelledby="default-value-changes-199"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b11f30bc..a08ef6f3 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -106,11 +106,11 @@</span> loki:
     {{- end}}
     {{- if .Values.loki.storageConfig}}
     storage_config:
<span class="gd">-    {{- toYaml .Values.loki.storageConfig | nindent 2}}
</span>     {{- if .Values.indexGateway.enabled}}
<span class="gd">-      index_gateway_client:
-        server_address: dns:///{{ include "loki.indexGatewayFullname" . }}:9095
</span><span class="gi">+    {{- $indexGatewayClient := dict "server_address" (printf "dns:///%s:9095" (include "loki.indexGatewayFullname" .)) }}
+    {{- $_ := set .Values.loki.storageConfig.boltdb_shipper "index_gateway_client" $indexGatewayClient }}
</span>     {{- end}}
<span class="gi">+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
</span>     {{- end}}
 
     chunk_store_config:
<span class="err">
</span></code></pre></div></div> <h2 id="0464"> <a href="#0464" class="anchor-heading" aria-labelledby="0464"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.4 </h2> <p><strong>Release date:</strong> 2022-02-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Allow setting scheme for memcached ServiceMonitor</li> <li>added missed property to README.md</li> </ul> <h3 id="default-value-changes-200"> <a href="#default-value-changes-200" class="anchor-heading" aria-labelledby="default-value-changes-200"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 7e7346d9..b11f30bc 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -198,8 +198,9 @@</span> serviceAccount:
 
 # RBAC configuration
 rbac:
<span class="gd">-  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp. For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to create the SecurityContextConstraints
</span><span class="gi">+  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp.
</span>   pspEnabled: false
<span class="gi">+  # -- For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to use the SecurityContextConstraints.
</span>   sccEnabled: false
 
 # ServiceMonitor configuration
<span class="err">
</span></code></pre></div></div> <h2 id="0463"> <a href="#0463" class="anchor-heading" aria-labelledby="0463"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.3 </h2> <p><strong>Release date:</strong> 2022-03-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>reverted changes in enterprise-logs chart and bumped version of loki-distributed chart</li> <li>Merge branch ‘main’ into add-OpenShift-Support-to-GEL</li> </ul> <h3 id="default-value-changes-201"> <a href="#default-value-changes-201" class="anchor-heading" aria-labelledby="default-value-changes-201"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c411473e..7e7346d9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -198,8 +198,9 @@</span> serviceAccount:
 
 # RBAC configuration
 rbac:
<span class="gd">-  # -- If enabled, a PodSecurityPolicy is created
</span><span class="gi">+  # -- If pspEnabled true, a PodSecurityPolicy is created for K8s that use psp. For OpenShift set pspEnabled to 'false' and sccEnabled to 'true' to create the SecurityContextConstraints
</span>   pspEnabled: false
<span class="gi">+  sccEnabled: false
</span> 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="err">
</span></code></pre></div></div> <h2 id="0462"> <a href="#0462" class="anchor-heading" aria-labelledby="0462"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.2 </h2> <p><strong>Release date:</strong> 2022-03-23</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump to 0.46.2 to redeploy chart</li> </ul> <h3 id="default-value-changes-202"> <a href="#default-value-changes-202" class="anchor-heading" aria-labelledby="default-value-changes-202"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0461"> <a href="#0461" class="anchor-heading" aria-labelledby="0461"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.1 </h2> <p><strong>Release date:</strong> 2022-03-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fixing statefulset configuration for Ruler</li> </ul> <h3 id="default-value-changes-203"> <a href="#default-value-changes-203" class="anchor-heading" aria-labelledby="default-value-changes-203"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0460"> <a href="#0460" class="anchor-heading" aria-labelledby="0460"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.46.0 </h2> <p><strong>Release date:</strong> 2022-03-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Making changes regarding review</li> <li>Update securitycontextconstraints.yaml</li> <li>Update rolebinding.yaml</li> <li>Update role.yaml</li> </ul> <h3 id="default-value-changes-204"> <a href="#default-value-changes-204" class="anchor-heading" aria-labelledby="default-value-changes-204"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3216f58f..c411473e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -876,6 +881,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: Deployment
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -928,7 +935,7 @@</span> ruler:
   # -- Tolerations for ruler pods
   tolerations: []
   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="err">
</span></code></pre></div></div> <h2 id="0440"> <a href="#0440" class="anchor-heading" aria-labelledby="0440"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.44.0 </h2> <p><strong>Release date:</strong> 2022-03-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update securitycontextconstraints.yaml</li> <li>Fixing Lint Code Base CI</li> </ul> <h3 id="default-value-changes-205"> <a href="#default-value-changes-205" class="anchor-heading" aria-labelledby="default-value-changes-205"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0452"> <a href="#0452" class="anchor-heading" aria-labelledby="0452"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.45.2 </h2> <p><strong>Release date:</strong> 2022-03-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version and generate new documentation</li> </ul> <h3 id="default-value-changes-206"> <a href="#default-value-changes-206" class="anchor-heading" aria-labelledby="default-value-changes-206"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3216f58f..30ad2f78 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -876,6 +881,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -928,7 +935,7 @@</span> ruler:
   # -- Tolerations for ruler pods
   tolerations: []
   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="err">
</span></code></pre></div></div> <h2 id="0440-1"> <a href="#0440-1" class="anchor-heading" aria-labelledby="0440-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.44.0 </h2> <p><strong>Release date:</strong> 2022-03-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update securitycontextconstraints.yaml</li> </ul> <h3 id="default-value-changes-207"> <a href="#default-value-changes-207" class="anchor-heading" aria-labelledby="default-value-changes-207"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0451"> <a href="#0451" class="anchor-heading" aria-labelledby="0451"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.45.1 </h2> <p><strong>Release date:</strong> 2022-03-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Allow to configure ruler as statefulset</li> <li>Update securitycontextconstraints.yaml</li> <li>Update rolebinding.yaml</li> <li>Update role.yaml</li> <li>Update securitycontextconstraints.yaml</li> <li>Update rolebinding.yaml</li> </ul> <h3 id="default-value-changes-208"> <a href="#default-value-changes-208" class="anchor-heading" aria-labelledby="default-value-changes-208"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3216f58f..30ad2f78 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="p">@@ -876,6 +881,8 @@</span> compactor:
 ruler:
   # -- Specifies whether the ruler should be enabled
   enabled: false
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ruler
   replicas: 1
   image:
<span class="p">@@ -928,7 +935,7 @@</span> ruler:
   # -- Tolerations for ruler pods
   tolerations: []
   persistence:
<span class="gd">-    # -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs which is required when using recording rules
</span>     enabled: false
     # -- Size of persistent disk
     size: 10Gi
<span class="err">
</span></code></pre></div></div> <h2 id="0440-2"> <a href="#0440-2" class="anchor-heading" aria-labelledby="0440-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.44.0 </h2> <p><strong>Release date:</strong> 2022-03-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update rolebinding.yaml</li> <li>helm-docs</li> </ul> <h3 id="default-value-changes-209"> <a href="#default-value-changes-209" class="anchor-heading" aria-labelledby="default-value-changes-209"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0451-1"> <a href="#0451-1" class="anchor-heading" aria-labelledby="0451-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.45.1 </h2> <p><strong>Release date:</strong> 2022-03-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki-distributed version updated to 0.45.1</li> <li>loki.rulerRulesDirName should be lower case</li> </ul> <h3 id="default-value-changes-210"> <a href="#default-value-changes-210" class="anchor-heading" aria-labelledby="default-value-changes-210"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0450"> <a href="#0450" class="anchor-heading" aria-labelledby="0450"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.45.0 </h2> <p><strong>Release date:</strong> 2021-11-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add in a controllerAnnotations value</li> <li>add back in serviceaccount.yaml</li> <li>Adding securitycontextconstraints.yaml which is OCPs version of podsecuritypolicy.yaml</li> <li>remove files that were wrong</li> <li>Files to support GEL with OCP</li> <li>securitycontextconstraints.yaml file that defines what a pod using the SCC can do. This is the SCC version of a podsecuritypolicy.yaml file</li> <li>Merge commit ‘77f4ed1e1a3c26ddebc8bee1f8e421a54e3f52e3’ into add-OpenShift-Support-to-GEL</li> <li>Update rolebinding.yaml</li> <li>Update role.yaml</li> </ul> <h3 id="default-value-changes-211"> <a href="#default-value-changes-211" class="anchor-heading" aria-labelledby="default-value-changes-211"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3216f58f..b762303e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -21,6 +21,11 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # -- If set, these annotations are added to all of the Kubernetes controllers
+  # (Deployments, StatefulSets, etc) that this chart launches. Use this to
+  # implement something like the "Wave" controller or another controller that
+  # is monitoring top level deployment resources.
+  annotations: {}
</span>   # Configures the readiness probe for all of the Loki pods
   readinessProbe:
     httpGet:
<span class="err">
</span></code></pre></div></div> <h2 id="0440-3"> <a href="#0440-3" class="anchor-heading" aria-labelledby="0440-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.44.0 </h2> <p><strong>Release date:</strong> 2022-01-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(loki-distributed): add pod labels</li> <li>Merge branch ‘main’ into loki-distributed-structured-config</li> </ul> <h3 id="default-value-changes-212"> <a href="#default-value-changes-212" class="anchor-heading" aria-labelledby="default-value-changes-212"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 127f85ab..3216f58f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -37,6 +37,8 @@</span> loki:
     tag: null
     # -- Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Common labels for all pods
+  podLabels: {}
</span>   # -- Common annotations for all pods
   podAnnotations: {}
   # -- The number of old ReplicaSets to retain to allow rollback
<span class="p">@@ -241,6 +243,8 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="p">@@ -252,6 +256,8 @@</span> ingester:
     tag: null
   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
<span class="gi">+  # -- Labels for ingester pods
+  podLabels: {}
</span>   # -- Annotations for ingester pods
   podAnnotations: {}
   # -- Labels for ingestor service
<span class="p">@@ -328,6 +334,8 @@</span> distributor:
     tag: null
   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for distributor pods
+  podLabels: {}
</span>   # -- Annotations for distributor pods
   podAnnotations: {}
   # -- Labels for distributor service
<span class="p">@@ -391,6 +399,8 @@</span> querier:
     tag: null
   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
<span class="gi">+  # -- Labels for querier pods
+  podLabels: {}
</span>   # -- Annotations for querier pods
   podAnnotations: {}
   # -- Labels for querier service
<span class="p">@@ -465,6 +475,8 @@</span> queryFrontend:
     tag: null
   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for query-frontend pods
+  podLabels: {}
</span>   # -- Annotations for query-frontend pods
   podAnnotations: {}
   # -- Labels for query-frontend service
<span class="p">@@ -517,6 +529,8 @@</span> tableManager:
     tag: null
   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
<span class="gi">+  # -- Labels for table-manager pods
+  podLabels: {}
</span>   # -- Annotations for table-manager pods
   podAnnotations: {}
   # -- Labels for table-manager service
<span class="p">@@ -575,8 +589,8 @@</span> gateway:
     targetCPUUtilizationPercentage: 60
     # -- Target memory utilisation percentage for the gateway
     targetMemoryUtilizationPercentage:
<span class="gd">-  # -- See `kubectl explain deployment.spec.strategy` for more
-  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span><span class="gi">+  # -- See `kubectl explain deployment.spec.strategy` for more,
+  # ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
</span>   deploymentStrategy:
     type: RollingUpdate
   image:
<span class="p">@@ -590,6 +604,8 @@</span> gateway:
     pullPolicy: IfNotPresent
   # -- The name of the PriorityClass for gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for gateway pods
+  podLabels: {}
</span>   # -- Annotations for gateway pods
   podAnnotations: {}
   # -- Additional CLI args for the gateway
<span class="p">@@ -808,6 +824,8 @@</span> compactor:
     tag: null
   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for compactor pods
   podAnnotations: {}
   # -- Labels for compactor service
<span class="p">@@ -869,6 +887,8 @@</span> ruler:
     tag: null
   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
<span class="gi">+  # -- Labels for compactor pods
+  podLabels: {}
</span>   # -- Annotations for ruler pods
   podAnnotations: {}
   # -- Labels for ruler service
<span class="p">@@ -1000,6 +1020,8 @@</span> indexGateway:
     tag: null
   # -- The name of the PriorityClass for index-gateway pods
   priorityClassName: null
<span class="gi">+  # -- Labels for index-gateway pods
+  podLabels: {}
</span>   # -- Annotations for index-gateway pods
   podAnnotations: {}
   # -- Labels for index-gateway service
<span class="p">@@ -1060,6 +1082,8 @@</span> memcached:
     tag: 1.6.7-alpine
     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached pods
+  podLabels: {}
</span>   # -- The SecurityContext for memcached pods
   podSecurityContext:
     fsGroup: 11211
<span class="p">@@ -1086,6 +1110,8 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Labels for memcached-exporter pods
+  podLabels: {}
</span>   # -- Memcached Exporter resource requests and limits
   resources: {}
 
<span class="p">@@ -1096,6 +1122,8 @@</span> memcachedChunks:
   replicas: 1
   # -- The name of the PriorityClass for memcached-chunks pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-chunks pods
+  podLabels: {}
</span>   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
   # -- Labels for memcached-chunks service
<span class="p">@@ -1139,6 +1167,8 @@</span> memcachedFrontend:
   replicas: 1
   # -- The name of the PriorityClass for memcached-frontend pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-frontend pods
+  podLabels: {}
</span>   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
   # -- Labels for memcached-frontend service
<span class="p">@@ -1182,6 +1212,8 @@</span> memcachedIndexQueries:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-queries pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-queries pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
   # -- Labels for memcached-index-queries service
<span class="p">@@ -1225,6 +1257,8 @@</span> memcachedIndexWrites:
   replicas: 1
   # -- The name of the PriorityClass for memcached-index-writes pods
   priorityClassName: null
<span class="gi">+  # -- Labels for memcached-index-writes pods
+  podLabels: {}
</span>   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
   # -- Labels for memcached-index-writes service
<span class="err">
</span></code></pre></div></div> <h2 id="0430"> <a href="#0430" class="anchor-heading" aria-labelledby="0430"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.43.0 </h2> <p><strong>Release date:</strong> 2022-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add loki.structuredConfig for structured config overrides</li> </ul> <h3 id="default-value-changes-213"> <a href="#default-value-changes-213" class="anchor-heading" aria-labelledby="default-value-changes-213"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e3c76480..127f85ab 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -174,6 +174,8 @@</span> loki:
 #   s3: {}
 #   boltdb: {}
 
<span class="gi">+  # -- Structured loki configuration, takes precedence over `loki.config`, `loki.schemaConfig`, `loki.storageConfig`
+  structuredConfig: {}
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="err">
</span></code></pre></div></div> <h2 id="0422"> <a href="#0422" class="anchor-heading" aria-labelledby="0422"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.42.2 </h2> <p><strong>Release date:</strong> 2022-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> added option to use replicaset for ingesters</li> </ul> <h3 id="default-value-changes-214"> <a href="#default-value-changes-214" class="anchor-heading" aria-labelledby="default-value-changes-214"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e3c76480..92ee62c4 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -239,6 +239,8 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gi">+  # -- Kind of deployment [StatefulSet/Deployment]
+  kind: StatefulSet
</span>   # -- Number of replicas for the ingester
   replicas: 1
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="0421"> <a href="#0421" class="anchor-heading" aria-labelledby="0421"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.42.1 </h2> <p><strong>Release date:</strong> 2022-01-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add tlsConfig to memcache serviceMonitor in loki-distribution chart</li> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-215"> <a href="#default-value-changes-215" class="anchor-heading" aria-labelledby="default-value-changes-215"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 168766d3..e3c76480 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -93,28 +93,18 @@</span> loki:
       reject_old_samples_max_age: 168h
       max_cache_freshness_per_query: 10m
 
<span class="gi">+    {{- if .Values.loki.schemaConfig}}
</span>     schema_config:
<span class="gd">-      configs:
-        - from: 2020-09-07
-          store: boltdb-shipper
-          object_store: filesystem
-          schema: v11
-          index:
-            prefix: loki_index_
-            period: 24h
-
</span><span class="gi">+    {{- toYaml .Values.loki.schemaConfig | nindent 2}}
+    {{- end}}
+    {{- if .Values.loki.storageConfig}}
</span>     storage_config:
<span class="gd">-      boltdb_shipper:
-        shared_store: filesystem
-        active_index_directory: /var/loki/index
-        cache_location: /var/loki/cache
-        cache_ttl: 168h
-        {{- if .Values.indexGateway.enabled }}
-        index_gateway_client:
-          server_address: dns:///{{ include "loki.indexGatewayFullname" . }}:9095
-        {{- end }}
-      filesystem:
-        directory: /var/loki/chunks
</span><span class="gi">+    {{- toYaml .Values.loki.storageConfig | nindent 2}}
+    {{- if .Values.indexGateway.enabled}}
+      index_gateway_client:
+        server_address: dns:///{{ include "loki.indexGatewayFullname" . }}:9095
+    {{- end}}
+    {{- end}}
</span> 
     chunk_store_config:
       max_look_back_period: 0s
<span class="p">@@ -158,6 +148,32 @@</span> loki:
       alertmanager_url: https://alertmanager.xx
       external_url: https://alertmanager.xx
 
<span class="gi">+  # -- Check https://grafana.com/docs/loki/latest/configuration/#schema_config for more info on how to configure schemas
+  schemaConfig:
+    configs:
+    - from: 2020-09-07
+      store: boltdb-shipper
+      object_store: filesystem
+      schema: v11
+      index:
+        prefix: loki_index_
+        period: 24h
+
+  # -- Check https://grafana.com/docs/loki/latest/configuration/#storage_config for more info on how to configure storages
+  storageConfig:
+    boltdb_shipper:
+      shared_store: filesystem
+      active_index_directory: /var/loki/index
+      cache_location: /var/loki/cache
+      cache_ttl: 168h
+    filesystem:
+      directory: /var/loki/chunks
+# -- Uncomment to configure each storage individually
+#   azure: {}
+#   gcs: {}
+#   s3: {}
+#   boltdb: {}
+
</span> serviceAccount:
   # -- Specifies whether a ServiceAccount should be created
   create: true
<span class="err">
</span></code></pre></div></div> <h2 id="0420"> <a href="#0420" class="anchor-heading" aria-labelledby="0420"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.42.0 </h2> <p><strong>Release date:</strong> 2022-01-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update version + description</li> <li>feat: <a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> allow configuring storage backend with chart values</li> </ul> <h3 id="default-value-changes-216"> <a href="#default-value-changes-216" class="anchor-heading" aria-labelledby="default-value-changes-216"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0410"> <a href="#0410" class="anchor-heading" aria-labelledby="0410"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.41.0 </h2> <p><strong>Release date:</strong> 2022-01-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.2&amp;color=success" alt="AppVersion: 2.4.2"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update chart version and docs</li> <li>Merge branch ‘main’ into main</li> <li>update to Loki 2.4.2</li> <li>Fix docs</li> <li>Merge branch ‘main’ into main</li> </ul> <h3 id="default-value-changes-217"> <a href="#default-value-changes-217" class="anchor-heading" aria-labelledby="default-value-changes-217"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0400"> <a href="#0400" class="anchor-heading" aria-labelledby="0400"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.40.0 </h2> <p><strong>Release date:</strong> 2022-01-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add description of the container name change in README.md.gotmpl, update chart version, run helm-docs</li> </ul> <h3 id="default-value-changes-218"> <a href="#default-value-changes-218" class="anchor-heading" aria-labelledby="default-value-changes-218"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0395"> <a href="#0395" class="anchor-heading" aria-labelledby="0395"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.5 </h2> <p><strong>Release date:</strong> 2022-01-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> <li>Merge branch ‘main’ into loki-distributed-delete-volume</li> <li>Fix automountServiceAccountToken for compactor</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Rename containers to fix panels from loki-mixin</li> </ul> <h3 id="default-value-changes-219"> <a href="#default-value-changes-219" class="anchor-heading" aria-labelledby="default-value-changes-219"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0394"> <a href="#0394" class="anchor-heading" aria-labelledby="0394"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.4 </h2> <p><strong>Release date:</strong> 2021-11-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Remove /var/loki volume mount from querier deployment</li> </ul> <h3 id="default-value-changes-220"> <a href="#default-value-changes-220" class="anchor-heading" aria-labelledby="default-value-changes-220"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0393"> <a href="#0393" class="anchor-heading" aria-labelledby="0393"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.3 </h2> <p><strong>Release date:</strong> 2021-11-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add ‘grpclb’ port to query-frontend service</li> </ul> <h3 id="default-value-changes-221"> <a href="#default-value-changes-221" class="anchor-heading" aria-labelledby="default-value-changes-221"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0392"> <a href="#0392" class="anchor-heading" aria-labelledby="0392"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.2 </h2> <p><strong>Release date:</strong> 2021-10-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Switch metric list order in HPAs</li> </ul> <h3 id="default-value-changes-222"> <a href="#default-value-changes-222" class="anchor-heading" aria-labelledby="default-value-changes-222"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0391"> <a href="#0391" class="anchor-heading" aria-labelledby="0391"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.1 </h2> <p><strong>Release date:</strong> 2021-11-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.1&amp;color=success" alt="AppVersion: 2.4.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki-distributed 2.4.1</li> <li>update CI with wal path</li> <li>get the wal config in the right place…</li> <li>add a wal directory now that wal is enabled by default.</li> </ul> <h3 id="default-value-changes-223"> <a href="#default-value-changes-223" class="anchor-heading" aria-labelledby="default-value-changes-223"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 26fc5170..168766d3 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -84,6 +84,8 @@</span> loki:
       chunk_encoding: snappy
       chunk_retain_period: 1m
       max_transfer_retries: 0
<span class="gi">+      wal:
+        dir: /var/loki/wal
</span> 
     limits_config:
       enforce_metric_name: false
<span class="err">
</span></code></pre></div></div> <h2 id="0390"> <a href="#0390" class="anchor-heading" aria-labelledby="0390"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.39.0 </h2> <p><strong>Release date:</strong> 2021-11-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.4.0&amp;color=success" alt="AppVersion: 2.4.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> release 0.39.0</li> <li>Fix readme</li> </ul> <h3 id="default-value-changes-224"> <a href="#default-value-changes-224" class="anchor-heading" aria-labelledby="default-value-changes-224"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0381"> <a href="#0381" class="anchor-heading" aria-labelledby="0381"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.38.1 </h2> <p><strong>Release date:</strong> 2021-10-12</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> <li>Merge remote-tracking branch ‘upstream/main’ into HEAD</li> <li>Merge branch ‘main’ into loki-distributed-compactor-tmp2</li> <li>Up minor version (also readme)</li> </ul> <h3 id="default-value-changes-225"> <a href="#default-value-changes-225" class="anchor-heading" aria-labelledby="default-value-changes-225"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0306d32a..26fc5170 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -542,6 +542,8 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogging: true
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -706,7 +708,18 @@</span> gateway:
 
         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogging }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="err">
</span></code></pre></div></div> <h2 id="0380"> <a href="#0380" class="anchor-heading" aria-labelledby="0380"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.38.0 </h2> <p><strong>Release date:</strong> 2021-10-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Up minor version</li> <li>Apply proposed changes</li> <li>Fix helm docs</li> <li>Add rw tmp folder for compactor</li> <li>Rename flag</li> <li>Update helm-docs</li> </ul> <h3 id="default-value-changes-226"> <a href="#default-value-changes-226" class="anchor-heading" aria-labelledby="default-value-changes-226"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0374"> <a href="#0374" class="anchor-heading" aria-labelledby="0374"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.4 </h2> <p><strong>Release date:</strong> 2021-09-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> </ul> <h3 id="default-value-changes-227"> <a href="#default-value-changes-227" class="anchor-heading" aria-labelledby="default-value-changes-227"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0373"> <a href="#0373" class="anchor-heading" aria-labelledby="0373"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.3 </h2> <p><strong>Release date:</strong> 2021-09-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>gateway: verboseLogging flag</li> </ul> <h3 id="default-value-changes-228"> <a href="#default-value-changes-228" class="anchor-heading" aria-labelledby="default-value-changes-228"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0306d32a..c03f1d2a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -542,6 +542,8 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- Enable logging of 2xx and 3xx HTTP requests
+  verboseLogs: false
</span>   autoscaling:
     # -- Enable autoscaling for the gateway
     enabled: false
<span class="p">@@ -706,7 +708,18 @@</span> gateway:
 
         default_type application/octet-stream;
         log_format   {{ .Values.gateway.nginxConfig.logFormat }}
<span class="gi">+
+        {{- if .Values.gateway.verboseLogs }}
</span>         access_log   /dev/stderr  main;
<span class="gi">+        {{- else }}
+
+        map $status $loggable {
+          ~^[23]  0;
+          default 1;
+        }
+        access_log   /dev/stderr  main  if=$loggable;
+        {{- end }}
+
</span>         sendfile     on;
         tcp_nopush   on;
         resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
<span class="err">
</span></code></pre></div></div> <h2 id="0374-1"> <a href="#0374-1" class="anchor-heading" aria-labelledby="0374-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.4 </h2> <p><strong>Release date:</strong> 2021-09-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update docs</li> <li>Fix conflicts</li> <li>Fix automountServiceAccountToken</li> </ul> <h3 id="default-value-changes-229"> <a href="#default-value-changes-229" class="anchor-heading" aria-labelledby="default-value-changes-229"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0373-1"> <a href="#0373-1" class="anchor-heading" aria-labelledby="0373-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.3 </h2> <p><strong>Release date:</strong> 2021-09-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add autoscaling support</li> <li>reverted PR #627 by removing the namespace declarations on all template files</li> </ul> <h3 id="default-value-changes-230"> <a href="#default-value-changes-230" class="anchor-heading" aria-labelledby="default-value-changes-230"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index fd65cc5b..0306d32a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -288,6 +288,17 @@</span> ingester:
 distributor:
   # -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the distributor
+    enabled: false
+    # -- Minimum autoscaling replicas for the distributor
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the distributor
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the distributor
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the distributor
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -340,6 +351,17 @@</span> distributor:
 querier:
   # -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the querier, this is only used if `queryIndex.enabled: true`
+    enabled: false
+    # -- Minimum autoscaling replicas for the querier
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the querier
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the querier
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the querier
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the querier image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -403,6 +425,17 @@</span> querier:
 queryFrontend:
   # -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the query-frontend
+    enabled: false
+    # -- Minimum autoscaling replicas for the query-frontend
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the query-frontend
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the query-frontend
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the query-frontend
+    targetMemoryUtilizationPercentage:
</span>   image:
     # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -509,6 +542,17 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  autoscaling:
+    # -- Enable autoscaling for the gateway
+    enabled: false
+    # -- Minimum autoscaling replicas for the gateway
+    minReplicas: 1
+    # -- Maximum autoscaling replicas for the gateway
+    maxReplicas: 3
+    # -- Target CPU utilisation percentage for the gateway
+    targetCPUUtilizationPercentage: 60
+    # -- Target memory utilisation percentage for the gateway
+    targetMemoryUtilizationPercentage:
</span>   # -- See `kubectl explain deployment.spec.strategy` for more
   # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
   deploymentStrategy:
<span class="p">@@ -997,7 +1041,6 @@</span> memcached:
         - ALL
     allowPrivilegeEscalation: false
 
<span class="gd">-
</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="err">
</span></code></pre></div></div> <h2 id="0372"> <a href="#0372" class="anchor-heading" aria-labelledby="0372"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.2 </h2> <p><strong>Release date:</strong> 2021-09-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fixed the namespace declaration Release.Namespace on the ruler and added it for the index-gateway components</li> <li>fixed helm-docs</li> <li>switched off the index gateway by default and changed the version to be a minor version</li> <li>added index-gateway to the list of installed components in the NOTES.txt</li> <li>re-run helm-docs from a linux machine</li> <li>added new line at the end of the YAML files</li> </ul> <h3 id="default-value-changes-231"> <a href="#default-value-changes-231" class="anchor-heading" aria-labelledby="default-value-changes-231"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0c5cd355..fd65cc5b 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -911,7 +911,7 @@</span> ruler:
 # Configuration for the index-gateway
 indexGateway:
   # -- Specifies whether the index-gateway should be enabled
<span class="gd">-  enabled: true
</span><span class="gi">+  enabled: false
</span>   # -- Number of replicas for the index-gateway
   replicas: 1
   image:
<span class="err">
</span></code></pre></div></div> <h2 id="0371"> <a href="#0371" class="anchor-heading" aria-labelledby="0371"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.1 </h2> <p><strong>Release date:</strong> 2021-08-31</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>generated README.md using helm-docs</li> <li>enabled loki index gateway</li> <li>removing markdowns</li> </ul> <h3 id="default-value-changes-232"> <a href="#default-value-changes-232" class="anchor-heading" aria-labelledby="default-value-changes-232"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..0c5cd355 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -107,6 +107,10 @@</span> loki:
         active_index_directory: /var/loki/index
         cache_location: /var/loki/cache
         cache_ttl: 168h
<span class="gi">+        {{- if .Values.indexGateway.enabled }}
+        index_gateway_client:
+          server_address: dns:///{{ include "loki.indexGatewayFullname" . }}:9095
+        {{- end }}
</span>       filesystem:
         directory: /var/loki/chunks
 
<span class="p">@@ -904,6 +908,71 @@</span> ruler:
     #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
     #           for: 2m
 
<span class="gi">+# Configuration for the index-gateway
+indexGateway:
+  # -- Specifies whether the index-gateway should be enabled
+  enabled: true
+  # -- Number of replicas for the index-gateway
+  replicas: 1
+  image:
+    # -- The Docker registry for the index-gateway image. Overrides `loki.image.registry`
+    registry: null
+    # -- Docker image repository for the index-gateway image. Overrides `loki.image.repository`
+    repository: null
+    # -- Docker image tag for the index-gateway image. Overrides `loki.image.tag`
+    tag: null
+  # -- The name of the PriorityClass for index-gateway pods
+  priorityClassName: null
+  # -- Annotations for index-gateway pods
+  podAnnotations: {}
+  # -- Labels for index-gateway service
+  serviceLabels: {}
+  # -- Additional CLI args for the index-gateway
+  extraArgs: []
+  # -- Environment variables to add to the index-gateway pods
+  extraEnv: []
+  # -- Environment variables from secrets or configmaps to add to the index-gateway pods
+  extraEnvFrom: []
+  # -- Volume mounts to add to the index-gateway pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the index-gateway pods
+  extraVolumes: []
+  # -- Resource requests and limits for the index-gateway
+  resources: {}
+  # -- Grace period to allow the index-gateway to shutdown before it is killed.
+  terminationGracePeriodSeconds: 300
+  # -- Affinity for index-gateway pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.indexGatewaySelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.indexGatewaySelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # -- Node selector for index-gateway pods
+  nodeSelector: {}
+  # -- Tolerations for index-gateway pods
+  tolerations: []
+  persistence:
+    # -- Enable creating PVCs which is required when using boltdb-shipper
+    enabled: false
+    # -- Size of persistent disk
+    size: 10Gi
+    # -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+
</span> memcached:
   image:
     # -- The Docker registry for the memcached
<span class="err">
</span></code></pre></div></div> <h2 id="0370"> <a href="#0370" class="anchor-heading" aria-labelledby="0370"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.0 </h2> <p><strong>Release date:</strong> 2021-09-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Updated Readme</li> </ul> <h3 id="default-value-changes-233"> <a href="#default-value-changes-233" class="anchor-heading" aria-labelledby="default-value-changes-233"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0360"> <a href="#0360" class="anchor-heading" aria-labelledby="0360"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.0 </h2> <p><strong>Release date:</strong> 2021-08-30</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Adds missing affinity in compactor</li> </ul> <h3 id="default-value-changes-234"> <a href="#default-value-changes-234" class="anchor-heading" aria-labelledby="default-value-changes-234"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0361-2"> <a href="#0361-2" class="anchor-heading" aria-labelledby="0361-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.1 </h2> <p><strong>Release date:</strong> 2021-08-29</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Reset README.md to origin version</li> <li>Updated helm-docs</li> <li>Removed namespace from secret-gateway</li> </ul> <h3 id="default-value-changes-235"> <a href="#default-value-changes-235" class="anchor-heading" aria-labelledby="default-value-changes-235"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..24134f6e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -39,6 +39,8 @@</span> loki:
     pullPolicy: IfNotPresent
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -226,6 +228,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Annotations for ingester pods
<span class="p">@@ -291,6 +295,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Annotations for distributor pods
<span class="p">@@ -343,6 +349,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Annotations for querier pods
<span class="p">@@ -406,6 +414,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="p">@@ -458,6 +468,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Annotations for table-manager pods
<span class="p">@@ -725,6 +737,8 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Annotations for compactor pods
<span class="p">@@ -786,6 +800,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Annotations for ruler pods
<span class="err">
</span></code></pre></div></div> <h2 id="0370-1"> <a href="#0370-1" class="anchor-heading" aria-labelledby="0370-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.37.0 </h2> <p><strong>Release date:</strong> 2021-08-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Version bump</li> <li>Adding namespace to all resources</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-236"> <a href="#default-value-changes-236" class="anchor-heading" aria-labelledby="default-value-changes-236"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0360-1"> <a href="#0360-1" class="anchor-heading" aria-labelledby="0360-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.0 </h2> <p><strong>Release date:</strong> 2021-08-13</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update nginx config to work with istio</li> </ul> <h3 id="default-value-changes-237"> <a href="#default-value-changes-237" class="anchor-heading" aria-labelledby="default-value-changes-237"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..2a8d0436 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -682,30 +682,36 @@</span> gateway:
 
           location = /api/prom/push {
             proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /api/prom/tail {
             proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /api/prom/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/push {
             proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location = /loki/api/v1/tail {
             proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           location ~ /loki/api/.* {
             proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
<span class="gi">+            proxy_http_version 1.1;
</span>           }
 
           {{- with .Values.gateway.nginxConfig.serverSnippet }}
<span class="err">
</span></code></pre></div></div> <h2 id="0361-3"> <a href="#0361-3" class="anchor-heading" aria-labelledby="0361-3"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.1 </h2> <p><strong>Release date:</strong> 2021-08-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into main</li> <li>update helm docs</li> </ul> <h3 id="default-value-changes-238"> <a href="#default-value-changes-238" class="anchor-heading" aria-labelledby="default-value-changes-238"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..24134f6e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -39,6 +39,8 @@</span> loki:
     pullPolicy: IfNotPresent
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -226,6 +228,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Annotations for ingester pods
<span class="p">@@ -291,6 +295,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Annotations for distributor pods
<span class="p">@@ -343,6 +349,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Annotations for querier pods
<span class="p">@@ -406,6 +414,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="p">@@ -458,6 +468,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Annotations for table-manager pods
<span class="p">@@ -725,6 +737,8 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Annotations for compactor pods
<span class="p">@@ -786,6 +800,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Annotations for ruler pods
<span class="err">
</span></code></pre></div></div> <h2 id="0360-2"> <a href="#0360-2" class="anchor-heading" aria-labelledby="0360-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.36.0 </h2> <p><strong>Release date:</strong> 2021-08-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.3.0&amp;color=success" alt="AppVersion: 2.3.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki 2.3.0</li> <li>[loki-distrubuted] Added to README.md description of ‘command’ value</li> </ul> <h3 id="default-value-changes-239"> <a href="#default-value-changes-239" class="anchor-heading" aria-labelledby="default-value-changes-239"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0353"> <a href="#0353" class="anchor-heading" aria-labelledby="0353"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.35.3 </h2> <p><strong>Release date:</strong> 2021-08-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Added ability overwrite default image command for all loki pods in loki-distributed helm chart</li> <li>Merge branch ‘main’ into memcached-obj-size</li> </ul> <h3 id="default-value-changes-240"> <a href="#default-value-changes-240" class="anchor-heading" aria-labelledby="default-value-changes-240"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 0d1c3dd5..24134f6e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -39,6 +39,8 @@</span> loki:
     pullPolicy: IfNotPresent
   # -- Common annotations for all pods
   podAnnotations: {}
<span class="gi">+  # -- Common command override for all pods (except gateway)
+  command: null
</span>   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
   # -- The SecurityContext for Loki pods
<span class="p">@@ -226,6 +228,8 @@</span> ingester:
     repository: null
     # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ingester pods
   priorityClassName: null
   # -- Annotations for ingester pods
<span class="p">@@ -291,6 +295,8 @@</span> distributor:
     repository: null
     # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for distributor pods
   priorityClassName: null
   # -- Annotations for distributor pods
<span class="p">@@ -343,6 +349,8 @@</span> querier:
     repository: null
     # -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for querier pods
   priorityClassName: null
   # -- Annotations for querier pods
<span class="p">@@ -406,6 +414,8 @@</span> queryFrontend:
     repository: null
     # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for query-frontend pods
   priorityClassName: null
   # -- Annotations for query-frontend pods
<span class="p">@@ -458,6 +468,8 @@</span> tableManager:
     repository: null
     # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for table-manager pods
   priorityClassName: null
   # -- Annotations for table-manager pods
<span class="p">@@ -725,6 +737,8 @@</span> compactor:
     repository: null
     # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for compactor pods
   priorityClassName: null
   # -- Annotations for compactor pods
<span class="p">@@ -786,6 +800,8 @@</span> ruler:
     repository: null
     # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # -- Command to execute instead of defined in Docker image
+  command: null
</span>   # -- The name of the PriorityClass for ruler pods
   priorityClassName: null
   # -- Annotations for ruler pods
<span class="err">
</span></code></pre></div></div> <h2 id="0352"> <a href="#0352" class="anchor-heading" aria-labelledby="0352"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.35.2 </h2> <p><strong>Release date:</strong> 2021-07-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Fix ingress behaviour</li> </ul> <h3 id="default-value-changes-241"> <a href="#default-value-changes-241" class="anchor-heading" aria-labelledby="default-value-changes-241"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0351"> <a href="#0351" class="anchor-heading" aria-labelledby="0351"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.35.1 </h2> <p><strong>Release date:</strong> 2021-07-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart and update docs</li> <li>fix doc template</li> <li>increase default object max size in memcached</li> </ul> <h3 id="default-value-changes-242"> <a href="#default-value-changes-242" class="anchor-heading" aria-labelledby="default-value-changes-242"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c72475db..0d1c3dd5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -928,6 +928,7 @@</span> memcached:
         - ALL
     allowPrivilegeEscalation: false
 
<span class="gi">+
</span> memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
<span class="p">@@ -955,7 +956,8 @@</span> memcachedChunks:
   # -- Labels for memcached-chunks service
   serviceLabels: {}
   # -- Additional CLI args for memcached-chunks
<span class="gd">-  extraArgs: []
</span><span class="gi">+  extraArgs:
+    - -I 32m
</span>   # -- Environment variables to add to memcached-chunks pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached-chunks pods
<span class="p">@@ -997,7 +999,8 @@</span> memcachedFrontend:
   # -- Labels for memcached-frontend service
   serviceLabels: {}
   # -- Additional CLI args for memcached-frontend
<span class="gd">-  extraArgs: []
</span><span class="gi">+  extraArgs:
+    - -I 32m
</span>   # -- Environment variables to add to memcached-frontend pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached-frontend pods
<span class="p">@@ -1039,7 +1042,8 @@</span> memcachedIndexQueries:
   # -- Labels for memcached-index-queries service
   serviceLabels: {}
   # -- Additional CLI args for memcached-index-queries
<span class="gd">-  extraArgs: []
</span><span class="gi">+  extraArgs:
+    - -I 32m
</span>   # -- Environment variables to add to memcached-index-queries pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached-index-queries pods
<span class="p">@@ -1081,7 +1085,8 @@</span> memcachedIndexWrites:
   # -- Labels for memcached-index-writes service
   serviceLabels: {}
   # -- Additional CLI args for memcached-index-writes
<span class="gd">-  extraArgs: []
</span><span class="gi">+  extraArgs:
+    - -I 32m
</span>   # -- Environment variables to add to memcached-index-writes pods
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0350"> <a href="#0350" class="anchor-heading" aria-labelledby="0350"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.35.0 </h2> <p><strong>Release date:</strong> 2021-06-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bumped the new version to 0.35.0 and added some docs regarding upgrade</li> </ul> <h3 id="default-value-changes-243"> <a href="#default-value-changes-243" class="anchor-heading" aria-labelledby="default-value-changes-243"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c20c3947..c72475db 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -598,7 +598,8 @@</span> gateway:
       - host: gateway.loki.example.com
         paths:
           - path: /
<span class="gd">-            # pathType: ImplementationSpecific
</span><span class="gi">+            # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
+            # pathType: Prefix
</span>     # -- TLS configuration for the gateway ingress
     tls:
       - secretName: loki-gateway-tls
<span class="err">
</span></code></pre></div></div> <h2 id="0343"> <a href="#0343" class="anchor-heading" aria-labelledby="0343"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.34.3 </h2> <p><strong>Release date:</strong> 2021-06-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>added support for newer Ingress versions (v1) for the Gateway component</li> </ul> <h3 id="default-value-changes-244"> <a href="#default-value-changes-244" class="anchor-heading" aria-labelledby="default-value-changes-244"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b39e9e9b..c20c3947 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -589,13 +589,16 @@</span> gateway:
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
     enabled: false
<span class="gi">+    # -- Ingress Class Name. MAY be required for Kubernetes versions &gt;= 1.18
+    # ingressClassName: nginx
</span>     # -- Annotations for the gateway ingress
     annotations: {}
     # -- Hosts configuration for the gateway ingress
     hosts:
       - host: gateway.loki.example.com
         paths:
<span class="gd">-          - /
</span><span class="gi">+          - path: /
+            # pathType: ImplementationSpecific
</span>     # -- TLS configuration for the gateway ingress
     tls:
       - secretName: loki-gateway-tls
<span class="err">
</span></code></pre></div></div> <h2 id="0342"> <a href="#0342" class="anchor-heading" aria-labelledby="0342"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.34.2 </h2> <p><strong>Release date:</strong> 2021-06-21</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Allow for specifying automountServiceAccountToken for Loki Helm Charts</li> </ul> <h3 id="default-value-changes-245"> <a href="#default-value-changes-245" class="anchor-heading" aria-labelledby="default-value-changes-245"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 37e69e99..b39e9e9b 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -162,6 +162,8 @@</span> serviceAccount:
   imagePullSecrets: []
   # -- Annotations for the service account
   annotations: {}
<span class="gi">+  # -- Set this toggle to false to opt out of automounting API credentials for the service account
+  automountServiceAccountToken: true
</span> 
 # RBAC configuration
 rbac:
<span class="p">@@ -764,6 +766,8 @@</span> compactor:
     imagePullSecrets: []
     # -- Annotations for the compactor service account
     annotations: {}
<span class="gi">+    # -- Set this toggle to false to opt out of automounting API credentials for the service account
+    automountServiceAccountToken: true
</span> 
 # Configuration for the ruler
 ruler:
<span class="err">
</span></code></pre></div></div> <h2 id="0341"> <a href="#0341" class="anchor-heading" aria-labelledby="0341"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.34.1 </h2> <p><strong>Release date:</strong> 2021-06-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge branch ‘main’ into ae/ld/chartfix1</li> </ul> <h3 id="default-value-changes-246"> <a href="#default-value-changes-246" class="anchor-heading" aria-labelledby="default-value-changes-246"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 361be3be..37e69e99 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -503,6 +503,10 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- See `kubectl explain deployment.spec.strategy` for more
+  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
+  deploymentStrategy:
+    type: RollingUpdate
</span>   image:
     # -- The Docker registry for the gateway image
     registry: docker.io
<span class="err">
</span></code></pre></div></div> <h2 id="0332"> <a href="#0332" class="anchor-heading" aria-labelledby="0332"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.33.2 </h2> <p><strong>Release date:</strong> 2021-06-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump chart version</li> </ul> <h3 id="default-value-changes-247"> <a href="#default-value-changes-247" class="anchor-heading" aria-labelledby="default-value-changes-247"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0331"> <a href="#0331" class="anchor-heading" aria-labelledby="0331"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.33.1 </h2> <p><strong>Release date:</strong> 2021-06-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>chore: do not deploy pvc if compactor not enabled. create pv for ruler</li> </ul> <h3 id="default-value-changes-248"> <a href="#default-value-changes-248" class="anchor-heading" aria-labelledby="default-value-changes-248"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0340"> <a href="#0340" class="anchor-heading" aria-labelledby="0340"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.34.0 </h2> <p><strong>Release date:</strong> 2021-06-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Merge remote-tracking branch ‘upstream/main’ into loki-distributed-configurable-updatestrategy</li> </ul> <h3 id="default-value-changes-249"> <a href="#default-value-changes-249" class="anchor-heading" aria-labelledby="default-value-changes-249"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 361be3be..37e69e99 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -503,6 +503,10 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- See `kubectl explain deployment.spec.strategy` for more
+  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
+  deploymentStrategy:
+    type: RollingUpdate
</span>   image:
     # -- The Docker registry for the gateway image
     registry: docker.io
<span class="err">
</span></code></pre></div></div> <h2 id="0331-1"> <a href="#0331-1" class="anchor-heading" aria-labelledby="0331-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.33.1 </h2> <p><strong>Release date:</strong> 2021-06-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Fix typo</li> </ul> <h3 id="default-value-changes-250"> <a href="#default-value-changes-250" class="anchor-heading" aria-labelledby="default-value-changes-250"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index cd744167..361be3be 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -228,6 +228,8 @@</span> ingester:
   priorityClassName: null
   # -- Annotations for ingester pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for ingestor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the ingester
   extraArgs: []
   # -- Environment variables to add to the ingester pods
<span class="p">@@ -291,6 +293,8 @@</span> distributor:
   priorityClassName: null
   # -- Annotations for distributor pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for distributor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the distributor
   extraArgs: []
   # -- Environment variables to add to the distributor pods
<span class="p">@@ -341,6 +345,8 @@</span> querier:
   priorityClassName: null
   # -- Annotations for querier pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for querier service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the querier
   extraArgs: []
   # -- Environment variables to add to the querier pods
<span class="p">@@ -402,6 +408,8 @@</span> queryFrontend:
   priorityClassName: null
   # -- Annotations for query-frontend pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for query-frontend service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the query-frontend
   extraArgs: []
   # -- Environment variables to add to the query-frontend pods
<span class="p">@@ -452,6 +460,8 @@</span> tableManager:
   priorityClassName: null
   # -- Annotations for table-manager pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for table-manager service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the table-manager
   extraArgs: []
   # -- Environment variables to add to the table-manager pods
<span class="p">@@ -567,6 +577,8 @@</span> gateway:
     loadBalancerIP: null
     # -- Annotations for the gateway service
     annotations: {}
<span class="gi">+    # -- Labels for gateway service
+    labels: {}
</span>   # Gateway ingress configuration
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
<span class="p">@@ -707,6 +719,8 @@</span> compactor:
   priorityClassName: null
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for compactor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the compactor
   extraArgs: []
   # -- Environment variables to add to the compactor pods
<span class="p">@@ -764,6 +778,8 @@</span> ruler:
   priorityClassName: null
   # -- Annotations for ruler pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for ruler service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the ruler
   extraArgs: []
   # -- Environment variables to add to the ruler pods
<span class="p">@@ -924,6 +940,8 @@</span> memcachedChunks:
   priorityClassName: null
   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-chunks service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-chunks
   extraArgs: []
   # -- Environment variables to add to memcached-chunks pods
<span class="p">@@ -964,6 +982,8 @@</span> memcachedFrontend:
   priorityClassName: null
   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-frontend service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-frontend
   extraArgs: []
   # -- Environment variables to add to memcached-frontend pods
<span class="p">@@ -1004,6 +1024,8 @@</span> memcachedIndexQueries:
   priorityClassName: null
   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-index-queries service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-index-queries
   extraArgs: []
   # -- Environment variables to add to memcached-index-queries pods
<span class="p">@@ -1044,6 +1066,8 @@</span> memcachedIndexWrites:
   priorityClassName: null
   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-index-writes service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-index-writes
   extraArgs: []
   # -- Environment variables to add to memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0340-1"> <a href="#0340-1" class="anchor-heading" aria-labelledby="0340-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.34.0 </h2> <p><strong>Release date:</strong> 2021-06-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Configurable gateway strategy</li> </ul> <h3 id="default-value-changes-251"> <a href="#default-value-changes-251" class="anchor-heading" aria-labelledby="default-value-changes-251"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index cd744167..298eaf5e 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -493,6 +493,10 @@</span> gateway:
   enabled: true
   # -- Number of replicas for the gateway
   replicas: 1
<span class="gi">+  # -- See `kubectl explain deployment.spec.strategy` for more
+  # -- ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
+  deploymentStrategy:
+    type: RollingUpdate
</span>   image:
     # -- The Docker registry for the gateway image
     registry: docker.io
<span class="err">
</span></code></pre></div></div> <h2 id="0331-2"> <a href="#0331-2" class="anchor-heading" aria-labelledby="0331-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.33.1 </h2> <p><strong>Release date:</strong> 2021-06-08</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Bump chart</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Allow configuration of custom svc labels</li> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> also bump version in README badge</li> <li>Merge branch ‘upstream-main’ into loki-distributed-existing-secret-for-config</li> </ul> <h3 id="default-value-changes-252"> <a href="#default-value-changes-252" class="anchor-heading" aria-labelledby="default-value-changes-252"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 50ed5357..361be3be 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -228,6 +228,8 @@</span> ingester:
   priorityClassName: null
   # -- Annotations for ingester pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for ingestor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the ingester
   extraArgs: []
   # -- Environment variables to add to the ingester pods
<span class="p">@@ -291,6 +293,8 @@</span> distributor:
   priorityClassName: null
   # -- Annotations for distributor pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for distributor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the distributor
   extraArgs: []
   # -- Environment variables to add to the distributor pods
<span class="p">@@ -341,6 +345,8 @@</span> querier:
   priorityClassName: null
   # -- Annotations for querier pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for querier service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the querier
   extraArgs: []
   # -- Environment variables to add to the querier pods
<span class="p">@@ -402,6 +408,8 @@</span> queryFrontend:
   priorityClassName: null
   # -- Annotations for query-frontend pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for query-frontend service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the query-frontend
   extraArgs: []
   # -- Environment variables to add to the query-frontend pods
<span class="p">@@ -441,8 +449,6 @@</span> queryFrontend:
 tableManager:
   # -- Specifies whether the table-manager should be enabled
   enabled: false
<span class="gd">-  # -- Number of replicas for the table-manager
-  replicas: 1
</span>   image:
     # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
     registry: null
<span class="p">@@ -454,6 +460,8 @@</span> tableManager:
   priorityClassName: null
   # -- Annotations for table-manager pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for table-manager service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the table-manager
   extraArgs: []
   # -- Environment variables to add to the table-manager pods
<span class="p">@@ -569,6 +577,8 @@</span> gateway:
     loadBalancerIP: null
     # -- Annotations for the gateway service
     annotations: {}
<span class="gi">+    # -- Labels for gateway service
+    labels: {}
</span>   # Gateway ingress configuration
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
<span class="p">@@ -709,6 +719,8 @@</span> compactor:
   priorityClassName: null
   # -- Annotations for compactor pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for compactor service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the compactor
   extraArgs: []
   # -- Environment variables to add to the compactor pods
<span class="p">@@ -766,6 +778,8 @@</span> ruler:
   priorityClassName: null
   # -- Annotations for ruler pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for ruler service
+  serviceLabels: {}
</span>   # -- Additional CLI args for the ruler
   extraArgs: []
   # -- Environment variables to add to the ruler pods
<span class="p">@@ -926,6 +940,8 @@</span> memcachedChunks:
   priorityClassName: null
   # -- Annotations for memcached-chunks pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-chunks service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-chunks
   extraArgs: []
   # -- Environment variables to add to memcached-chunks pods
<span class="p">@@ -966,6 +982,8 @@</span> memcachedFrontend:
   priorityClassName: null
   # -- Annotations for memcached-frontend pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-frontend service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-frontend
   extraArgs: []
   # -- Environment variables to add to memcached-frontend pods
<span class="p">@@ -1006,6 +1024,8 @@</span> memcachedIndexQueries:
   priorityClassName: null
   # -- Annotations for memcached-index-queries pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-index-queries service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-index-queries
   extraArgs: []
   # -- Environment variables to add to memcached-index-queries pods
<span class="p">@@ -1046,6 +1066,8 @@</span> memcachedIndexWrites:
   priorityClassName: null
   # -- Annotations for memcached-index-writes pods
   podAnnotations: {}
<span class="gi">+  # -- Labels for memcached-index-writes service
+  serviceLabels: {}
</span>   # -- Additional CLI args for memcached-index-writes
   extraArgs: []
   # -- Environment variables to add to memcached-index-writes pods
<span class="err">
</span></code></pre></div></div> <h2 id="0330"> <a href="#0330" class="anchor-heading" aria-labelledby="0330"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.33.0 </h2> <p><strong>Release date:</strong> 2021-06-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> version 0.33.0 in Chart.yaml</li> </ul> <h3 id="default-value-changes-253"> <a href="#default-value-changes-253" class="anchor-heading" aria-labelledby="default-value-changes-253"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 60e1f6ee..50ed5357 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -54,6 +54,8 @@</span> loki:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
+  existingSecretForConfig: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="err">
</span></code></pre></div></div> <h2 id="0320"> <a href="#0320" class="anchor-heading" aria-labelledby="0320"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.32.0 </h2> <p><strong>Release date:</strong> 2021-06-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump minor version instead</li> <li>Remove replicas, pdb as no need</li> </ul> <h3 id="default-value-changes-254"> <a href="#default-value-changes-254" class="anchor-heading" aria-labelledby="default-value-changes-254"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 60e1f6ee..701f1334 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -439,8 +439,6 @@</span> queryFrontend:
 tableManager:
   # -- Specifies whether the table-manager should be enabled
   enabled: false
<span class="gd">-  # -- Number of replicas for the table-manager
-  replicas: 1
</span>   image:
     # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0314"> <a href="#0314" class="anchor-heading" aria-labelledby="0314"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.4 </h2> <p><strong>Release date:</strong> 2021-06-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> </ul> <h3 id="default-value-changes-255"> <a href="#default-value-changes-255" class="anchor-heading" aria-labelledby="default-value-changes-255"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0313"> <a href="#0313" class="anchor-heading" aria-labelledby="0313"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.3 </h2> <p><strong>Release date:</strong> 2021-06-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Set table manager replicas from values</li> <li>Merge branch ‘upstream-main’ into loki-distributed-existing-secret-for-config</li> </ul> <h3 id="default-value-changes-256"> <a href="#default-value-changes-256" class="anchor-heading" aria-labelledby="default-value-changes-256"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 132b0bc0..60e1f6ee 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -133,6 +133,7 @@</span> loki:
     frontend:
       log_queries_longer_than: 5s
       compress_responses: true
<span class="gi">+      tail_proxy_url: http://{{ include "loki.querierFullname" . }}:3100
</span> 
     compactor:
       shared_store: filesystem
<span class="err">
</span></code></pre></div></div> <h2 id="0320-1"> <a href="#0320-1" class="anchor-heading" aria-labelledby="0320-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.32.0 </h2> <p><strong>Release date:</strong> 2021-05-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix yaml syntax for existing secret</li> </ul> <h3 id="default-value-changes-257"> <a href="#default-value-changes-257" class="anchor-heading" aria-labelledby="default-value-changes-257"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 132b0bc0..42e7092a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -54,6 +54,8 @@</span> loki:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
+  existingSecretForConfig: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="err">
</span></code></pre></div></div> <h2 id="0313-1"> <a href="#0313-1" class="anchor-heading" aria-labelledby="0313-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.3 </h2> <p><strong>Release date:</strong> 2021-05-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>add the live tailing property to the query frontend</li> </ul> <h3 id="default-value-changes-258"> <a href="#default-value-changes-258" class="anchor-heading" aria-labelledby="default-value-changes-258"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 132b0bc0..60e1f6ee 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -133,6 +133,7 @@</span> loki:
     frontend:
       log_queries_longer_than: 5s
       compress_responses: true
<span class="gi">+      tail_proxy_url: http://{{ include "loki.querierFullname" . }}:3100
</span> 
     compactor:
       shared_store: filesystem
<span class="err">
</span></code></pre></div></div> <h2 id="0312"> <a href="#0312" class="anchor-heading" aria-labelledby="0312"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.2 </h2> <p><strong>Release date:</strong> 2021-05-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.1&amp;color=success" alt="AppVersion: 2.2.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> updating for loki release 2.2.1</li> </ul> <h3 id="default-value-changes-259"> <a href="#default-value-changes-259" class="anchor-heading" aria-labelledby="default-value-changes-259"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0320-2"> <a href="#0320-2" class="anchor-heading" aria-labelledby="0320-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.32.0 </h2> <p><strong>Release date:</strong> 2021-05-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Allow users to specify an existing secret for loki config</li> </ul> <h3 id="default-value-changes-260"> <a href="#default-value-changes-260" class="anchor-heading" aria-labelledby="default-value-changes-260"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 132b0bc0..42e7092a 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -54,6 +54,8 @@</span> loki:
       drop:
         - ALL
     allowPrivilegeEscalation: false
<span class="gi">+  # -- Specify an existing secret containing loki configuration. If non-empty, overrides `loki.config`
+  existingSecretForConfig: ""
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="err">
</span></code></pre></div></div> <h2 id="0311"> <a href="#0311" class="anchor-heading" aria-labelledby="0311"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.1 </h2> <p><strong>Release date:</strong> 2021-05-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add relabelings to ServiceMonitor</li> <li>Run helm-docs.</li> <li>attempt to fix the linting issue</li> </ul> <h3 id="default-value-changes-261"> <a href="#default-value-changes-261" class="anchor-heading" aria-labelledby="default-value-changes-261"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index b0a56f64..132b0bc0 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -181,6 +181,9 @@</span> serviceMonitor:
   interval: null
   # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
   scrapeTimeout: null
<span class="gi">+  # -- ServiceMonitor relabel configs to apply to samples before scraping
+  # https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+  relabelings: []
</span>   # -- ServiceMonitor will use http by default, but you can pick https as well
   scheme: http
   # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
<span class="err">
</span></code></pre></div></div> <h2 id="0310"> <a href="#0310" class="anchor-heading" aria-labelledby="0310"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.31.0 </h2> <p><strong>Release date:</strong> 2021-05-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>applied the review comments related the version upgrade and documentation</li> </ul> <h3 id="default-value-changes-262"> <a href="#default-value-changes-262" class="anchor-heading" aria-labelledby="default-value-changes-262"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="100"> <a href="#100" class="anchor-heading" aria-labelledby="100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.0.0 </h2> <p><strong>Release date:</strong> 2021-05-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>upgraded the podManagementPolicy to Parallel and bumped the chart major version</li> <li>Update readme</li> </ul> <h3 id="default-value-changes-263"> <a href="#default-value-changes-263" class="anchor-heading" aria-labelledby="default-value-changes-263"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0300"> <a href="#0300" class="anchor-heading" aria-labelledby="0300"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.30.0 </h2> <p><strong>Release date:</strong> 2021-05-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump major version for new feature</li> <li>Fix docs</li> </ul> <h3 id="default-value-changes-264"> <a href="#default-value-changes-264" class="anchor-heading" aria-labelledby="default-value-changes-264"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0291"> <a href="#0291" class="anchor-heading" aria-labelledby="0291"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.29.1 </h2> <p><strong>Release date:</strong> 2021-05-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Option to specify dns namespace</li> <li>fix: correct docs on Compactor SA naming</li> <li>fix: update helm docs</li> </ul> <h3 id="default-value-changes-265"> <a href="#default-value-changes-265" class="anchor-heading" aria-labelledby="default-value-changes-265"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 5997ee62..b0a56f64 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -6,8 +6,10 @@</span> global:
   priorityClassName: null
   # -- configures cluster domain ("cluster.local" by default)
   clusterDomain: "cluster.local"
<span class="gd">-  # -- configures DNS service name in kube-system
</span><span class="gi">+  # -- configures DNS service name
</span>   dnsService: "kube-dns"
<span class="gi">+  # -- configures DNS service namespace
+  dnsNamespace: "kube-system"
</span> 
 # -- Overrides the chart's name
 nameOverride: null
<span class="p">@@ -633,7 +635,7 @@</span> gateway:
         access_log   /dev/stderr  main;
         sendfile     on;
         tcp_nopush   on;
<span class="gd">-        resolver {{ .Values.global.dnsService }}.kube-system.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+        resolver {{ .Values.global.dnsService }}.{{ .Values.global.dnsNamespace }}.svc.{{ .Values.global.clusterDomain }};
</span> 
         {{- with .Values.gateway.nginxConfig.httpSnippet }}
         {{ . | nindent 2 }}
<span class="p">@@ -732,6 +734,14 @@</span> compactor:
     storageClass: null
   serviceAccount:
     create: false
<span class="gi">+    # -- The name of the ServiceAccount to use for the compactor.
+    # If not set and create is true, a name is generated by appending
+    # "-compactor" to the common ServiceAccount.
+    name: null
+    # -- Image pull secrets for the compactor service account
+    imagePullSecrets: []
+    # -- Annotations for the compactor service account
+    annotations: {}
</span> 
 # Configuration for the ruler
 ruler:
<span class="err">
</span></code></pre></div></div> <h2 id="0290"> <a href="#0290" class="anchor-heading" aria-labelledby="0290"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.29.0 </h2> <p><strong>Release date:</strong> 2021-04-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>feat(loki-distributed): add a way to add a ServiceAccount specifically for the compactor.</li> </ul> <h3 id="default-value-changes-266"> <a href="#default-value-changes-266" class="anchor-heading" aria-labelledby="default-value-changes-266"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 91de7b3b..5997ee62 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -730,6 +730,8 @@</span> compactor:
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gi">+  serviceAccount:
+    create: false
</span> 
 # Configuration for the ruler
 ruler:
<span class="err">
</span></code></pre></div></div> <h2 id="0280"> <a href="#0280" class="anchor-heading" aria-labelledby="0280"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.28.0 </h2> <p><strong>Release date:</strong> 2021-03-16</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Improve Gateway configurability</li> </ul> <h3 id="default-value-changes-267"> <a href="#default-value-changes-267" class="anchor-heading" aria-labelledby="default-value-changes-267"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 2b205342..91de7b3b 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -483,6 +483,8 @@</span> tableManager:
 
 # Configuration for the gateway
 gateway:
<span class="gi">+  # -- Specifies whether the gateway should be enabled
+  enabled: true
</span>   # -- Number of replicas for the gateway
   replicas: 1
   image:
<span class="p">@@ -583,6 +585,11 @@</span> gateway:
     username: null
     # -- The basic auth password for the gateway
     password: null
<span class="gi">+    # -- Uses the specified username and password to compute a htpasswd using Sprig's `htpasswd` function.
+    # The value is templated using `tpl`. Override this to use a custom htpasswd, e.g. in case the default causes
+    # high CPU load.
+    htpasswd: &gt;-
+      {{ htpasswd (required "'gateway.basicAuth.username' is required" .Values.gateway.basicAuth.username) (required "'gateway.basicAuth.password' is required" .Values.gateway.basicAuth.password) }}
</span>     # -- Existing basic auth secret to use. Must contain '.htpasswd'
     existingSecret: null
   # Configures the readiness probe for the gateway
<span class="p">@@ -592,76 +599,92 @@</span> gateway:
       port: http
     initialDelaySeconds: 15
     timeoutSeconds: 1
<span class="gd">-  # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
-  # @default -- See values.yaml
-  nginxConfig: |
-    worker_processes  5;  ## Default: 1
-    error_log  /dev/stderr;
-    pid        /tmp/nginx.pid;
-    worker_rlimit_nofile 8192;
-
-    events {
-      worker_connections  4096;  ## Default: 1024
-    }
</span><span class="gi">+  nginxConfig:
+    # -- NGINX log format
+    logFormat: |-
+      main '$remote_addr - $remote_user [$time_local]  $status '
+              '"$request" $body_bytes_sent "$http_referer" '
+              '"$http_user_agent" "$http_x_forwarded_for"';
+    # -- Allows appending custom configuration to the server block
+    serverSnippet: ""
+    # -- Allows appending custom configuration to the http block
+    httpSnippet: ""
+    # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
+    # @default -- See values.yaml
+    file: |
+      worker_processes  5;  ## Default: 1
+      error_log  /dev/stderr;
+      pid        /tmp/nginx.pid;
+      worker_rlimit_nofile 8192;
</span> 
<span class="gd">-    http {
-      client_body_temp_path /tmp/client_temp;
-      proxy_temp_path       /tmp/proxy_temp_path;
-      fastcgi_temp_path     /tmp/fastcgi_temp;
-      uwsgi_temp_path       /tmp/uwsgi_temp;
-      scgi_temp_path        /tmp/scgi_temp;
</span><span class="gi">+      events {
+        worker_connections  4096;  ## Default: 1024
+      }
</span> 
<span class="gd">-      default_type application/octet-stream;
-      log_format   main '$remote_addr - $remote_user [$time_local]  $status '
-        '"$request" $body_bytes_sent "$http_referer" '
-        '"$http_user_agent" "$http_x_forwarded_for"';
-      access_log   /dev/stderr  main;
-      sendfile     on;
-      tcp_nopush   on;
-      resolver {{ .Values.global.dnsService }}.kube-system.svc.{{ .Values.global.clusterDomain }};
</span><span class="gi">+      http {
+        client_body_temp_path /tmp/client_temp;
+        proxy_temp_path       /tmp/proxy_temp_path;
+        fastcgi_temp_path     /tmp/fastcgi_temp;
+        uwsgi_temp_path       /tmp/uwsgi_temp;
+        scgi_temp_path        /tmp/scgi_temp;
</span> 
<span class="gd">-      server {
-        listen             8080;
</span><span class="gi">+        default_type application/octet-stream;
+        log_format   {{ .Values.gateway.nginxConfig.logFormat }}
+        access_log   /dev/stderr  main;
+        sendfile     on;
+        tcp_nopush   on;
+        resolver {{ .Values.global.dnsService }}.kube-system.svc.{{ .Values.global.clusterDomain }};
</span> 
<span class="gd">-        {{- if .Values.gateway.basicAuth.enabled }}
-        auth_basic           "Loki";
-        auth_basic_user_file /etc/nginx/secrets/.htpasswd;
</span><span class="gi">+        {{- with .Values.gateway.nginxConfig.httpSnippet }}
+        {{ . | nindent 2 }}
</span>         {{- end }}
 
<span class="gd">-        location = / {
-          return 200 'OK';
-          auth_basic off;
-        }
</span><span class="gi">+        server {
+          listen             8080;
</span> 
<span class="gd">-        location = /api/prom/push {
-          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-        }
</span><span class="gi">+          {{- if .Values.gateway.basicAuth.enabled }}
+          auth_basic           "Loki";
+          auth_basic_user_file /etc/nginx/secrets/.htpasswd;
+          {{- end }}
</span> 
<span class="gd">-        location = /api/prom/tail {
-          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-          proxy_set_header Upgrade $http_upgrade;
-          proxy_set_header Connection "upgrade";
-        }
</span><span class="gi">+          location = / {
+            return 200 'OK';
+            auth_basic off;
+          }
</span> 
<span class="gd">-        location ~ /api/prom/.* {
-          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-        }
</span><span class="gi">+          location = /api/prom/push {
+            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
</span> 
<span class="gd">-        location = /loki/api/v1/push {
-          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-        }
</span><span class="gi">+          location = /api/prom/tail {
+            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+            proxy_set_header Upgrade $http_upgrade;
+            proxy_set_header Connection "upgrade";
+          }
</span> 
<span class="gd">-        location = /loki/api/v1/tail {
-          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
-          proxy_set_header Upgrade $http_upgrade;
-          proxy_set_header Connection "upgrade";
-        }
</span><span class="gi">+          location ~ /api/prom/.* {
+            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /loki/api/v1/push {
+            proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
+
+          location = /loki/api/v1/tail {
+            proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+            proxy_set_header Upgrade $http_upgrade;
+            proxy_set_header Connection "upgrade";
+          }
+
+          location ~ /loki/api/.* {
+            proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
+          }
</span> 
<span class="gd">-        location ~ /loki/api/.* {
-          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span><span class="gi">+          {{- with .Values.gateway.nginxConfig.serverSnippet }}
+          {{ . | nindent 4 }}
+          {{- end }}
</span>         }
       }
<span class="gd">-    }
</span> 
 # Configuration for the compactor
 compactor:
<span class="err">
</span></code></pre></div></div> <h2 id="0270"> <a href="#0270" class="anchor-heading" aria-labelledby="0270"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.27.0 </h2> <p><strong>Release date:</strong> 2021-03-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.2.0&amp;color=success" alt="AppVersion: 2.2.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>updating for loki release 2.2.0</li> </ul> <h3 id="default-value-changes-268"> <a href="#default-value-changes-268" class="anchor-heading" aria-labelledby="default-value-changes-268"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0260"> <a href="#0260" class="anchor-heading" aria-labelledby="0260"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.26.0 </h2> <p><strong>Release date:</strong> 2021-03-03</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix conflicts</li> </ul> <h3 id="default-value-changes-269"> <a href="#default-value-changes-269" class="anchor-heading" aria-labelledby="default-value-changes-269"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 75050474..2b205342 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1035,3 +1035,44 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+
+networkPolicy:
+  # -- Specifies whether Network Policies should be created
+  enabled: false
+  metrics:
+    # -- Specifies the Pods which are allowed to access the metrics port.
+    # As this is cross-namespace communication, you also need the namespaceSelector.
+    podSelector: {}
+    # -- Specifies the namespaces which are allowed to access the metrics port
+    namespaceSelector: {}
+    # -- Specifies specific network CIDRs which are allowed to access the metrics port.
+    # In case you use namespaceSelector, you also have to specify your kubelet networks here.
+    # The metrics ports are also used for probes.
+    cidrs: []
+  ingress:
+    # -- Specifies the Pods which are allowed to access the http port.
+    # As this is cross-namespace communication, you also need the namespaceSelector.
+    podSelector: {}
+    # -- Specifies the namespaces which are allowed to access the http port
+    namespaceSelector: {}
+  alertmanager:
+    # -- Specify the alertmanager port used for alerting
+    port: 9093
+    # -- Specifies the alertmanager Pods.
+    # As this is cross-namespace communication, you also need the namespaceSelector.
+    podSelector: {}
+    # -- Specifies the namespace the alertmanager is running in
+    namespaceSelector: {}
+  externalStorage:
+    # -- Specify the port used for external storage, e.g. AWS S3
+    ports: []
+    # -- Specifies specific network CIDRs you want to limit access to
+    cidrs: []
+  discovery:
+    # -- Specify the port used for discovery
+    port: null
+    # -- Specifies the Pods labels used for discovery.
+    # As this is cross-namespace communication, you also need the namespaceSelector.
+    podSelector: {}
+    # -- Specifies the namespace the discovery Pods are running in
+    namespaceSelector: {}
</span><span class="err">
</span></code></pre></div></div> <h2 id="0250"> <a href="#0250" class="anchor-heading" aria-labelledby="0250"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.25.0 </h2> <p><strong>Release date:</strong> 2021-02-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>fix minor version change and PSP default creation to false</li> <li>Update charts/loki-distributed/templates/rolebinding.yaml</li> </ul> <h3 id="default-value-changes-270"> <a href="#default-value-changes-270" class="anchor-heading" aria-labelledby="default-value-changes-270"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 44096302..75050474 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -161,7 +161,7 @@</span> serviceAccount:
 # RBAC configuration
 rbac:
   # -- If enabled, a PodSecurityPolicy is created
<span class="gd">-  pspEnabled: true
</span><span class="gi">+  pspEnabled: false
</span> 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="err">
</span></code></pre></div></div> <h2 id="0241"> <a href="#0241" class="anchor-heading" aria-labelledby="0241"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.24.1 </h2> <p><strong>Release date:</strong> 2021-01-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version and docs</li> <li>Update charts/loki-distributed/templates/role.yaml</li> <li>Update charts/loki-distributed/templates/role.yaml</li> <li>Update charts/loki-distributed/templates/podsecuritypolicy.yaml</li> <li>linting: fix trailing spaces</li> <li>bump version and update docs</li> <li>expand lists to multi-line</li> <li>Update charts/loki-distributed/templates/podsecuritypolicy.yaml</li> <li>Update charts/loki-distributed/templates/podsecuritypolicy.yaml</li> <li>Update charts/loki-distributed/values.yaml</li> <li>Update charts/loki-distributed/values.yaml</li> <li>Update charts/loki-distributed/templates/rolebinding.yaml</li> <li>loki-distributed: added support for PSP</li> <li>Update the readme</li> </ul> <h3 id="default-value-changes-271"> <a href="#default-value-changes-271" class="anchor-heading" aria-labelledby="default-value-changes-271"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 196ffc41..44096302 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -158,6 +158,11 @@</span> serviceAccount:
   # -- Annotations for the service account
   annotations: {}
 
<span class="gi">+# RBAC configuration
+rbac:
+  # -- If enabled, a PodSecurityPolicy is created
+  pspEnabled: true
+
</span> # ServiceMonitor configuration
 serviceMonitor:
   # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
<span class="err">
</span></code></pre></div></div> <h2 id="0240"> <a href="#0240" class="anchor-heading" aria-labelledby="0240"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.24.0 </h2> <p><strong>Release date:</strong> 2021-01-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Cleanup</li> <li>Add in tlsConfig and scheme to the ServiceMonitor config</li> </ul> <h3 id="default-value-changes-272"> <a href="#default-value-changes-272" class="anchor-heading" aria-labelledby="default-value-changes-272"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8334d2c5..196ffc41 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -174,6 +174,10 @@</span> serviceMonitor:
   interval: null
   # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
   scrapeTimeout: null
<span class="gi">+  # -- ServiceMonitor will use http by default, but you can pick https as well
+  scheme: http
+  # -- ServiceMonitor will use these tlsConfig settings to make the health check requests
+  tlsConfig: null
</span> 
 # Rules for the Prometheus Operator
 prometheusRule:
<span class="err">
</span></code></pre></div></div> <h2 id="0232"> <a href="#0232" class="anchor-heading" aria-labelledby="0232"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.23.2 </h2> <p><strong>Release date:</strong> 2021-01-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Readiness Probe</li> </ul> <h3 id="default-value-changes-273"> <a href="#default-value-changes-273" class="anchor-heading" aria-labelledby="default-value-changes-273"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index daf90fb8..8334d2c5 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -19,6 +19,13 @@</span> fullnameOverride: null
 imagePullSecrets: []
 
 loki:
<span class="gi">+  # Configures the readiness probe for all of the Loki pods
+  readinessProbe:
+    httpGet:
+      path: /ready
+      port: http
+    initialDelaySeconds: 30
+    timeoutSeconds: 1
</span>   image:
     # -- The Docker registry
     registry: docker.io
<span class="p">@@ -569,6 +576,13 @@</span> gateway:
     password: null
     # -- Existing basic auth secret to use. Must contain '.htpasswd'
     existingSecret: null
<span class="gi">+  # Configures the readiness probe for the gateway
+  readinessProbe:
+    httpGet:
+      path: /
+      port: http
+    initialDelaySeconds: 15
+    timeoutSeconds: 1
</span>   # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
   # @default -- See values.yaml
   nginxConfig: |
<span class="err">
</span></code></pre></div></div> <h2 id="0231"> <a href="#0231" class="anchor-heading" aria-labelledby="0231"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.23.1 </h2> <p><strong>Release date:</strong> 2021-01-25</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add the exraVolumes/extraVolumeMounts settings to the queryFrontend and distributor pod specs</li> <li>update docs</li> </ul> <h3 id="default-value-changes-274"> <a href="#default-value-changes-274" class="anchor-heading" aria-labelledby="default-value-changes-274"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index e9e20f20..daf90fb8 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -273,6 +273,10 @@</span> distributor:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the distributor pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the distributor pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the distributor pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the distributor
   resources: {}
   # -- Grace period to allow the distributor to shutdown before it is killed
<span class="p">@@ -380,6 +384,10 @@</span> queryFrontend:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the query-frontend pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the query-frontend pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the query-frontend pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the query-frontend
   resources: {}
   # -- Grace period to allow the query-frontend to shutdown before it is killed
<span class="err">
</span></code></pre></div></div> <h2 id="0230"> <a href="#0230" class="anchor-heading" aria-labelledby="0230"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.23.0 </h2> <p><strong>Release date:</strong> 2021-01-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update charts/loki-distributed/Chart.yaml</li> </ul> <h3 id="default-value-changes-275"> <a href="#default-value-changes-275" class="anchor-heading" aria-labelledby="default-value-changes-275"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0222"> <a href="#0222" class="anchor-heading" aria-labelledby="0222"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.2 </h2> <p><strong>Release date:</strong> 2021-01-22</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump version and update docs</li> <li>add clusterDomain and dnsService config options</li> <li>Update deployment-gateway.yaml</li> </ul> <h3 id="default-value-changes-276"> <a href="#default-value-changes-276" class="anchor-heading" aria-labelledby="default-value-changes-276"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 23387158..e9e20f20 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -4,6 +4,10 @@</span> global:
     registry: null
   # -- Overrides the priorityClassName for all pods
   priorityClassName: null
<span class="gi">+  # -- configures cluster domain ("cluster.local" by default)
+  clusterDomain: "cluster.local"
+  # -- configures DNS service name in kube-system
+  dnsService: "kube-dns"
</span> 
 # -- Overrides the chart's name
 nameOverride: null
<span class="p">@@ -583,7 +587,7 @@</span> gateway:
       access_log   /dev/stderr  main;
       sendfile     on;
       tcp_nopush   on;
<span class="gd">-      resolver kube-dns.kube-system.svc.cluster.local;
</span><span class="gi">+      resolver {{ .Values.global.dnsService }}.kube-system.svc.{{ .Values.global.clusterDomain }};
</span> 
       server {
         listen             8080;
<span class="p">@@ -599,31 +603,31 @@</span> gateway:
         }
 
         location = /api/prom/push {
<span class="gd">-          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>         }
 
         location = /api/prom/tail {
<span class="gd">-          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection "upgrade";
         }
 
         location ~ /api/prom/.* {
<span class="gd">-          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>         }
 
         location = /loki/api/v1/push {
<span class="gd">-          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>         }
 
         location = /loki/api/v1/tail {
<span class="gd">-          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection "upgrade";
         }
 
         location ~ /loki/api/.* {
<span class="gd">-          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
</span><span class="gi">+          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.global.clusterDomain }}:3100$request_uri;
</span>         }
       }
     }
<span class="err">
</span></code></pre></div></div> <h2 id="0221"> <a href="#0221" class="anchor-heading" aria-labelledby="0221"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.1 </h2> <p><strong>Release date:</strong> 2021-01-19</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li> <li>Remove len function from checks</li> <li>add netpol for discovery</li> <li>allow multiple ports for external storage</li> <li>Update docs</li> <li>Fix selectors</li> <li>Fix docs</li> <li>Merge branch ‘main’ into add_netpols_to_distributed</li> </ul> <h3 id="default-value-changes-277"> <a href="#default-value-changes-277" class="anchor-heading" aria-labelledby="default-value-changes-277"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..23387158 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -206,6 +206,10 @@</span> ingester:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the ingester pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the ingester pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the ingester pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the ingester
   resources: {}
   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
<span class="p">@@ -311,6 +315,10 @@</span> querier:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the querier pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the querier pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the querier pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the querier
   resources: {}
   # -- Grace period to allow the querier to shutdown before it is killed
<span class="p">@@ -416,6 +424,10 @@</span> tableManager:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the table-manager pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the table-manager pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the table-manager pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the table-manager
   resources: {}
   # -- Grace period to allow the table-manager to shutdown before it is killed
<span class="p">@@ -464,6 +476,10 @@</span> gateway:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the gateway pods
   extraEnvFrom: []
<span class="gi">+  # -- Volumes to add to the gateway pods
+  extraVolumes: []
+  # -- Volume mounts to add to the gateway pods
+  extraVolumeMounts: []
</span>   # -- The SecurityContext for gateway containers
   podSecurityContext:
     fsGroup: 101
<span class="p">@@ -633,6 +649,10 @@</span> compactor:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the compactor pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the compactor pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the compactor pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the compactor
   resources: {}
   # -- Grace period to allow the compactor to shutdown before it is killed
<span class="p">@@ -676,6 +696,10 @@</span> ruler:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the ruler pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the ruler pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the ruler pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the ruler
   resources: {}
   # -- Grace period to allow the ruler to shutdown before it is killed
<span class="p">@@ -814,6 +838,8 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Memcached Exporter resource requests and limits
+  resources: {}
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0230-1"> <a href="#0230-1" class="anchor-heading" aria-labelledby="0230-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.23.0 </h2> <p><strong>Release date:</strong> 2021-01-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump chart version</li> <li>Fix typos, naming conventions, …</li> <li>Merge branch ‘main’ into volumemounts</li> </ul> <h3 id="default-value-changes-278"> <a href="#default-value-changes-278" class="anchor-heading" aria-labelledby="default-value-changes-278"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..faa964f0 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -974,3 +974,36 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+
+networkPolicy:
+  # -- Specifies whether Network Policies should be created
+  enabled: false
+  metrics:
+    # -- Specifies whether you want to limit access to metrics ports by podSelectors.
+    # As this is cross-namespace communication, you also need the namespaceSelectorLabels.
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit access to metrics ports by namespaceSelectors
+    namespaceSelectorLabels: {}
+    # -- Specifies whether you want to limit access to specific network CIDRs.
+    # In case you use namespaceSelectorLabels, you also have to specify your kubelet networks here.
+    # The metrics ports are also used for probes.
+    cidrs: []
+  ingress:
+    # -- Specifies whether you want to limit access to http ports by podSelectors.
+    # As this is cross-namespace communication, you also need the namespaceSelectorLabels.
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit access to http ports by namespaceSelectors
+    namespaceSelectorLabels: {}
+  alertmanager:
+    # -- Specify the alertmanager port used for alerting
+    port:
+    # -- Specifies whether you want to limit egress to alertmanager port by podSelectors.
+    # As this is cross-namespace communication, you also need the namespaceSelectorLabels.
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit egress to alertmanager port by namespaceSelectors
+    namespaceSelectorLabels: {}
+  externalStorage:
+    # -- Specify the port used for external storage, e.g. AWS S3
+    port:
+    # -- Specifies whether you want to limit access to external storage with specific network CIDRs
+    cidrs: []
</span><span class="err">
</span></code></pre></div></div> <h2 id="0220"> <a href="#0220" class="anchor-heading" aria-labelledby="0220"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.0 </h2> <p><strong>Release date:</strong> 2021-01-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>bump minor version</li> <li>Update README.md</li> </ul> <h3 id="default-value-changes-279"> <a href="#default-value-changes-279" class="anchor-heading" aria-labelledby="default-value-changes-279"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..b0905a97 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -206,6 +206,10 @@</span> ingester:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the ingester pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the ingester pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the ingester pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the ingester
   resources: {}
   # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
<span class="p">@@ -311,6 +315,10 @@</span> querier:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the querier pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the querier pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the querier pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the querier
   resources: {}
   # -- Grace period to allow the querier to shutdown before it is killed
<span class="p">@@ -416,6 +424,10 @@</span> tableManager:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the table-manager pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the table-manager pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the table-manager pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the table-manager
   resources: {}
   # -- Grace period to allow the table-manager to shutdown before it is killed
<span class="p">@@ -633,6 +645,10 @@</span> compactor:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the compactor pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the compactor pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the compactor pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the compactor
   resources: {}
   # -- Grace period to allow the compactor to shutdown before it is killed
<span class="p">@@ -676,6 +692,10 @@</span> ruler:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the ruler pods
   extraEnvFrom: []
<span class="gi">+  # -- Volume mounts to add to the ruler pods
+  extraVolumeMounts: []
+  # -- Volumes to add to the ruler pods
+  extraVolumes: []
</span>   # -- Resource requests and limits for the ruler
   resources: {}
   # -- Grace period to allow the ruler to shutdown before it is killed
<span class="err">
</span></code></pre></div></div> <h2 id="0212"> <a href="#0212" class="anchor-heading" aria-labelledby="0212"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.2 </h2> <p><strong>Release date:</strong> 2021-01-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update values.yaml</li> <li>Fix linting</li> <li>Add generated README</li> </ul> <h3 id="default-value-changes-280"> <a href="#default-value-changes-280" class="anchor-heading" aria-labelledby="default-value-changes-280"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..38cd83e9 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -814,6 +814,8 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Memcached Exporter resource requests and limits
+  resources: {}
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0220-1"> <a href="#0220-1" class="anchor-heading" aria-labelledby="0220-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.0 </h2> <p><strong>Release date:</strong> 2021-01-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Add Network Policies to loki distributed</li> <li>forgot to update values.yaml</li> <li>bump version of badge</li> </ul> <h3 id="default-value-changes-281"> <a href="#default-value-changes-281" class="anchor-heading" aria-labelledby="default-value-changes-281"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..8f4d217f 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -974,3 +974,36 @@</span> memcachedIndexWrites:
   nodeSelector: {}
   # -- Tolerations for memcached-index-writes pods
   tolerations: []
<span class="gi">+
+networkPolicy:
+  # -- Specifies whether Network Policies should be created
+  enabled: false
+  metrics:
+    # -- Specifies whether you want to limit access to metrics ports by podSelectors
+    # As this is cross-namespace communication, you also neeed the namespaceSelectorLabels
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit access to metrics ports by namespaceSelectors
+    namespaceSelectorLabels: {}
+    # -- Specifies whether you want to limit access to specific network CIDRs
+    # In case you use namespaceSelectorLabels, you also have to specify your kubelet networks here.
+    # The metrics ports are also used for probes.
+    cidrs: []
+  ingress:
+    # -- Specifies whether you want to limit access to http ports by podSelectors
+    # As this is cross-namespace communication, you also neeed the namespaceSelectorLabels
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit access to http ports by namespaceSelectors
+    namespaceSelectorLabels: {}
+  alertmanager: # in case Loki should send alerts
+    # -- Specify the alertmanager port used for alerting
+    port:
+    # -- Specifies whether you want to limit egress to alertmanager port by podSelectors
+    # As this is cross-namespace communication, you also neeed the namespaceSelectorLabels
+    podSelectorLabels: {}
+    # -- Specifies whether you want to limit egress to alertmanager port by namespaceSelectors
+    namespaceSelectorLabels: {}
+  external_storage:
+    # -- Specify the port used for external storage, e.g. AWS S3
+    port:
+    # -- Specifies whether you want to limit access to external storage with specific network CIDRs
+    cidrs: []
</span><span class="err">
</span></code></pre></div></div> <h2 id="0212-1"> <a href="#0212-1" class="anchor-heading" aria-labelledby="0212-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.2 </h2> <p><strong>Release date:</strong> 2021-01-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add extra Volumes and Volumemounts to ruler, bump version and update readme</li> </ul> <h3 id="default-value-changes-282"> <a href="#default-value-changes-282" class="anchor-heading" aria-labelledby="default-value-changes-282"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0211"> <a href="#0211" class="anchor-heading" aria-labelledby="0211"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.1 </h2> <p><strong>Release date:</strong> 2021-01-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add extra Volumes and Volumemounts</li> <li>Fixing the config path</li> </ul> <h3 id="default-value-changes-283"> <a href="#default-value-changes-283" class="anchor-heading" aria-labelledby="default-value-changes-283"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0212-2"> <a href="#0212-2" class="anchor-heading" aria-labelledby="0212-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.2 </h2> <p><strong>Release date:</strong> 2021-01-04</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bumping the version</li> <li>Setting the exporter’s resources in a single place</li> <li>Adding the <code class="language-plaintext highlighter-rouge">resources</code> for the <code class="language-plaintext highlighter-rouge">exporter</code> container of <code class="language-plaintext highlighter-rouge">memcached-frontend</code>
</li> <li>Adding the <code class="language-plaintext highlighter-rouge">resources</code> for the <code class="language-plaintext highlighter-rouge">exporter</code> container of <code class="language-plaintext highlighter-rouge">memcached-index-queries</code>
</li> <li>Adding the <code class="language-plaintext highlighter-rouge">resources</code> for the <code class="language-plaintext highlighter-rouge">exporter</code> container of <code class="language-plaintext highlighter-rouge">memcached-index-writes</code>
</li> </ul> <h3 id="default-value-changes-284"> <a href="#default-value-changes-284" class="anchor-heading" aria-labelledby="default-value-changes-284"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 8e86b712..1f4b9a66 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -814,6 +814,8 @@</span> memcachedExporter:
     tag: v0.6.0
     # -- Memcached Exporter Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- Memcached Exporter Resource requests and limits
+  resources: {}
</span> 
 memcachedChunks:
   # -- Specifies whether the Memcached chunks cache should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0211-1"> <a href="#0211-1" class="anchor-heading" aria-labelledby="0211-1"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.1 </h2> <p><strong>Release date:</strong> 2021-01-02</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump patch version only</li> <li>Use ‘include’ to be consistent</li> </ul> <h3 id="default-value-changes-285"> <a href="#default-value-changes-285" class="anchor-heading" aria-labelledby="default-value-changes-285"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0220-2"> <a href="#0220-2" class="anchor-heading" aria-labelledby="0220-2"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.22.0 </h2> <p><strong>Release date:</strong> 2020-12-28</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bumping the <code class="language-plaintext highlighter-rouge">loki-distributed</code> chart version</li> <li>Using the correct template for the <code class="language-plaintext highlighter-rouge">ServiceAccount</code> name in <code class="language-plaintext highlighter-rouge">loki-distributed</code>
</li> <li>updating docs</li> </ul> <h3 id="default-value-changes-286"> <a href="#default-value-changes-286" class="anchor-heading" aria-labelledby="default-value-changes-286"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0210"> <a href="#0210" class="anchor-heading" aria-labelledby="0210"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.21.0 </h2> <p><strong>Release date:</strong> 2020-12-24</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.1.0&amp;color=success" alt="AppVersion: 2.1.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>update charts for Loki 2.1.0 release</li> <li>Add not on single binary chart</li> </ul> <h3 id="default-value-changes-287"> <a href="#default-value-changes-287" class="anchor-heading" aria-labelledby="default-value-changes-287"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0201"> <a href="#0201" class="anchor-heading" aria-labelledby="0201"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.1 </h2> <p><strong>Release date:</strong> 2020-12-20</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Clarify limitations of default config</li> <li>loki-distributed: Also bump version in README</li> </ul> <h3 id="default-value-changes-288"> <a href="#default-value-changes-288" class="anchor-heading" aria-labelledby="default-value-changes-288"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0200"> <a href="#0200" class="anchor-heading" aria-labelledby="0200"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.20.0 </h2> <p><strong>Release date:</strong> 2020-12-18</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>loki-distributed: Bump minor version</li> </ul> <h3 id="default-value-changes-289"> <a href="#default-value-changes-289" class="anchor-heading" aria-labelledby="default-value-changes-289"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0197"> <a href="#0197" class="anchor-heading" aria-labelledby="0197"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.7 </h2> <p><strong>Release date:</strong> 2020-12-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Bump loki-distributed chart version</li> <li>Allow setting gateway service annotations</li> </ul> <h3 id="default-value-changes-290"> <a href="#default-value-changes-290" class="anchor-heading" aria-labelledby="default-value-changes-290"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 26a72bd1..8e86b712 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -513,6 +513,8 @@</span> gateway:
     nodePort: null
     # -- Load balancer IPO address if service type is LoadBalancer
     loadBalancerIP: null
<span class="gi">+    # -- Annotations for the gateway service
+    annotations: {}
</span>   # Gateway ingress configuration
   ingress:
     # -- Specifies whether an ingress for the gateway should be created
<span class="err">
</span></code></pre></div></div> <h2 id="0196"> <a href="#0196" class="anchor-heading" aria-labelledby="0196"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.6 </h2> <p><strong>Release date:</strong> 2020-12-11</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Remove homepage line from readme template</li> </ul> <h3 id="default-value-changes-291"> <a href="#default-value-changes-291" class="anchor-heading" aria-labelledby="default-value-changes-291"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0195"> <a href="#0195" class="anchor-heading" aria-labelledby="0195"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.5 </h2> <p><strong>Release date:</strong> 2020-12-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>
<a href="add%20extraVolumes%20&amp;%20extraVolumeMounts%20to%20gateway">loki-distributed</a> Re-generate readme for correct homepage URL</li> <li>Fix repo URLs</li> </ul> <h3 id="default-value-changes-292"> <a href="#default-value-changes-292" class="anchor-heading" aria-labelledby="default-value-changes-292"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0194"> <a href="#0194" class="anchor-heading" aria-labelledby="0194"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.4 </h2> <p><strong>Release date:</strong> 2020-12-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add loki-distributed chart</li> </ul> <h3 id="default-value-changes-293"> <a href="#default-value-changes-293" class="anchor-heading" aria-labelledby="default-value-changes-293"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0193"> <a href="#0193" class="anchor-heading" aria-labelledby="0193"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.3 </h2> <p><strong>Release date:</strong> 2020-12-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix priority class config for Loki compactor (really) (#48)</li> </ul> <h3 id="default-value-changes-294"> <a href="#default-value-changes-294" class="anchor-heading" aria-labelledby="default-value-changes-294"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0192"> <a href="#0192" class="anchor-heading" aria-labelledby="0192"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.2 </h2> <p><strong>Release date:</strong> 2020-12-01</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix priority class config for compactor (#47)</li> </ul> <h3 id="default-value-changes-295"> <a href="#default-value-changes-295" class="anchor-heading" aria-labelledby="default-value-changes-295"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0191"> <a href="#0191" class="anchor-heading" aria-labelledby="0191"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.1 </h2> <p><strong>Release date:</strong> 2020-11-17</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Enhance readme (#46)</li> </ul> <h3 id="default-value-changes-296"> <a href="#default-value-changes-296" class="anchor-heading" aria-labelledby="default-value-changes-296"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ff687113..26a72bd1 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -179,9 +179,9 @@</span> prometheusRule:
   # - name: loki-rules
   #   rules:
   #     - record: job:loki_request_duration_seconds_bucket:sum_rate
<span class="gd">-  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (job)
</span><span class="gi">+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job)
</span>   #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
<span class="gd">-  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (job, route)
</span><span class="gi">+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (le, job, route)
</span>   #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
   #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
 
<span class="p">@@ -724,9 +724,9 @@</span> ruler:
     #                 &gt; 0.05
     #             for: 10m
     #             labels:
<span class="gd">-    #               severity: page
</span><span class="gi">+    #               severity: warning
</span>     #             annotations:
<span class="gd">-    #               summary: High request latency
</span><span class="gi">+    #               summary: High error rate
</span>     #       - name: credentials_leak
     #         rules:
     #           - alert: http-credentials-leaked
<span class="p">@@ -756,9 +756,9 @@</span> ruler:
     #                 &gt; 0.05
     #             for: 10m
     #             labels:
<span class="gd">-    #               severity: page
</span><span class="gi">+    #               severity: warning
</span>     #             annotations:
<span class="gd">-    #               summary: High request latency
</span><span class="gi">+    #               summary: High error rate
</span>     #       - name: credentials_leak
     #         rules:
     #           - alert: http-credentials-leaked
<span class="err">
</span></code></pre></div></div> <h2 id="0190"> <a href="#0190" class="anchor-heading" aria-labelledby="0190"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.19.0 </h2> <p><strong>Release date:</strong> 2020-11-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Make security context configurable (#45)</li> </ul> <h3 id="default-value-changes-297"> <a href="#default-value-changes-297" class="anchor-heading" aria-labelledby="default-value-changes-297"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index c1ef7687..ff687113 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -28,6 +28,19 @@</span> loki:
   podAnnotations: {}
   # -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
<span class="gi">+  # -- The SecurityContext for Loki pods
+  podSecurityContext:
+    fsGroup: 10001
+    runAsGroup: 10001
+    runAsNonRoot: true
+    runAsUser: 10001
+  # -- The SecurityContext for Loki containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span>   # -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -451,6 +464,19 @@</span> gateway:
   extraEnv: []
   # -- Environment variables from secrets or configmaps to add to the gateway pods
   extraEnvFrom: []
<span class="gi">+  # -- The SecurityContext for gateway containers
+  podSecurityContext:
+    fsGroup: 101
+    runAsGroup: 101
+    runAsNonRoot: true
+    runAsUser: 101
+  # -- The SecurityContext for gateway containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span>   # -- Resource requests and limits for the gateway
   resources: {}
   # -- Grace period to allow the gateway to shutdown before it is killed
<span class="p">@@ -760,6 +786,19 @@</span> memcached:
     tag: 1.6.7-alpine
     # -- Memcached Docker image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # -- The SecurityContext for memcached pods
+  podSecurityContext:
+    fsGroup: 11211
+    runAsGroup: 11211
+    runAsNonRoot: true
+    runAsUser: 11211
+  # -- The SecurityContext for memcached containers
+  containerSecurityContext:
+    readOnlyRootFilesystem: true
+    capabilities:
+      drop:
+        - ALL
+    allowPrivilegeEscalation: false
</span> 
 memcachedExporter:
   # -- Specifies whether the Memcached Exporter should be enabled
<span class="err">
</span></code></pre></div></div> <h2 id="0181"> <a href="#0181" class="anchor-heading" aria-labelledby="0181"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.1 </h2> <p><strong>Release date:</strong> 2020-11-15</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Update values for helm-docs changes (#44)</li> </ul> <h3 id="default-value-changes-298"> <a href="#default-value-changes-298" class="anchor-heading" aria-labelledby="default-value-changes-298"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 016eed93..c1ef7687 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1,34 +1,34 @@</span>
 global:
   image:
<span class="gd">-    # global.image.registry -- Overrides the Docker registry globally for all images
</span><span class="gi">+    # -- Overrides the Docker registry globally for all images
</span>     registry: null
<span class="gd">-  # global.priorityClassName -- Overrides the priorityClassName for all pods
</span><span class="gi">+  # -- Overrides the priorityClassName for all pods
</span>   priorityClassName: null
 
<span class="gd">-# nameOverride -- Overrides the chart's name
</span><span class="gi">+# -- Overrides the chart's name
</span> nameOverride: null
 
<span class="gd">-# fullnameOverride -- Overrides the chart's computed fullname
</span><span class="gi">+# -- Overrides the chart's computed fullname
</span> fullnameOverride: null
 
<span class="gd">-# imagePullSecrets -- Image pull secrets for Docker images
</span><span class="gi">+# -- Image pull secrets for Docker images
</span> imagePullSecrets: []
 
 loki:
   image:
<span class="gd">-    # loki.image.registry -- The Docker registry
</span><span class="gi">+    # -- The Docker registry
</span>     registry: docker.io
<span class="gd">-    # loki.image.repository -- Docker image repository
</span><span class="gi">+    # -- Docker image repository
</span>     repository: grafana/loki
<span class="gd">-    # loki.image.tag -- Overrides the image tag whose default is the chart's appVersion
</span><span class="gi">+    # -- Overrides the image tag whose default is the chart's appVersion
</span>     tag: null
<span class="gd">-    # loki.image.pullPolicy -- Docker image pull policy
</span><span class="gi">+    # -- Docker image pull policy
</span>     pullPolicy: IfNotPresent
<span class="gd">-  # loki.podAnnotations -- Common annotations for all pods
</span><span class="gi">+  # -- Common annotations for all pods
</span>   podAnnotations: {}
<span class="gd">-  # loki.revisionHistoryLimit -- The number of old ReplicaSets to retain to allow rollback
</span><span class="gi">+  # -- The number of old ReplicaSets to retain to allow rollback
</span>   revisionHistoryLimit: 10
<span class="gd">-  # loki.config -- Config file contents for Loki
</span><span class="gi">+  # -- Config file contents for Loki
</span>   # @default -- See values.yaml
   config: |
     auth_enabled: false
<span class="p">@@ -124,44 +124,44 @@</span> loki:
       external_url: https://alertmanager.xx
 
 serviceAccount:
<span class="gd">-  # serviceAccount.create -- Specifies whether a ServiceAccount should be created
</span><span class="gi">+  # -- Specifies whether a ServiceAccount should be created
</span>   create: true
<span class="gd">-  # serviceAccount.name -- The name of the ServiceAccount to use.
</span><span class="gi">+  # -- The name of the ServiceAccount to use.
</span>   # If not set and create is true, a name is generated using the fullname template
   name: null
<span class="gd">-  # serviceAccount.imagePullSecrets -- Image pull secrets for the service account
</span><span class="gi">+  # -- Image pull secrets for the service account
</span>   imagePullSecrets: []
<span class="gd">-  # serviceAccount.annotations -- Annotations for the service account
</span><span class="gi">+  # -- Annotations for the service account
</span>   annotations: {}
 
 # ServiceMonitor configuration
 serviceMonitor:
<span class="gd">-  # serviceMonitor.enabled -- If enabled, ServiceMonitor resources for Prometheus Operator are created
</span><span class="gi">+  # -- If enabled, ServiceMonitor resources for Prometheus Operator are created
</span>   enabled: false
<span class="gd">-  # serviceMonitor.namespace -- Alternative namespace for ServiceMonitor resources
</span><span class="gi">+  # -- Alternative namespace for ServiceMonitor resources
</span>   namespace: null
<span class="gd">-  # serviceMonitor.namespaceSelector -- Namespace selector for ServiceMonitor resources
</span><span class="gi">+  # -- Namespace selector for ServiceMonitor resources
</span>   namespaceSelector: {}
<span class="gd">-  # serviceMonitor.annotations -- ServiceMonitor annotations
</span><span class="gi">+  # -- ServiceMonitor annotations
</span>   annotations: {}
<span class="gd">-  # serviceMonitor.labels -- Additional ServiceMonitor labels
</span><span class="gi">+  # -- Additional ServiceMonitor labels
</span>   labels: {}
<span class="gd">-  # serviceMonitor.interval -- ServiceMonitor scrape interval
</span><span class="gi">+  # -- ServiceMonitor scrape interval
</span>   interval: null
<span class="gd">-  # serviceMonitor.scrapeTimeout -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
</span><span class="gi">+  # -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
</span>   scrapeTimeout: null
 
 # Rules for the Prometheus Operator
 prometheusRule:
<span class="gd">-  # prometheusRule.enabled -- If enabled, a PrometheusRule resource for Prometheus Operator is created
</span><span class="gi">+  # -- If enabled, a PrometheusRule resource for Prometheus Operator is created
</span>   enabled: false
<span class="gd">-  # prometheusRule.namespace -- Alternative namespace for the PrometheusRule resource
</span><span class="gi">+  # -- Alternative namespace for the PrometheusRule resource
</span>   namespace: null
<span class="gd">-  # prometheusRule.annotations -- PrometheusRule annotations
</span><span class="gi">+  # -- PrometheusRule annotations
</span>   annotations: {}
<span class="gd">-  # prometheusRule.labels -- Additional PrometheusRule labels
</span><span class="gi">+  # -- Additional PrometheusRule labels
</span>   labels: {}
<span class="gd">-  # prometheusRule.groups -- Contents of Prometheus rules file
</span><span class="gi">+  # -- Contents of Prometheus rules file
</span>   groups: []
   # - name: loki-rules
   #   rules:
<span class="p">@@ -174,32 +174,32 @@</span> prometheusRule:
 
 # Configuration for the ingester
 ingester:
<span class="gd">-  # ingester.replicas -- Number of replicas for the ingester
</span><span class="gi">+  # -- Number of replicas for the ingester
</span>   replicas: 1
   image:
<span class="gd">-    # ingester.image.registry -- The Docker registry for the ingester image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the ingester image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # ingester.image.repository -- Docker image repository for the ingester image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the ingester image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # ingester.image.tag -- Docker image tag for the ingester image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the ingester image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # ingester.priorityClassName -- The name of the PriorityClass for ingester pods
</span><span class="gi">+  # -- The name of the PriorityClass for ingester pods
</span>   priorityClassName: null
<span class="gd">-  # ingester.podAnnotations -- Annotations for ingester pods
</span><span class="gi">+  # -- Annotations for ingester pods
</span>   podAnnotations: {}
<span class="gd">-  # ingester.extraArgs -- Additional CLI args for the ingester
</span><span class="gi">+  # -- Additional CLI args for the ingester
</span>   extraArgs: []
<span class="gd">-  # ingester.extraEnv -- Environment variables to add to the ingester pods
</span><span class="gi">+  # -- Environment variables to add to the ingester pods
</span>   extraEnv: []
<span class="gd">-  # ingester.extraEnvFrom -- Environment variables from secrets or configmaps to add to the ingester pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the ingester pods
</span>   extraEnvFrom: []
<span class="gd">-  # ingester.resources -- Resource requests and limits for the ingester
</span><span class="gi">+  # -- Resource requests and limits for the ingester
</span>   resources: {}
<span class="gd">-  # ingester.terminationGracePeriodSeconds -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
</span><span class="gi">+  # -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
</span>   # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
   # all data and to successfully leave the member ring on shutdown.
   terminationGracePeriodSeconds: 300
<span class="gd">-  # ingester.affinity -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -215,16 +215,16 @@</span> ingester:
               matchLabels:
                 {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # ingester.nodeSelector -- Node selector for ingester pods
</span><span class="gi">+  # -- Node selector for ingester pods
</span>   nodeSelector: {}
<span class="gd">-  # ingester.tolerations -- Tolerations for ingester pods
</span><span class="gi">+  # -- Tolerations for ingester pods
</span>   tolerations: []
   persistence:
<span class="gd">-    # ingester.persistence.enabled -- Enable creating PVCs which is required when using boltdb-shipper
</span><span class="gi">+    # -- Enable creating PVCs which is required when using boltdb-shipper
</span>     enabled: false
<span class="gd">-    # ingester.persistence.size -- Size of persistent disk
</span><span class="gi">+    # -- Size of persistent disk
</span>     size: 10Gi
<span class="gd">-    # ingester.persistence.storageClass -- Storage class to be used.
</span><span class="gi">+    # -- Storage class to be used.
</span>     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
     # If empty or set to null, no storageClassName spec is
<span class="p">@@ -233,30 +233,30 @@</span> ingester:
 
 # Configuration for the distributor
 distributor:
<span class="gd">-  # distributor.replicas -- Number of replicas for the distributor
</span><span class="gi">+  # -- Number of replicas for the distributor
</span>   replicas: 1
   image:
<span class="gd">-    # distributor.image.registry -- The Docker registry for the distributor image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the distributor image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # distributor.image.repository -- Docker image repository for the distributor image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the distributor image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # distributor.image.tag -- Docker image tag for the distributor image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the distributor image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # distributor.priorityClassName -- The name of the PriorityClass for distributor pods
</span><span class="gi">+  # -- The name of the PriorityClass for distributor pods
</span>   priorityClassName: null
<span class="gd">-  # distributor.podAnnotations -- Annotations for distributor pods
</span><span class="gi">+  # -- Annotations for distributor pods
</span>   podAnnotations: {}
<span class="gd">-  # distributor.extraArgs -- Additional CLI args for the distributor
</span><span class="gi">+  # -- Additional CLI args for the distributor
</span>   extraArgs: []
<span class="gd">-  # distributor.extraEnv -- Environment variables to add to the distributor pods
</span><span class="gi">+  # -- Environment variables to add to the distributor pods
</span>   extraEnv: []
<span class="gd">-  # distributor.extraEnvFrom -- Environment variables from secrets or configmaps to add to the distributor pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the distributor pods
</span>   extraEnvFrom: []
<span class="gd">-  # distributor.resources -- Resource requests and limits for the distributor
</span><span class="gi">+  # -- Resource requests and limits for the distributor
</span>   resources: {}
<span class="gd">-  # distributor.terminationGracePeriodSeconds -- Grace period to allow the distributor to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the distributor to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # distributor.affinity -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -272,37 +272,37 @@</span> distributor:
               matchLabels:
                 {{- include "loki.distributorSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # distributor.nodeSelector -- Node selector for distributor pods
</span><span class="gi">+  # -- Node selector for distributor pods
</span>   nodeSelector: {}
<span class="gd">-  # distributor.tolerations -- Tolerations for distributor pods
</span><span class="gi">+  # -- Tolerations for distributor pods
</span>   tolerations: []
 
 # Configuration for the querier
 querier:
<span class="gd">-  # querier.replicas -- Number of replicas for the querier
</span><span class="gi">+  # -- Number of replicas for the querier
</span>   replicas: 1
   image:
<span class="gd">-    # querier.image.registry -- The Docker registry for the querier image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the querier image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # querier.image.repository -- Docker image repository for the querier image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the querier image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # querier.image.tag -- Docker image tag for the querier image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the querier image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # querier.priorityClassName -- The name of the PriorityClass for querier pods
</span><span class="gi">+  # -- The name of the PriorityClass for querier pods
</span>   priorityClassName: null
<span class="gd">-  # querier.podAnnotations -- Annotations for querier pods
</span><span class="gi">+  # -- Annotations for querier pods
</span>   podAnnotations: {}
<span class="gd">-  # querier.extraArgs -- Additional CLI args for the querier
</span><span class="gi">+  # -- Additional CLI args for the querier
</span>   extraArgs: []
<span class="gd">-  # querier.extraEnv -- Environment variables to add to the querier pods
</span><span class="gi">+  # -- Environment variables to add to the querier pods
</span>   extraEnv: []
<span class="gd">-  # querier.extraEnvFrom -- Environment variables from secrets or configmaps to add to the querier pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the querier pods
</span>   extraEnvFrom: []
<span class="gd">-  # querier.resources -- Resource requests and limits for the querier
</span><span class="gi">+  # -- Resource requests and limits for the querier
</span>   resources: {}
<span class="gd">-  # querier.terminationGracePeriodSeconds -- Grace period to allow the querier to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the querier to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # querier.affinity -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -318,16 +318,16 @@</span> querier:
               matchLabels:
                 {{- include "loki.querierSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # querier.nodeSelector -- Node selector for querier pods
</span><span class="gi">+  # -- Node selector for querier pods
</span>   nodeSelector: {}
<span class="gd">-  # querier.tolerations -- Tolerations for querier pods
</span><span class="gi">+  # -- Tolerations for querier pods
</span>   tolerations: []
   persistence:
<span class="gd">-    # querier.persistence.enabled -- Enable creating PVCs for the querier cache
</span><span class="gi">+    # -- Enable creating PVCs for the querier cache
</span>     enabled: false
<span class="gd">-    # querier.persistence.size -- Size of persistent disk
</span><span class="gi">+    # -- Size of persistent disk
</span>     size: 10Gi
<span class="gd">-    # querier.persistence.storageClass -- Storage class to be used.
</span><span class="gi">+    # -- Storage class to be used.
</span>     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
     # If empty or set to null, no storageClassName spec is
<span class="p">@@ -336,30 +336,30 @@</span> querier:
 
 # Configuration for the query-frontend
 queryFrontend:
<span class="gd">-  # queryFrontend.replicas -- Number of replicas for the query-frontend
</span><span class="gi">+  # -- Number of replicas for the query-frontend
</span>   replicas: 1
   image:
<span class="gd">-    # queryFrontend.image.registry -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # queryFrontend.image.repository -- Docker image repository for the query-frontend image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the query-frontend image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # queryFrontend.image.tag -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # queryFrontend.priorityClassName -- The name of the PriorityClass for query-frontend pods
</span><span class="gi">+  # -- The name of the PriorityClass for query-frontend pods
</span>   priorityClassName: null
<span class="gd">-  # queryFrontend.podAnnotations -- Annotations for query-frontend pods
</span><span class="gi">+  # -- Annotations for query-frontend pods
</span>   podAnnotations: {}
<span class="gd">-  # queryFrontend.extraArgs -- Additional CLI args for the query-frontend
</span><span class="gi">+  # -- Additional CLI args for the query-frontend
</span>   extraArgs: []
<span class="gd">-  # queryFrontend.extraEnv -- Environment variables to add to the query-frontend pods
</span><span class="gi">+  # -- Environment variables to add to the query-frontend pods
</span>   extraEnv: []
<span class="gd">-  # queryFrontend.extraEnvFrom -- Environment variables from secrets or configmaps to add to the query-frontend pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the query-frontend pods
</span>   extraEnvFrom: []
<span class="gd">-  # queryFrontend.resources -- Resource requests and limits for the query-frontend
</span><span class="gi">+  # -- Resource requests and limits for the query-frontend
</span>   resources: {}
<span class="gd">-  # queryFrontend.terminationGracePeriodSeconds -- Grace period to allow the query-frontend to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the query-frontend to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # queryFrontend.affinity -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -375,39 +375,39 @@</span> queryFrontend:
               matchLabels:
                 {{- include "loki.queryFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # queryFrontend.nodeSelector -- Node selector for query-frontend pods
</span><span class="gi">+  # -- Node selector for query-frontend pods
</span>   nodeSelector: {}
<span class="gd">-  # queryFrontend.tolerations -- Tolerations for query-frontend pods
</span><span class="gi">+  # -- Tolerations for query-frontend pods
</span>   tolerations: []
 
 # Configuration for the table-manager
 tableManager:
<span class="gd">-  # tableManager.enabled -- Specifies whether the table-manager should be enabled
</span><span class="gi">+  # -- Specifies whether the table-manager should be enabled
</span>   enabled: false
<span class="gd">-  # tableManager.replicas -- Number of replicas for the table-manager
</span><span class="gi">+  # -- Number of replicas for the table-manager
</span>   replicas: 1
   image:
<span class="gd">-    # tableManager.image.registry -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # tableManager.image.repository -- Docker image repository for the table-manager image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the table-manager image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # tableManager.image.tag -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # tableManager.priorityClassName -- The name of the PriorityClass for table-manager pods
</span><span class="gi">+  # -- The name of the PriorityClass for table-manager pods
</span>   priorityClassName: null
<span class="gd">-  # tableManager.podAnnotations -- Annotations for table-manager pods
</span><span class="gi">+  # -- Annotations for table-manager pods
</span>   podAnnotations: {}
<span class="gd">-  # tableManager.extraArgs -- Additional CLI args for the table-manager
</span><span class="gi">+  # -- Additional CLI args for the table-manager
</span>   extraArgs: []
<span class="gd">-  # tableManager.extraEnv -- Environment variables to add to the table-manager pods
</span><span class="gi">+  # -- Environment variables to add to the table-manager pods
</span>   extraEnv: []
<span class="gd">-  # tableManager.extraEnvFrom -- Environment variables from secrets or configmaps to add to the table-manager pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the table-manager pods
</span>   extraEnvFrom: []
<span class="gd">-  # tableManager.resources -- Resource requests and limits for the table-manager
</span><span class="gi">+  # -- Resource requests and limits for the table-manager
</span>   resources: {}
<span class="gd">-  # tableManager.terminationGracePeriodSeconds -- Grace period to allow the table-manager to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the table-manager to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # tableManager.affinity -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -423,39 +423,39 @@</span> tableManager:
               matchLabels:
                 {{- include "loki.tableManagerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # tableManager.nodeSelector -- Node selector for table-manager pods
</span><span class="gi">+  # -- Node selector for table-manager pods
</span>   nodeSelector: {}
<span class="gd">-  # tableManager.tolerations -- Tolerations for table-manager pods
</span><span class="gi">+  # -- Tolerations for table-manager pods
</span>   tolerations: []
 
 # Configuration for the gateway
 gateway:
<span class="gd">-  # gateway.replicas -- Number of replicas for the gateway
</span><span class="gi">+  # -- Number of replicas for the gateway
</span>   replicas: 1
   image:
<span class="gd">-    # gateway.image.registry -- The Docker registry for the gateway image
</span><span class="gi">+    # -- The Docker registry for the gateway image
</span>     registry: docker.io
<span class="gd">-    # gateway.image.repository -- The gateway image repository
</span><span class="gi">+    # -- The gateway image repository
</span>     repository: nginxinc/nginx-unprivileged
<span class="gd">-    # gateway.image.tag -- The gateway image tag
</span><span class="gi">+    # -- The gateway image tag
</span>     tag: 1.19-alpine
<span class="gd">-    # gateway.image.pullPolicy -- The gateway image pull policy
</span><span class="gi">+    # -- The gateway image pull policy
</span>     pullPolicy: IfNotPresent
<span class="gd">-  # gateway.priorityClassName -- The name of the PriorityClass for gateway pods
</span><span class="gi">+  # -- The name of the PriorityClass for gateway pods
</span>   priorityClassName: null
<span class="gd">-  # gateway.podAnnotations -- Annotations for gateway pods
</span><span class="gi">+  # -- Annotations for gateway pods
</span>   podAnnotations: {}
<span class="gd">-  # gateway.extraArgs -- Additional CLI args for the gateway
</span><span class="gi">+  # -- Additional CLI args for the gateway
</span>   extraArgs: []
<span class="gd">-  # gateway.extraEnv -- Environment variables to add to the gateway pods
</span><span class="gi">+  # -- Environment variables to add to the gateway pods
</span>   extraEnv: []
<span class="gd">-  # gateway.extraEnvFrom -- Environment variables from secrets or configmaps to add to the gateway pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the gateway pods
</span>   extraEnvFrom: []
<span class="gd">-  # gateway.resources -- Resource requests and limits for the gateway
</span><span class="gi">+  # -- Resource requests and limits for the gateway
</span>   resources: {}
<span class="gd">-  # gateway.terminationGracePeriodSeconds -- Grace period to allow the gateway to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the gateway to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # gateway.affinity -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -471,49 +471,49 @@</span> gateway:
               matchLabels:
                 {{- include "loki.gatewaySelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # gateway.nodeSelector -- Node selector for gateway pods
</span><span class="gi">+  # -- Node selector for gateway pods
</span>   nodeSelector: {}
<span class="gd">-  # gateway.tolerations -- Tolerations for gateway pods
</span><span class="gi">+  # -- Tolerations for gateway pods
</span>   tolerations: []
   # Gateway service configuration
   service:
<span class="gd">-    # gateway.service.port -- Port of the gateway service
</span><span class="gi">+    # -- Port of the gateway service
</span>     port: 80
<span class="gd">-    # gateway.service.type -- Type of the gateway service
</span><span class="gi">+    # -- Type of the gateway service
</span>     type: ClusterIP
<span class="gd">-    # gateway.service.clusterIP -- ClusterIP of the gateway service
</span><span class="gi">+    # -- ClusterIP of the gateway service
</span>     clusterIP: null
<span class="gd">-    # gateway.service.nodePort -- Node port if service type is NodePort
</span><span class="gi">+    # -- Node port if service type is NodePort
</span>     nodePort: null
<span class="gd">-    # gateway.service.loadBalancerIP -- Load balancer IPO address if service type is LoadBalancer
</span><span class="gi">+    # -- Load balancer IPO address if service type is LoadBalancer
</span>     loadBalancerIP: null
   # Gateway ingress configuration
   ingress:
<span class="gd">-    # gateway.ingress.enabled -- Specifies whether an ingress for the gateway should be created
</span><span class="gi">+    # -- Specifies whether an ingress for the gateway should be created
</span>     enabled: false
<span class="gd">-    # gateway.ingress.annotations -- Annotations for the gateway ingress
</span><span class="gi">+    # -- Annotations for the gateway ingress
</span>     annotations: {}
<span class="gd">-    # gateway.ingress.hosts -- Hosts configuration for the gateway ingress
</span><span class="gi">+    # -- Hosts configuration for the gateway ingress
</span>     hosts:
       - host: gateway.loki.example.com
         paths:
           - /
<span class="gd">-    # gateway.ingress.tls -- TLS configuration for the gateway ingress
</span><span class="gi">+    # -- TLS configuration for the gateway ingress
</span>     tls:
       - secretName: loki-gateway-tls
         hosts:
           - gateway.loki.example.com
   # Basic auth configuration
   basicAuth:
<span class="gd">-    # gateway.basicAuth.enabled -- Enables basic authentication for the gateway
</span><span class="gi">+    # -- Enables basic authentication for the gateway
</span>     enabled: false
<span class="gd">-    # gateway.basicAuth.username -- The basic auth username for the gateway
</span><span class="gi">+    # -- The basic auth username for the gateway
</span>     username: null
<span class="gd">-    # gateway.basicAuth.password -- The basic auth password for the gateway
</span><span class="gi">+    # -- The basic auth password for the gateway
</span>     password: null
<span class="gd">-    # gateway.basicAuth.existingSecret -- Existing basic auth secret to use. Must contain '.htpasswd'
</span><span class="gi">+    # -- Existing basic auth secret to use. Must contain '.htpasswd'
</span>     existingSecret: null
<span class="gd">-  # gateway.nginxConfig -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
</span><span class="gi">+  # -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
</span>   # @default -- See values.yaml
   nginxConfig: |
     worker_processes  5;  ## Default: 1
<span class="p">@@ -586,39 +586,39 @@</span> gateway:
 
 # Configuration for the compactor
 compactor:
<span class="gd">-  # compactor.enabled -- Specifies whether compactor should be enabled
</span><span class="gi">+  # -- Specifies whether compactor should be enabled
</span>   enabled: false
   image:
<span class="gd">-    # compactor.image.registry -- The Docker registry for the compactor image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the compactor image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # compactor.image.repository -- Docker image repository for the compactor image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the compactor image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # compactor.image.tag -- Docker image tag for the compactor image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the compactor image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # compactor.priorityClassName -- The name of the PriorityClass for compactor pods
</span><span class="gi">+  # -- The name of the PriorityClass for compactor pods
</span>   priorityClassName: null
<span class="gd">-  # compactor.podAnnotations -- Annotations for compactor pods
</span><span class="gi">+  # -- Annotations for compactor pods
</span>   podAnnotations: {}
<span class="gd">-  # compactor.extraArgs -- Additional CLI args for the compactor
</span><span class="gi">+  # -- Additional CLI args for the compactor
</span>   extraArgs: []
<span class="gd">-  # compactor.extraEnv -- Environment variables to add to the compactor pods
</span><span class="gi">+  # -- Environment variables to add to the compactor pods
</span>   extraEnv: []
<span class="gd">-  # compactor.extraEnvFrom -- Environment variables from secrets or configmaps to add to the compactor pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the compactor pods
</span>   extraEnvFrom: []
<span class="gd">-  # compactor.resources -- Resource requests and limits for the compactor
</span><span class="gi">+  # -- Resource requests and limits for the compactor
</span>   resources: {}
<span class="gd">-  # compactor.terminationGracePeriodSeconds -- Grace period to allow the compactor to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the compactor to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # compactor.nodeSelector -- Node selector for compactor pods
</span><span class="gi">+  # -- Node selector for compactor pods
</span>   nodeSelector: {}
<span class="gd">-  # compactor.tolerations -- Tolerations for compactor pods
</span><span class="gi">+  # -- Tolerations for compactor pods
</span>   tolerations: []
   persistence:
<span class="gd">-    # compactor.persistence.enabled -- Enable creating PVCs for the compactor
</span><span class="gi">+    # -- Enable creating PVCs for the compactor
</span>     enabled: false
<span class="gd">-    # compactor.persistence.size -- Size of persistent disk
</span><span class="gi">+    # -- Size of persistent disk
</span>     size: 10Gi
<span class="gd">-    # compactor.persistence.storageClass -- Storage class to be used.
</span><span class="gi">+    # -- Storage class to be used.
</span>     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
     # If empty or set to null, no storageClassName spec is
<span class="p">@@ -627,32 +627,32 @@</span> compactor:
 
 # Configuration for the ruler
 ruler:
<span class="gd">-  # ruler.enabled -- Specifies whether the ruler should be enabled
</span><span class="gi">+  # -- Specifies whether the ruler should be enabled
</span>   enabled: false
<span class="gd">-  # ruler.replicas -- Number of replicas for the ruler
</span><span class="gi">+  # -- Number of replicas for the ruler
</span>   replicas: 1
   image:
<span class="gd">-    # ruler.image.registry -- The Docker registry for the ruler image. Overrides `loki.image.registry`
</span><span class="gi">+    # -- The Docker registry for the ruler image. Overrides `loki.image.registry`
</span>     registry: null
<span class="gd">-    # ruler.image.repository -- Docker image repository for the ruler image. Overrides `loki.image.repository`
</span><span class="gi">+    # -- Docker image repository for the ruler image. Overrides `loki.image.repository`
</span>     repository: null
<span class="gd">-    # ruler.image.tag -- Docker image tag for the ruler image. Overrides `loki.image.tag`
</span><span class="gi">+    # -- Docker image tag for the ruler image. Overrides `loki.image.tag`
</span>     tag: null
<span class="gd">-  # ruler.priorityClassName -- The name of the PriorityClass for ruler pods
</span><span class="gi">+  # -- The name of the PriorityClass for ruler pods
</span>   priorityClassName: null
<span class="gd">-  # ruler.podAnnotations -- Annotations for ruler pods
</span><span class="gi">+  # -- Annotations for ruler pods
</span>   podAnnotations: {}
<span class="gd">-  # ruler.extraArgs -- Additional CLI args for the ruler
</span><span class="gi">+  # -- Additional CLI args for the ruler
</span>   extraArgs: []
<span class="gd">-  # ruler.extraEnv -- Environment variables to add to the ruler pods
</span><span class="gi">+  # -- Environment variables to add to the ruler pods
</span>   extraEnv: []
<span class="gd">-  # ruler.extraEnvFrom -- Environment variables from secrets or configmaps to add to the ruler pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to the ruler pods
</span>   extraEnvFrom: []
<span class="gd">-  # ruler.resources -- Resource requests and limits for the ruler
</span><span class="gi">+  # -- Resource requests and limits for the ruler
</span>   resources: {}
<span class="gd">-  # ruler.terminationGracePeriodSeconds -- Grace period to allow the ruler to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow the ruler to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 300
<span class="gd">-  # ruler.affinity -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -668,22 +668,22 @@</span> ruler:
               matchLabels:
                 {{- include "loki.rulerSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # ruler.nodeSelector -- Node selector for ruler pods
</span><span class="gi">+  # -- Node selector for ruler pods
</span>   nodeSelector: {}
<span class="gd">-  # ruler.tolerations -- Tolerations for ruler pods
</span><span class="gi">+  # -- Tolerations for ruler pods
</span>   tolerations: []
   persistence:
<span class="gd">-    # ruler.persistence.enabled -- Enable creating PVCs for the ruler
</span><span class="gi">+    # -- Enable creating PVCs for the ruler
</span>     enabled: false
<span class="gd">-    # ruler.persistence.size -- Size of persistent disk
</span><span class="gi">+    # -- Size of persistent disk
</span>     size: 10Gi
<span class="gd">-    # ruler.persistence.storageClass -- Storage class to be used.
</span><span class="gi">+    # -- Storage class to be used.
</span>     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
     # If empty or set to null, no storageClassName spec is
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
<span class="gd">-  # ruler.directories -- Directories containing rules files
</span><span class="gi">+  # -- Directories containing rules files
</span>   directories: {}
     # tenant_foo:
     #   rules1.txt: |
<span class="p">@@ -752,48 +752,48 @@</span> ruler:
 
 memcached:
   image:
<span class="gd">-    # memcached.image.registry -- The Docker registry for the memcached
</span><span class="gi">+    # -- The Docker registry for the memcached
</span>     registry: docker.io
<span class="gd">-    # memcached.image.repository -- Memcached Docker image repository
</span><span class="gi">+    # -- Memcached Docker image repository
</span>     repository: memcached
<span class="gd">-    # memcached.image.tag -- Memcached Docker image tag
</span><span class="gi">+    # -- Memcached Docker image tag
</span>     tag: 1.6.7-alpine
<span class="gd">-    # memcached.image.pullPolicy -- Memcached Docker image pull policy
</span><span class="gi">+    # -- Memcached Docker image pull policy
</span>     pullPolicy: IfNotPresent
 
 memcachedExporter:
<span class="gd">-  # memcachedExporter.enabled -- Specifies whether the Memcached Exporter should be enabled
</span><span class="gi">+  # -- Specifies whether the Memcached Exporter should be enabled
</span>   enabled: false
   image:
<span class="gd">-    # memcachedExporter.image.registry -- The Docker registry for the Memcached Exporter
</span><span class="gi">+    # -- The Docker registry for the Memcached Exporter
</span>     registry: docker.io
<span class="gd">-    # memcachedExporter.image.repository -- Memcached Exporter Docker image repository
</span><span class="gi">+    # -- Memcached Exporter Docker image repository
</span>     repository: prom/memcached-exporter
<span class="gd">-    # memcachedExporter.image.tag -- Memcached Exporter Docker image tag
</span><span class="gi">+    # -- Memcached Exporter Docker image tag
</span>     tag: v0.6.0
<span class="gd">-    # memcachedExporter.image.pullPolicy -- Memcached Exporter Docker image pull policy
</span><span class="gi">+    # -- Memcached Exporter Docker image pull policy
</span>     pullPolicy: IfNotPresent
 
 memcachedChunks:
<span class="gd">-  # memcachedChunks.enabled -- Specifies whether the Memcached chunks cache should be enabled
</span><span class="gi">+  # -- Specifies whether the Memcached chunks cache should be enabled
</span>   enabled: false
<span class="gd">-  # memcachedChunks.replicas -- Number of replicas for memcached-chunks
</span><span class="gi">+  # -- Number of replicas for memcached-chunks
</span>   replicas: 1
<span class="gd">-  # memcachedChunks.priorityClassName -- The name of the PriorityClass for memcached-chunks pods
</span><span class="gi">+  # -- The name of the PriorityClass for memcached-chunks pods
</span>   priorityClassName: null
<span class="gd">-  # memcachedChunks.podAnnotations -- Annotations for memcached-chunks pods
</span><span class="gi">+  # -- Annotations for memcached-chunks pods
</span>   podAnnotations: {}
<span class="gd">-  # memcachedChunks.extraArgs -- Additional CLI args for memcached-chunks
</span><span class="gi">+  # -- Additional CLI args for memcached-chunks
</span>   extraArgs: []
<span class="gd">-  # memcachedChunks.extraEnv -- Environment variables to add to memcached-chunks pods
</span><span class="gi">+  # -- Environment variables to add to memcached-chunks pods
</span>   extraEnv: []
<span class="gd">-  # memcachedChunks.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-chunks pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to memcached-chunks pods
</span>   extraEnvFrom: []
<span class="gd">-  # memcachedChunks.resources -- Resource requests and limits for memcached-chunks
</span><span class="gi">+  # -- Resource requests and limits for memcached-chunks
</span>   resources: {}
<span class="gd">-  # memcachedChunks.terminationGracePeriodSeconds -- Grace period to allow memcached-chunks to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow memcached-chunks to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # memcachedChunks.affinity -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -809,31 +809,31 @@</span> memcachedChunks:
               matchLabels:
                 {{- include "loki.memcachedChunksSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # memcachedChunks.nodeSelector -- Node selector for memcached-chunks pods
</span><span class="gi">+  # -- Node selector for memcached-chunks pods
</span>   nodeSelector: {}
<span class="gd">-  # memcachedChunks.tolerations -- Tolerations for memcached-chunks pods
</span><span class="gi">+  # -- Tolerations for memcached-chunks pods
</span>   tolerations: []
 
 memcachedFrontend:
<span class="gd">-  # memcachedFrontend.enabled -- Specifies whether the Memcached frontend cache should be enabled
</span><span class="gi">+  # -- Specifies whether the Memcached frontend cache should be enabled
</span>   enabled: false
<span class="gd">-  # memcachedFrontend.replicas -- Number of replicas for memcached-frontend
</span><span class="gi">+  # -- Number of replicas for memcached-frontend
</span>   replicas: 1
<span class="gd">-  # memcachedFrontend.priorityClassName -- The name of the PriorityClass for memcached-frontend pods
</span><span class="gi">+  # -- The name of the PriorityClass for memcached-frontend pods
</span>   priorityClassName: null
<span class="gd">-  # memcachedFrontend.podAnnotations -- Annotations for memcached-frontend pods
</span><span class="gi">+  # -- Annotations for memcached-frontend pods
</span>   podAnnotations: {}
<span class="gd">-  # memcachedFrontend.extraArgs -- Additional CLI args for memcached-frontend
</span><span class="gi">+  # -- Additional CLI args for memcached-frontend
</span>   extraArgs: []
<span class="gd">-  # memcachedFrontend.extraEnv -- Environment variables to add to memcached-frontend pods
</span><span class="gi">+  # -- Environment variables to add to memcached-frontend pods
</span>   extraEnv: []
<span class="gd">-  # memcachedFrontend.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-frontend pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to memcached-frontend pods
</span>   extraEnvFrom: []
<span class="gd">-  # memcachedFrontend.resources -- Resource requests and limits for memcached-frontend
</span><span class="gi">+  # -- Resource requests and limits for memcached-frontend
</span>   resources: {}
<span class="gd">-  # memcachedFrontend.terminationGracePeriodSeconds -- Grace period to allow memcached-frontend to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow memcached-frontend to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # memcachedFrontend.affinity -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -849,31 +849,31 @@</span> memcachedFrontend:
               matchLabels:
                 {{- include "loki.memcachedFrontendSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # memcachedFrontend.nodeSelector -- Node selector for memcached-frontend pods
</span><span class="gi">+  # -- Node selector for memcached-frontend pods
</span>   nodeSelector: {}
<span class="gd">-  # memcachedFrontend.tolerations -- Tolerations for memcached-frontend pods
</span><span class="gi">+  # -- Tolerations for memcached-frontend pods
</span>   tolerations: []
 
 memcachedIndexQueries:
<span class="gd">-  # memcachedIndexQueries.enabled -- Specifies whether the Memcached index queries cache should be enabled
</span><span class="gi">+  # -- Specifies whether the Memcached index queries cache should be enabled
</span>   enabled: false
<span class="gd">-  # memcachedIndexQueries.replicas -- Number of replicas for memcached-index-queries
</span><span class="gi">+  # -- Number of replicas for memcached-index-queries
</span>   replicas: 1
<span class="gd">-  # memcachedIndexQueries.priorityClassName -- The name of the PriorityClass for memcached-index-queries pods
</span><span class="gi">+  # -- The name of the PriorityClass for memcached-index-queries pods
</span>   priorityClassName: null
<span class="gd">-  # memcachedIndexQueries.podAnnotations -- Annotations for memcached-index-queries pods
</span><span class="gi">+  # -- Annotations for memcached-index-queries pods
</span>   podAnnotations: {}
<span class="gd">-  # memcachedIndexQueries.extraArgs -- Additional CLI args for memcached-index-queries
</span><span class="gi">+  # -- Additional CLI args for memcached-index-queries
</span>   extraArgs: []
<span class="gd">-  # memcachedIndexQueries.extraEnv -- Environment variables to add to memcached-index-queries pods
</span><span class="gi">+  # -- Environment variables to add to memcached-index-queries pods
</span>   extraEnv: []
<span class="gd">-  # memcachedIndexQueries.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-index-queries pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to memcached-index-queries pods
</span>   extraEnvFrom: []
<span class="gd">-  # memcachedIndexQueries.resources -- Resource requests and limits for memcached-index-queries
</span><span class="gi">+  # -- Resource requests and limits for memcached-index-queries
</span>   resources: {}
<span class="gd">-  # memcachedIndexQueries.terminationGracePeriodSeconds -- Grace period to allow memcached-index-queries to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow memcached-index-queries to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # memcachedIndexQueries.affinity -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -889,31 +889,31 @@</span> memcachedIndexQueries:
               matchLabels:
                 {{- include "loki.memcachedIndexQueriesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # memcachedIndexQueries.nodeSelector -- Node selector for memcached-index-queries pods
</span><span class="gi">+  # -- Node selector for memcached-index-queries pods
</span>   nodeSelector: {}
<span class="gd">-  # memcachedIndexQueries.tolerations -- Tolerations for memcached-index-queries pods
</span><span class="gi">+  # -- Tolerations for memcached-index-queries pods
</span>   tolerations: []
 
 memcachedIndexWrites:
<span class="gd">-  # memcachedIndexWrites.enabled -- Specifies whether the Memcached index writes cache should be enabled
</span><span class="gi">+  # -- Specifies whether the Memcached index writes cache should be enabled
</span>   enabled: false
<span class="gd">-  # memcachedIndexWrites.replicas -- Number of replicas for memcached-index-writes
</span><span class="gi">+  # -- Number of replicas for memcached-index-writes
</span>   replicas: 1
<span class="gd">-  # memcachedIndexWrites.priorityClassName -- The name of the PriorityClass for memcached-index-writes pods
</span><span class="gi">+  # -- The name of the PriorityClass for memcached-index-writes pods
</span>   priorityClassName: null
<span class="gd">-  # memcachedIndexWrites.podAnnotations -- Annotations for memcached-index-writes pods
</span><span class="gi">+  # -- Annotations for memcached-index-writes pods
</span>   podAnnotations: {}
<span class="gd">-  # memcachedIndexWrites.extraArgs -- Additional CLI args for memcached-index-writes
</span><span class="gi">+  # -- Additional CLI args for memcached-index-writes
</span>   extraArgs: []
<span class="gd">-  # memcachedIndexWrites.extraEnv -- Environment variables to add to memcached-index-writes pods
</span><span class="gi">+  # -- Environment variables to add to memcached-index-writes pods
</span>   extraEnv: []
<span class="gd">-  # memcachedIndexWrites.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-index-writes pods
</span><span class="gi">+  # -- Environment variables from secrets or configmaps to add to memcached-index-writes pods
</span>   extraEnvFrom: []
<span class="gd">-  # memcachedIndexWrites.resources -- Resource requests and limits for memcached-index-writes
</span><span class="gi">+  # -- Resource requests and limits for memcached-index-writes
</span>   resources: {}
<span class="gd">-  # memcachedIndexWrites.terminationGracePeriodSeconds -- Grace period to allow memcached-index-writes to shutdown before it is killed
</span><span class="gi">+  # -- Grace period to allow memcached-index-writes to shutdown before it is killed
</span>   terminationGracePeriodSeconds: 30
<span class="gd">-  # memcachedIndexWrites.affinity -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
</span><span class="gi">+  # -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
</span>   # @default -- Hard node and soft zone anti-affinity
   affinity: |
     podAntiAffinity:
<span class="p">@@ -929,7 +929,7 @@</span> memcachedIndexWrites:
               matchLabels:
                 {{- include "loki.memcachedIndexWritesSelectorLabels" . | nindent 12 }}
             topologyKey: failure-domain.beta.kubernetes.io/zone
<span class="gd">-  # memcachedIndexWrites.nodeSelector -- Node selector for memcached-index-writes pods
</span><span class="gi">+  # -- Node selector for memcached-index-writes pods
</span>   nodeSelector: {}
<span class="gd">-  # memcachedIndexWrites.tolerations -- Tolerations for memcached-index-writes pods
</span><span class="gi">+  # -- Tolerations for memcached-index-writes pods
</span>   tolerations: []
<span class="err">
</span></code></pre></div></div> <h2 id="0180"> <a href="#0180" class="anchor-heading" aria-labelledby="0180"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.18.0 </h2> <p><strong>Release date:</strong> 2020-11-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use Deployment for ruler (#43)</li> </ul> <h3 id="default-value-changes-299"> <a href="#default-value-changes-299" class="anchor-heading" aria-labelledby="default-value-changes-299"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0173"> <a href="#0173" class="anchor-heading" aria-labelledby="0173"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.3 </h2> <p><strong>Release date:</strong> 2020-11-14</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix compactor PVC enablement (#42)</li> </ul> <h3 id="default-value-changes-300"> <a href="#default-value-changes-300" class="anchor-heading" aria-labelledby="default-value-changes-300"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0172"> <a href="#0172" class="anchor-heading" aria-labelledby="0172"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.2 </h2> <p><strong>Release date:</strong> 2020-11-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add helm-docs check and update ci tools (#40)</li> </ul> <h3 id="default-value-changes-301"> <a href="#default-value-changes-301" class="anchor-heading" aria-labelledby="default-value-changes-301"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0171"> <a href="#0171" class="anchor-heading" aria-labelledby="0171"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.1 </h2> <p><strong>Release date:</strong> 2020-11-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix readme (#39)</li> </ul> <h3 id="default-value-changes-302"> <a href="#default-value-changes-302" class="anchor-heading" aria-labelledby="default-value-changes-302"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0170"> <a href="#0170" class="anchor-heading" aria-labelledby="0170"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.17.0 </h2> <p><strong>Release date:</strong> 2020-11-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add support for priorityClassName (#38)</li> </ul> <h3 id="default-value-changes-303"> <a href="#default-value-changes-303" class="anchor-heading" aria-labelledby="default-value-changes-303"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 23b140b6..016eed93 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -2,6 +2,8 @@</span> global:
   image:
     # global.image.registry -- Overrides the Docker registry globally for all images
     registry: null
<span class="gi">+  # global.priorityClassName -- Overrides the priorityClassName for all pods
+  priorityClassName: null
</span> 
 # nameOverride -- Overrides the chart's name
 nameOverride: null
<span class="p">@@ -181,6 +183,8 @@</span> ingester:
     repository: null
     # ingester.image.tag -- Docker image tag for the ingester image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # ingester.priorityClassName -- The name of the PriorityClass for ingester pods
+  priorityClassName: null
</span>   # ingester.podAnnotations -- Annotations for ingester pods
   podAnnotations: {}
   # ingester.extraArgs -- Additional CLI args for the ingester
<span class="p">@@ -238,6 +242,8 @@</span> distributor:
     repository: null
     # distributor.image.tag -- Docker image tag for the distributor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # distributor.priorityClassName -- The name of the PriorityClass for distributor pods
+  priorityClassName: null
</span>   # distributor.podAnnotations -- Annotations for distributor pods
   podAnnotations: {}
   # distributor.extraArgs -- Additional CLI args for the distributor
<span class="p">@@ -282,6 +288,8 @@</span> querier:
     repository: null
     # querier.image.tag -- Docker image tag for the querier image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # querier.priorityClassName -- The name of the PriorityClass for querier pods
+  priorityClassName: null
</span>   # querier.podAnnotations -- Annotations for querier pods
   podAnnotations: {}
   # querier.extraArgs -- Additional CLI args for the querier
<span class="p">@@ -337,6 +345,8 @@</span> queryFrontend:
     repository: null
     # queryFrontend.image.tag -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # queryFrontend.priorityClassName -- The name of the PriorityClass for query-frontend pods
+  priorityClassName: null
</span>   # queryFrontend.podAnnotations -- Annotations for query-frontend pods
   podAnnotations: {}
   # queryFrontend.extraArgs -- Additional CLI args for the query-frontend
<span class="p">@@ -383,6 +393,8 @@</span> tableManager:
     repository: null
     # tableManager.image.tag -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # tableManager.priorityClassName -- The name of the PriorityClass for table-manager pods
+  priorityClassName: null
</span>   # tableManager.podAnnotations -- Annotations for table-manager pods
   podAnnotations: {}
   # tableManager.extraArgs -- Additional CLI args for the table-manager
<span class="p">@@ -429,6 +441,8 @@</span> gateway:
     tag: 1.19-alpine
     # gateway.image.pullPolicy -- The gateway image pull policy
     pullPolicy: IfNotPresent
<span class="gi">+  # gateway.priorityClassName -- The name of the PriorityClass for gateway pods
+  priorityClassName: null
</span>   # gateway.podAnnotations -- Annotations for gateway pods
   podAnnotations: {}
   # gateway.extraArgs -- Additional CLI args for the gateway
<span class="p">@@ -581,6 +595,8 @@</span> compactor:
     repository: null
     # compactor.image.tag -- Docker image tag for the compactor image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # compactor.priorityClassName -- The name of the PriorityClass for compactor pods
+  priorityClassName: null
</span>   # compactor.podAnnotations -- Annotations for compactor pods
   podAnnotations: {}
   # compactor.extraArgs -- Additional CLI args for the compactor
<span class="p">@@ -622,6 +638,8 @@</span> ruler:
     repository: null
     # ruler.image.tag -- Docker image tag for the ruler image. Overrides `loki.image.tag`
     tag: null
<span class="gi">+  # ruler.priorityClassName -- The name of the PriorityClass for ruler pods
+  priorityClassName: null
</span>   # ruler.podAnnotations -- Annotations for ruler pods
   podAnnotations: {}
   # ruler.extraArgs -- Additional CLI args for the ruler
<span class="p">@@ -761,6 +779,8 @@</span> memcachedChunks:
   enabled: false
   # memcachedChunks.replicas -- Number of replicas for memcached-chunks
   replicas: 1
<span class="gi">+  # memcachedChunks.priorityClassName -- The name of the PriorityClass for memcached-chunks pods
+  priorityClassName: null
</span>   # memcachedChunks.podAnnotations -- Annotations for memcached-chunks pods
   podAnnotations: {}
   # memcachedChunks.extraArgs -- Additional CLI args for memcached-chunks
<span class="p">@@ -799,6 +819,8 @@</span> memcachedFrontend:
   enabled: false
   # memcachedFrontend.replicas -- Number of replicas for memcached-frontend
   replicas: 1
<span class="gi">+  # memcachedFrontend.priorityClassName -- The name of the PriorityClass for memcached-frontend pods
+  priorityClassName: null
</span>   # memcachedFrontend.podAnnotations -- Annotations for memcached-frontend pods
   podAnnotations: {}
   # memcachedFrontend.extraArgs -- Additional CLI args for memcached-frontend
<span class="p">@@ -837,6 +859,8 @@</span> memcachedIndexQueries:
   enabled: false
   # memcachedIndexQueries.replicas -- Number of replicas for memcached-index-queries
   replicas: 1
<span class="gi">+  # memcachedIndexQueries.priorityClassName -- The name of the PriorityClass for memcached-index-queries pods
+  priorityClassName: null
</span>   # memcachedIndexQueries.podAnnotations -- Annotations for memcached-index-queries pods
   podAnnotations: {}
   # memcachedIndexQueries.extraArgs -- Additional CLI args for memcached-index-queries
<span class="p">@@ -875,6 +899,8 @@</span> memcachedIndexWrites:
   enabled: false
   # memcachedIndexWrites.replicas -- Number of replicas for memcached-index-writes
   replicas: 1
<span class="gi">+  # memcachedIndexWrites.priorityClassName -- The name of the PriorityClass for memcached-index-writes pods
+  priorityClassName: null
</span>   # memcachedIndexWrites.podAnnotations -- Annotations for memcached-index-writes pods
   podAnnotations: {}
   # memcachedIndexWrites.extraArgs -- Additional CLI args for memcached-index-writes
<span class="err">
</span></code></pre></div></div> <h2 id="0160"> <a href="#0160" class="anchor-heading" aria-labelledby="0160"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.16.0 </h2> <p><strong>Release date:</strong> 2020-11-10</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add support for ruler (#36)</li> </ul> <h3 id="default-value-changes-304"> <a href="#default-value-changes-304" class="anchor-heading" aria-labelledby="default-value-changes-304"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 577e63a2..23b140b6 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -26,8 +26,6 @@</span> loki:
   podAnnotations: {}
   # loki.revisionHistoryLimit -- The number of old ReplicaSets to retain to allow rollback
   revisionHistoryLimit: 10
<span class="gd">-  # loki.memberlist -- If true, an additional headless service for memberlist (including ingester, distributor, and quierier pods) is created
-  memberlist: true
</span>   # loki.config -- Config file contents for Loki
   # @default -- See values.yaml
   config: |
<span class="p">@@ -111,6 +109,18 @@</span> loki:
     compactor:
       shared_store: filesystem
 
<span class="gi">+    ruler:
+      storage:
+        type: local
+        local:
+          directory: /etc/loki/rules
+      ring:
+        kvstore:
+          store: memberlist
+      rule_path: /tmp/loki/scratch
+      alertmanager_url: https://alertmanager.xx
+      external_url: https://alertmanager.xx
+
</span> serviceAccount:
   # serviceAccount.create -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -599,6 +609,129 @@</span> compactor:
     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
     storageClass: null
 
<span class="gi">+# Configuration for the ruler
+ruler:
+  # ruler.enabled -- Specifies whether the ruler should be enabled
+  enabled: false
+  # ruler.replicas -- Number of replicas for the ruler
+  replicas: 1
+  image:
+    # ruler.image.registry -- The Docker registry for the ruler image. Overrides `loki.image.registry`
+    registry: null
+    # ruler.image.repository -- Docker image repository for the ruler image. Overrides `loki.image.repository`
+    repository: null
+    # ruler.image.tag -- Docker image tag for the ruler image. Overrides `loki.image.tag`
+    tag: null
+  # ruler.podAnnotations -- Annotations for ruler pods
+  podAnnotations: {}
+  # ruler.extraArgs -- Additional CLI args for the ruler
+  extraArgs: []
+  # ruler.extraEnv -- Environment variables to add to the ruler pods
+  extraEnv: []
+  # ruler.extraEnvFrom -- Environment variables from secrets or configmaps to add to the ruler pods
+  extraEnvFrom: []
+  # ruler.resources -- Resource requests and limits for the ruler
+  resources: {}
+  # ruler.terminationGracePeriodSeconds -- Grace period to allow the ruler to shutdown before it is killed
+  terminationGracePeriodSeconds: 300
+  # ruler.affinity -- Affinity for ruler pods. Passed through `tpl` and, thus, to be configured as string
+  # @default -- Hard node and soft zone anti-affinity
+  affinity: |
+    podAntiAffinity:
+      requiredDuringSchedulingIgnoredDuringExecution:
+        - labelSelector:
+            matchLabels:
+              {{- include "loki.rulerSelectorLabels" . | nindent 10 }}
+          topologyKey: kubernetes.io/hostname
+      preferredDuringSchedulingIgnoredDuringExecution:
+        - weight: 100
+          podAffinityTerm:
+            labelSelector:
+              matchLabels:
+                {{- include "loki.rulerSelectorLabels" . | nindent 12 }}
+            topologyKey: failure-domain.beta.kubernetes.io/zone
+  # ruler.nodeSelector -- Node selector for ruler pods
+  nodeSelector: {}
+  # ruler.tolerations -- Tolerations for ruler pods
+  tolerations: []
+  persistence:
+    # ruler.persistence.enabled -- Enable creating PVCs for the ruler
+    enabled: false
+    # ruler.persistence.size -- Size of persistent disk
+    size: 10Gi
+    # ruler.persistence.storageClass -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: null
+  # ruler.directories -- Directories containing rules files
+  directories: {}
+    # tenant_foo:
+    #   rules1.txt: |
+    #     groups:
+    #       - name: should_fire
+    #         rules:
+    #           - alert: HighPercentageError
+    #             expr: |
+    #               sum(rate({app="foo", env="production"} |= "error" [5m])) by (job)
+    #                 /
+    #               sum(rate({app="foo", env="production"}[5m])) by (job)
+    #                 &gt; 0.05
+    #             for: 10m
+    #             labels:
+    #               severity: page
+    #             annotations:
+    #               summary: High request latency
+    #       - name: credentials_leak
+    #         rules:
+    #           - alert: http-credentials-leaked
+    #             annotations:
+    #               message: "{{ $labels.job }} is leaking http basic auth credentials."
+    #             expr: 'sum by (cluster, job, pod) (count_over_time({namespace="prod"} |~ "http(s?)://(\\w+):(\\w+)@" [5m]) &gt; 0)'
+    #             for: 10m
+    #             labels:
+    #               severity: critical
+    #   rules2.txt: |
+    #     groups:
+    #       - name: example
+    #         rules:
+    #         - alert: HighThroughputLogStreams
+    #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
+    #           for: 2m
+    # tenant_bar:
+    #   rules1.txt: |
+    #     groups:
+    #       - name: should_fire
+    #         rules:
+    #           - alert: HighPercentageError
+    #             expr: |
+    #               sum(rate({app="foo", env="production"} |= "error" [5m])) by (job)
+    #                 /
+    #               sum(rate({app="foo", env="production"}[5m])) by (job)
+    #                 &gt; 0.05
+    #             for: 10m
+    #             labels:
+    #               severity: page
+    #             annotations:
+    #               summary: High request latency
+    #       - name: credentials_leak
+    #         rules:
+    #           - alert: http-credentials-leaked
+    #             annotations:
+    #               message: "{{ $labels.job }} is leaking http basic auth credentials."
+    #             expr: 'sum by (cluster, job, pod) (count_over_time({namespace="prod"} |~ "http(s?)://(\\w+):(\\w+)@" [5m]) &gt; 0)'
+    #             for: 10m
+    #             labels:
+    #               severity: critical
+    #   rules2.txt: |
+    #     groups:
+    #       - name: example
+    #         rules:
+    #         - alert: HighThroughputLogStreams
+    #           expr: sum by(container) (rate({job=~"loki-dev/.*"}[1m])) &gt; 1000
+    #           for: 2m
+
</span> memcached:
   image:
     # memcached.image.registry -- The Docker registry for the memcached
<span class="err">
</span></code></pre></div></div> <h2 id="0151"> <a href="#0151" class="anchor-heading" aria-labelledby="0151"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.1 </h2> <p><strong>Release date:</strong> 2020-11-09</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Consistently use include function (#35)</li> </ul> <h3 id="default-value-changes-305"> <a href="#default-value-changes-305" class="anchor-heading" aria-labelledby="default-value-changes-305"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0150"> <a href="#0150" class="anchor-heading" aria-labelledby="0150"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.15.0 </h2> <p><strong>Release date:</strong> 2020-11-07</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Use boltdb-shipper (#34)</li> </ul> <h3 id="default-value-changes-306"> <a href="#default-value-changes-306" class="anchor-heading" aria-labelledby="default-value-changes-306"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index ba88c544..577e63a2 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -50,6 +50,7 @@</span> loki:
         ring:
           kvstore:
             store: memberlist
<span class="gi">+          replication_factor: 1
</span>       chunk_idle_period: 30m
       chunk_block_size: 262144
       chunk_encoding: snappy
<span class="p">@@ -64,17 +65,20 @@</span> loki:
 
     schema_config:
       configs:
<span class="gd">-        - from: 2020-09-15
-          store: boltdb
</span><span class="gi">+        - from: 2020-09-07
+          store: boltdb-shipper
</span>           object_store: filesystem
           schema: v11
           index:
             prefix: loki_index_
<span class="gd">-            period: 168h
</span><span class="gi">+            period: 24h
</span> 
     storage_config:
<span class="gd">-      boltdb:
-        directory: /var/loki/index
</span><span class="gi">+      boltdb_shipper:
+        shared_store: filesystem
+        active_index_directory: /var/loki/index
+        cache_location: /var/loki/cache
+        cache_ttl: 168h
</span>       filesystem:
         directory: /var/loki/chunks
 
<span class="p">@@ -104,6 +108,9 @@</span> loki:
       log_queries_longer_than: 5s
       compress_responses: true
 
<span class="gi">+    compactor:
+      shared_store: filesystem
+
</span> serviceAccount:
   # serviceAccount.create -- Specifies whether a ServiceAccount should be created
   create: true
<span class="p">@@ -156,7 +163,7 @@</span> prometheusRule:
 # Configuration for the ingester
 ingester:
   # ingester.replicas -- Number of replicas for the ingester
<span class="gd">-  replicas: 2
</span><span class="gi">+  replicas: 1
</span>   image:
     # ingester.image.registry -- The Docker registry for the ingester image. Overrides `loki.image.registry`
     registry: null
<span class="err">
</span></code></pre></div></div> <h2 id="0140"> <a href="#0140" class="anchor-heading" aria-labelledby="0140"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.14.0 </h2> <p><strong>Release date:</strong> 2020-11-05</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Add support for adding Prometheus rules (#32)</li> </ul> <h3 id="default-value-changes-307"> <a href="#default-value-changes-307" class="anchor-heading" aria-labelledby="default-value-changes-307"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 57917a42..ba88c544 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -132,6 +132,27 @@</span> serviceMonitor:
   # serviceMonitor.scrapeTimeout -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
   scrapeTimeout: null
 
<span class="gi">+# Rules for the Prometheus Operator
+prometheusRule:
+  # prometheusRule.enabled -- If enabled, a PrometheusRule resource for Prometheus Operator is created
+  enabled: false
+  # prometheusRule.namespace -- Alternative namespace for the PrometheusRule resource
+  namespace: null
+  # prometheusRule.annotations -- PrometheusRule annotations
+  annotations: {}
+  # prometheusRule.labels -- Additional PrometheusRule labels
+  labels: {}
+  # prometheusRule.groups -- Contents of Prometheus rules file
+  groups: []
+  # - name: loki-rules
+  #   rules:
+  #     - record: job:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (job)
+  #     - record: job_route:loki_request_duration_seconds_bucket:sum_rate
+  #       expr: sum(rate(loki_request_duration_seconds_bucket[1m])) by (job, route)
+  #     - record: node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate
+  #       expr: sum(rate(container_cpu_usage_seconds_total[1m])) by (node, namespace, pod, container)
+
</span> # Configuration for the ingester
 ingester:
   # ingester.replicas -- Number of replicas for the ingester
<span class="err">
</span></code></pre></div></div> <h2 id="0130"> <a href="#0130" class="anchor-heading" aria-labelledby="0130"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.13.0 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Improve Docker image configuration (#30)</li> </ul> <h3 id="default-value-changes-308"> <a href="#default-value-changes-308" class="anchor-heading" aria-labelledby="default-value-changes-308"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index f379c3aa..57917a42 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -1,18 +1,25 @@</span>
<span class="gi">+global:
+  image:
+    # global.image.registry -- Overrides the Docker registry globally for all images
+    registry: null
+
</span> # nameOverride -- Overrides the chart's name
<span class="gd">-nameOverride: ""
</span><span class="gi">+nameOverride: null
</span> 
 # fullnameOverride -- Overrides the chart's computed fullname
<span class="gd">-fullnameOverride: ""
</span><span class="gi">+fullnameOverride: null
</span> 
 # imagePullSecrets -- Image pull secrets for Docker images
 imagePullSecrets: []
 
 loki:
   image:
<span class="gi">+    # loki.image.registry -- The Docker registry
+    registry: docker.io
</span>     # loki.image.repository -- Docker image repository
<span class="gd">-    repository: docker.io/grafana/loki
</span><span class="gi">+    repository: grafana/loki
</span>     # loki.image.tag -- Overrides the image tag whose default is the chart's appVersion
<span class="gd">-    tag: ""
</span><span class="gi">+    tag: null
</span>     # loki.image.pullPolicy -- Docker image pull policy
     pullPolicy: IfNotPresent
   # loki.podAnnotations -- Common annotations for all pods
<span class="p">@@ -129,6 +136,13 @@</span> serviceMonitor:
 ingester:
   # ingester.replicas -- Number of replicas for the ingester
   replicas: 2
<span class="gi">+  image:
+    # ingester.image.registry -- The Docker registry for the ingester image. Overrides `loki.image.registry`
+    registry: null
+    # ingester.image.repository -- Docker image repository for the ingester image. Overrides `loki.image.repository`
+    repository: null
+    # ingester.image.tag -- Docker image tag for the ingester image. Overrides `loki.image.tag`
+    tag: null
</span>   # ingester.podAnnotations -- Annotations for ingester pods
   podAnnotations: {}
   # ingester.extraArgs -- Additional CLI args for the ingester
<span class="p">@@ -171,14 +185,21 @@</span> ingester:
     # ingester.persistence.storageClass -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
<span class="gd">-    # If empty (the default) or set to null, no storageClassName spec is
</span><span class="gi">+    # If empty or set to null, no storageClassName spec is
</span>     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
<span class="gd">-    storageClass: ""
</span><span class="gi">+    storageClass: null
</span> 
 # Configuration for the distributor
 distributor:
   # distributor.replicas -- Number of replicas for the distributor
   replicas: 1
<span class="gi">+  image:
+    # distributor.image.registry -- The Docker registry for the distributor image. Overrides `loki.image.registry`
+    registry: null
+    # distributor.image.repository -- Docker image repository for the distributor image. Overrides `loki.image.repository`
+    repository: null
+    # distributor.image.tag -- Docker image tag for the distributor image. Overrides `loki.image.tag`
+    tag: null
</span>   # distributor.podAnnotations -- Annotations for distributor pods
   podAnnotations: {}
   # distributor.extraArgs -- Additional CLI args for the distributor
<span class="p">@@ -216,6 +237,13 @@</span> distributor:
 querier:
   # querier.replicas -- Number of replicas for the querier
   replicas: 1
<span class="gi">+  image:
+    # querier.image.registry -- The Docker registry for the querier image. Overrides `loki.image.registry`
+    registry: null
+    # querier.image.repository -- Docker image repository for the querier image. Overrides `loki.image.repository`
+    repository: null
+    # querier.image.tag -- Docker image tag for the querier image. Overrides `loki.image.tag`
+    tag: null
</span>   # querier.podAnnotations -- Annotations for querier pods
   podAnnotations: {}
   # querier.extraArgs -- Additional CLI args for the querier
<span class="p">@@ -256,14 +284,21 @@</span> querier:
     # querier.persistence.storageClass -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
<span class="gd">-    # If empty (the default) or set to null, no storageClassName spec is
</span><span class="gi">+    # If empty or set to null, no storageClassName spec is
</span>     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
<span class="gd">-    storageClass: ""
</span><span class="gi">+    storageClass: null
</span> 
 # Configuration for the query-frontend
 queryFrontend:
   # queryFrontend.replicas -- Number of replicas for the query-frontend
   replicas: 1
<span class="gi">+  image:
+    # queryFrontend.image.registry -- The Docker registry for the query-frontend image. Overrides `loki.image.registry`
+    registry: null
+    # queryFrontend.image.repository -- Docker image repository for the query-frontend image. Overrides `loki.image.repository`
+    repository: null
+    # queryFrontend.image.tag -- Docker image tag for the query-frontend image. Overrides `loki.image.tag`
+    tag: null
</span>   # queryFrontend.podAnnotations -- Annotations for query-frontend pods
   podAnnotations: {}
   # queryFrontend.extraArgs -- Additional CLI args for the query-frontend
<span class="p">@@ -303,6 +338,13 @@</span> tableManager:
   enabled: false
   # tableManager.replicas -- Number of replicas for the table-manager
   replicas: 1
<span class="gi">+  image:
+    # tableManager.image.registry -- The Docker registry for the table-manager image. Overrides `loki.image.registry`
+    registry: null
+    # tableManager.image.repository -- Docker image repository for the table-manager image. Overrides `loki.image.repository`
+    repository: null
+    # tableManager.image.tag -- Docker image tag for the table-manager image. Overrides `loki.image.tag`
+    tag: null
</span>   # tableManager.podAnnotations -- Annotations for table-manager pods
   podAnnotations: {}
   # tableManager.extraArgs -- Additional CLI args for the table-manager
<span class="p">@@ -341,8 +383,10 @@</span> gateway:
   # gateway.replicas -- Number of replicas for the gateway
   replicas: 1
   image:
<span class="gi">+    # gateway.image.registry -- The Docker registry for the gateway image
+    registry: docker.io
</span>     # gateway.image.repository -- The gateway image repository
<span class="gd">-    repository: docker.io/nginxinc/nginx-unprivileged
</span><span class="gi">+    repository: nginxinc/nginx-unprivileged
</span>     # gateway.image.tag -- The gateway image tag
     tag: 1.19-alpine
     # gateway.image.pullPolicy -- The gateway image pull policy
<span class="p">@@ -492,6 +536,13 @@</span> gateway:
 compactor:
   # compactor.enabled -- Specifies whether compactor should be enabled
   enabled: false
<span class="gi">+  image:
+    # compactor.image.registry -- The Docker registry for the compactor image. Overrides `loki.image.registry`
+    registry: null
+    # compactor.image.repository -- Docker image repository for the compactor image. Overrides `loki.image.repository`
+    repository: null
+    # compactor.image.tag -- Docker image tag for the compactor image. Overrides `loki.image.tag`
+    tag: null
</span>   # compactor.podAnnotations -- Annotations for compactor pods
   podAnnotations: {}
   # compactor.extraArgs -- Additional CLI args for the compactor
<span class="p">@@ -516,14 +567,16 @@</span> compactor:
     # compactor.persistence.storageClass -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
<span class="gd">-    # If empty (the default) or set to null, no storageClassName spec is
</span><span class="gi">+    # If empty or set to null, no storageClassName spec is
</span>     # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
<span class="gd">-    storageClass: ""
</span><span class="gi">+    storageClass: null
</span> 
 memcached:
   image:
<span class="gi">+    # memcached.image.registry -- The Docker registry for the memcached
+    registry: docker.io
</span>     # memcached.image.repository -- Memcached Docker image repository
<span class="gd">-    repository: docker.io/memcached
</span><span class="gi">+    repository: memcached
</span>     # memcached.image.tag -- Memcached Docker image tag
     tag: 1.6.7-alpine
     # memcached.image.pullPolicy -- Memcached Docker image pull policy
<span class="p">@@ -533,8 +586,10 @@</span> memcachedExporter:
   # memcachedExporter.enabled -- Specifies whether the Memcached Exporter should be enabled
   enabled: false
   image:
<span class="gi">+    # memcachedExporter.image.registry -- The Docker registry for the Memcached Exporter
+    registry: docker.io
</span>     # memcachedExporter.image.repository -- Memcached Exporter Docker image repository
<span class="gd">-    repository: docker.io/prom/memcached-exporter
</span><span class="gi">+    repository: prom/memcached-exporter
</span>     # memcachedExporter.image.tag -- Memcached Exporter Docker image tag
     tag: v0.6.0
     # memcachedExporter.image.pullPolicy -- Memcached Exporter Docker image pull policy
<span class="err">
</span></code></pre></div></div> <h2 id="0122"> <a href="#0122" class="anchor-heading" aria-labelledby="0122"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.2 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Remove labels from volumeClaimTemplates (#29)</li> </ul> <h3 id="default-value-changes-309"> <a href="#default-value-changes-309" class="anchor-heading" aria-labelledby="default-value-changes-309"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0121"> <a href="#0121" class="anchor-heading" aria-labelledby="0121"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.1 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix compactor volumes config (#28)</li> </ul> <h3 id="default-value-changes-310"> <a href="#default-value-changes-310" class="anchor-heading" aria-labelledby="default-value-changes-310"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0120"> <a href="#0120" class="anchor-heading" aria-labelledby="0120"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.12.0 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=2.0.0&amp;color=success" alt="AppVersion: 2.0.0"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Upgrade to Loki 2.0.0 and add compactor support (#27)</li> </ul> <h3 id="default-value-changes-311"> <a href="#default-value-changes-311" class="anchor-heading" aria-labelledby="default-value-changes-311"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index a40c62be..f379c3aa 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -53,6 +53,7 @@</span> loki:
       enforce_metric_name: false
       reject_old_samples: true
       reject_old_samples_max_age: 168h
<span class="gi">+      max_cache_freshness_per_query: 10m
</span> 
     schema_config:
       configs:
<span class="p">@@ -83,7 +84,6 @@</span> loki:
       split_queries_by_interval: 15m
       cache_results: true
       results_cache:
<span class="gd">-        max_freshness: 10m
</span>         cache:
           enable_fifocache: true
           fifocache:
<span class="p">@@ -488,6 +488,38 @@</span> gateway:
       }
     }
 
<span class="gi">+# Configuration for the compactor
+compactor:
+  # compactor.enabled -- Specifies whether compactor should be enabled
+  enabled: false
+  # compactor.podAnnotations -- Annotations for compactor pods
+  podAnnotations: {}
+  # compactor.extraArgs -- Additional CLI args for the compactor
+  extraArgs: []
+  # compactor.extraEnv -- Environment variables to add to the compactor pods
+  extraEnv: []
+  # compactor.extraEnvFrom -- Environment variables from secrets or configmaps to add to the compactor pods
+  extraEnvFrom: []
+  # compactor.resources -- Resource requests and limits for the compactor
+  resources: {}
+  # compactor.terminationGracePeriodSeconds -- Grace period to allow the compactor to shutdown before it is killed
+  terminationGracePeriodSeconds: 30
+  # compactor.nodeSelector -- Node selector for compactor pods
+  nodeSelector: {}
+  # compactor.tolerations -- Tolerations for compactor pods
+  tolerations: []
+  persistence:
+    # compactor.persistence.enabled -- Enable creating PVCs for the compactor
+    enabled: false
+    # compactor.persistence.size -- Size of persistent disk
+    size: 10Gi
+    # compactor.persistence.storageClass -- Storage class to be used.
+    # If defined, storageClassName: &lt;storageClass&gt;.
+    # If set to "-", storageClassName: "", which disables dynamic provisioning.
+    # If empty (the default) or set to null, no storageClassName spec is
+    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
+    storageClass: ""
+
</span> memcached:
   image:
     # memcached.image.repository -- Memcached Docker image repository
<span class="err">
</span></code></pre></div></div> <h2 id="0111"> <a href="#0111" class="anchor-heading" aria-labelledby="0111"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.1 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.6.1&amp;color=success" alt="AppVersion: 1.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Remove obsolete canary values (#26)</li> </ul> <h3 id="default-value-changes-312"> <a href="#default-value-changes-312" class="anchor-heading" aria-labelledby="default-value-changes-312"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index 3b64f705..a40c62be 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -488,38 +488,6 @@</span> gateway:
       }
     }
 
<span class="gd">-# Configuration for the canary
-canary:
-  # canary.enabled -- Specifies whether the canary should be enabled
-  enabled: false
-  # canary.kind -- canary can be run as a Deployment or DaemonSet
-  kind: Deployment
-  image:
-    # canary.image.repository -- canary image repository
-    repository: docker.io/grafana/loki-canary
-    # canary.image.tag -- Overrides the canary image tag whose default is the chart's appVersion
-    tag: ""
-    # canary.image.pullPolicy -- canary image pull policy
-    pullPolicy: IfNotPresent
-  # canary.podAnnotations -- Annotations for canary pods
-  podAnnotations: {}
-  # canary.extraArgs -- Additional CLI args for the canary
-  extraArgs:
-    - -labelname=pod
-    - -labelvalue=$(POD_NAME)
-  # canary.extraEnv -- Environment variables to add to the canary pods
-  extraEnv: []
-  # canary.extraEnvFrom -- Environment variables from secrets or configmaps to add to the canary pods
-  extraEnvFrom: []
-  # canary.resources -- Resource requests and limits for the canary
-  resources: {}
-  # canary.terminationGracePeriodSeconds -- Grace period to allow the canary to shutdown before it is killed
-  terminationGracePeriodSeconds: 30
-  # canary.nodeSelector -- Node selector for canary pods
-  nodeSelector: {}
-  # canary.tolerations -- Tolerations for canary pods
-  tolerations: []
-
</span> memcached:
   image:
     # memcached.image.repository -- Memcached Docker image repository
<span class="err">
</span></code></pre></div></div> <h2 id="0110"> <a href="#0110" class="anchor-heading" aria-labelledby="0110"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.11.0 </h2> <p><strong>Release date:</strong> 2020-10-27</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.6.1&amp;color=success" alt="AppVersion: 1.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Move canary to separate chart (#25)</li> </ul> <h3 id="default-value-changes-313"> <a href="#default-value-changes-313" class="anchor-heading" aria-labelledby="default-value-changes-313"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index df8ecff2..3b64f705 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -168,7 +168,7 @@</span> ingester:
     enabled: false
     # ingester.persistence.size -- Size of persistent disk
     size: 10Gi
<span class="gd">-    # ngester.persistence.storageClass -- Storage class to be used.
</span><span class="gi">+    # ingester.persistence.storageClass -- Storage class to be used.
</span>     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
     # If empty (the default) or set to null, no storageClassName spec is
<span class="p">@@ -408,15 +408,14 @@</span> gateway:
         hosts:
           - gateway.loki.example.com
   # Basic auth configuration
<span class="gd">-  basicauth:
-    # gateway.basicauth.enabled -- Enables basic authentication for the gateway
</span><span class="gi">+  basicAuth:
+    # gateway.basicAuth.enabled -- Enables basic authentication for the gateway
</span>     enabled: false
<span class="gd">-    # gateway.basicauth.username -- The basic auth username for the gateway
</span><span class="gi">+    # gateway.basicAuth.username -- The basic auth username for the gateway
</span>     username: null
<span class="gd">-    # gateway.basicauth.password -- The basic auth password for the gateway
</span><span class="gi">+    # gateway.basicAuth.password -- The basic auth password for the gateway
</span>     password: null
<span class="gd">-    # gateway.basicauth.existingSecret -- Existing basic auth secret to use. Must contain '.htpasswd' and,
-    # if canary is enabled, 'username' and 'password'
</span><span class="gi">+    # gateway.basicAuth.existingSecret -- Existing basic auth secret to use. Must contain '.htpasswd'
</span>     existingSecret: null
   # gateway.nginxConfig -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
   # @default -- See values.yaml
<span class="p">@@ -449,7 +448,7 @@</span> gateway:
       server {
         listen             8080;
 
<span class="gd">-        {{- if .Values.gateway.basicauth.enabled }}
</span><span class="gi">+        {{- if .Values.gateway.basicAuth.enabled }}
</span>         auth_basic           "Loki";
         auth_basic_user_file /etc/nginx/secrets/.htpasswd;
         {{- end }}
<span class="err">
</span></code></pre></div></div> <h2 id="0101"> <a href="#0101" class="anchor-heading" aria-labelledby="0101"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.10.1 </h2> <p><strong>Release date:</strong> 2020-10-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.6.1&amp;color=success" alt="AppVersion: 1.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Fix canary kind config (#23)</li> </ul> <h3 id="default-value-changes-314"> <a href="#default-value-changes-314" class="anchor-heading" aria-labelledby="default-value-changes-314"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># No changes in this release
</code></pre></div></div> <h2 id="0100"> <a href="#0100" class="anchor-heading" aria-labelledby="0100"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.10.0 </h2> <p><strong>Release date:</strong> 2020-10-26</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.6.1&amp;color=success" alt="AppVersion: 1.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Change default storage sizes (#22)</li> </ul> <h3 id="default-value-changes-315"> <a href="#default-value-changes-315" class="anchor-heading" aria-labelledby="default-value-changes-315"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/charts/loki-distributed/values.yaml b/charts/loki-distributed/values.yaml
index be134fb9..df8ecff2 100644
</span><span class="gd">--- a/charts/loki-distributed/values.yaml
</span><span class="gi">+++ b/charts/loki-distributed/values.yaml
</span><span class="p">@@ -167,7 +167,7 @@</span> ingester:
     # ingester.persistence.enabled -- Enable creating PVCs which is required when using boltdb-shipper
     enabled: false
     # ingester.persistence.size -- Size of persistent disk
<span class="gd">-    size: 100Gi
</span><span class="gi">+    size: 10Gi
</span>     # ngester.persistence.storageClass -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
<span class="p">@@ -252,7 +252,7 @@</span> querier:
     # querier.persistence.enabled -- Enable creating PVCs for the querier cache
     enabled: false
     # querier.persistence.size -- Size of persistent disk
<span class="gd">-    size: 1Gi
</span><span class="gi">+    size: 10Gi
</span>     # querier.persistence.storageClass -- Storage class to be used.
     # If defined, storageClassName: &lt;storageClass&gt;.
     # If set to "-", storageClassName: "", which disables dynamic provisioning.
<span class="err">
</span></code></pre></div></div> <h2 id="090"> <a href="#090" class="anchor-heading" aria-labelledby="090"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.9.0 </h2> <p><strong>Release date:</strong> 2020-10-06</p> <p><img src="https://img.shields.io/static/v1?label=AppVersion&amp;message=1.6.1&amp;color=success" alt="AppVersion: 1.6.1"> <img src="https://img.shields.io/static/v1?label=Helm&amp;message=v3&amp;color=informational&amp;logo=helm" alt="Helm: v3"></p> <ul> <li>Rename chart to loki-distributed (#19)</li> </ul> <h3 id="default-value-changes-316"> <a href="#default-value-changes-316" class="anchor-heading" aria-labelledby="default-value-changes-316"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Default value changes </h3> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code># nameOverride -- Overrides the chart's name
<span class="p">nameOverride: ""
</span><span class="err">
</span># fullnameOverride -- Overrides the chart's computed fullname
<span class="p">fullnameOverride: ""
</span><span class="err">
</span># imagePullSecrets -- Image pull secrets for Docker images
<span class="p">imagePullSecrets: []
</span><span class="err">
</span><span class="p">loki:
</span>  image:
    # loki.image.repository -- Docker image repository
    repository: docker.io/grafana/loki
    # loki.image.tag -- Overrides the image tag whose default is the chart's appVersion
    tag: ""
    # loki.image.pullPolicy -- Docker image pull policy
    pullPolicy: IfNotPresent
  # loki.podAnnotations -- Common annotations for all pods
  podAnnotations: {}
  # loki.revisionHistoryLimit -- The number of old ReplicaSets to retain to allow rollback
  revisionHistoryLimit: 10
  # loki.memberlist -- If true, an additional headless service for memberlist (including ingester, distributor, and quierier pods) is created
  memberlist: true
  # loki.config -- Config file contents for Loki
  # @default -- See values.yaml
  config: |
    auth_enabled: false
<span class="err">
</span>    server:
      http_listen_port: 3100
<span class="err">
</span>    distributor:
      ring:
        kvstore:
          store: memberlist
<span class="err">
</span>    memberlist:
      join_members:
        - {{ include "loki.fullname" . }}-memberlist
<span class="err">
</span>    ingester:
      lifecycler:
        ring:
          kvstore:
            store: memberlist
      chunk_idle_period: 30m
      chunk_block_size: 262144
      chunk_encoding: snappy
      chunk_retain_period: 1m
      max_transfer_retries: 0
<span class="err">
</span>    limits_config:
      enforce_metric_name: false
      reject_old_samples: true
      reject_old_samples_max_age: 168h
<span class="err">
</span>    schema_config:
      configs:
        - from: 2020-09-15
          store: boltdb
          object_store: filesystem
          schema: v11
          index:
            prefix: loki_index_
            period: 168h
<span class="err">
</span>    storage_config:
      boltdb:
        directory: /var/loki/index
      filesystem:
        directory: /var/loki/chunks
<span class="err">
</span>    chunk_store_config:
      max_look_back_period: 0s
<span class="err">
</span>    table_manager:
      retention_deletes_enabled: false
      retention_period: 0s
<span class="err">
</span>    query_range:
      align_queries_with_step: true
      max_retries: 5
      split_queries_by_interval: 15m
      cache_results: true
      results_cache:
        max_freshness: 10m
        cache:
          enable_fifocache: true
          fifocache:
            max_size_items: 1024
            validity: 24h
<span class="err">
</span>    frontend_worker:
      frontend_address: {{ include "loki.queryFrontendFullname" . }}:9095
<span class="err">
</span>    frontend:
      log_queries_longer_than: 5s
      compress_responses: true
<span class="err">
</span><span class="p">serviceAccount:
</span>  # serviceAccount.create -- Specifies whether a ServiceAccount should be created
  create: true
  # serviceAccount.name -- The name of the ServiceAccount to use.
  # If not set and create is true, a name is generated using the fullname template
  name: null
  # serviceAccount.imagePullSecrets -- Image pull secrets for the service account
  imagePullSecrets: []
  # serviceAccount.annotations -- Annotations for the service account
  annotations: {}
<span class="err">
</span># ServiceMonitor configuration
<span class="p">serviceMonitor:
</span>  # serviceMonitor.enabled -- If enabled, ServiceMonitor resources for Prometheus Operator are created
  enabled: false
  # serviceMonitor.namespace -- Alternative namespace for ServiceMonitor resources
  namespace: null
  # serviceMonitor.namespaceSelector -- Namespace selector for ServiceMonitor resources
  namespaceSelector: {}
  # serviceMonitor.annotations -- ServiceMonitor annotations
  annotations: {}
  # serviceMonitor.labels -- Additional ServiceMonitor labels
  labels: {}
  # serviceMonitor.interval -- ServiceMonitor scrape interval
  interval: null
  # serviceMonitor.scrapeTimeout -- ServiceMonitor scrape timeout in Go duration format (e.g. 15s)
  scrapeTimeout: null
<span class="err">
</span># Configuration for the ingester
<span class="p">ingester:
</span>  # ingester.replicas -- Number of replicas for the ingester
  replicas: 2
  # ingester.podAnnotations -- Annotations for ingester pods
  podAnnotations: {}
  # ingester.extraArgs -- Additional CLI args for the ingester
  extraArgs: []
  # ingester.extraEnv -- Environment variables to add to the ingester pods
  extraEnv: []
  # ingester.extraEnvFrom -- Environment variables from secrets or configmaps to add to the ingester pods
  extraEnvFrom: []
  # ingester.resources -- Resource requests and limits for the ingester
  resources: {}
  # ingester.terminationGracePeriodSeconds -- Grace period to allow the ingester to shutdown before it is killed. Especially for the ingestor,
  # this must be increased. It must be long enough so ingesters can be gracefully shutdown flushing/transferring
  # all data and to successfully leave the member ring on shutdown.
  terminationGracePeriodSeconds: 300
  # ingester.affinity -- Affinity for ingester pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.ingesterSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.ingesterSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # ingester.nodeSelector -- Node selector for ingester pods
  nodeSelector: {}
  # ingester.tolerations -- Tolerations for ingester pods
  tolerations: []
  persistence:
    # ingester.persistence.enabled -- Enable creating PVCs which is required when using boltdb-shipper
    enabled: false
    # ingester.persistence.size -- Size of persistent disk
    size: 100Gi
    # ngester.persistence.storageClass -- Storage class to be used.
    # If defined, storageClassName: &lt;storageClass&gt;.
    # If set to "-", storageClassName: "", which disables dynamic provisioning.
    # If empty (the default) or set to null, no storageClassName spec is
    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
    storageClass: ""
<span class="err">
</span># Configuration for the distributor
<span class="p">distributor:
</span>  # distributor.replicas -- Number of replicas for the distributor
  replicas: 1
  # distributor.podAnnotations -- Annotations for distributor pods
  podAnnotations: {}
  # distributor.extraArgs -- Additional CLI args for the distributor
  extraArgs: []
  # distributor.extraEnv -- Environment variables to add to the distributor pods
  extraEnv: []
  # distributor.extraEnvFrom -- Environment variables from secrets or configmaps to add to the distributor pods
  extraEnvFrom: []
  # distributor.resources -- Resource requests and limits for the distributor
  resources: {}
  # distributor.terminationGracePeriodSeconds -- Grace period to allow the distributor to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # distributor.affinity -- Affinity for distributor pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.distributorSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.distributorSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # distributor.nodeSelector -- Node selector for distributor pods
  nodeSelector: {}
  # distributor.tolerations -- Tolerations for distributor pods
  tolerations: []
<span class="err">
</span># Configuration for the querier
<span class="p">querier:
</span>  # querier.replicas -- Number of replicas for the querier
  replicas: 1
  # querier.podAnnotations -- Annotations for querier pods
  podAnnotations: {}
  # querier.extraArgs -- Additional CLI args for the querier
  extraArgs: []
  # querier.extraEnv -- Environment variables to add to the querier pods
  extraEnv: []
  # querier.extraEnvFrom -- Environment variables from secrets or configmaps to add to the querier pods
  extraEnvFrom: []
  # querier.resources -- Resource requests and limits for the querier
  resources: {}
  # querier.terminationGracePeriodSeconds -- Grace period to allow the querier to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # querier.affinity -- Affinity for querier pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.querierSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.querierSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # querier.nodeSelector -- Node selector for querier pods
  nodeSelector: {}
  # querier.tolerations -- Tolerations for querier pods
  tolerations: []
  persistence:
    # querier.persistence.enabled -- Enable creating PVCs for the querier cache
    enabled: false
    # querier.persistence.size -- Size of persistent disk
    size: 1Gi
    # querier.persistence.storageClass -- Storage class to be used.
    # If defined, storageClassName: &lt;storageClass&gt;.
    # If set to "-", storageClassName: "", which disables dynamic provisioning.
    # If empty (the default) or set to null, no storageClassName spec is
    # set, choosing the default provisioner (gp2 on AWS, standard on GKE, AWS, and OpenStack).
    storageClass: ""
<span class="err">
</span># Configuration for the query-frontend
<span class="p">queryFrontend:
</span>  # queryFrontend.replicas -- Number of replicas for the query-frontend
  replicas: 1
  # queryFrontend.podAnnotations -- Annotations for query-frontend pods
  podAnnotations: {}
  # queryFrontend.extraArgs -- Additional CLI args for the query-frontend
  extraArgs: []
  # queryFrontend.extraEnv -- Environment variables to add to the query-frontend pods
  extraEnv: []
  # queryFrontend.extraEnvFrom -- Environment variables from secrets or configmaps to add to the query-frontend pods
  extraEnvFrom: []
  # queryFrontend.resources -- Resource requests and limits for the query-frontend
  resources: {}
  # queryFrontend.terminationGracePeriodSeconds -- Grace period to allow the query-frontend to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # queryFrontend.affinity -- Affinity for query-frontend pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.queryFrontendSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.queryFrontendSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # queryFrontend.nodeSelector -- Node selector for query-frontend pods
  nodeSelector: {}
  # queryFrontend.tolerations -- Tolerations for query-frontend pods
  tolerations: []
<span class="err">
</span># Configuration for the table-manager
<span class="p">tableManager:
</span>  # tableManager.enabled -- Specifies whether the table-manager should be enabled
  enabled: false
  # tableManager.replicas -- Number of replicas for the table-manager
  replicas: 1
  # tableManager.podAnnotations -- Annotations for table-manager pods
  podAnnotations: {}
  # tableManager.extraArgs -- Additional CLI args for the table-manager
  extraArgs: []
  # tableManager.extraEnv -- Environment variables to add to the table-manager pods
  extraEnv: []
  # tableManager.extraEnvFrom -- Environment variables from secrets or configmaps to add to the table-manager pods
  extraEnvFrom: []
  # tableManager.resources -- Resource requests and limits for the table-manager
  resources: {}
  # tableManager.terminationGracePeriodSeconds -- Grace period to allow the table-manager to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # tableManager.affinity -- Affinity for table-manager pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.tableManagerSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.tableManagerSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # tableManager.nodeSelector -- Node selector for table-manager pods
  nodeSelector: {}
  # tableManager.tolerations -- Tolerations for table-manager pods
  tolerations: []
<span class="err">
</span># Configuration for the gateway
<span class="p">gateway:
</span>  # gateway.replicas -- Number of replicas for the gateway
  replicas: 1
  image:
    # gateway.image.repository -- The gateway image repository
    repository: docker.io/nginxinc/nginx-unprivileged
    # gateway.image.tag -- The gateway image tag
    tag: 1.19-alpine
    # gateway.image.pullPolicy -- The gateway image pull policy
    pullPolicy: IfNotPresent
  # gateway.podAnnotations -- Annotations for gateway pods
  podAnnotations: {}
  # gateway.extraArgs -- Additional CLI args for the gateway
  extraArgs: []
  # gateway.extraEnv -- Environment variables to add to the gateway pods
  extraEnv: []
  # gateway.extraEnvFrom -- Environment variables from secrets or configmaps to add to the gateway pods
  extraEnvFrom: []
  # gateway.resources -- Resource requests and limits for the gateway
  resources: {}
  # gateway.terminationGracePeriodSeconds -- Grace period to allow the gateway to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # gateway.affinity -- Affinity for gateway pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.gatewaySelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.gatewaySelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # gateway.nodeSelector -- Node selector for gateway pods
  nodeSelector: {}
  # gateway.tolerations -- Tolerations for gateway pods
  tolerations: []
  # Gateway service configuration
  service:
    # gateway.service.port -- Port of the gateway service
    port: 80
    # gateway.service.type -- Type of the gateway service
    type: ClusterIP
    # gateway.service.clusterIP -- ClusterIP of the gateway service
    clusterIP: null
    # gateway.service.nodePort -- Node port if service type is NodePort
    nodePort: null
    # gateway.service.loadBalancerIP -- Load balancer IPO address if service type is LoadBalancer
    loadBalancerIP: null
  # Gateway ingress configuration
  ingress:
    # gateway.ingress.enabled -- Specifies whether an ingress for the gateway should be created
    enabled: false
    # gateway.ingress.annotations -- Annotations for the gateway ingress
    annotations: {}
    # gateway.ingress.hosts -- Hosts configuration for the gateway ingress
    hosts:
      - host: gateway.loki.example.com
        paths:
          - /
    # gateway.ingress.tls -- TLS configuration for the gateway ingress
    tls:
      - secretName: loki-gateway-tls
        hosts:
          - gateway.loki.example.com
  # Basic auth configuration
  basicauth:
    # gateway.basicauth.enabled -- Enables basic authentication for the gateway
    enabled: false
    # gateway.basicauth.username -- The basic auth username for the gateway
    username: null
    # gateway.basicauth.password -- The basic auth password for the gateway
    password: null
    # gateway.basicauth.existingSecret -- Existing basic auth secret to use. Must contain '.htpasswd' and,
    # if canary is enabled, 'username' and 'password'
    existingSecret: null
  # gateway.nginxConfig -- Config file contents for Nginx. Passed through the `tpl` function to allow templating
  # @default -- See values.yaml
  nginxConfig: |
    worker_processes  5;  ## Default: 1
    error_log  /dev/stderr;
    pid        /tmp/nginx.pid;
    worker_rlimit_nofile 8192;
<span class="err">
</span>    events {
      worker_connections  4096;  ## Default: 1024
    }
<span class="err">
</span>    http {
      client_body_temp_path /tmp/client_temp;
      proxy_temp_path       /tmp/proxy_temp_path;
      fastcgi_temp_path     /tmp/fastcgi_temp;
      uwsgi_temp_path       /tmp/uwsgi_temp;
      scgi_temp_path        /tmp/scgi_temp;
<span class="err">
</span>      default_type application/octet-stream;
      log_format   main '$remote_addr - $remote_user [$time_local]  $status '
        '"$request" $body_bytes_sent "$http_referer" '
        '"$http_user_agent" "$http_x_forwarded_for"';
      access_log   /dev/stderr  main;
      sendfile     on;
      tcp_nopush   on;
      resolver kube-dns.kube-system.svc.cluster.local;
<span class="err">
</span>      server {
        listen             8080;
<span class="err">
</span>        {{- if .Values.gateway.basicauth.enabled }}
        auth_basic           "Loki";
        auth_basic_user_file /etc/nginx/secrets/.htpasswd;
        {{- end }}
<span class="err">
</span>        location = / {
          return 200 'OK';
          auth_basic off;
        }
<span class="err">
</span>        location = /api/prom/push {
          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
        }
<span class="err">
</span>        location = /api/prom/tail {
          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "upgrade";
        }
<span class="err">
</span>        location ~ /api/prom/.* {
          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
        }
<span class="err">
</span>        location = /loki/api/v1/push {
          proxy_pass       http://{{ include "loki.distributorFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
        }
<span class="err">
</span>        location = /loki/api/v1/tail {
          proxy_pass       http://{{ include "loki.querierFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "upgrade";
        }
<span class="err">
</span>        location ~ /loki/api/.* {
          proxy_pass       http://{{ include "loki.queryFrontendFullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:3100$request_uri;
        }
      }
    }
<span class="err">
</span># Configuration for the canary
<span class="p">canary:
</span>  # canary.enabled -- Specifies whether the canary should be enabled
  enabled: false
  # canary.kind -- canary can be run as a Deployment or DaemonSet
  kind: Deployment
  image:
    # canary.image.repository -- canary image repository
    repository: docker.io/grafana/loki-canary
    # canary.image.tag -- Overrides the canary image tag whose default is the chart's appVersion
    tag: ""
    # canary.image.pullPolicy -- canary image pull policy
    pullPolicy: IfNotPresent
  # canary.podAnnotations -- Annotations for canary pods
  podAnnotations: {}
  # canary.extraArgs -- Additional CLI args for the canary
  extraArgs:
    - -labelname=pod
    - -labelvalue=$(POD_NAME)
  # canary.extraEnv -- Environment variables to add to the canary pods
  extraEnv: []
  # canary.extraEnvFrom -- Environment variables from secrets or configmaps to add to the canary pods
  extraEnvFrom: []
  # canary.resources -- Resource requests and limits for the canary
  resources: {}
  # canary.terminationGracePeriodSeconds -- Grace period to allow the canary to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # canary.nodeSelector -- Node selector for canary pods
  nodeSelector: {}
  # canary.tolerations -- Tolerations for canary pods
  tolerations: []
<span class="err">
</span><span class="p">memcached:
</span>  image:
    # memcached.image.repository -- Memcached Docker image repository
    repository: docker.io/memcached
    # memcached.image.tag -- Memcached Docker image tag
    tag: 1.6.7-alpine
    # memcached.image.pullPolicy -- Memcached Docker image pull policy
    pullPolicy: IfNotPresent
<span class="err">
</span><span class="p">memcachedExporter:
</span>  # memcachedExporter.enabled -- Specifies whether the Memcached Exporter should be enabled
  enabled: false
  image:
    # memcachedExporter.image.repository -- Memcached Exporter Docker image repository
    repository: docker.io/prom/memcached-exporter
    # memcachedExporter.image.tag -- Memcached Exporter Docker image tag
    tag: v0.6.0
    # memcachedExporter.image.pullPolicy -- Memcached Exporter Docker image pull policy
    pullPolicy: IfNotPresent
<span class="err">
</span><span class="p">memcachedChunks:
</span>  # memcachedChunks.enabled -- Specifies whether the Memcached chunks cache should be enabled
  enabled: false
  # memcachedChunks.replicas -- Number of replicas for memcached-chunks
  replicas: 1
  # memcachedChunks.podAnnotations -- Annotations for memcached-chunks pods
  podAnnotations: {}
  # memcachedChunks.extraArgs -- Additional CLI args for memcached-chunks
  extraArgs: []
  # memcachedChunks.extraEnv -- Environment variables to add to memcached-chunks pods
  extraEnv: []
  # memcachedChunks.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-chunks pods
  extraEnvFrom: []
  # memcachedChunks.resources -- Resource requests and limits for memcached-chunks
  resources: {}
  # memcachedChunks.terminationGracePeriodSeconds -- Grace period to allow memcached-chunks to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # memcachedChunks.affinity -- Affinity for memcached-chunks pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.memcachedChunksSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.memcachedChunksSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # memcachedChunks.nodeSelector -- Node selector for memcached-chunks pods
  nodeSelector: {}
  # memcachedChunks.tolerations -- Tolerations for memcached-chunks pods
  tolerations: []
<span class="err">
</span><span class="p">memcachedFrontend:
</span>  # memcachedFrontend.enabled -- Specifies whether the Memcached frontend cache should be enabled
  enabled: false
  # memcachedFrontend.replicas -- Number of replicas for memcached-frontend
  replicas: 1
  # memcachedFrontend.podAnnotations -- Annotations for memcached-frontend pods
  podAnnotations: {}
  # memcachedFrontend.extraArgs -- Additional CLI args for memcached-frontend
  extraArgs: []
  # memcachedFrontend.extraEnv -- Environment variables to add to memcached-frontend pods
  extraEnv: []
  # memcachedFrontend.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-frontend pods
  extraEnvFrom: []
  # memcachedFrontend.resources -- Resource requests and limits for memcached-frontend
  resources: {}
  # memcachedFrontend.terminationGracePeriodSeconds -- Grace period to allow memcached-frontend to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # memcachedFrontend.affinity -- Affinity for memcached-frontend pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.memcachedFrontendSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.memcachedFrontendSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # memcachedFrontend.nodeSelector -- Node selector for memcached-frontend pods
  nodeSelector: {}
  # memcachedFrontend.tolerations -- Tolerations for memcached-frontend pods
  tolerations: []
<span class="err">
</span><span class="p">memcachedIndexQueries:
</span>  # memcachedIndexQueries.enabled -- Specifies whether the Memcached index queries cache should be enabled
  enabled: false
  # memcachedIndexQueries.replicas -- Number of replicas for memcached-index-queries
  replicas: 1
  # memcachedIndexQueries.podAnnotations -- Annotations for memcached-index-queries pods
  podAnnotations: {}
  # memcachedIndexQueries.extraArgs -- Additional CLI args for memcached-index-queries
  extraArgs: []
  # memcachedIndexQueries.extraEnv -- Environment variables to add to memcached-index-queries pods
  extraEnv: []
  # memcachedIndexQueries.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-index-queries pods
  extraEnvFrom: []
  # memcachedIndexQueries.resources -- Resource requests and limits for memcached-index-queries
  resources: {}
  # memcachedIndexQueries.terminationGracePeriodSeconds -- Grace period to allow memcached-index-queries to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # memcachedIndexQueries.affinity -- Affinity for memcached-index-queries pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.memcachedIndexQueriesSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.memcachedIndexQueriesSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # memcachedIndexQueries.nodeSelector -- Node selector for memcached-index-queries pods
  nodeSelector: {}
  # memcachedIndexQueries.tolerations -- Tolerations for memcached-index-queries pods
  tolerations: []
<span class="err">
</span><span class="p">memcachedIndexWrites:
</span>  # memcachedIndexWrites.enabled -- Specifies whether the Memcached index writes cache should be enabled
  enabled: false
  # memcachedIndexWrites.replicas -- Number of replicas for memcached-index-writes
  replicas: 1
  # memcachedIndexWrites.podAnnotations -- Annotations for memcached-index-writes pods
  podAnnotations: {}
  # memcachedIndexWrites.extraArgs -- Additional CLI args for memcached-index-writes
  extraArgs: []
  # memcachedIndexWrites.extraEnv -- Environment variables to add to memcached-index-writes pods
  extraEnv: []
  # memcachedIndexWrites.extraEnvFrom -- Environment variables from secrets or configmaps to add to memcached-index-writes pods
  extraEnvFrom: []
  # memcachedIndexWrites.resources -- Resource requests and limits for memcached-index-writes
  resources: {}
  # memcachedIndexWrites.terminationGracePeriodSeconds -- Grace period to allow memcached-index-writes to shutdown before it is killed
  terminationGracePeriodSeconds: 30
  # memcachedIndexWrites.affinity -- Affinity for memcached-index-writes pods. Passed through `tpl` and, thus, to be configured as string
  # @default -- Hard node and soft zone anti-affinity
  affinity: |
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchLabels:
              {{- include "loki.memcachedIndexWritesSelectorLabels" . | nindent 10 }}
          topologyKey: kubernetes.io/hostname
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "loki.memcachedIndexWritesSelectorLabels" . | nindent 12 }}
            topologyKey: failure-domain.beta.kubernetes.io/zone
  # memcachedIndexWrites.nodeSelector -- Node selector for memcached-index-writes pods
  nodeSelector: {}
  # memcachedIndexWrites.tolerations -- Tolerations for memcached-index-writes pods
  tolerations: []
<span class="err">
</span></code></pre></div></div>
<hr> <p>Autogenerated from Helm Chart and git history using <a href="https://github.com/mogensen/helm-changelog" target="_blank" rel="noopener noreferrer">helm-changelog</a></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
